(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},75854,e=>{"use strict";let t=(0,e.i(75254).default)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["default",()=>t])},94179,e=>{"use strict";var t=e.i(43476),s=e.i(91918),a=e.i(25913),r=e.i(47163);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...l}){let d=n?s.Slot:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>n])},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},88846,e=>{"use strict";var t=e.i(54943);e.s(["SearchIcon",()=>t.default])},22956,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(91432),i=e.i(63780),n=e.i(70065),l=e.i(67881),d=e.i(23750),o=e.i(94179),c=e.i(88846),m=e.i(78583),u=e.i(25652),p=e.i(86536),x=e.i(27341),h=e.i(57688),f=e.i(60865);function g(e,t){for(let s of t)if(e&&void 0!==e[s]&&null!==e[s])return e[s]}let y=class{static mapDocumentData(e){return e?{title:g(e,["title","document_title","originalName","name","fileName","file_name","documentName","document_name"]),description:g(e,["description","content","text","summary","desc","body","details"]),fileName:g(e,["fileName","file_name","originalFileName","original_file_name","filename","name"]),fileUrl:g(e,["fileUrl","file_url","url","documentUrl","document_url","source","path"]),id:g(e,["id","documentId","document_id","docId","doc_id","_id","identifier"]),category:g(e,["category","category_name","type","documentType","document_type","classification"]),tags:g(e,["tags","tag_list","tagList","keywords","keyword_list","keywordList"]),uploadedBy:g(e,["uploadedBy","uploaded_by","uploadedByUser","uploaded_by_user","author","creator","uploader"]),uploadedAt:g(e,["uploadedAt","uploaded_at","uploadDate","upload_date","createdAt","created_at","date"]),fileType:g(e,["fileType","file_type","mimeType","mime_type","type","extension"]),fileSize:g(e,["fileSize","file_size","size","fileSizeBytes","file_size_bytes"])}:{}}static getFieldValue(e,t){if(!e)return;let s=Array.isArray(t)?t:t.split(".");if(1===s.length){let t=s[0];return g(e,{title:["title","document_title","originalName","name","fileName","file_name","documentName"],description:["description","content","text","summary","desc","body"],fileName:["fileName","file_name","originalFileName","original_file_name","filename"],fileUrl:["fileUrl","file_url","url","documentUrl","document_url","source"],id:["id","documentId","document_id","docId","doc_id","_id"],category:["category","category_name","type","documentType","document_type"],tags:["tags","tag_list","tagList","keywords","keyword_list","keywordList"],uploadedBy:["uploadedBy","uploaded_by","uploadedByUser","uploaded_by_user","author","creator"],uploadedAt:["uploadedAt","uploaded_at","uploadDate","upload_date","createdAt","created_at"],fileType:["fileType","file_type","mimeType","mime_type","type","extension"],fileSize:["fileSize","file_size","size","fileSizeBytes","file_size_bytes"]}[t]||[t])}let a=e;for(let e of s)if(a&&void 0!==a[e])a=a[e];else{a=void 0;break}if(void 0!==a)return a;let r=s[0],i=s.slice(1).join(".");for(let t of({metadata:["metadata","meta","data","info","document_metadata"],document:["document","doc","result","item","data","record"]})[r]||[r]){let s=e[t];if(s){let e=this.getFieldValue(s,i);if(void 0!==e)return e}}}static createStandardDocument(e){let t=this.mapDocumentData(e);return{...e,id:t.id||e.id||e.documentId||(e.document?e.document.id:void 0),title:t.title||e.title||e.originalName||e.name||"Untitled Document",description:t.description||e.description||e.content||e.text||e.summary||"",fileName:t.fileName||e.fileName||e.originalFileName||e.name||"unknown.pdf",fileUrl:t.fileUrl||e.fileUrl||e.url||e.documentUrl||e.source,category:t.category||e.category||e.type||e.documentType||"Uncategorized",tags:t.tags||e.tags||e.keywords||[],uploadedBy:t.uploadedBy||e.uploadedBy||e.author||e.creator||e.uploader||"Unknown",uploadedAt:t.uploadedAt?new Date(t.uploadedAt):e.uploadedAt?new Date(e.uploadedAt):e.uploadDate?new Date(e.uploadDate):e.createdAt?new Date(e.createdAt):new Date,fileType:t.fileType||e.fileType||e.mimeType||e.type||"unknown",fileSize:t.fileSize||e.fileSize||e.size||0}}};var b=e.i(75854),b=b;let j=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var v=e.i(22016);function N(e){if(!e)return e;let t=e.match(/^[a-zA-Z0-9]{10,}_([^_].*)$/);return t?t[1]:e}let w=e=>e.isQproDocument&&e.qproAnalysisId?`/qpro/analysis/${e.qproAnalysisId}`:`/repository/preview/${e.documentId}`,_=e=>e&&"undefined"!==e&&!e.includes("undefined")&&!/\.(pdf|docx?|xlsx?|pptx?|jpg|jpeg|png|gif|bmp|tiff|webp)$/i.test(e),k=({generatedResponse:e,generationType:s,sources:a,isLoading:r,error:i,relevantDocumentUrl:l,noRelevantDocuments:d})=>r?(0,t.jsxs)(n.Card,{className:"mb-6 animate-pulse",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.default,{className:"w-5 h-5"}),"Generating Insights"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-20 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),a&&a.length>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2 font-medium mb-2",children:[(0,t.jsx)(m.FileText,{className:"w-4 h-4"}),"Source Documents"]}),(0,t.jsx)("ul",{className:"space-y-2",children:a.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-xs bg-blue-10 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center shrink-0 mt-0.5",children:s+1}),(0,t.jsxs)("div",{className:"flex-1",children:[_(e.documentId)?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.default,{href:w(e),target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:text-blue-800 transition-colors",children:N(e.title)}),e.isQproDocument&&(0,t.jsx)(o.Badge,{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-xs",children:"QPRO"})]}):(0,t.jsx)("div",{className:"font-medium",children:N(e.title)}),"number"==typeof e.confidence&&e.confidence>0&&(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded mt-1 inline-block",children:[(100*e.confidence).toFixed(1),"% relevance"]})]}),_(e.documentId)?(0,t.jsxs)(v.default,{href:w(e),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:"View Document"})]}):(0,t.jsx)(j,{className:"w-4 h-4 text-gray-400"})]},s))})]})]})})]}):i?(0,t.jsxs)(n.Card,{className:"mb-6 border-red-200",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2 text-red-60",children:[(0,t.jsx)(b.default,{className:"w-5 h-5"}),"Generated Insights Error"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("p",{className:"text-red-60",children:i})})]}):e?d?(0,t.jsxs)(n.Card,{className:"mb-6 border-amber-200 bg-amber-50",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2 text-amber-700",children:[(0,t.jsx)(b.default,{className:"w-5 h-5"}),"No Relevant Documents Found"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"prose prose-amber max-w-none",children:(0,t.jsxs)("div",{className:"whitespace-pre-wrap text-amber-800",children:[(0,t.jsx)("p",{className:"mb-3",children:"The documents in the system do not contain information that matches your query."}),(0,t.jsx)("p",{className:"font-medium mb-2",children:"Suggestions:"}),(0,t.jsxs)("ul",{className:"list-disc ml-6 space-y-1",children:[(0,t.jsx)("li",{children:"Try using different search terms or keywords"}),(0,t.jsx)("li",{children:"Make sure the document you're looking for has been uploaded to the system"}),(0,t.jsx)("li",{children:"Check if the document is still being processed (this can take a few minutes after upload)"}),(0,t.jsx)("li",{children:"Contact your administrator if you believe the document should exist"})]})]})})})]}):(0,t.jsxs)(n.Card,{className:"mb-6 border-blue-20",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.default,{className:"w-5 h-5 text-blue-600"}),"Generated Insights"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"prose prose-blue max-w-none",children:[(0,t.jsx)("div",{className:"whitespace-pre-wrap text-gray-70",children:e.split("\n").map((e,s)=>{let a=e.trim();if(a.startsWith("* **")||a.startsWith("- **")){let e=a.match(/^\s*[*-]\s*\*\*(.+?)\*\*(.*)/);return e?(0,t.jsxs)("div",{className:"ml-4 my-1",children:[(0,t.jsxs)("span",{className:"font-semibold",children:["â€¢ ",e[1]]}),e[2]&&(0,t.jsx)("span",{children:e[2]})]},s):(0,t.jsxs)("div",{className:"ml-4 my-1",children:["â€¢ ",a.substring(2).trim()]},s)}return/^\s*\d+\.\s/.test(a)?(0,t.jsx)("div",{className:"ml-4 my-1",children:a},s):a.startsWith("**")&&a.endsWith("**")?(0,t.jsx)("div",{className:"font-bold mt-3 mb-1",children:a.slice(2,-2)},s):""===a?(0,t.jsx)("div",{className:"my-2"},s):(0,t.jsx)("div",{className:"my-1",children:e},s)})}),a&&a.length>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2 font-medium mb-2",children:[(0,t.jsx)(m.FileText,{className:"w-4 h-4"}),"Source Documents"]}),(0,t.jsx)("ul",{className:"space-y-2",children:a.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-xs bg-blue-10 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center shrink-0 mt-0.5",children:s+1}),(0,t.jsxs)("div",{className:"flex-1",children:[_(e.documentId)?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.default,{href:w(e),target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:text-blue-800 transition-colors",children:N(e.title)}),e.isQproDocument&&(0,t.jsx)(o.Badge,{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-xs",children:"QPRO"})]}):(0,t.jsx)("div",{className:"font-medium",children:N(e.title)}),"number"==typeof e.confidence&&e.confidence>0&&(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded mt-1 inline-block",children:[(100*e.confidence).toFixed(1),"% relevance"]})]}),_(e.documentId)?(0,t.jsxs)(v.default,{href:w(e),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:"View Document"})]}):(0,t.jsx)(j,{className:"w-4 h-4 text-gray-400"})]},s))})]}),l&&(0,t.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,t.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,t.jsxs)(v.default,{href:l,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors font-medium",children:[(0,t.jsx)(m.FileText,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"View Source Document"}),(0,t.jsx)(j,{className:"w-5 h-5"})]})})})]})})]}):null;function C(){let{user:e,isAuthenticated:g,isLoading:b}=(0,r.useAuth)(),j=(0,a.useRouter)(),[v,w]=(0,s.useState)(""),[_,C]=(0,s.useState)(!1),[D,S]=(0,s.useState)({documents:[]}),[T,A]=(0,s.useState)(null),[U,I]=(0,s.useState)(""),[z,B]=(0,s.useState)(!1),[F,q]=(0,s.useState)(!1),[L,$]=(0,s.useState)([]),[Q,R]=(0,s.useState)(void 0),[P,V]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b||g||j.push("/")},[g,b,j]);let E=async()=>{if(v.trim()){C(!0),q(!0),B(!0);try{let e=await f.default.getAccessToken();if(!e)throw Error("No authentication token found");let t=new URLSearchParams;t.append("query",v),t.append("useSemantic","true"),t.append("generate",(!0).toString()),t.append("generationType","text-only");let s=await fetch(`/api/search?${t.toString()}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)if(500===s.status){console.error("Search API internal server error:",s.status,s.statusText),S({documents:[]});return}else if(401===s.status){console.error("Authentication error during search:",s.status),await f.default.logout();return}else if(403===s.status){console.error("Forbidden access during search:",s.status),S({documents:[]});return}else throw Error(`Failed to fetch documents: ${s.status} ${s.statusText}`);let a=await s.json(),r=a.results.map(e=>e.document||e);a.generatedResponse?(A(a.generatedResponse),I(a.generationType||"semantic"),$(a.sources||[]),R(a.relevantDocumentUrl||void 0),V(a.noRelevantDocuments||!1)):(A(null),$([]),R(void 0),V(!1)),S({documents:r||[]})}catch(e){console.error("Search error:",e),S({documents:[]}),A(null),$([]),R(void 0),V(!1)}finally{q(!1),B(!1)}}else S({documents:[]}),A(null),C(!1),$([]),R(void 0),V(!1)};return b?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4 overflow-hidden",children:(0,t.jsx)(h.default,{src:"/LSPULogo.png",alt:"LSPU Logo",width:64,height:64,className:"object-contain animate-spin"})}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading search..."})]})}):g?(D.documents.length,(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8 animate-fade-in text-center",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-2",children:"AI-Powered Search"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Find documents and resources across the system"})]}),(0,t.jsx)(n.Card,{className:"mb-8 animate-fade-in",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)(c.SearchIcon,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5",style:{color:"gray"}}),(0,t.jsx)(d.Input,{placeholder:"Ask or search about institutional documents and files (English/Filipino)",value:v,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()},className:"pl-12 h-14 text-lg"}),(0,t.jsx)(l.Button,{onClick:E,className:"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 p-0 opacity-0","aria-label":"Search",children:"S"})]})})}),v&&_&&(0,t.jsxs)("div",{className:"animate-fade-in",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:F?"Searching...":`${D.documents.length} ${1===D.documents.length?"result":"results"} found for "${v}"`}),T&&D.documents.length>0&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Showing the most relevant document for your query"})]}),(0,t.jsx)(k,{generatedResponse:T||"",generationType:U,sources:L,relevantDocumentUrl:Q,isLoading:z,noRelevantDocuments:P}),T||z?null:D.documents.length>0&&(0,t.jsxs)(x.Tabs,{defaultValue:"documents",className:"w-full",children:[(0,t.jsx)(x.TabsList,{className:"mb-6",children:(0,t.jsx)(x.TabsTrigger,{value:"documents",children:"Documents"})}),(0,t.jsx)(x.TabsContent,{value:"documents",className:"space-y-4",children:F?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):D.documents.map((e,s)=>{let a=Array.isArray(D.documents)&&D.documents.length>0&&"documentId"in D.documents[0]?D.documents[s]:null,r=()=>e.isQproDocument&&e.qproAnalysisId?`/qpro/analysis/${e.qproAnalysisId}`:a?.isQproDocument&&a?.qproAnalysisId?`/qpro/analysis/${a.qproAnalysisId}`:e.documentUrl&&"/repository/preview/undefined"!==e.documentUrl&&!e.documentUrl.includes("/repository/preview/undefined")?e.documentUrl:a?.documentUrl&&"/repository/preview/undefined"!==a.documentUrl&&!a.documentUrl.includes("/repository/preview/undefined")?a.documentUrl:a?.originalDocumentId?`/repository/preview/${a.originalDocumentId}`:e.colivaraDocumentId?`/repository/preview/${e.colivaraDocumentId}`:`/repository/preview/${e.id}`;return(0,t.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{let t=r();console.log("[Search] Navigating to:",t,{docId:e.id,isQpro:e.isQproDocument||a?.isQproDocument,qproAnalysisId:e.qproAnalysisId||a?.qproAnalysisId,documentUrl:e.documentUrl||a?.documentUrl}),j.push(t)},children:(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center shrink-0",children:(0,t.jsx)(m.FileText,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-lg",children:N(y.getFieldValue(e,"title")||e.title||e.document&&y.getFieldValue(e.document,"title")||e.originalName||"Untitled Document")}),(e.isQproDocument||a?.isQproDocument)&&(0,t.jsx)(o.Badge,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:"QPRO"})]}),(0,t.jsx)(o.Badge,{variant:"secondary",children:y.getFieldValue(e,"category")||e.category||e.type||"Uncategorized"})]}),(0,t.jsxs)("div",{className:"mt-3 p-3 bg-muted/50 rounded-lg border-l-4 border-primary/30",children:[(0,t.jsxs)("div",{className:"text-xs font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[(0,t.jsx)(u.TrendingUp,{className:"w-3 h-3"}),"ðŸ’¬ Evidence from document:"]}),(()=>{let s=a?.snippet||e.snippet,r=a?.extractedText||e.extractedText,i=e.content,l=e.description||e.document?.description,d=s||r||i||l;if(d&&d.trim().length>20&&!d.toLowerCase().includes("visual content")&&!d.toLowerCase().includes("visual document")&&!d.toLowerCase().includes("ai will extract")&&!d.toLowerCase().includes("click to preview")){let e=d.length>300?d.substring(0,300)+"...":d;return(0,t.jsxs)(n.CardDescription,{className:"mt-1 text-sm italic leading-relaxed",children:['"',e,'"']})}{let s=e.description||e.document?.description;return s&&s.trim().length>10?(0,t.jsxs)(n.CardDescription,{className:"mt-1 text-sm italic leading-relaxed",children:['"',s.substring(0,200),s.length>200?"...":"",'"']}):(0,t.jsx)(n.CardDescription,{className:"mt-1 text-sm text-muted-foreground",children:"ðŸ“„ Document matched your search query. Click to view full content."})}})()]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:(e.tags||e.keywords||[]).map((e,s)=>(0,t.jsx)(o.Badge,{variant:"outline",className:"text-xs",children:e},s))}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[a?.confidenceScore||e.confidenceScore||e.score?(0,t.jsx)("div",{className:"inline-flex items-center gap-1 bg-primary/10 px-2 py-1 rounded-md",children:(0,t.jsxs)("span",{className:"text-xs font-medium text-primary",children:["Relevance: ",(100*(a?.confidenceScore||e.confidenceScore||e.score||.85)).toFixed(0),"%"]})}):null,(a?.pageNumbers?.length>0||e.pageNumbers?.length>0)&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Pages: ",(a?.pageNumbers||e.pageNumbers).join(", ")]})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),j.push(r())},children:[(0,t.jsx)(p.Eye,{className:"w-4 h-4 mr-1"}),e.isQproDocument||a?.isQproDocument?"View Analysis":"Preview"]})})]})]})})},`${e.id}-${s}`)})})]}),!F&&0===D.documents.length&&(0,t.jsx)(n.Card,{children:(0,t.jsxs)(n.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(c.SearchIcon,{className:"w-12 h-12 mx-auto mb-4",style:{color:"gray"}}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No results found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try different keywords or browse the repository"})]})})]}),!v&&!_&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in"})]})]})):null}e.s(["default",()=>C],22956)}]);