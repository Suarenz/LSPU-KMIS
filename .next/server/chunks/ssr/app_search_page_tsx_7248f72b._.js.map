{"version":3,"sources":["../../../../app/search/page.tsx","../../../../components/qwen-response-display.tsx","../../../../node_modules/lucide-react/src/icons/external-link.ts","../../../../lib/utils/document-utils.ts","../../../../lib/utils/super-mapper.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { Navbar } from \"@/components/navbar\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { SearchIcon, FileText, TrendingUp, BotIcon, Eye } from \"lucide-react\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport Image from \"next/image\"\r\nimport AuthService from '@/lib/services/auth-service';\r\nimport { Document } from '@/lib/api/types';\r\nimport SuperMapper from '@/lib/utils/super-mapper';\r\nimport QwenResponseDisplay from '@/components/qwen-response-display';\r\nimport { cleanDocumentTitle } from '@/lib/utils/document-utils';\r\nimport { useToast } from '@/components/ui/use-toast';\r\n\r\nexport default function SearchPage() {\r\n  const { user, isAuthenticated, isLoading } = useAuth()\r\n  const router = useRouter()\r\n  const [searchQuery, setSearchQuery] = useState(\"\")\r\n  const [hasPerformedSearch, setHasPerformedSearch] = useState(false)\r\n  const [searchResults, setSearchResults] = useState<{\r\n    documents: Document[]\r\n  }>({\r\n    documents: [],\r\n  })\r\n  const [generatedResponse, setGeneratedResponse] = useState<string | null>(null);\r\n  const [generationType, setGenerationType] = useState<string>('');\r\n  const [isGenerating, setIsGenerating] = useState<boolean>(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [sources, setSources] = useState<any[]>([]); // State to store the sources used in the AI response\r\n  const [relevantDocumentUrl, setRelevantDocumentUrl] = useState<string | undefined>(undefined); // State to store the relevant document URL\r\n  const [noRelevantDocuments, setNoRelevantDocuments] = useState<boolean>(false); // State to track if no relevant documents were found\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      router.push(\"/\");\r\n    }\r\n  }, [isAuthenticated, isLoading, router])\r\n\r\n  const performSearch = async () => {\r\n    if (searchQuery.trim()) {\r\n      setHasPerformedSearch(true);\r\n      setLoading(true);\r\n      setIsGenerating(true);\r\n      try {\r\n        const token = await AuthService.getAccessToken();\r\n        if (!token) {\r\n          throw new Error('No authentication token found');\r\n        }\r\n\r\n        // Always use semantic search with AI generation by default\r\n        const needsGeneration = true; // Always generate AI response\r\n        \r\n        // Build query parameters for the new search API - always use semantic search\r\n        const queryParams = new URLSearchParams();\r\n        queryParams.append('query', searchQuery);\r\n        queryParams.append('useSemantic', 'true'); // Always use semantic search\r\n        queryParams.append('generate', needsGeneration.toString()); // Always generate AI response\r\n        queryParams.append('generationType', 'text-only'); // Default to text-only generation for documents\r\n        \r\n        // Search for documents using the new enhanced search API\r\n        const response = await fetch(`/api/search?${queryParams.toString()}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          // Handle different status codes appropriately\r\n          if (response.status === 500) {\r\n            console.error('Search API internal server error:', response.status, response.statusText);\r\n            // Set empty results and show user-friendly message\r\n            setSearchResults({ documents: [] });\r\n            return;\r\n          } else if (response.status === 401) {\r\n            console.error('Authentication error during search:', response.status);\r\n            await AuthService.logout();\r\n            return;\r\n          } else if (response.status === 403) {\r\n            console.error('Forbidden access during search:', response.status);\r\n            setSearchResults({ documents: [] });\r\n            return;\r\n          } else {\r\n            throw new Error(`Failed to fetch documents: ${response.status} ${response.statusText}`);\r\n          }\r\n        }\r\n\r\n        const data = await response.json();\r\n        \r\n        // Extract documents from the enhanced search results\r\n        // Handle both direct document results and enhanced search results with additional metadata\r\n        const documents = data.results.map((result: any) => {\r\n          // If result has a document property, use it; otherwise use the result itself\r\n          return result.document || result;\r\n        });\r\n        \r\n        // Handle generated response if present\r\n        if (data.generatedResponse) {\r\n          setGeneratedResponse(data.generatedResponse);\r\n          setGenerationType(data.generationType || 'semantic'); // Default to semantic\r\n          setSources(data.sources || []); // Set the sources used in the AI response\r\n          setRelevantDocumentUrl(data.relevantDocumentUrl || undefined); // Set the relevant document URL\r\n          setNoRelevantDocuments(data.noRelevantDocuments || false); // Set the no relevant documents flag\r\n        } else {\r\n          setGeneratedResponse(null);\r\n          setSources([]); // Clear sources when there's no generated response\r\n          setRelevantDocumentUrl(undefined); // Clear the document URL as well\r\n          setNoRelevantDocuments(false); // Clear the flag\r\n        }\r\n        \r\n        setSearchResults({\r\n          documents: documents || [],\r\n        });\r\n      } catch (error) {\r\n        console.error('Search error:', error);\r\n        setSearchResults({ documents: [] });\r\n        setGeneratedResponse(null);\r\n        setSources([]); // Clear sources on error as well\r\n        setRelevantDocumentUrl(undefined); // Clear document URL on error as well\r\n        setNoRelevantDocuments(false); // Clear the flag on error\r\n      } finally {\r\n        setLoading(false);\r\n        setIsGenerating(false);\r\n      }\r\n    } else {\r\n      setSearchResults({ documents: [] });\r\n      setGeneratedResponse(null);\r\n      setHasPerformedSearch(false);\r\n      setSources([]); // Clear sources when there's no search query\r\n      setRelevantDocumentUrl(undefined); // Clear document URL when there's no search query\r\n      setNoRelevantDocuments(false); // Clear the flag when there's no search query\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 flex items-center justify-center mx-auto mb-4 overflow-hidden\">\r\n            <Image\r\n              src=\"/LSPULogo.png\"\r\n              alt=\"LSPU Logo\"\r\n              width={64}\r\n              height={64}\r\n              className=\"object-contain animate-spin\"\r\n            />\r\n          </div>\r\n          <p className=\"text-lg text-muted-foreground\">Loading search...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return null;\r\n  }\r\n\r\n  const totalResults = searchResults.documents.length\r\n\r\n  const popularSearches = [\"Research\", \"Curriculum\", \"Policy\", \"Extension\", \"Teaching\"]\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navbar />\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n       <div className=\"mb-8 animate-fade-in text-center\">\r\n         <h1 className=\"text-3xl md:text-4xl font-bold text-foreground mb-2\">AI-Powered Search</h1>\r\n         <p className=\"text-muted-foreground\">Find documents and resources across the system</p>\r\n       </div>\r\n\r\n        {/* Search Bar */}\r\n        <Card className=\"mb-8 animate-fade-in\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"relative mb-4\">\r\n              <SearchIcon className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5\" style={{ color: 'gray' }} />\r\n              <Input\r\n                placeholder=\"Ask or search about institutional documents and files (English/Filipino)\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    performSearch();\r\n                  }\r\n                }}\r\n                className=\"pl-12 h-14 text-lg\"\r\n              />\r\n              <Button\r\n                onClick={performSearch}\r\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 p-0 opacity-0\"\r\n                aria-label=\"Search\"\r\n              >\r\n                S\r\n              </Button>\r\n            </div>\r\n            {/* Advanced search indicator - shows that we're using the most advanced search by default */}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Search Results */}\r\n        {searchQuery && hasPerformedSearch && (\r\n          <div className=\"animate-fade-in\">\r\n            <div className=\"mb-6\">\r\n              <h2 className=\"text-xl font-semibold\">\r\n                {loading ? 'Searching...' : `${searchResults.documents.length} ${searchResults.documents.length === 1 ? \"result\" : \"results\"} found for \"${searchQuery}\"`}\r\n              </h2>\r\n              {generatedResponse && searchResults.documents.length > 0 && (\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                  Showing the most relevant document for your query\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Display generated response if available */}\r\n            <QwenResponseDisplay\r\n              generatedResponse={generatedResponse || ''}\r\n              generationType={generationType}\r\n              sources={sources} // Pass the sources used in the AI response\r\n              relevantDocumentUrl={relevantDocumentUrl} // Pass the relevant document URL\r\n              isLoading={isGenerating} // Always show loading when generating since we're always using semantic search\r\n              noRelevantDocuments={noRelevantDocuments} // Pass the flag for no relevant documents\r\n            />\r\n\r\n            {/* Only show the documents tab if we're not generating and don't have a generated response */}\r\n            {!generatedResponse && !isGenerating ? (\r\n              searchResults.documents.length > 0 && (\r\n                <Tabs defaultValue=\"documents\" className=\"w-full\">\r\n                  <TabsList className=\"mb-6\">\r\n                    <TabsTrigger value=\"documents\">Documents</TabsTrigger>\r\n                  </TabsList>\r\n\r\n                  <TabsContent value=\"documents\" className=\"space-y-4\">\r\n                    {loading ? (\r\n                      <div className=\"flex justify-center py-8\">\r\n                        <div className=\"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n                      </div>\r\n                    ) : (\r\n                      searchResults.documents.map((doc, index) => {\r\n                        // Check if this document is from enhanced search (has additional properties)\r\n                        const enhancedResult = Array.isArray(searchResults.documents) && searchResults.documents.length > 0 && 'documentId' in searchResults.documents[0];\r\n                        const enhancedDoc = enhancedResult ? (searchResults as any).documents[index] : null;\r\n                        \r\n                        // Helper function to get the correct navigation URL\r\n                        const getDocumentUrl = () => {\r\n                          const resultWithUrl = doc as any;\r\n                          // Check for QPRO document first - redirect to analysis page\r\n                          if (resultWithUrl.isQproDocument && resultWithUrl.qproAnalysisId) {\r\n                            return `/qpro/analysis/${resultWithUrl.qproAnalysisId}`;\r\n                          }\r\n                          if (enhancedDoc?.isQproDocument && enhancedDoc?.qproAnalysisId) {\r\n                            return `/qpro/analysis/${enhancedDoc.qproAnalysisId}`;\r\n                          }\r\n                          // Check for direct documentUrl\r\n                          if (resultWithUrl.documentUrl && resultWithUrl.documentUrl !== `/repository/preview/undefined` && !resultWithUrl.documentUrl.includes('/repository/preview/undefined')) {\r\n                            return resultWithUrl.documentUrl;\r\n                          }\r\n                          if (enhancedDoc?.documentUrl && enhancedDoc.documentUrl !== `/repository/preview/undefined` && !enhancedDoc.documentUrl.includes('/repository/preview/undefined')) {\r\n                            return enhancedDoc.documentUrl;\r\n                          }\r\n                          // Check for originalDocumentId\r\n                          if (enhancedDoc?.originalDocumentId) {\r\n                            return `/repository/preview/${enhancedDoc.originalDocumentId}`;\r\n                          }\r\n                          // Check for colivaraDocumentId\r\n                          if (doc.colivaraDocumentId) {\r\n                            return `/repository/preview/${doc.colivaraDocumentId}`;\r\n                          }\r\n                          // Fallback to document ID\r\n                          return `/repository/preview/${doc.id}`;\r\n                        };\r\n                        \r\n                        return (\r\n                          <Card key={`${doc.id}-${index}`} className=\"hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => {\r\n                            const url = getDocumentUrl();\r\n                            console.log('[Search] Navigating to:', url, {\r\n                              docId: doc.id,\r\n                              isQpro: (doc as any).isQproDocument || enhancedDoc?.isQproDocument,\r\n                              qproAnalysisId: (doc as any).qproAnalysisId || enhancedDoc?.qproAnalysisId,\r\n                              documentUrl: (doc as any).documentUrl || enhancedDoc?.documentUrl,\r\n                            });\r\n                            router.push(url);\r\n                          }}>\r\n                            <CardHeader>\r\n                              <div className=\"flex items-start gap-3\">\r\n                                <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center shrink-0\">\r\n                                  <FileText className=\"w-5 h-5 text-primary\" />\r\n                                  </div>\r\n                                <div className=\"flex-1\">\r\n                                  <div className=\"flex items-start justify-between gap-2\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <CardTitle className=\"text-lg\">{cleanDocumentTitle(SuperMapper.getFieldValue(doc, 'title') || (doc as any).title || ((doc as any).document && SuperMapper.getFieldValue((doc as any).document, 'title')) || (doc as any).originalName || \"Untitled Document\")}</CardTitle>\r\n                                      {/* Show QPRO badge if it's a QPRO document */}\r\n                                      {((doc as any).isQproDocument || enhancedDoc?.isQproDocument) && (\r\n                                        <Badge variant=\"default\" className=\"bg-blue-600 hover:bg-blue-700\">QPRO</Badge>\r\n                                      )}\r\n                                    </div>\r\n                                    <Badge variant=\"secondary\">{SuperMapper.getFieldValue(doc, 'category') || (doc as any).category || (doc as any).type || \"Uncategorized\"}</Badge>\r\n                                  </div>\r\n                                  \r\n                                  {/* Evidence Section - Show extracted text/snippet from the document */}\r\n                                  <div className=\"mt-3 p-3 bg-muted/50 rounded-lg border-l-4 border-primary/30\">\r\n                                    <div className=\"text-xs font-medium text-muted-foreground mb-1 flex items-center gap-1\">\r\n                                      <TrendingUp className=\"w-3 h-3\" />\r\n                                      ðŸ’¬ Evidence from document:\r\n                                    </div>\r\n                                    {(() => {\r\n                                      // Try to get meaningful snippet in order of preference\r\n                                      const snippet = enhancedDoc?.snippet || (doc as any).snippet;\r\n                                      const extractedText = enhancedDoc?.extractedText || (doc as any).extractedText;\r\n                                      const content = (doc as any).content;\r\n                                      const description = doc.description || (doc as any).document?.description;\r\n                                      \r\n                                      // Prefer snippet, then extractedText, then content, then description\r\n                                      const evidence = snippet || extractedText || content || description;\r\n                                      \r\n                                      // Check if the evidence is meaningful or just a placeholder\r\n                                      const isMeaningfulText = evidence && \r\n                                                               evidence.trim().length > 20 && \r\n                                                               !evidence.toLowerCase().includes('visual content') && \r\n                                                               !evidence.toLowerCase().includes('visual document') && \r\n                                                               !evidence.toLowerCase().includes('ai will extract') &&\r\n                                                               !evidence.toLowerCase().includes('click to preview');\r\n                                      \r\n                                      if (isMeaningfulText) {\r\n                                        // Show actual content with quotes\r\n                                        const displayText = evidence.length > 300 ? evidence.substring(0, 300) + '...' : evidence;\r\n                                        return (\r\n                                          <CardDescription className=\"mt-1 text-sm italic leading-relaxed\">\r\n                                            &quot;{displayText}&quot;\r\n                                          </CardDescription>\r\n                                        );\r\n                                      } else {\r\n                                        // Show document description or prompt to view\r\n                                        const docDescription = doc.description || (doc as any).document?.description;\r\n                                        if (docDescription && docDescription.trim().length > 10) {\r\n                                          return (\r\n                                            <CardDescription className=\"mt-1 text-sm italic leading-relaxed\">\r\n                                              &quot;{docDescription.substring(0, 200)}{docDescription.length > 200 ? '...' : ''}&quot;\r\n                                            </CardDescription>\r\n                                          );\r\n                                        }\r\n                                        return (\r\n                                          <CardDescription className=\"mt-1 text-sm text-muted-foreground\">\r\n                                            ðŸ“„ Document matched your search query. Click to view full content.\r\n                                          </CardDescription>\r\n                                        );\r\n                                      }\r\n                                    })()}\r\n                                  </div>\r\n                                  \r\n                                  <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                                    {(doc.tags || (doc as any).keywords || []).map((tag: string, tagIndex: number) => (\r\n                                      <Badge key={tagIndex} variant=\"outline\" className=\"text-xs\">\r\n                                        {tag}\r\n                                      </Badge>\r\n                                    ))}\r\n                                  </div>\r\n                                  {/* Show relevance score and page info */}\r\n                                  <div className=\"mt-2 flex items-center gap-3\">\r\n                                    {(enhancedDoc?.confidenceScore || (doc as any).confidenceScore || (doc as any).score) ? (\r\n                                      <div className=\"inline-flex items-center gap-1 bg-primary/10 px-2 py-1 rounded-md\">\r\n                                        <span className=\"text-xs font-medium text-primary\">\r\n                                          Relevance: {(((enhancedDoc?.confidenceScore || (doc as any).confidenceScore || (doc as any).score) || 0.85) * 100).toFixed(0)}%\r\n                                        </span>\r\n                                      </div>\r\n                                    ) : null}\r\n                                    {(enhancedDoc?.pageNumbers?.length > 0 || (doc as any).pageNumbers?.length > 0) && (\r\n                                      <span className=\"text-xs text-muted-foreground\">Pages: {(enhancedDoc?.pageNumbers || (doc as any).pageNumbers).join(', ')}</span>\r\n                                    )}\r\n                                  </div>\r\n                                  {/* Preview link */}\r\n                                  <div className=\"mt-3 flex justify-end\">\r\n                                    <Button variant=\"outline\" size=\"sm\" onClick={(e) => {\r\n                                      e.stopPropagation(); // Prevent card click from triggering\r\n                                      router.push(getDocumentUrl());\r\n                                    }}>\r\n                                      <Eye className=\"w-4 h-4 mr-1\" />\r\n                                      {((doc as any).isQproDocument || enhancedDoc?.isQproDocument) ? 'View Analysis' : 'Preview'}\r\n                                    </Button>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </CardHeader>\r\n                          </Card>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </TabsContent>\r\n                </Tabs>\r\n              )\r\n            ) : null}\r\n\r\n            {!loading && searchResults.documents.length === 0 && (\r\n              <Card>\r\n                <CardContent className=\"py-12 text-center\">\r\n                  <SearchIcon className=\"w-12 h-12 mx-auto mb-4\" style={{ color: 'gray' }} />\r\n                  <h3 className=\"text-lg font-semibold mb-2\">No results found</h3>\r\n                  <p className=\"text-muted-foreground\">Try different keywords or browse the repository</p>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Empty State */}\r\n        {!searchQuery && !hasPerformedSearch && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in\">\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { BotIcon, LightbulbIcon, FileText, ExternalLink } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { cleanDocumentTitle } from '@/lib/utils/document-utils';\r\n\r\ninterface SourceInfo {\r\n  title: string;\r\n  documentId: string;\r\n  confidence: number;\r\n  isQproDocument?: boolean;\r\n  qproAnalysisId?: string;\r\n}\r\n\r\ninterface QwenResponseDisplayProps {\r\n  generatedResponse: string;\r\n  generationType: string;\r\n  sources?: SourceInfo[];\r\n  isLoading?: boolean;\r\n  error?: string;\r\n  relevantDocumentUrl?: string; // Added for the clickable document link\r\n  noRelevantDocuments?: boolean; // Flag to indicate no relevant documents were found\r\n}\r\n\r\n// Helper function to get the correct document URL based on document type\r\nconst getDocumentUrl = (source: SourceInfo): string => {\r\n  if (source.isQproDocument && source.qproAnalysisId) {\r\n    return `/qpro/analysis/${source.qproAnalysisId}`;\r\n  }\r\n  return `/repository/preview/${source.documentId}`;\r\n};\r\n\r\n// Helper function to check if document ID is valid\r\nconst isValidDocumentId = (documentId: string): boolean => {\r\n  return documentId && \r\n         documentId !== 'undefined' && \r\n         !documentId.includes('undefined') && \r\n         !/\\.(pdf|docx?|xlsx?|pptx?|jpg|jpeg|png|gif|bmp|tiff|webp)$/i.test(documentId);\r\n};\r\n\r\nconst QwenResponseDisplay: React.FC<QwenResponseDisplayProps> = ({\r\n  generatedResponse,\r\n  generationType,\r\n  sources,\r\n  isLoading,\r\n  error,\r\n  relevantDocumentUrl, // Added to props\r\n  noRelevantDocuments // Added to props\r\n}) => {\r\n if (isLoading) {\r\n    return (\r\n      <Card className=\"mb-6 animate-pulse\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <LightbulbIcon className=\"w-5 h-5\" />\r\n            Generating Insights\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-2\">\r\n            <div className=\"h-4 bg-gray-20 rounded w-3/4\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\r\n            {sources && sources.length > 0 && (\r\n              <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                <h4 className=\"flex items-center gap-2 font-medium mb-2\">\r\n                  <FileText className=\"w-4 h-4\" />\r\n                  Source Documents\r\n                </h4>\r\n                <ul className=\"space-y-2\">\r\n                  {sources.map((source, index) => ( // Show all sources for comprehensive queries\r\n                    <li key={index} className=\"flex items-start gap-2 text-sm\">\r\n                      <span className=\"text-xs bg-blue-10 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center shrink-0 mt-0.5\">\r\n                        {index + 1}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        {isValidDocumentId(source.documentId) ? (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Link href={getDocumentUrl(source)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"font-medium text-blue-600 hover:text-blue-800 transition-colors\">\r\n                              {cleanDocumentTitle(source.title)}\r\n                            </Link>\r\n                            {source.isQproDocument && (\r\n                              <Badge variant=\"default\" className=\"bg-blue-600 hover:bg-blue-700 text-xs\">QPRO</Badge>\r\n                            )}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"font-medium\">{cleanDocumentTitle(source.title)}</div>\r\n                        )}\r\n                        {typeof source.confidence === 'number' && source.confidence > 0 && (\r\n                          <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded mt-1 inline-block\">\r\n                            {(source.confidence * 100).toFixed(1)}% relevance\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      {/* Make all source documents clickable if they have a documentId */}\r\n                      {isValidDocumentId(source.documentId) ? (\r\n                        <Link href={getDocumentUrl(source)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:text-blue-800 transition-colors\">\r\n                          <ExternalLink className=\"w-4 h-4\" />\r\n                          <span className=\"sr-only\">View Document</span>\r\n                        </Link>\r\n                      ) : (\r\n                        <ExternalLink className=\"w-4 h-4 text-gray-400\" />\r\n                      )}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card className=\"mb-6 border-red-200\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-red-60\">\r\n            <LightbulbIcon className=\"w-5 h-5\" />\r\n            Generated Insights Error\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <p className=\"text-red-60\">{error}</p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (!generatedResponse) {\r\n    return null;\r\n  }\r\n\r\n  // Special handling for when no relevant documents were found\r\n  if (noRelevantDocuments) {\r\n    return (\r\n      <Card className=\"mb-6 border-amber-200 bg-amber-50\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-amber-700\">\r\n            <LightbulbIcon className=\"w-5 h-5\" />\r\n            No Relevant Documents Found\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"prose prose-amber max-w-none\">\r\n            <div className=\"whitespace-pre-wrap text-amber-800\">\r\n              <p className=\"mb-3\">The documents in the system do not contain information that matches your query.</p>\r\n              <p className=\"font-medium mb-2\">Suggestions:</p>\r\n              <ul className=\"list-disc ml-6 space-y-1\">\r\n                <li>Try using different search terms or keywords</li>\r\n                <li>Make sure the document you&apos;re looking for has been uploaded to the system</li>\r\n                <li>Check if the document is still being processed (this can take a few minutes after upload)</li>\r\n                <li>Contact your administrator if you believe the document should exist</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n return (\r\n    <Card className=\"mb-6 border-blue-20\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <LightbulbIcon className=\"w-5 h-5 text-blue-600\" />\r\n          Generated Insights\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"prose prose-blue max-w-none\">\r\n          <div className=\"whitespace-pre-wrap text-gray-70\">\r\n            {generatedResponse.split('\\n').map((line, i) => {\r\n              // Check if the line contains a list item (starts with * or - or numbered list)\r\n              const trimmedLine = line.trim();\r\n              if (trimmedLine.startsWith('* **') || trimmedLine.startsWith('- **')) {\r\n                // Handle nested bullet list items like \"* **Name of Person**\"\r\n                const match = trimmedLine.match(/^\\s*[*-]\\s*\\*\\*(.+?)\\*\\*(.*)/);\r\n                if (match) {\r\n                  return (\r\n                    <div key={i} className=\"ml-4 my-1\">\r\n                      <span className=\"font-semibold\">â€¢ {match[1]}</span>\r\n                      {match[2] && <span>{match[2]}</span>}\r\n                    </div>\r\n                  );\r\n                }\r\n                return <div key={i} className=\"ml-4 my-1\">â€¢ {trimmedLine.substring(2).trim()}</div>;\r\n              } else if (/^\\s*\\d+\\.\\s/.test(trimmedLine)) {\r\n                // Handle numbered lists\r\n                return <div key={i} className=\"ml-4 my-1\">{trimmedLine}</div>;\r\n              } else if (trimmedLine.startsWith('**') && trimmedLine.endsWith('**')) {\r\n                // Handle bold headers\r\n                return <div key={i} className=\"font-bold mt-3 mb-1\">{trimmedLine.slice(2, -2)}</div>;\r\n              } else if (trimmedLine === '') {\r\n                // Handle empty lines\r\n                return <div key={i} className=\"my-2\"></div>;\r\n              } else {\r\n                // Handle regular text\r\n                return <div key={i} className=\"my-1\">{line}</div>;\r\n              }\r\n            })}\r\n          </div>\r\n          \r\n          {sources && sources.length > 0 && (\r\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n              <h4 className=\"flex items-center gap-2 font-medium mb-2\">\r\n                <FileText className=\"w-4 h-4\" />\r\n                Source Documents\r\n              </h4>\r\n              <ul className=\"space-y-2\">\r\n                {sources.map((source, index) => ( // Show all sources for comprehensive queries\r\n                  <li key={index} className=\"flex items-start gap-2 text-sm\">\r\n                    <span className=\"text-xs bg-blue-10 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center shrink-0 mt-0.5\">\r\n                      {index + 1}\r\n                    </span>\r\n                    <div className=\"flex-1\">\r\n                      {isValidDocumentId(source.documentId) ? (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Link href={getDocumentUrl(source)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"font-medium text-blue-600 hover:text-blue-800 transition-colors\">\r\n                            {cleanDocumentTitle(source.title)}\r\n                          </Link>\r\n                          {source.isQproDocument && (\r\n                            <Badge variant=\"default\" className=\"bg-blue-600 hover:bg-blue-700 text-xs\">QPRO</Badge>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"font-medium\">{cleanDocumentTitle(source.title)}</div>\r\n                      )}\r\n                      {typeof source.confidence === 'number' && source.confidence > 0 && (\r\n                        <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded mt-1 inline-block\">\r\n                          {(source.confidence * 100).toFixed(1)}% relevance\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    {/* Make all source documents clickable if they have a documentId */}\r\n                    {isValidDocumentId(source.documentId) ? (\r\n                      <Link href={getDocumentUrl(source)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:text-blue-800 transition-colors\">\r\n                        <ExternalLink className=\"w-4 h-4\" />\r\n                        <span className=\"sr-only\">View Document</span>\r\n                      </Link>\r\n                    ) : (\r\n                      <ExternalLink className=\"w-4 h-4 text-gray-400\" />\r\n                    )}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          \r\n          {relevantDocumentUrl && (\r\n            <div className=\"mt-6 pt-4 border-t border-gray-200\">\r\n              <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                <Link href={relevantDocumentUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors font-medium\">\r\n                  <FileText className=\"w-5 h-5\" />\r\n                  <span>View Source Document</span>\r\n                  <ExternalLink className=\"w-5 h-5\" />\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default QwenResponseDisplay;","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('ExternalLink', [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n]);\n\nexport default ExternalLink;\n","/**\r\n * Utility functions for handling document titles and names\r\n */\r\n\r\n/**\r\n * Cleans a document title by removing the alphanumeric prefix that is added during Colivara processing\r\n * @param title The original document title that may contain an alphanumeric prefix\r\n * @returns The cleaned document title with the prefix removed\r\n * \r\n * Example: \r\n * Input: \"cmicq4gtx0001lvg4tzbcpqgz_QPRO - 3RD QUARTER - JULY TO SEPTEMBER 2025.pdf\"\r\n * Output: \"QPRO - 3RD QUARTER - JULY TO SEPTEMBER 2025.pdf\"\r\n */\r\nexport function cleanDocumentTitle(title: string): string {\r\n  if (!title) {\r\n    return title;\r\n  }\r\n\r\n  // Pattern to match the alphanumeric prefix followed by an underscore\r\n  // This matches the pattern: alphanumeric_string_original_filename\r\n  // The prefix is typically a longer random alphanumeric string (like a UUID), followed by an underscore\r\n  // Then followed by the actual filename that starts with a non-underscore character\r\n  const prefixPattern = /^[a-zA-Z0-9]{10,}_([^_].*)$/;\r\n  \r\n  const match = title.match(prefixPattern);\r\n  \r\n  if (match) {\r\n    // Return the part after the underscore\r\n    return match[1];\r\n  }\r\n  \r\n  // If no match, return the original title\r\n return title;\r\n}\r\n\r\n/**\r\n * Cleans multiple document titles\r\n * @param titles Array of document titles to clean\r\n * @returns Array of cleaned document titles\r\n */\r\nexport function cleanDocumentTitles(titles: string[]): string[] {\r\n  return titles.map(title => cleanDocumentTitle(title));\r\n}","/**\r\n * Super Mapper - A utility to handle document field mapping across different data sources\r\n * This solution addresses the need to look for document data under various possible field names\r\n */\r\n\r\ninterface DocumentFieldMapping {\r\n  // Title-related fields\r\n title?: string;\r\n  document_title?: string;\r\n  originalName?: string;\r\n  name?: string;\r\n  \r\n  // Description-related fields\r\n  description?: string;\r\n  content?: string;\r\n  text?: string;\r\n  summary?: string;\r\n  \r\n  // File-related fields\r\n  fileName?: string;\r\n  file_name?: string;\r\n  originalFileName?: string;\r\n  original_file_name?: string;\r\n  fileUrl?: string;\r\n  file_url?: string;\r\n  \r\n  // Other common fields\r\n  id?: string;\r\n  documentId?: string;\r\n  document_id?: string;\r\n  category?: string;\r\n  tags?: string[];\r\n  uploadedBy?: string;\r\n  uploaded_by?: string;\r\n  uploadedAt?: string | Date;\r\n uploaded_at?: string | Date;\r\n  fileType?: string;\r\n  file_type?: string;\r\n  fileSize?: number;\r\n  file_size?: number;\r\n}\r\n\r\n/**\r\n * Generic function to extract a value from an object trying multiple possible field names\r\n */\r\nfunction extractValue<T>(obj: any, possibleFieldNames: string[]): T | undefined {\r\n  for (const field of possibleFieldNames) {\r\n    if (obj && obj[field] !== undefined && obj[field] !== null) {\r\n      return obj[field];\r\n    }\r\n  }\r\n return undefined;\r\n}\r\n\r\n/**\r\n * Super Mapper class to handle document field mapping\r\n */\r\nclass SuperMapper {\r\n  /**\r\n   * Maps document data from various sources to a consistent format\r\n   * Tries multiple possible field names for each property\r\n   */\r\n  static mapDocumentData(rawData: any): DocumentFieldMapping {\r\n    if (!rawData) {\r\n      return {};\r\n    }\r\n\r\n    return {\r\n      // Title mapping - try various possible field names for document title\r\n      title: extractValue<string>(rawData, [\r\n        'title', 'document_title', 'originalName', 'name', \r\n        'fileName', 'file_name', 'documentName', 'document_name'\r\n      ]),\r\n      \r\n      // Description mapping\r\n      description: extractValue<string>(rawData, [\r\n        'description', 'content', 'text', 'summary', \r\n        'desc', 'body', 'details'\r\n      ]),\r\n      \r\n      // File name mapping\r\n      fileName: extractValue<string>(rawData, [\r\n        'fileName', 'file_name', 'originalFileName', \r\n        'original_file_name', 'filename', 'name'\r\n      ]),\r\n      \r\n      // File URL mapping\r\n      fileUrl: extractValue<string>(rawData, [\r\n        'fileUrl', 'file_url', 'url', 'documentUrl', \r\n        'document_url', 'source', 'path'\r\n      ]),\r\n      \r\n      // ID mapping\r\n      id: extractValue<string>(rawData, [\r\n        'id', 'documentId', 'document_id', 'docId', \r\n        'doc_id', '_id', 'identifier'\r\n      ]),\r\n      \r\n      // Category mapping\r\n      category: extractValue<string>(rawData, [\r\n        'category', 'category_name', 'type', 'documentType', \r\n        'document_type', 'classification'\r\n      ]),\r\n      \r\n      // Tags mapping\r\n      tags: extractValue<string[]>(rawData, [\r\n        'tags', 'tag_list', 'tagList', 'keywords', \r\n        'keyword_list', 'keywordList'\r\n      ]),\r\n      \r\n      // Uploaded by mapping\r\n      uploadedBy: extractValue<string>(rawData, [\r\n        'uploadedBy', 'uploaded_by', 'uploadedByUser', \r\n        'uploaded_by_user', 'author', 'creator', 'uploader'\r\n      ]),\r\n      \r\n      // Upload date mapping\r\n      uploadedAt: extractValue<Date | string>(rawData, [\r\n        'uploadedAt', 'uploaded_at', 'uploadDate', \r\n        'upload_date', 'createdAt', 'created_at', 'date'\r\n      ]),\r\n      \r\n      // File type mapping\r\n      fileType: extractValue<string>(rawData, [\r\n        'fileType', 'file_type', 'mimeType', \r\n        'mime_type', 'type', 'extension'\r\n      ]),\r\n      \r\n      // File size mapping\r\n      fileSize: extractValue<number>(rawData, [\r\n        'fileSize', 'file_size', 'size', \r\n        'fileSizeBytes', 'file_size_bytes'\r\n      ]),\r\n    };\r\n }\r\n\r\n  /**\r\n   * Gets a specific field value trying multiple possible names\r\n   */\r\n  static getFieldValue(obj: any, fieldPath: string | string[]): any {\r\n    if (!obj) return undefined;\r\n    \r\n    // If fieldPath is a string, split it by dots to handle nested properties\r\n    const fields = Array.isArray(fieldPath) ? fieldPath : fieldPath.split('.');\r\n    \r\n    // If we have a single field name, try multiple possible variants\r\n    if (fields.length === 1) {\r\n      const fieldName = fields[0];\r\n      \r\n      // Define possible variations for common field names\r\n      const possibleNames: Record<string, string[]> = {\r\n        title: ['title', 'document_title', 'originalName', 'name', 'fileName', 'file_name', 'documentName'],\r\n        description: ['description', 'content', 'text', 'summary', 'desc', 'body'],\r\n        fileName: ['fileName', 'file_name', 'originalFileName', 'original_file_name', 'filename'],\r\n        fileUrl: ['fileUrl', 'file_url', 'url', 'documentUrl', 'document_url', 'source'],\r\n        id: ['id', 'documentId', 'document_id', 'docId', 'doc_id', '_id'],\r\n        category: ['category', 'category_name', 'type', 'documentType', 'document_type'],\r\n        tags: ['tags', 'tag_list', 'tagList', 'keywords', 'keyword_list', 'keywordList'],\r\n        uploadedBy: ['uploadedBy', 'uploaded_by', 'uploadedByUser', 'uploaded_by_user', 'author', 'creator'],\r\n        uploadedAt: ['uploadedAt', 'uploaded_at', 'uploadDate', 'upload_date', 'createdAt', 'created_at'],\r\n        fileType: ['fileType', 'file_type', 'mimeType', 'mime_type', 'type', 'extension'],\r\n        fileSize: ['fileSize', 'file_size', 'size', 'fileSizeBytes', 'file_size_bytes'],\r\n      };\r\n      \r\n      const possibleFieldNames = possibleNames[fieldName] || [fieldName];\r\n      return extractValue(obj, possibleFieldNames);\r\n    }\r\n    \r\n    // For nested properties, try to access the path directly first\r\n    let result = obj;\r\n    for (const field of fields) {\r\n      if (result && result[field] !== undefined) {\r\n        result = result[field];\r\n      } else {\r\n        result = undefined;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (result !== undefined) {\r\n      return result;\r\n    }\r\n    \r\n    // If direct access fails, try common variations of the first field\r\n    const firstField = fields[0];\r\n    const remainingPath = fields.slice(1).join('.');\r\n    \r\n    const possibleNames: Record<string, string[]> = {\r\n      metadata: ['metadata', 'meta', 'data', 'info', 'document_metadata'],\r\n      document: ['document', 'doc', 'result', 'item', 'data', 'record'],\r\n    };\r\n    \r\n    const possibleFieldNames = possibleNames[firstField] || [firstField];\r\n    \r\n    for (const possibleName of possibleFieldNames) {\r\n      const nestedObj = obj[possibleName];\r\n      if (nestedObj) {\r\n        // Recursively call for the remaining path\r\n        const nestedResult = this.getFieldValue(nestedObj, remainingPath);\r\n        if (nestedResult !== undefined) {\r\n          return nestedResult;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return undefined;\r\n }\r\n\r\n  /**\r\n   * Creates a mapped document object with standardized field names\r\n   */\r\n  static createStandardDocument(rawData: any): any {\r\n    const mappedData = this.mapDocumentData(rawData);\r\n    \r\n    // Create a standard document object using the mapped values\r\n    // Only apply defaults if no value was found from any of the possible field names\r\n    return {\r\n      ...rawData, // Include original data to preserve existing properties\r\n      id: mappedData.id || rawData.id || rawData.documentId || (rawData.document ? rawData.document.id : undefined),\r\n      title: mappedData.title || rawData.title || rawData.originalName || rawData.name || 'Untitled Document',\r\n      description: mappedData.description || rawData.description || rawData.content || rawData.text || rawData.summary || '',\r\n      fileName: mappedData.fileName || rawData.fileName || rawData.originalFileName || rawData.name || 'unknown.pdf',\r\n      fileUrl: mappedData.fileUrl || rawData.fileUrl || rawData.url || rawData.documentUrl || rawData.source,\r\n      category: mappedData.category || rawData.category || rawData.type || rawData.documentType || 'Uncategorized',\r\n      tags: mappedData.tags || rawData.tags || rawData.keywords || [],\r\n      uploadedBy: mappedData.uploadedBy || rawData.uploadedBy || rawData.author || rawData.creator || rawData.uploader || 'Unknown',\r\n      uploadedAt: mappedData.uploadedAt ? new Date(mappedData.uploadedAt as string) :\r\n                  rawData.uploadedAt ? new Date(rawData.uploadedAt) :\r\n                  rawData.uploadDate ? new Date(rawData.uploadDate) :\r\n                  rawData.createdAt ? new Date(rawData.createdAt) :\r\n                  new Date(),\r\n      fileType: mappedData.fileType || rawData.fileType || rawData.mimeType || rawData.type || 'unknown',\r\n      fileSize: mappedData.fileSize || rawData.fileSize || rawData.size || 0,\r\n    };\r\n  }\r\n}\r\n\r\nexport default SuperMapper;"],"names":[],"mappings":"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","ignoreList":[2]}