(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},23750,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>r])},88846,e=>{"use strict";var t=e.i(54943);e.s(["SearchIcon",()=>t.default])},73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},30374,26999,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(81140),s=e.i(20783),o=e.i(30030),n=e.i(10772),l=e.i(69340),i=e.i(26330),d=e.i(65491),c=e.i(74606),u=e.i(96626),p=e.i(48425),m=e.i(3536),x=e.i(85369),h=e.i(86312),f=e.i(91918),g="Dialog",[y,v]=(0,o.createContextScope)(g),[b,j]=y(g),w=e=>{let{__scopeDialog:r,children:s,open:o,defaultOpen:i,onOpenChange:d,modal:c=!0}=e,u=a.useRef(null),p=a.useRef(null),[m=!1,x]=(0,l.useControllableState)({prop:o,defaultProp:i,onChange:d});return(0,t.jsx)(b,{scope:r,triggerRef:u,contentRef:p,contentId:(0,n.useId)(),titleId:(0,n.useId)(),descriptionId:(0,n.useId)(),open:m,onOpenChange:x,onOpenToggle:a.useCallback(()=>x(e=>!e),[x]),modal:c,children:s})};w.displayName=g;var N="DialogTrigger",C=a.forwardRef((e,a)=>{let{__scopeDialog:o,...n}=e,l=j(N,o),i=(0,s.useComposedRefs)(a,l.triggerRef);return(0,t.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":H(l.open),...n,ref:i,onClick:(0,r.composeEventHandlers)(e.onClick,l.onOpenToggle)})});C.displayName=N;var k="DialogPortal",[D,T]=y(k,{forceMount:void 0}),E=e=>{let{__scopeDialog:r,forceMount:s,children:o,container:n}=e,l=j(k,r);return(0,t.jsx)(D,{scope:r,forceMount:s,children:a.Children.map(o,e=>(0,t.jsx)(u.Presence,{present:s||l.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:n,children:e})}))})};E.displayName=k;var S="DialogOverlay",A=a.forwardRef((e,a)=>{let r=T(S,e.__scopeDialog),{forceMount:s=r.forceMount,...o}=e,n=j(S,e.__scopeDialog);return n.modal?(0,t.jsx)(u.Presence,{present:s||n.open,children:(0,t.jsx)(R,{...o,ref:a})}):null});A.displayName=S;var R=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,o=j(S,r);return(0,t.jsx)(x.RemoveScroll,{as:f.Slot,allowPinchZoom:!0,shards:[o.contentRef],children:(0,t.jsx)(p.Primitive.div,{"data-state":H(o.open),...s,ref:a,style:{pointerEvents:"auto",...s.style}})})}),P="DialogContent",F=a.forwardRef((e,a)=>{let r=T(P,e.__scopeDialog),{forceMount:s=r.forceMount,...o}=e,n=j(P,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:s||n.open,children:n.modal?(0,t.jsx)(I,{...o,ref:a}):(0,t.jsx)(M,{...o,ref:a})})});F.displayName=P;var I=a.forwardRef((e,o)=>{let n=j(P,e.__scopeDialog),l=a.useRef(null),i=(0,s.useComposedRefs)(o,n.contentRef,l);return a.useEffect(()=>{let e=l.current;if(e)return(0,h.hideOthers)(e)},[]),(0,t.jsx)(L,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),M=a.forwardRef((e,r)=>{let s=j(P,e.__scopeDialog),o=a.useRef(!1),n=a.useRef(!1);return(0,t.jsx)(L,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||s.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;s.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),L=a.forwardRef((e,r)=>{let{__scopeDialog:o,trapFocus:n,onOpenAutoFocus:l,onCloseAutoFocus:c,...u}=e,p=j(P,o),x=a.useRef(null),h=(0,s.useComposedRefs)(r,x);return(0,m.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:l,onUnmountAutoFocus:c,children:(0,t.jsx)(i.DismissableLayer,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":H(p.open),...u,ref:h,onDismiss:()=>p.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X,{titleId:p.titleId}),(0,t.jsx)(Y,{contentRef:x,descriptionId:p.descriptionId})]})]})}),B="DialogTitle",O=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,o=j(B,r);return(0,t.jsx)(p.Primitive.h2,{id:o.titleId,...s,ref:a})});O.displayName=B;var U="DialogDescription",z=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,o=j(U,r);return(0,t.jsx)(p.Primitive.p,{id:o.descriptionId,...s,ref:a})});z.displayName=U;var $="DialogClose",_=a.forwardRef((e,a)=>{let{__scopeDialog:s,...o}=e,n=j($,s);return(0,t.jsx)(p.Primitive.button,{type:"button",...o,ref:a,onClick:(0,r.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function H(e){return e?"open":"closed"}_.displayName=$;var V="DialogTitleWarning",[q,Q]=(0,o.createContext)(V,{contentName:P,titleName:B,docsSlug:"dialog"}),X=({titleId:e})=>{let t=Q(V),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Y=({contentRef:e,descriptionId:t})=>{let r=Q("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null};e.s(["Close",()=>_,"Content",()=>F,"Description",()=>z,"Overlay",()=>A,"Portal",()=>E,"Root",()=>w,"Title",()=>O,"Trigger",()=>C,"WarningProvider",()=>q,"createDialogScope",()=>v],26999);var K=e.i(41947),K=K,W=e.i(47163);function Z({...e}){return(0,t.jsx)(w,{"data-slot":"dialog",...e})}function G({...e}){return(0,t.jsx)(E,{"data-slot":"dialog-portal",...e})}function J({className:e,...a}){return(0,t.jsx)(A,{"data-slot":"dialog-overlay",className:(0,W.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function ee({className:e,children:a,showCloseButton:r=!0,...s}){return(0,t.jsxs)(G,{"data-slot":"dialog-portal",children:[(0,t.jsx)(J,{}),(0,t.jsxs)(F,{"data-slot":"dialog-content",className:(0,W.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[a,r&&(0,t.jsxs)(_,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(K.default,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function et({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,W.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function ea({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,W.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function er({className:e,...a}){return(0,t.jsx)(O,{"data-slot":"dialog-title",className:(0,W.cn)("text-lg leading-none font-semibold",e),...a})}function es({className:e,...a}){return(0,t.jsx)(z,{"data-slot":"dialog-description",className:(0,W.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>Z,"DialogContent",()=>ee,"DialogDescription",()=>es,"DialogFooter",()=>ea,"DialogHeader",()=>et,"DialogTitle",()=>er],30374)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},7486,e=>{"use strict";let t=(0,e.i(75254).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>t],7486)},12900,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function r({children:e,fallback:r=null}){let[s,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{o(!0)},[]),s)?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsx)(t.Fragment,{children:r})}e.s(["ClientOnly",()=>r])},74117,e=>{"use strict";var t=e.i(71645);let a=0,r=new Map,s=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?s(a):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),o.forEach(e=>{e(n)})}function i({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function d(){let[e,a]=t.useState(n);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:i,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>d])},63059,78237,e=>{"use strict";var t=e.i(46349);e.s(["ChevronRight",()=>t.default],63059);var a=e.i(43476),r=e.i(67881),s=e.i(71645),o=e.i(81140),n=e.i(20783),l=e.i(30030),i=e.i(26330),d=e.i(10772),c=e.i(53660),u=e.i(74606),p=e.i(96626),m=e.i(48425),x=e.i(91918),h=e.i(69340),f=e.i(59411),[g,y]=(0,l.createContextScope)("Tooltip",[c.createPopperScope]),v=(0,c.createPopperScope)(),b="TooltipProvider",j="tooltip.open",[w,N]=g(b),C=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:l}=e,[i,d]=s.useState(!0),c=s.useRef(!1),u=s.useRef(0);return s.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,a.jsx)(w,{scope:t,isOpenDelayed:i,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(u.current),d(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>d(!0),o)},[o]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:n,children:l})};C.displayName=b;var k="Tooltip",[D,T]=g(k),E=e=>{let{__scopeTooltip:t,children:r,open:o,defaultOpen:n=!1,onOpenChange:l,disableHoverableContent:i,delayDuration:u}=e,p=N(k,e.__scopeTooltip),m=v(t),[x,f]=s.useState(null),g=(0,d.useId)(),y=s.useRef(0),b=i??p.disableHoverableContent,w=u??p.delayDuration,C=s.useRef(!1),[T=!1,E]=(0,h.useControllableState)({prop:o,defaultProp:n,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(j))):p.onClose(),l?.(e)}}),S=s.useMemo(()=>T?C.current?"delayed-open":"instant-open":"closed",[T]),A=s.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C.current=!1,E(!0)},[E]),R=s.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E(!1)},[E]),P=s.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{C.current=!0,E(!0),y.current=0},w)},[w,E]);return s.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),(0,a.jsx)(c.Root,{...m,children:(0,a.jsx)(D,{scope:t,contentId:g,open:T,stateAttribute:S,trigger:x,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{p.isOpenDelayed?P():A()},[p.isOpenDelayed,P,A]),onTriggerLeave:s.useCallback(()=>{b?R():(window.clearTimeout(y.current),y.current=0)},[R,b]),onOpen:A,onClose:R,disableHoverableContent:b,children:r})})};E.displayName=k;var S="TooltipTrigger",A=s.forwardRef((e,t)=>{let{__scopeTooltip:r,...l}=e,i=T(S,r),d=N(S,r),u=v(r),p=s.useRef(null),x=(0,n.useComposedRefs)(t,p,i.onTriggerChange),h=s.useRef(!1),f=s.useRef(!1),g=s.useCallback(()=>h.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,a.jsx)(c.Anchor,{asChild:!0,...u,children:(0,a.jsx)(m.Primitive.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...l,ref:x,onPointerMove:(0,o.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(f.current||d.isPointerInTransitRef.current||(i.onTriggerEnter(),f.current=!0))}),onPointerLeave:(0,o.composeEventHandlers)(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:(0,o.composeEventHandlers)(e.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>{h.current||i.onOpen()}),onBlur:(0,o.composeEventHandlers)(e.onBlur,i.onClose),onClick:(0,o.composeEventHandlers)(e.onClick,i.onClose)})})});A.displayName=S;var R="TooltipPortal",[P,F]=g(R,{forceMount:void 0}),I=e=>{let{__scopeTooltip:t,forceMount:r,children:s,container:o}=e,n=T(R,t);return(0,a.jsx)(P,{scope:t,forceMount:r,children:(0,a.jsx)(p.Presence,{present:r||n.open,children:(0,a.jsx)(u.Portal,{asChild:!0,container:o,children:s})})})};I.displayName=R;var M="TooltipContent",L=s.forwardRef((e,t)=>{let r=F(M,e.__scopeTooltip),{forceMount:s=r.forceMount,side:o="top",...n}=e,l=T(M,e.__scopeTooltip);return(0,a.jsx)(p.Presence,{present:s||l.open,children:l.disableHoverableContent?(0,a.jsx)(z,{side:o,...n,ref:t}):(0,a.jsx)(B,{side:o,...n,ref:t})})}),B=s.forwardRef((e,t)=>{let r=T(M,e.__scopeTooltip),o=N(M,e.__scopeTooltip),l=s.useRef(null),i=(0,n.useComposedRefs)(t,l),[d,c]=s.useState(null),{trigger:u,onClose:p}=r,m=l.current,{onPointerInTransitChange:x}=o,h=s.useCallback(()=>{c(null),x(!1)},[x]),f=s.useCallback((e,t)=>{let a,r=e.currentTarget,s={x:e.clientX,y:e.clientY},o=function(e,t){let a=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(a,r,s,o)){case o:return"left";case s:return"right";case a:return"top";case r:return"bottom";default:throw Error("unreachable")}}(s,r.getBoundingClientRect());c(((a=[...function(e,t,a=5){let r=[];switch(t){case"top":r.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":r.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":r.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":r.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a})}return r}(s,o),...function(e){let{top:t,right:a,bottom:r,left:s}=e;return[{x:s,y:t},{x:a,y:t},{x:a,y:r},{x:s,y:r}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let a=0;a<e.length;a++){let r=e[a];for(;t.length>=2;){let e=t[t.length-1],a=t[t.length-2];if((e.x-a.x)*(r.y-a.y)>=(e.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}t.pop();let a=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;a.length>=2;){let e=a[a.length-1],t=a[a.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))a.pop();else break}a.push(r)}return(a.pop(),1===t.length&&1===a.length&&t[0].x===a[0].x&&t[0].y===a[0].y)?t:t.concat(a)}(a))),x(!0)},[x]);return s.useEffect(()=>()=>h(),[h]),s.useEffect(()=>{if(u&&m){let e=e=>f(e,m),t=e=>f(e,u);return u.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}},[u,m,f,h]),s.useEffect(()=>{if(d){let e=e=>{let t=e.target,a={x:e.clientX,y:e.clientY},r=u?.contains(t)||m?.contains(t),s=!function(e,t){let{x:a,y:r}=e,s=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let n=t[e].x,l=t[e].y,i=t[o].x,d=t[o].y;l>r!=d>r&&a<(i-n)*(r-l)/(d-l)+n&&(s=!s)}return s}(a,d);r?h():s&&(h(),p())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,m,d,p,h]),(0,a.jsx)(z,{...e,ref:i})}),[O,U]=g(k,{isInside:!1}),z=s.forwardRef((e,t)=>{let{__scopeTooltip:r,children:o,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=e,p=T(M,r),m=v(r),{onClose:h}=p;return s.useEffect(()=>(document.addEventListener(j,h),()=>document.removeEventListener(j,h)),[h]),s.useEffect(()=>{if(p.trigger){let e=e=>{let t=e.target;t?.contains(p.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[p.trigger,h]),(0,a.jsx)(i.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:(0,a.jsxs)(c.Content,{"data-state":p.stateAttribute,...m,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,a.jsx)(x.Slottable,{children:o}),(0,a.jsx)(O,{scope:r,isInside:!0,children:(0,a.jsx)(f.Root,{id:p.contentId,role:"tooltip",children:n||o})})]})})});L.displayName=M;var $="TooltipArrow",_=s.forwardRef((e,t)=>{let{__scopeTooltip:r,...s}=e,o=v(r);return U($,r).isInside?null:(0,a.jsx)(c.Arrow,{...o,...s,ref:t})});_.displayName=$;var H=e.i(47163);function V({delayDuration:e=0,...t}){return(0,a.jsx)(C,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function q({...e}){return(0,a.jsx)(V,{children:(0,a.jsx)(E,{"data-slot":"tooltip",...e})})}function Q({...e}){return(0,a.jsx)(A,{"data-slot":"tooltip-trigger",...e})}function X({className:e,sideOffset:t=0,children:r,...s}){return(0,a.jsx)(I,{children:(0,a.jsxs)(L,{"data-slot":"tooltip-content",sideOffset:t,className:(0,H.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...s,children:[r,(0,a.jsx)(_,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var Y=e.i(7486);let K=(0,e.i(75254).default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var W=e.i(18566);function Z({units:e,currentUnit:t,onUnitSelect:s,userRole:o,userUnit:n}){(0,W.usePathname)();let l=(0,W.useRouter)();return(0,a.jsxs)("div",{className:"w-64 bg-white border-r p-4 h-full flex flex-col",style:{boxShadow:"2px 0 4px rgba(0,0,0,0.05)"},children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(43, 67, 133, 0.1)"},children:(0,a.jsx)(Y.Building2,{className:"w-6 h-6",style:{color:"#2B4385"}})}),(0,a.jsx)("h2",{className:"text-xl font-bold",style:{color:"#2B4385"},children:"Units"})]})}),(0,a.jsx)("div",{className:"space-y-1 flex-1 py-2 overflow-y-auto max-h-[calc(100vh-150px)]",children:(0,a.jsx)(V,{children:e.map(e=>{let o=t===e.id;return(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsxs)(q,{children:[(0,a.jsx)(Q,{asChild:!0,children:(0,a.jsx)(r.Button,{variant:"ghost",className:"w-full justify-start h-auto transition-all duration-200 max-w-full overflow-hidden relative",style:{padding:"12px 16px",backgroundColor:o?"rgba(43, 67, 133, 0.1)":"transparent",borderLeft:o?"4px solid #2B4385":"4px solid transparent",borderRadius:"0 8px 8px 0"},onClick:()=>{s(e.id)},children:(0,a.jsxs)("div",{className:"flex-1 text-left min-w-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"font-semibold truncate",style:{fontSize:"16px",color:o?"#2B4385":"#374151"},children:e.code||e.name}),e.code&&(0,a.jsx)("div",{className:"mt-1 leading-tight truncate",style:{fontSize:"14px",color:o?"#2B4385":"#6B7280"},children:e.name})]})})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:e.name})})]})},e.id)})})}),("ADMIN"===o||"UNIT_ADMIN"===o||"ADMIN"===o)&&(0,a.jsx)("div",{className:"mt-auto pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:(0,a.jsxs)(r.Button,{className:"w-full gap-2",style:{backgroundColor:"#2B4385",color:"white",borderRadius:"8px"},onClick:()=>l.push("/units/new"),children:[(0,a.jsx)(K,{className:"w-4 h-4"}),"Add New Unit"]})})]})}e.s(["UnitSidebar",()=>Z],78237)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},86536,87942,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t],87942),e.s(["Eye",()=>t],86536)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},94918,3559,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>a],94918);let r=(0,t.default)("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);e.s(["FileImage",()=>r],3559)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},78078,e=>{"use strict";var t=e.i(87942);e.s(["EyeIcon",()=>t.default])},23585,e=>{"use strict";let t=(0,e.i(75254).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},30009,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(30030),s=e.i(20783),o=e.i(26999),n=e.i(81140),l=e.i(91918),i="AlertDialog",[d,c]=(0,r.createContextScope)(i,[o.createDialogScope]),u=(0,o.createDialogScope)(),p=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(o.Root,{...s,...r,modal:!0})};p.displayName=i,a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,n=u(r);return(0,t.jsx)(o.Trigger,{...n,...s,ref:a})}).displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(o.Portal,{...s,...r})};m.displayName="AlertDialogPortal";var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,n=u(r);return(0,t.jsx)(o.Overlay,{...n,...s,ref:a})});x.displayName="AlertDialogOverlay";var h="AlertDialogContent",[f,g]=d(h),y=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,children:d,...c}=e,p=u(i),m=a.useRef(null),x=(0,s.useComposedRefs)(r,m),g=a.useRef(null);return(0,t.jsx)(o.WarningProvider,{contentName:h,titleName:v,docsSlug:"alert-dialog",children:(0,t.jsx)(f,{scope:i,cancelRef:g,children:(0,t.jsxs)(o.Content,{role:"alertdialog",...p,...c,ref:x,onOpenAutoFocus:(0,n.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(l.Slottable,{children:d}),(0,t.jsx)(D,{contentRef:m})]})})})});y.displayName=h;var v="AlertDialogTitle",b=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,n=u(r);return(0,t.jsx)(o.Title,{...n,...s,ref:a})});b.displayName=v;var j="AlertDialogDescription",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,n=u(r);return(0,t.jsx)(o.Description,{...n,...s,ref:a})});w.displayName=j;var N=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,n=u(r);return(0,t.jsx)(o.Close,{...n,...s,ref:a})});N.displayName="AlertDialogAction";var C="AlertDialogCancel",k=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...n}=e,{cancelRef:l}=g(C,r),i=u(r),d=(0,s.useComposedRefs)(a,l);return(0,t.jsx)(o.Close,{...i,...n,ref:d})});k.displayName=C;var D=({contentRef:e})=>{let t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${j}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},T=e.i(47163),E=e.i(67881);function S({...e}){return(0,t.jsx)(p,{"data-slot":"alert-dialog",...e})}function A({...e}){return(0,t.jsx)(m,{"data-slot":"alert-dialog-portal",...e})}function R({className:e,...a}){return(0,t.jsx)(x,{"data-slot":"alert-dialog-overlay",className:(0,T.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function P({className:e,...a}){return(0,t.jsxs)(A,{children:[(0,t.jsx)(R,{}),(0,t.jsx)(y,{"data-slot":"alert-dialog-content",className:(0,T.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function F({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,T.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function I({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,T.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function M({className:e,...a}){return(0,t.jsx)(b,{"data-slot":"alert-dialog-title",className:(0,T.cn)("text-lg font-semibold",e),...a})}function L({className:e,...a}){return(0,t.jsx)(w,{"data-slot":"alert-dialog-description",className:(0,T.cn)("text-muted-foreground text-sm",e),...a})}function B({className:e,...a}){return(0,t.jsx)(N,{className:(0,T.cn)((0,E.buttonVariants)(),e),...a})}function O({className:e,...a}){return(0,t.jsx)(k,{className:(0,T.cn)((0,E.buttonVariants)({variant:"outline"}),e),...a})}e.s(["AlertDialog",()=>S,"AlertDialogAction",()=>B,"AlertDialogCancel",()=>O,"AlertDialogContent",()=>P,"AlertDialogDescription",()=>L,"AlertDialogFooter",()=>I,"AlertDialogHeader",()=>F,"AlertDialogTitle",()=>M],30009)},9972,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(60865),o=e.i(91432),n=e.i(63780),l=e.i(67881),i=e.i(23750),d=e.i(40160),c=e.i(86536),u=e.i(78583);let p=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=e.i(69074),x=e.i(88846),h=e.i(78078),f=e.i(27612),g=e.i(69638),y=e.i(73884),v=e.i(7486),b=e.i(73375),j=e.i(63059),w=e.i(23585),N=e.i(94918),C=e.i(3559),k=e.i(94008),D=e.i(62870),T=e.i(57688),E=e.i(12900),S=e.i(74117),A=e.i(30374),R=e.i(30009),P=e.i(78237),F=e.i(63415);function I(){let{toast:e}=(0,S.useToast)(),{user:I,isAuthenticated:M,isLoading:L}=(0,o.useAuth)(),B=(0,r.useRouter)(),O=(0,r.useSearchParams)(),[U,z]=(0,a.useState)([]),[$,_]=(0,a.useState)(""),[H,V]=(0,a.useState)("all"),[q,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)(!1),[K,W]=(0,a.useState)(null),[Z,G]=(0,a.useState)(!1),[J,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)(0),[er,es]=(0,a.useState)(null),[eo,en]=(0,a.useState)(!1),[el,ei]=(0,a.useState)(null),[ed,ec]=(0,a.useState)(null),[eu,ep]=(0,a.useState)(null),[em,ex]=(0,a.useState)(null),[eh,ef]=(0,a.useState)(null),[eg,ey]=(0,a.useState)([]),[ev,eb]=(0,a.useState)(!0),ej=I?.role==="ADMIN"||I?.role==="FACULTY";(0,a.useEffect)(()=>{Z||(ea(0),ee(!1),es(null),ei(null))},[Z]),(0,a.useEffect)(()=>{L||M||null!==I||B.push("/")},[M,L,I,B]),(0,a.useEffect)(()=>{let e=async()=>{try{if(!M||!I)return;let e=await s.default.getAccessToken();if(!e){await s.default.logout(),B.push("/");return}let t=await fetch("/api/units",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||`Failed to fetch units: ${t.status} ${t.statusText}`)}let a=await t.json();ey(a.units||[]),K?.includes("Failed to load units")&&W(null),I?.unitId&&Q(I.unitId)}catch(e){console.error("Error fetching units:",e),ey([]),W(e instanceof Error?e.message:"Failed to load units. Some functionality may be limited.")}};M&&I&&e()},[M,I,B,L]),(0,a.useEffect)(()=>{let e=O.get("unit");e?Q(e):Q(null)},[O]),(0,a.useEffect)(()=>{let e=async()=>{if("visible"===document.visibilityState){let e=s.default.getLastAuthCheck(),t=Date.now();if(!e||t-e>3e5){console.log("Page became visible, revalidating authentication and refreshing documents");try{if(!M||!I)return;let e=await s.default.getAccessToken();if(e){console.log("Valid token found, fetching documents in background");let a=new URLSearchParams;$&&a.append("search",$),H&&"all"!==H&&a.append("category",H),q&&a.append("unit",q);let r=await fetch(`/api/documents?${a.toString()}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){let e={};try{e=await r.json()}catch(t){e={error:`HTTP error! status: ${r.status}`}}if(401===r.status){console.error("Authentication token expired, redirecting to login"),B.push("/");return}throw Error(e.error||`Failed to fetch documents: ${r.status} ${r.statusText}`)}let o=await r.json();z(o.documents||[]),W(null),s.default.setLastAuthCheck(t)}else await s.default.logout(),B.push("/")}catch(e){console.error("Error during visibility change auth check:",e)}}}};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[$,H,q,B]);let ew=async()=>{if(M&&I){try{if(0===U.length&&Y(!0),!M||!I)return;let e=await s.default.getAccessToken();if(!e){await s.default.logout(),B.push("/");return}let t=new URLSearchParams;$&&t.append("search",$),H&&"all"!==H&&t.append("category",H),q&&t.append("unit",q);let a=await fetch(`/api/documents?${t.toString()}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){let e={};try{e=await a.json()}catch(t){e={error:`HTTP error! status: ${a.status}`}}if(401===a.status){console.error("Authentication token expired, redirecting to login"),B.push("/");return}throw Error(e.error||`Failed to fetch documents: ${a.status} ${a.statusText}`)}let r=await a.json();z(r.documents||[]),W(null)}catch(e){console.error("Error fetching documents:",e),W(e instanceof Error?e.message:"Failed to load documents. Please try again later."),Y(!1);return}Y(!1)}};return((0,a.useEffect)(()=>{M&&!L&&I&&ew()},[M,L,I,$,H,q]),L)?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4 overflow-hidden",children:(0,t.jsx)(T.default,{src:"/LSPULogo.png",alt:"LSPU Logo",width:64,height:64,className:"object-contain animate-spin"})}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading repository..."})]})}):M||L||null!==I?I||L?(0,t.jsx)(E.ClientOnly,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(n.Navbar,{}),(0,t.jsxs)("div",{className:"flex",children:[ev&&(0,t.jsx)("div",{className:"w-64 border-r bg-muted/10 hidden lg:block",children:(0,t.jsx)(P.UnitSidebar,{units:eg,currentUnit:q,onUnitSelect:e=>{e?B.push(`/units/${e}`):B.push("/repository")},userRole:I?.role||"",userUnit:I?.unitId||null})}),(0,t.jsx)("main",{className:"flex-1 lg:ml-0",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-8 animate-fade-in",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>eb(!ev),children:ev?(0,t.jsx)(b.ChevronLeft,{className:"w-5 h-5"}):(0,t.jsx)(j.ChevronRight,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2",style:{color:"#2B4385"},children:"Knowledge Repository"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Browse and access institutional knowledge resources"})]})]}),M&&I&&ej&&(0,t.jsxs)(l.Button,{className:"gap-2 shadow-sm",style:{backgroundColor:"#2B4385",color:"white"},onClick:()=>G(!0),children:[(0,t.jsx)(m.Upload,{className:"w-4 h-4"}),"Upload Document"]})]})}),(0,t.jsx)("div",{className:"mb-6 animate-fade-in p-4 bg-white rounded-xl shadow-sm",style:{boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)"},children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(x.SearchIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)(i.Input,{placeholder:"Search documents or keywords...",value:$,onChange:e=>_(e.target.value),className:"pl-10 h-11 border-gray-200 focus:border-blue-500 focus:ring-blue-500",style:{borderRadius:"8px"}})]}),(0,t.jsxs)(D.Select,{value:H,onValueChange:V,children:[(0,t.jsxs)(D.SelectTrigger,{className:"w-full md:w-48 h-11",style:{backgroundColor:"#F9FAFB",borderRadius:"8px"},children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,t.jsx)(D.SelectValue,{placeholder:"Category"})]}),(0,t.jsx)(D.SelectContent,{children:["all","Uncategorized","Research","Academic","Policy","Extension","Teaching"].map(e=>(0,t.jsx)(D.SelectItem,{value:e,children:"all"===e?"All Categories":e},e))})]}),(0,t.jsxs)(D.Select,{value:q||"all",onValueChange:e=>Q("all"===e?null:e),children:[(0,t.jsxs)(D.SelectTrigger,{className:"w-full md:w-48 h-11",style:{backgroundColor:"#F9FAFB",borderRadius:"8px"},children:[(0,t.jsx)(v.Building2,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,t.jsx)(D.SelectValue,{placeholder:"All Units"})]}),(0,t.jsxs)(D.SelectContent,{children:[(0,t.jsx)(D.SelectItem,{value:"all",children:"All Units"}),eg.map(e=>(0,t.jsxs)(D.SelectItem,{value:e.id,children:[e.code," - ",e.name]},e.id))]})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map((a,r)=>{var o;let{icon:n,color:i,bgColor:p}=(e=>{switch(e?.split(".").pop()?.toLowerCase()){case"pdf":return{icon:u.FileText,color:"#EF4444",bgColor:"rgba(239, 68, 68, 0.1)"};case"doc":case"docx":return{icon:u.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"};case"xls":case"xlsx":return{icon:N.FileSpreadsheet,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"};case"jpg":case"jpeg":case"png":case"gif":return{icon:C.FileImage,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"};default:return{icon:k.File,color:"#6B7280",bgColor:"rgba(107, 114, 128, 0.1)"}}})(a.fileName||a.title),m=I&&("ADMIN"===I.role||a.uploadedById===I.id);return(0,t.jsxs)("div",{className:"animate-fade-in bg-white rounded-xl overflow-hidden transition-all duration-300 hover:shadow-xl group flex flex-col",style:{animationDelay:`${.05*r}s`,boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)",borderRadius:"12px"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,t.jsxs)("div",{className:"p-4 pb-0 flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center shrink-0",style:{backgroundColor:p},children:(0,t.jsx)(n,{className:"w-6 h-6",style:{color:i}})}),(m||a.isQproDocument)&&(0,t.jsxs)(F.DropdownMenu,{children:[(0,t.jsx)(F.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(w.MoreVertical,{className:"w-4 h-4 text-gray-500"})})}),(0,t.jsxs)(F.DropdownMenuContent,{align:"end",children:[a.isQproDocument&&(0,t.jsxs)(F.DropdownMenuItem,{onClick:async t=>{t.stopPropagation();try{let t=await s.default.getAccessToken();if(!t){await s.default.logout(),B.push("/");return}let r=await fetch(`/api/qpro/by-document/${a.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(r.ok){let t=await r.json();t.analysis?B.push(`/qpro/analysis/${t.analysis.id}`):e({title:"No Analysis Found",description:"This QPRO document hasn't been analyzed yet.",variant:"default"})}else e({title:"No Analysis Found",description:"This QPRO document hasn't been analyzed yet.",variant:"default"})}catch(t){console.error("Error fetching QPRO analysis:",t),e({title:"Error",description:"Failed to fetch QPRO analysis.",variant:"destructive"})}},children:[(0,t.jsx)(u.FileText,{className:"w-4 h-4 mr-2"}),"View QPRO Analysis"]}),m&&(0,t.jsxs)(F.DropdownMenuItem,{className:"text-red-600 focus:text-red-600 focus:bg-red-50",onClick:e=>{e.stopPropagation(),ex(a)},disabled:eu===a.id,children:[(0,t.jsx)(f.Trash2,{className:"w-4 h-4 mr-2"}),eu===a.id?"Deleting...":"Delete"]})]})]})]}),(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-1 min-h-[3.5rem]",children:a.title.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}),(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3 min-h-[2.5rem]",children:a.description}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mb-3",children:["Uploaded by ",a.uploadedBy," â€¢ ",(o=a.fileSize)<1024?o+" B":o<1048576?(o/1024).toFixed(1)+" KB":(o/1048576).toFixed(1)+" MB"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 min-h-[2rem]",children:[!q&&a.unit&&(0,t.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full",style:{backgroundColor:"rgba(43, 67, 133, 0.1)",color:"#2B4385"},children:a.unit.code||a.unit.name}),a.category&&"Uncategorized"!==a.category&&(0,t.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full",style:{backgroundColor:"#F3F4F6",color:"#6B7280"},children:a.category})]})]}),(0,t.jsxs)("div",{className:"px-4 pb-4 mt-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Download,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:a.downloadsCount})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Eye,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:a.viewsCount})]}),(0,t.jsxs)("span",{className:"ml-auto text-xs",children:["v",a.version]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[eh===a.id?(0,t.jsxs)(l.Button,{className:"flex-1 gap-2",size:"sm",disabled:!0,style:{backgroundColor:"#2B4385",color:"white",borderRadius:"8px"},children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Downloading..."]}):(0,t.jsxs)(l.Button,{className:"flex-1 gap-2",size:"sm",style:{backgroundColor:"#2B4385",color:"white",borderRadius:"8px"},onClick:async e=>{e.stopPropagation(),ef(a.id);try{if(!M||!I)return;let e=await s.default.getAccessToken();if(!e){await s.default.logout(),B.push("/");return}let t=`/api/documents/${a.id}/download-direct?token=${e}`,r=document.createElement("a");r.href=t,r.download=a.fileName||`document-${a.id}`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(e){console.error("Download error:",e),alert(e instanceof Error?e.message:"Failed to download document.")}finally{ef(null)}},children:[(0,t.jsx)(d.Download,{className:"w-4 h-4"}),"Download"]}),(0,t.jsxs)(l.Button,{className:"gap-2",size:"sm",variant:"ghost",style:{color:"#2B4385",borderRadius:"8px"},onClick:t=>{t.stopPropagation(),a.id&&"undefined"!==a.id&&!a.id.includes("undefined")?B.push(`/repository/preview/${a.id}`):e({title:"Error",description:"Cannot preview this document.",variant:"destructive"})},children:[(0,t.jsx)(h.EyeIcon,{className:"w-4 h-4"}),"Preview"]})]})]})]},a.id)})}),0===U.length&&!X&&(0,t.jsxs)("div",{className:"animate-fade-in bg-white rounded-xl p-12 text-center",style:{boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)",borderRadius:"12px"},children:[(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(43, 67, 133, 0.1)"},children:(0,t.jsx)(u.FileText,{className:"w-10 h-10",style:{color:"#2B4385"}})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Documents Found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"We couldn't find any documents matching your search criteria. Try adjusting your filters or search terms."}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{_(""),V("all"),Q(null)},style:{borderRadius:"8px"},children:"Clear Filters"}),ej&&(0,t.jsxs)(l.Button,{onClick:()=>G(!0),style:{backgroundColor:"#2B4385",color:"white",borderRadius:"8px"},children:[(0,t.jsx)(m.Upload,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})]})]})})]}),Z&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg max-w-md w-full p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upload Document"}),er&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-destructive/20 text-destructive rounded-md flex items-center gap-2",children:[(0,t.jsx)(y.XCircle,{className:"w-5 h-5"}),er]}),J&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${et}%`}})})}),el&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded-md flex items-center gap-2 animate-fade-in",children:[(0,t.jsx)(g.CheckCircle,{className:"w-5 h-5"}),el]}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),ee(!0),ea(0),es(null),ei(null);try{let t=new FormData(e.currentTarget),a=t.get("file");if(!a||0===a.size)throw Error("Please select a file to upload");if(!M||!I)return;let r=await s.default.getAccessToken();if(!r){await s.default.logout(),B.push("/");return}let o=new FormData;o.append("title",t.get("title")),o.append("description",t.get("description")),o.append("file",a);let n=t.get("unitId");n&&o.append("unitId",n);let l=new XMLHttpRequest;return new Promise((e,t)=>{l.upload.addEventListener("progress",e=>{if(e.lengthComputable){let t=Math.floor(e.loaded/e.total*100);ea(t),console.log(`Upload progress: ${t}% (${e.loaded} / ${e.total} bytes)`)}else console.log("Upload progress: Length not computable")}),l.addEventListener("loadstart",()=>{console.log("Upload loadstart event fired")}),l.addEventListener("loadend",()=>{console.log("Upload loadend event fired")}),l.upload.addEventListener("loadstart",()=>{console.log("Upload upload loadstart event fired")}),l.upload.addEventListener("loadend",()=>{console.log("Upload upload loadend event fired")}),l.upload.addEventListener("error",e=>{console.error("Upload error event fired:",e)}),l.upload.addEventListener("abort",e=>{console.log("Upload abort event fired:",e)}),l.addEventListener("readystatechange",()=>{console.log(`Ready state changed: ${l.readyState}`)}),l.addEventListener("load",()=>{if(l.status>=200&&l.status<300){let t=new URLSearchParams;$&&t.append("search",$),H&&"all"!==H&&t.append("category",H),fetch(`/api/documents?${t.toString()}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{z(t.documents||[]),G(!1),ei("Document uploaded successfully!"),setTimeout(()=>{ei(null)},3e3),en(!0),setTimeout(()=>{},100),e()}).catch(t=>{console.error("Failed to refresh documents:",t),G(!1),ei("Document uploaded successfully, but there was an issue refreshing the document list."),setTimeout(()=>{ei(null)},500),en(!0),e()})}else{let e={};try{e=JSON.parse(l.responseText)}catch{e={error:`Upload failed: ${l.status} - ${l.statusText||"Unknown error"}`}}let a=e.error||`Upload failed: ${l.status} ${l.statusText}`;es(a),ee(!1),ei(null),console.error("Upload error details:",{status:l.status,statusText:l.statusText,responseText:l.responseText,error:a}),t(Error(a))}}),l.addEventListener("error",()=>{es("Network error occurred during upload"),ee(!1),ei(null),t(Error("Network error occurred during upload"))}),l.addEventListener("abort",()=>{es("Upload was cancelled"),ee(!1),ei(null),t(Error("Upload was cancelled"))}),l.open("POST","/api/documents"),l.setRequestHeader("Authorization",`Bearer ${r}`),l.send(o)})}catch(e){console.error("Upload error:",e),es(e instanceof Error?e.message:"Failed to upload document"),ee(!1),ei(null)}},children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),(0,t.jsx)(i.Input,{name:"title",required:!0,placeholder:"Document title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,t.jsx)("textarea",{name:"description",className:"w-full min-h-20 p-2 border border-input rounded-md bg-background",placeholder:"Document description (optional)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"File *"}),(0,t.jsx)(i.Input,{type:"file",name:"file",required:!0,accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.jpg,.jpeg,.png"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Unit (Optional)"}),(0,t.jsxs)("select",{name:"unitId",className:"w-full p-2 border-input rounded-md bg-background",defaultValue:"",children:[(0,t.jsx)("option",{value:"",children:"Select a unit (or leave blank for unassigned)"}),eg.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.code," - ",e.name]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>{G(!1),ee(!1),ea(0),es(null),ei(null),en(!1)},disabled:J,children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",disabled:J,children:J?"Uploading...":"Upload"})]})]})]})}),(0,t.jsx)(A.Dialog,{open:eo,onOpenChange:en,children:(0,t.jsxs)(A.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(A.DialogHeader,{children:[(0,t.jsx)(A.DialogTitle,{children:"Upload Successful!"}),(0,t.jsx)(A.DialogDescription,{children:"Your document has been uploaded successfully to the repository."})]}),(0,t.jsx)("div",{className:"py-4 flex justify-center",children:(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/200/svg",className:"h-10 w-10 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(l.Button,{onClick:()=>{en(!1),ea(0),ee(!1),ei(null)},children:"OK"})})]})}),(0,t.jsx)(R.AlertDialog,{open:!!em,onOpenChange:e=>!e&&ex(null),children:(0,t.jsxs)(R.AlertDialogContent,{children:[(0,t.jsxs)(R.AlertDialogHeader,{children:[(0,t.jsx)(R.AlertDialogTitle,{children:"Are you sure?"}),(0,t.jsxs)(R.AlertDialogDescription,{children:["This will permanently delete ",(0,t.jsxs)("span",{className:"font-semibold",children:['"',em?.title,'"']}),". This action cannot be undone."]})]}),(0,t.jsxs)(R.AlertDialogFooter,{children:[(0,t.jsx)(R.AlertDialogCancel,{disabled:!!eu,children:"Cancel"}),(0,t.jsx)(R.AlertDialogAction,{disabled:!!eu,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",onClick:async t=>{if(t.preventDefault(),em){ep(em.id);try{if(!M||!I)return;let t=await s.default.getAccessToken();if(!t){await s.default.logout(),B.push("/");return}let a=await fetch(`/api/documents/${em.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(a.ok)ec("Document deleted successfully!"),setTimeout(()=>ec(null),3e3),ex(null),ew();else{let t=await a.json();e({title:403===a.status?"Access Denied":"Error",description:t.error||"Failed to delete document",variant:"destructive"})}}catch(t){e({title:"Error",description:"Failed to delete document",variant:"destructive"})}finally{ep(null)}}},children:eu?"Deleting...":"Delete"})]})]})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4 overflow-hidden",children:(0,t.jsx)(T.default,{src:"/LSPULogo.png",alt:"LSPU Logo",width:64,height:64,className:"object-contain animate-spin"})}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading user data..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4 overflow-hidden",children:(0,t.jsx)(T.default,{src:"/LSPULogo.png",alt:"LSPU Logo",width:64,height:64,className:"object-contain animate-spin"})}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Redirecting to login..."})]})})}e.s(["default",()=>I],9972)}]);