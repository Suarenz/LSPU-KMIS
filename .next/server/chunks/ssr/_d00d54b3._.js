module.exports=[22060,(a,b,c)=>{"use strict";var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),n=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),q=Symbol.for("react.client.reference");function r(a){if("object"==typeof a&&null!==a){var b=a.$$typeof;switch(b){case d:switch(a=a.type){case f:case h:case g:case l:case m:case p:return a;default:switch(a=a&&a.$$typeof){case j:case k:case o:case n:case i:return a;default:return b}}case e:return b}}}c.ContextConsumer=i,c.ContextProvider=j,c.Element=d,c.ForwardRef=k,c.Fragment=f,c.Lazy=o,c.Memo=n,c.Portal=e,c.Profiler=h,c.StrictMode=g,c.Suspense=l,c.SuspenseList=m,c.isContextConsumer=function(a){return r(a)===i},c.isContextProvider=function(a){return r(a)===j},c.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===d},c.isForwardRef=function(a){return r(a)===k},c.isFragment=function(a){return r(a)===f},c.isLazy=function(a){return r(a)===o},c.isMemo=function(a){return r(a)===n},c.isPortal=function(a){return r(a)===e},c.isProfiler=function(a){return r(a)===h},c.isStrictMode=function(a){return r(a)===g},c.isSuspense=function(a){return r(a)===l},c.isSuspenseList=function(a){return r(a)===m},c.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===f||a===h||a===g||a===l||a===m||"object"==typeof a&&null!==a&&(a.$$typeof===o||a.$$typeof===n||a.$$typeof===j||a.$$typeof===i||a.$$typeof===k||a.$$typeof===q||void 0!==a.getModuleId)||!1},c.typeOf=r},66539,(a,b,c)=>{"use strict";b.exports=a.r(22060)},47070,(a,b,c)=>{b.exports=function(a,b,c,d){var e=c?c.call(d,a,b):void 0;if(void 0!==e)return!!e;if(a===b)return!0;if("object"!=typeof a||!a||"object"!=typeof b||!b)return!1;var f=Object.keys(a),g=Object.keys(b);if(f.length!==g.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(b),i=0;i<f.length;i++){var j=f[i];if(!h(j))return!1;var k=a[j],l=b[j];if(!1===(e=c?c.call(d,k,l,j):void 0)||void 0===e&&k!==l)return!1}return!0}},42670,(a,b,c)=>{"use strict";var d="function"==typeof Symbol&&Symbol.for,e=d?Symbol.for("react.element"):60103,f=d?Symbol.for("react.portal"):60106,g=d?Symbol.for("react.fragment"):60107,h=d?Symbol.for("react.strict_mode"):60108,i=d?Symbol.for("react.profiler"):60114,j=d?Symbol.for("react.provider"):60109,k=d?Symbol.for("react.context"):60110,l=d?Symbol.for("react.async_mode"):60111,m=d?Symbol.for("react.concurrent_mode"):60111,n=d?Symbol.for("react.forward_ref"):60112,o=d?Symbol.for("react.suspense"):60113,p=d?Symbol.for("react.suspense_list"):60120,q=d?Symbol.for("react.memo"):60115,r=d?Symbol.for("react.lazy"):60116,s=d?Symbol.for("react.block"):60121,t=d?Symbol.for("react.fundamental"):60117,u=d?Symbol.for("react.responder"):60118,v=d?Symbol.for("react.scope"):60119;function w(a){if("object"==typeof a&&null!==a){var b=a.$$typeof;switch(b){case e:switch(a=a.type){case l:case m:case g:case i:case h:case o:return a;default:switch(a=a&&a.$$typeof){case k:case n:case r:case q:case j:return a;default:return b}}case f:return b}}}function x(a){return w(a)===m}c.AsyncMode=l,c.ConcurrentMode=m,c.ContextConsumer=k,c.ContextProvider=j,c.Element=e,c.ForwardRef=n,c.Fragment=g,c.Lazy=r,c.Memo=q,c.Portal=f,c.Profiler=i,c.StrictMode=h,c.Suspense=o,c.isAsyncMode=function(a){return x(a)||w(a)===l},c.isConcurrentMode=x,c.isContextConsumer=function(a){return w(a)===k},c.isContextProvider=function(a){return w(a)===j},c.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===e},c.isForwardRef=function(a){return w(a)===n},c.isFragment=function(a){return w(a)===g},c.isLazy=function(a){return w(a)===r},c.isMemo=function(a){return w(a)===q},c.isPortal=function(a){return w(a)===f},c.isProfiler=function(a){return w(a)===i},c.isStrictMode=function(a){return w(a)===h},c.isSuspense=function(a){return w(a)===o},c.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===g||a===m||a===i||a===h||a===o||a===p||"object"==typeof a&&null!==a&&(a.$$typeof===r||a.$$typeof===q||a.$$typeof===j||a.$$typeof===k||a.$$typeof===n||a.$$typeof===t||a.$$typeof===u||a.$$typeof===v||a.$$typeof===s)},c.typeOf=w},13036,(a,b,c)=>{"use strict";b.exports=a.r(42670)},32344,(a,b,c)=>{"use strict";var d=a.r(13036),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h={};function i(a){return d.isMemo(a)?g:h[a.$$typeof]||e}h[d.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h[d.Memo]=g;var j=Object.defineProperty,k=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,n=Object.getPrototypeOf,o=Object.prototype;b.exports=function a(b,c,d){if("string"!=typeof c){if(o){var e=n(c);e&&e!==o&&a(b,e,d)}var g=k(c);l&&(g=g.concat(l(c)));for(var h=i(b),p=i(c),q=0;q<g.length;++q){var r=g[q];if(!f[r]&&!(d&&d[r])&&!(p&&p[r])&&!(h&&h[r])){var s=m(c,r);try{j(b,r,s)}catch(a){}}}}return b}},16336,(a,b,c)=>{!function(d,e){if("function"==typeof define&&define.amd){let d;void 0!==(d=e(a.r,c,b))&&a.v(d)}else b.exports=e()}(a.e,function(){var a=function(b,c,d){this._byteOffset=c||0,b instanceof ArrayBuffer?this.buffer=b:"object"==typeof b?(this.dataView=b,c&&(this._byteOffset+=c)):this.buffer=new ArrayBuffer(b||1),this.position=0,this.endianness=null==d?a.LITTLE_ENDIAN:d};return a.prototype={},void 0===Uint8Array.prototype.BYTES_PER_ELEMENT&&(Uint8Array.prototype.BYTES_PER_ELEMENT=Uint8Array.BYTES_PER_ELEMENT,Int8Array.prototype.BYTES_PER_ELEMENT=Int8Array.BYTES_PER_ELEMENT,Uint8ClampedArray.prototype.BYTES_PER_ELEMENT=Uint8ClampedArray.BYTES_PER_ELEMENT,Uint16Array.prototype.BYTES_PER_ELEMENT=Uint16Array.BYTES_PER_ELEMENT,Int16Array.prototype.BYTES_PER_ELEMENT=Int16Array.BYTES_PER_ELEMENT,Uint32Array.prototype.BYTES_PER_ELEMENT=Uint32Array.BYTES_PER_ELEMENT,Int32Array.prototype.BYTES_PER_ELEMENT=Int32Array.BYTES_PER_ELEMENT,Float64Array.prototype.BYTES_PER_ELEMENT=Float64Array.BYTES_PER_ELEMENT),a.prototype.save=function(a){var b=new Blob(this.buffer),c=window.webkitURL||window.URL;if(c&&c.createObjectURL){var d=c.createObjectURL(b),e=document.createElement("a");e.setAttribute("href",d),e.setAttribute("download",a),e.click(),c.revokeObjectURL(d)}else throw"DataStream.save: Can't create object URL."},a.BIG_ENDIAN=!1,a.LITTLE_ENDIAN=!0,a.prototype._dynamicSize=!0,Object.defineProperty(a.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(a){a||this._trimAlloc(),this._dynamicSize=a}}),a.prototype._byteLength=0,Object.defineProperty(a.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(a){this._buffer=a,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(a.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(a){this._byteOffset=a,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(a.prototype,"dataView",{get:function(){return this._dataView},set:function(a){this._byteOffset=a.byteOffset,this._buffer=a.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+a.byteLength}}),a.prototype._realloc=function(a){if(this._dynamicSize){var b=this._byteOffset+this.position+a,c=this._buffer.byteLength;if(b<=c){b>this._byteLength&&(this._byteLength=b);return}for(c<1&&(c=1);b>c;)c*=2;var d=new ArrayBuffer(c),e=new Uint8Array(this._buffer);new Uint8Array(d,0,e.length).set(e),this.buffer=d,this._byteLength=b}},a.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var a=new ArrayBuffer(this._byteLength),b=new Uint8Array(a),c=new Uint8Array(this._buffer,0,b.length);b.set(c),this.buffer=a}},a.prototype.seek=function(a){var b=Math.max(0,Math.min(this.byteLength,a));this.position=isNaN(b)||!isFinite(b)?0:b},a.prototype.isEof=function(){return this.position>=this.byteLength},a.prototype.mapInt32Array=function(b,c){this._realloc(4*b);var d=new Int32Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=4*b,d},a.prototype.mapInt16Array=function(b,c){this._realloc(2*b);var d=new Int16Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=2*b,d},a.prototype.mapInt8Array=function(a){this._realloc(+a);var b=new Int8Array(this._buffer,this.byteOffset+this.position,a);return this.position+=+a,b},a.prototype.mapUint32Array=function(b,c){this._realloc(4*b);var d=new Uint32Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=4*b,d},a.prototype.mapUint16Array=function(b,c){this._realloc(2*b);var d=new Uint16Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=2*b,d},a.prototype.mapUint8Array=function(a){this._realloc(+a);var b=new Uint8Array(this._buffer,this.byteOffset+this.position,a);return this.position+=+a,b},a.prototype.mapFloat64Array=function(b,c){this._realloc(8*b);var d=new Float64Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=8*b,d},a.prototype.mapFloat32Array=function(b,c){this._realloc(4*b);var d=new Float32Array(this._buffer,this.byteOffset+this.position,b);return a.arrayToNative(d,null==c?this.endianness:c),this.position+=4*b,d},a.prototype.readInt32Array=function(b,c){var d=new Int32Array(b=null==b?this.byteLength-this.position/4:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.readInt16Array=function(b,c){var d=new Int16Array(b=null==b?this.byteLength-this.position/2:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.readInt8Array=function(b){var c=new Int8Array(b=null==b?this.byteLength-this.position:b);return a.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,b*c.BYTES_PER_ELEMENT),this.position+=c.byteLength,c},a.prototype.readUint32Array=function(b,c){var d=new Uint32Array(b=null==b?this.byteLength-this.position/4:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.readUint16Array=function(b,c){var d=new Uint16Array(b=null==b?this.byteLength-this.position/2:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.readUint8Array=function(b){var c=new Uint8Array(b=null==b?this.byteLength-this.position:b);return a.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,b*c.BYTES_PER_ELEMENT),this.position+=c.byteLength,c},a.prototype.readFloat64Array=function(b,c){var d=new Float64Array(b=null==b?this.byteLength-this.position/8:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.readFloat32Array=function(b,c){var d=new Float32Array(b=null==b?this.byteLength-this.position/4:b);return a.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,b*d.BYTES_PER_ELEMENT),a.arrayToNative(d,null==c?this.endianness:c),this.position+=d.byteLength,d},a.prototype.writeInt32Array=function(b,c){if(this._realloc(4*b.length),b instanceof Int32Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapInt32Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeInt32(b[d],c)},a.prototype.writeInt16Array=function(b,c){if(this._realloc(2*b.length),b instanceof Int16Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapInt16Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeInt16(b[d],c)},a.prototype.writeInt8Array=function(b){if(this._realloc(+b.length),b instanceof Int8Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapInt8Array(b.length);else for(var c=0;c<b.length;c++)this.writeInt8(b[c])},a.prototype.writeUint32Array=function(b,c){if(this._realloc(4*b.length),b instanceof Uint32Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapUint32Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeUint32(b[d],c)},a.prototype.writeUint16Array=function(b,c){if(this._realloc(2*b.length),b instanceof Uint16Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapUint16Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeUint16(b[d],c)},a.prototype.writeUint8Array=function(b){if(this._realloc(+b.length),b instanceof Uint8Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapUint8Array(b.length);else for(var c=0;c<b.length;c++)this.writeUint8(b[c])},a.prototype.writeFloat64Array=function(b,c){if(this._realloc(8*b.length),b instanceof Float64Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapFloat64Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeFloat64(b[d],c)},a.prototype.writeFloat32Array=function(b,c){if(this._realloc(4*b.length),b instanceof Float32Array&&this.byteOffset+this.position%b.BYTES_PER_ELEMENT==0)a.memcpy(this._buffer,this.byteOffset+this.position,b.buffer,0,b.byteLength),this.mapFloat32Array(b.length,c);else for(var d=0;d<b.length;d++)this.writeFloat32(b[d],c)},a.prototype.readInt32=function(a){var b=this._dataView.getInt32(this.position,null==a?this.endianness:a);return this.position+=4,b},a.prototype.readInt=function(a){return this.seek(a),this.readInt32()},a.prototype.readInt16=function(a){var b=this._dataView.getInt16(this.position,null==a?this.endianness:a);return this.position+=2,b},a.prototype.readShort=function(a){return this.seek(a),this.readInt16()},a.prototype.readInt8=function(){var a=this._dataView.getInt8(this.position);return this.position+=1,a},a.prototype.readByte=function(a){return this.seek(a),this.readInt8()},a.prototype.readUint32=function(a){var b=this._dataView.getUint32(this.position,null==a?this.endianness:a);return this.position+=4,b},a.prototype.readUint16=function(a){var b=this._dataView.getUint16(this.position,null==a?this.endianness:a);return this.position+=2,b},a.prototype.readUint8=function(){var a=this._dataView.getUint8(this.position);return this.position+=1,a},a.prototype.readFloat32=function(a){var b=this._dataView.getFloat32(this.position,null==a?this.endianness:a);return this.position+=4,b},a.prototype.readFloat64=function(a){var b=this._dataView.getFloat64(this.position,null==a?this.endianness:a);return this.position+=8,b},a.prototype.writeInt32=function(a,b){this._realloc(4),this._dataView.setInt32(this.position,a,null==b?this.endianness:b),this.position+=4},a.prototype.writeInt16=function(a,b){this._realloc(2),this._dataView.setInt16(this.position,a,null==b?this.endianness:b),this.position+=2},a.prototype.writeInt8=function(a){this._realloc(1),this._dataView.setInt8(this.position,a),this.position+=1},a.prototype.writeUint32=function(a,b){this._realloc(4),this._dataView.setUint32(this.position,a,null==b?this.endianness:b),this.position+=4},a.prototype.writeUint16=function(a,b){this._realloc(2),this._dataView.setUint16(this.position,a,null==b?this.endianness:b),this.position+=2},a.prototype.writeUint8=function(a){this._realloc(1),this._dataView.setUint8(this.position,a),this.position+=1},a.prototype.writeFloat32=function(a,b){this._realloc(4),this._dataView.setFloat32(this.position,a,null==b?this.endianness:b),this.position+=4},a.prototype.writeFloat64=function(a,b){this._realloc(8),this._dataView.setFloat64(this.position,a,null==b?this.endianness:b),this.position+=8},a.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,a.memcpy=function(a,b,c,d,e){var f=new Uint8Array(a,b,e),g=new Uint8Array(c,d,e);f.set(g)},a.arrayToNative=function(a,b){return b==this.endianness?a:this.flipArrayEndianness(a)},a.nativeToEndian=function(a,b){return this.endianness==b?a:this.flipArrayEndianness(a)},a.flipArrayEndianness=function(a){for(var b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),c=0;c<a.byteLength;c+=a.BYTES_PER_ELEMENT)for(var d=c+a.BYTES_PER_ELEMENT-1,e=c;d>e;d--,e++){var f=b[e];b[e]=b[d],b[d]=f}return a},a.createStringFromArray=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},a.prototype.failurePosition=0,a.prototype.readStruct=function(a){for(var b,c,d={},e=this.position,f=0;f<a.length;f+=2){if(b=a[f+1],null==(c=this.readType(b,d)))return 0==this.failurePosition&&(this.failurePosition=this.position),this.position=e,null;d[a[f]]=c}return d},a.prototype.readUCS2String=function(b,c){return a.createStringFromArray(this.readUint16Array(b,c))},a.prototype.readStringAt=function(a,b){return this.seek(a),this.readUCS2String(b)},a.prototype.writeUCS2String=function(a,b,c){null==c&&(c=a.length);for(var d=0;d<a.length&&d<c;d++)this.writeUint16(a.charCodeAt(d),b);for(;d<c;d++)this.writeUint16(0)},a.prototype.readString=function(b,c){return null==c||"ASCII"==c?a.createStringFromArray(this.mapUint8Array(null==b?this.byteLength-this.position:b)):new TextDecoder(c).decode(this.mapUint8Array(b))},a.prototype.writeString=function(a,b,c){if(null==b||"ASCII"==b)if(null!=c){var d=0,e=Math.min(a.length,c);for(d=0;d<e;d++)this.writeUint8(a.charCodeAt(d));for(;d<c;d++)this.writeUint8(0)}else for(var d=0;d<a.length;d++)this.writeUint8(a.charCodeAt(d));else this.writeUint8Array(new TextEncoder(b).encode(a.substring(0,c)))},a.prototype.readCString=function(b){var c=this.byteLength-this.position,d=new Uint8Array(this._buffer,this._byteOffset+this.position),e=c;null!=b&&(e=Math.min(b,c));for(var f=0;f<e&&0!=d[f];f++);var g=a.createStringFromArray(this.mapUint8Array(f));return null!=b?this.position+=e-f:f!=c&&(this.position+=1),g},a.prototype.writeCString=function(a,b){if(null!=b){var c=0,d=Math.min(a.length,b);for(c=0;c<d;c++)this.writeUint8(a.charCodeAt(c));for(;c<b;c++)this.writeUint8(0)}else{for(var c=0;c<a.length;c++)this.writeUint8(a.charCodeAt(c));this.writeUint8(0)}},a.prototype.readType=function(b,c){if("function"==typeof b)return b(this,c);if("object"==typeof b&&!(b instanceof Array))return b.get(this,c);if(b instanceof Array&&3!=b.length)return this.readStruct(b,c);var d,e=null,f=null,g="ASCII",h=this.position;if("string"==typeof b&&/:/.test(b)){var i=b.split(":");b=i[0],f=null!=c[d=i[1]]?parseInt(c[d]):parseInt(i[1])}if("string"==typeof b&&/,/.test(b)){var i=b.split(",");b=i[0],g=parseInt(i[1])}switch(b){case"uint8":e=this.readUint8();break;case"int8":e=this.readInt8();break;case"uint16":e=this.readUint16(this.endianness);break;case"int16":e=this.readInt16(this.endianness);break;case"uint32":e=this.readUint32(this.endianness);break;case"int32":e=this.readInt32(this.endianness);break;case"float32":e=this.readFloat32(this.endianness);break;case"float64":e=this.readFloat64(this.endianness);break;case"uint16be":e=this.readUint16(a.BIG_ENDIAN);break;case"int16be":e=this.readInt16(a.BIG_ENDIAN);break;case"uint32be":e=this.readUint32(a.BIG_ENDIAN);break;case"int32be":e=this.readInt32(a.BIG_ENDIAN);break;case"float32be":e=this.readFloat32(a.BIG_ENDIAN);break;case"float64be":e=this.readFloat64(a.BIG_ENDIAN);break;case"uint16le":e=this.readUint16(a.LITTLE_ENDIAN);break;case"int16le":e=this.readInt16(a.LITTLE_ENDIAN);break;case"uint32le":e=this.readUint32(a.LITTLE_ENDIAN);break;case"int32le":e=this.readInt32(a.LITTLE_ENDIAN);break;case"float32le":e=this.readFloat32(a.LITTLE_ENDIAN);break;case"float64le":e=this.readFloat64(a.LITTLE_ENDIAN);break;case"cstring":e=this.readCString(f);break;case"string":e=this.readString(f,g);break;case"u16string":e=this.readUCS2String(f,this.endianness);break;case"u16stringle":e=this.readUCS2String(f,a.LITTLE_ENDIAN);break;case"u16stringbe":e=this.readUCS2String(f,a.BIG_ENDIAN);break;default:if(3==b.length){var j=b[1],d=b[2],k=0;if(k="function"==typeof d?d(c,this,b):"string"==typeof d&&null!=c[d]?parseInt(c[d]):parseInt(d),"string"==typeof j){var l=j.replace(/(le|be)$/,""),m=null;switch(/le$/.test(j)?m=a.LITTLE_ENDIAN:/be$/.test(j)&&(m=a.BIG_ENDIAN),"*"==d&&(k=null),l){case"uint8":e=this.readUint8Array(k);break;case"uint16":e=this.readUint16Array(k,m);break;case"uint32":e=this.readUint32Array(k,m);break;case"int8":e=this.readInt8Array(k);break;case"int16":e=this.readInt16Array(k,m);break;case"int32":e=this.readInt32Array(k,m);break;case"float32":e=this.readFloat32Array(k,m);break;case"float64":e=this.readFloat64Array(k,m);break;case"cstring":case"utf16string":case"string":if(null==k)for(e=[];!this.isEof();){var n=this.readType(j,c);if(null==n)break;e.push(n)}else{e=Array(k);for(var o=0;o<k;o++)e[o]=this.readType(j,c)}}}else if("*"==d)for(e=[],this.buffer;;){var p=this.position;try{var q=this.readType(j,c);if(null==q){this.position=p;break}e.push(q)}catch(a){this.position=p;break}}else{e=Array(k);for(var o=0;o<k;o++){var n=this.readType(j,c);if(null==n)return null;e[o]=n}}}}return null!=f&&(this.position=h+f),e},a.prototype.writeStruct=function(a,b){for(var c=0;c<a.length;c+=2){var d=a[c+1];this.writeType(d,b[a[c]],b)}},a.prototype.writeType=function(b,c,d){if("function"==typeof b)return b(this,c);if("object"==typeof b&&!(b instanceof Array))return b.set(this,c,d);var e=null,f="ASCII",g=this.position;if("string"==typeof b&&/:/.test(b)){var h=b.split(":");b=h[0],e=parseInt(h[1])}if("string"==typeof b&&/,/.test(b)){var h=b.split(",");b=h[0],f=parseInt(h[1])}switch(b){case"uint8":this.writeUint8(c);break;case"int8":this.writeInt8(c);break;case"uint16":this.writeUint16(c,this.endianness);break;case"int16":this.writeInt16(c,this.endianness);break;case"uint32":this.writeUint32(c,this.endianness);break;case"int32":this.writeInt32(c,this.endianness);break;case"float32":this.writeFloat32(c,this.endianness);break;case"float64":this.writeFloat64(c,this.endianness);break;case"uint16be":this.writeUint16(c,a.BIG_ENDIAN);break;case"int16be":this.writeInt16(c,a.BIG_ENDIAN);break;case"uint32be":this.writeUint32(c,a.BIG_ENDIAN);break;case"int32be":this.writeInt32(c,a.BIG_ENDIAN);break;case"float32be":this.writeFloat32(c,a.BIG_ENDIAN);break;case"float64be":this.writeFloat64(c,a.BIG_ENDIAN);break;case"uint16le":this.writeUint16(c,a.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(c,a.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(c,a.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(c,a.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(c,a.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(c,a.LITTLE_ENDIAN);break;case"cstring":this.writeCString(c,e);break;case"string":this.writeString(c,f,e);break;case"u16string":this.writeUCS2String(c,this.endianness,e);break;case"u16stringle":this.writeUCS2String(c,a.LITTLE_ENDIAN,e);break;case"u16stringbe":this.writeUCS2String(c,a.BIG_ENDIAN,e);break;default:if(3==b.length)for(var i=b[1],j=0;j<c.length;j++)this.writeType(i,c[j]);else this.writeStruct(b,c)}null!=e&&(this.position=g,this._realloc(e),this.position=g+e)},a})},70429,(a,b,c)=>{!function(c,d){if("function"==typeof define&&define.amd){let b;void 0!==(b=d(a.r(16336)))&&a.v(b)}else b.exports=d(a.r(16336))}(a.e,function(a){var b={FILE_HEADER:function(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c]<<24>>24;return b}([208,207,17,224,161,177,26,225]),MSG:{UNUSED_BLOCK:-1,END_OF_CHAIN:-2,S_BIG_BLOCK_SIZE:512,S_BIG_BLOCK_MARK:9,L_BIG_BLOCK_SIZE:4096,L_BIG_BLOCK_MARK:12,SMALL_BLOCK_SIZE:64,BIG_BLOCK_MIN_DOC_SIZE:4096,HEADER:{PROPERTY_START_OFFSET:48,BAT_START_OFFSET:76,BAT_COUNT_OFFSET:44,SBAT_START_OFFSET:60,SBAT_COUNT_OFFSET:64,XBAT_START_OFFSET:68,XBAT_COUNT_OFFSET:72},PROP:{NO_INDEX:-1,PROPERTY_SIZE:128,NAME_SIZE_OFFSET:64,MAX_NAME_LENGTH:31,TYPE_OFFSET:66,PREVIOUS_PROPERTY_OFFSET:68,NEXT_PROPERTY_OFFSET:72,CHILD_PROPERTY_OFFSET:76,START_BLOCK_OFFSET:116,SIZE_OFFSET:120,TYPE_ENUM:{DIRECTORY:1,DOCUMENT:2,ROOT:5}},FIELD:{PREFIX:{ATTACHMENT:"__attach_version1.0",RECIPIENT:"__recip_version1.0",DOCUMENT:"__substg1."},NAME_MAPPING:{"0037":"subject","0c1a":"senderName","5d02":"senderEmail",1e3:"body","007d":"headers",3703:"extension",3704:"fileNameShort",3707:"fileName",3712:"pidContentId",3001:"name","39fe":"email"},CLASS_MAPPING:{ATTACHMENT_DATA:"3701"},TYPE_MAPPING:{"001e":"string","001f":"unicode","0102":"binary"},DIR_TYPE:{INNER_MSG:"000d"}}}};function c(a,b){return(b+1)*a.bigBlockSize}function d(a,b,d){var e=c(b,d);return a.seek(e),a.readInt32Array(b.bigBlockLength)}function e(a,b,c,e){var f=Math.floor(c/b.bigBlockLength),g=c%b.bigBlockLength;return d(a,b,e[f])[g]}function f(a,b,c){return e(a,b,c,b.batData)}function g(a){var c=(b.MSG.S_BIG_BLOCK_SIZE-b.MSG.HEADER.BAT_START_OFFSET)/4;return Math.min(a.batCount,c)}function h(a){return a.name.substring(12).toLowerCase().substring(4,8)}var i={extractor:function(c,d,f,g){var h=function(a,c,d){for(var f=[],g=d.startBlock;g!=b.MSG.END_OF_CHAIN;)f.push(g),g=e(a,c,g,c.sbatData);return f}(c,d,f);return 1==h.length?k(c,d,f.startBlock,f.sizeBlock,g):h.length>1?function(c,d,e,f,g){for(var h=new Int8Array(e.sizeBlock),j=0,l=0;j<f.length;j++)for(var m=k(c,d,f[j],b.MSG.SMALL_BLOCK_SIZE,i.dataType.binary),n=0;n<m.length;n++)h[l++]=m[n];return g(new a(h,0,a.LITTLE_ENDIAN),d,0,0,e.sizeBlock)}(c,d,f,h,g):null},dataType:{string:function(a,b,c,d,e){return a.seek(c+d),a.readString(e)},unicode:function(a,b,c,d,e){return a.seek(c+d),a.readUCS2String(e/2)},binary:function(a,c,d,e,f){a.seek(d+e);var g=Math.min(Math.min(c.bigBlockSize-e,f),b.MSG.SMALL_BLOCK_SIZE);return a.readUint8Array(g)}}},j={extractor:function(a,b,d,e){var f=c(b,d.startBlock);return a.seek(f),e(a,d)},dataType:{string:function(a,b){return a.readString(b.sizeBlock)},unicode:function(a,b){return a.readUCS2String(b.sizeBlock/2)},binary:function(a,b){return a.readUint8Array(b.sizeBlock)}}};function k(a,d,e,g,h){for(var i=e*b.MSG.SMALL_BLOCK_SIZE,j=Math.floor(i/d.bigBlockSize),k=i%d.bigBlockSize,l=d.propertyData[0].startBlock,m=0;m<j;m++)l=f(a,d,l);var n=c(d,l);return h(a,d,n,k,g)}function l(a,c,d,e){var f=null,g=d.sizeBlock<b.MSG.BIG_BLOCK_MIN_DOC_SIZE?i:j,h=g.dataType[b.MSG.FIELD.TYPE_MAPPING[e]];return h&&(f=g.extractor(a,c,d,h)),f}var m=function(b){this.ds=new a(b,0,a.LITTLE_ENDIAN)};return m.prototype={getFileData:function(){var a,e,i,j,k,m,n;if((a=this.ds).seek(0),!function(a,b){if(a===b)return!0;if(null==a||null==b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}(b.FILE_HEADER,a.readInt8Array(b.FILE_HEADER.length)))return{error:"Unsupported file type!"};return null==this.fileData&&(this.fileData=((j=e=this.ds,(k={}).bigBlockSize=j.readByte(30)==b.MSG.L_BIG_BLOCK_MARK?b.MSG.L_BIG_BLOCK_SIZE:b.MSG.S_BIG_BLOCK_SIZE,k.bigBlockLength=k.bigBlockSize/4,k.xBlockLength=k.bigBlockLength-1,k.batCount=j.readInt(b.MSG.HEADER.BAT_COUNT_OFFSET),k.propertyStart=j.readInt(b.MSG.HEADER.PROPERTY_START_OFFSET),k.sbatStart=j.readInt(b.MSG.HEADER.SBAT_START_OFFSET),k.sbatCount=j.readInt(b.MSG.HEADER.SBAT_COUNT_OFFSET),k.xbatStart=j.readInt(b.MSG.HEADER.XBAT_START_OFFSET),k.xbatCount=j.readInt(b.MSG.HEADER.XBAT_COUNT_OFFSET),i=k).batData=function(a,c){var d=Array(g(c));a.seek(b.MSG.HEADER.BAT_START_OFFSET);for(var e=0;e<d.length;e++)d[e]=a.readInt32();return d}(e,i),i.sbatData=function(a,c){for(var d=[],e=c.sbatStart,g=0;g<c.sbatCount&&e!=b.MSG.END_OF_CHAIN;g++)d.push(e),e=f(a,c,e);return d}(e,i),i.xbatCount>0&&function(a,c){for(var e=g(c),f=c.batCount-e,h=c.xbatStart,i=0;i<c.xbatCount;i++){var j=d(a,c,h);h=j[c.xBlockLength];for(var k=Math.min(f,c.xBlockLength),l=0;l<k;l++){var m=j[l];if(m==b.MSG.UNUSED_BLOCK||m==b.MSG.END_OF_CHAIN)break;c.batData.push(m)}f-=k}}(e,i),i.propertyData=function(a,d){for(var e=[],g=d.propertyStart;g!=b.MSG.END_OF_CHAIN;)(function(a,d,e,f){for(var g=d.bigBlockSize/b.MSG.PROP.PROPERTY_SIZE,h=c(d,e),i=0;i<g;i++){switch(a.readByte(h+b.MSG.PROP.TYPE_OFFSET)){case b.MSG.PROP.TYPE_ENUM.ROOT:case b.MSG.PROP.TYPE_ENUM.DIRECTORY:case b.MSG.PROP.TYPE_ENUM.DOCUMENT:f.push(function(a,c,d){var e;return{index:c,type:a.readByte(d+b.MSG.PROP.TYPE_OFFSET),name:(e=a.readShort(d+b.MSG.PROP.NAME_SIZE_OFFSET))<1?"":a.readStringAt(d,e/2),previousProperty:a.readInt(d+b.MSG.PROP.PREVIOUS_PROPERTY_OFFSET),nextProperty:a.readInt(d+b.MSG.PROP.NEXT_PROPERTY_OFFSET),childProperty:a.readInt(d+b.MSG.PROP.CHILD_PROPERTY_OFFSET),startBlock:a.readInt(d+b.MSG.PROP.START_BLOCK_OFFSET),sizeBlock:a.readInt(d+b.MSG.PROP.SIZE_OFFSET)}}(a,f.length,h));break;default:f.push(null)}h+=b.MSG.PROP.PROPERTY_SIZE}})(a,d,g,e),g=f(a,d,g);return function a(c,d){if(d.childProperty!=b.MSG.PROP.NO_INDEX){d.children=[];for(var e=[d.childProperty];0!=e.length;){var f=e.shift(),g=c[f];null!=g&&(d.children.push(f),g.type==b.MSG.PROP.TYPE_ENUM.DIRECTORY&&a(c,g),g.previousProperty!=b.MSG.PROP.NO_INDEX&&e.push(g.previousProperty),g.nextProperty!=b.MSG.PROP.NO_INDEX&&e.push(g.nextProperty))}}}(e,e[0]),e}(e,i),n={attachments:[],recipients:[]},function a(c,d,e,f){if(e.children&&e.children.length>0)for(var g=0;g<e.children.length;g++){var i=d.propertyData[e.children[g]];i.type==b.MSG.PROP.TYPE_ENUM.DIRECTORY?function(c,d,e,f){if(0==e.name.indexOf(b.MSG.FIELD.PREFIX.ATTACHMENT)){var g={};f.attachments.push(g),a(c,d,e,g)}else if(0==e.name.indexOf(b.MSG.FIELD.PREFIX.RECIPIENT)){var i={};f.recipients.push(i),a(c,d,e,i)}else h(e)!=b.MSG.FIELD.DIR_TYPE.INNER_MSG?a(c,d,e,f):f.innerMsgContent=!0}(c,d,i,f):i.type==b.MSG.PROP.TYPE_ENUM.DOCUMENT&&0==i.name.indexOf(b.MSG.FIELD.PREFIX.DOCUMENT)&&function(a,c,d,e){var f=d.name.substring(12).toLowerCase(),g=f.substring(0,4),h=f.substring(4,8),i=b.MSG.FIELD.NAME_MAPPING[g];i&&(e[i]=l(a,c,d,h)),g==b.MSG.FIELD.CLASS_MAPPING.ATTACHMENT_DATA&&(e.dataId=d.index,e.contentLength=d.sizeBlock)}(c,d,i,f)}}(e,m=i,m.propertyData[0],n),i.fieldsData=n,i)),this.fileData.fieldsData},getAttachment:function(a){var b="number"==typeof a?this.fileData.fieldsData.attachments[a]:a,c=this.fileData.propertyData[b.dataId],d=l(this.ds,this.fileData,c,h(c));return{fileName:b.fileName,content:d}}},m})},72700,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DataStream=a.r(16336),c.MSGReader=a.r(70429)},29505,(a,b,c)=>{"use strict";b.exports=function(){}},61525,a=>{"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj=a.i(87924),ak=a.i(72131),al=a.i(50944),am=a.i(21937),an=a.i(10815),ao=a.i(40695),ap=a.i(3130),aq=a.i(54161),ar=a.i(84505),as=a.i(37236),at=a.i(4720),au=a.i(33508),av=a.i(73570),aw=a.i(59404),ax=a.i(70246),ay=a.i(50889),az=a.i(66539),aA=a.i(47070);let aB=function(a){function b(a,b,d){var e=b.trim().split(o);b=e;var f=e.length,g=a.length;switch(g){case 0:case 1:var h=0;for(a=0===g?"":a[0]+" ";h<f;++h)b[h]=c(a,b[h],d).trim();break;default:var i=h=0;for(b=[];h<f;++h)for(var j=0;j<g;++j)b[i++]=c(a[j]+" ",e[h],d).trim()}return b}function c(a,b,c){var d=b.charCodeAt(0);switch(33>d&&(d=(b=b.trim()).charCodeAt(0)),d){case 38:return b.replace(p,"$1"+a.trim());case 58:return a.trim()+b.replace(p,"$1"+a.trim());default:if(0<+c&&0<b.indexOf("\f"))return b.replace(p,(58===a.charCodeAt(0)?"":"$1")+a.trim())}return a+b}function d(a,b,c,f){var g=a+";",h=2*b+3*c+4*f;if(944===h){a=g.indexOf(":",9)+1;var i=g.substring(a,g.length-1).trim();return i=g.substring(0,a).trim()+i+";",1===D||2===D&&e(i,1)?"-webkit-"+i+i:i}if(0===D||2===D&&!e(g,1))return g;switch(h){case 1015:return 97===g.charCodeAt(10)?"-webkit-"+g+g:g;case 951:return 116===g.charCodeAt(3)?"-webkit-"+g+g:g;case 963:return 110===g.charCodeAt(5)?"-webkit-"+g+g:g;case 1009:if(100!==g.charCodeAt(4))break;case 969:case 942:return"-webkit-"+g+g;case 978:return"-webkit-"+g+"-moz-"+g+g;case 1019:case 983:return"-webkit-"+g+"-moz-"+g+"-ms-"+g+g;case 883:if(45===g.charCodeAt(8))return"-webkit-"+g+g;if(0<g.indexOf("image-set(",11))return g.replace(z,"$1-webkit-$2")+g;break;case 932:if(45===g.charCodeAt(4))switch(g.charCodeAt(5)){case 103:return"-webkit-box-"+g.replace("-grow","")+"-webkit-"+g+"-ms-"+g.replace("grow","positive")+g;case 115:return"-webkit-"+g+"-ms-"+g.replace("shrink","negative")+g;case 98:return"-webkit-"+g+"-ms-"+g.replace("basis","preferred-size")+g}return"-webkit-"+g+"-ms-"+g+g;case 964:return"-webkit-"+g+"-ms-flex-"+g+g;case 1023:if(99!==g.charCodeAt(8))break;return"-webkit-box-pack"+(i=g.substring(g.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+g+"-ms-flex-pack"+i+g;case 1005:return m.test(g)?g.replace(l,":-webkit-")+g.replace(l,":-moz-")+g:g;case 1e3:switch(b=(i=g.substring(13).trim()).indexOf("-")+1,i.charCodeAt(0)+i.charCodeAt(b)){case 226:i=g.replace(t,"tb");break;case 232:i=g.replace(t,"tb-rl");break;case 220:i=g.replace(t,"lr");break;default:return g}return"-webkit-"+g+"-ms-"+i+g;case 1017:if(-1===g.indexOf("sticky",9))break;case 975:switch(b=(g=a).length-10,h=(i=(33===g.charCodeAt(b)?g.substring(0,b):g).substring(a.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|i.charCodeAt(7))){case 203:if(111>i.charCodeAt(8))break;case 115:g=g.replace(i,"-webkit-"+i)+";"+g;break;case 207:case 102:g=g.replace(i,"-webkit-"+(102<h?"inline-":"")+"box")+";"+g.replace(i,"-webkit-"+i)+";"+g.replace(i,"-ms-"+i+"box")+";"+g}return g+";";case 938:if(45===g.charCodeAt(5))switch(g.charCodeAt(6)){case 105:return i=g.replace("-items",""),"-webkit-"+g+"-webkit-box-"+i+"-ms-flex-"+i+g;case 115:return"-webkit-"+g+"-ms-flex-item-"+g.replace(w,"")+g;default:return"-webkit-"+g+"-ms-flex-line-pack"+g.replace("align-content","").replace(w,"")+g}break;case 973:case 989:if(45!==g.charCodeAt(3)||122===g.charCodeAt(4))break;case 931:case 953:if(!0===y.test(a))return 115===(i=a.substring(a.indexOf(":")+1)).charCodeAt(0)?d(a.replace("stretch","fill-available"),b,c,f).replace(":fill-available",":stretch"):g.replace(i,"-webkit-"+i)+g.replace(i,"-moz-"+i.replace("fill-",""))+g;break;case 962:if(g="-webkit-"+g+(102===g.charCodeAt(5)?"-ms-"+g:"")+g,211===c+f&&105===g.charCodeAt(13)&&0<g.indexOf("transform",10))return g.substring(0,g.indexOf(";",27)+1).replace(n,"$1-webkit-$2")+g}return g}function e(a,b){var c=a.indexOf(1===b?":":"{"),d=a.substring(0,3!==b?c:10);return c=a.substring(c+1,a.length-1),H(2!==b?d:d.replace(x,"$1"),c,b)}function f(a,b){var c=d(b,b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2));return c!==b+";"?c.replace(v," or ($1)").substring(4):"("+b+")"}function g(a,b,c,d,e,f,g,h,j,k){for(var l,m=0,n=b;m<G;++m)switch(l=F[m].call(i,a,n,c,d,e,f,g,h,j,k)){case void 0:case!1:case!0:case null:break;default:n=l}if(n!==b)return n}function h(a){return void 0!==(a=a.prefix)&&(H=null,a?"function"!=typeof a?D=1:(D=2,H=a):D=0),h}function i(a,c){var h=a;if(33>h.charCodeAt(0)&&(h=h.trim()),h=[h],0<G){var i=g(-1,c,h,h,B,A,0,0,0,0);void 0!==i&&"string"==typeof i&&(c=i)}var l=function a(c,h,i,l,m){for(var n,o,p,t,v,w=0,x=0,y=0,z=0,F=0,H=0,J=p=n=0,K=0,L=0,M=0,N=0,O=i.length,P=O-1,Q="",R="",S="",T="";K<O;){if(o=i.charCodeAt(K),K===P&&0!==x+z+y+w&&(0!==x&&(o=47===x?10:47),z=y=w=0,O++,P++),0===x+z+y+w){if(K===P&&(0<L&&(Q=Q.replace(k,"")),0<Q.trim().length)){switch(o){case 32:case 9:case 59:case 13:case 10:break;default:Q+=i.charAt(K)}o=59}switch(o){case 123:for(n=(Q=Q.trim()).charCodeAt(0),p=1,N=++K;K<O;){switch(o=i.charCodeAt(K)){case 123:p++;break;case 125:p--;break;case 47:switch(o=i.charCodeAt(K+1)){case 42:case 47:a:{for(J=K+1;J<P;++J)switch(i.charCodeAt(J)){case 47:if(42===o&&42===i.charCodeAt(J-1)&&K+2!==J){K=J+1;break a}break;case 10:if(47===o){K=J+1;break a}}K=J}}break;case 91:o++;case 40:o++;case 34:case 39:for(;K++<P&&i.charCodeAt(K)!==o;);}if(0===p)break;K++}if(p=i.substring(N,K),0===n&&(n=(Q=Q.replace(j,"").trim()).charCodeAt(0)),64===n){switch(0<L&&(Q=Q.replace(k,"")),o=Q.charCodeAt(1)){case 100:case 109:case 115:case 45:L=h;break;default:L=E}if(N=(p=a(h,L,p,o,m+1)).length,0<G&&(v=g(3,p,L=b(E,Q,M),h,B,A,N,o,m,l),Q=L.join(""),void 0!==v&&0===(N=(p=v.trim()).length)&&(o=0,p="")),0<N)switch(o){case 115:Q=Q.replace(u,f);case 100:case 109:case 45:p=Q+"{"+p+"}";break;case 107:p=(Q=Q.replace(q,"$1 $2"))+"{"+p+"}",p=1===D||2===D&&e("@"+p,3)?"@-webkit-"+p+"@"+p:"@"+p;break;default:p=Q+p,112===l&&(R+=p,p="")}else p=""}else p=a(h,b(h,Q,M),p,l,m+1);S+=p,p=M=L=J=n=0,Q="",o=i.charCodeAt(++K);break;case 125:case 59:if(1<(N=(Q=(0<L?Q.replace(k,""):Q).trim()).length))switch(0===J&&(45===(n=Q.charCodeAt(0))||96<n&&123>n)&&(N=(Q=Q.replace(" ",":")).length),0<G&&void 0!==(v=g(1,Q,h,c,B,A,R.length,l,m,l))&&0===(N=(Q=v.trim()).length)&&(Q="\0\0"),n=Q.charCodeAt(0),o=Q.charCodeAt(1),n){case 0:break;case 64:if(105===o||99===o){T+=Q+i.charAt(K);break}default:58!==Q.charCodeAt(N-1)&&(R+=d(Q,n,o,Q.charCodeAt(2)))}M=L=J=n=0,Q="",o=i.charCodeAt(++K)}}switch(o){case 13:case 10:47===x?x=0:0===1+n&&107!==l&&0<Q.length&&(L=1,Q+="\0"),0<G*I&&g(0,Q,h,c,B,A,R.length,l,m,l),A=1,B++;break;case 59:case 125:if(0===x+z+y+w){A++;break}default:switch(A++,t=i.charAt(K),o){case 9:case 32:if(0===z+w+x)switch(F){case 44:case 58:case 9:case 32:t="";break;default:32!==o&&(t=" ")}break;case 0:t="\\0";break;case 12:t="\\f";break;case 11:t="\\v";break;case 38:0===z+x+w&&(L=M=1,t="\f"+t);break;case 108:if(0===z+x+w+C&&0<J)switch(K-J){case 2:112===F&&58===i.charCodeAt(K-3)&&(C=F);case 8:111===H&&(C=H)}break;case 58:0===z+x+w&&(J=K);break;case 44:0===x+y+z+w&&(L=1,t+="\r");break;case 34:case 39:0===x&&(z=z===o?0:0===z?o:z);break;case 91:0===z+x+y&&w++;break;case 93:0===z+x+y&&w--;break;case 41:0===z+x+w&&y--;break;case 40:0===z+x+w&&(0===n&&(2*F+3*H==533||(n=1)),y++);break;case 64:0===x+y+z+w+J+p&&(p=1);break;case 42:case 47:if(!(0<z+w+y))switch(x){case 0:switch(2*o+3*i.charCodeAt(K+1)){case 235:x=47;break;case 220:N=K,x=42}break;case 42:47===o&&42===F&&N+2!==K&&(33===i.charCodeAt(N+2)&&(R+=i.substring(N,K+1)),t="",x=0)}}0===x&&(Q+=t)}H=F,F=o,K++}if(0<(N=R.length)){if(L=h,0<G&&void 0!==(v=g(2,R,L,c,B,A,N,l,m,l))&&0===(R=v).length)return T+R+S;if(R=L.join(",")+"{"+R+"}",0!=D*C){switch(2!==D||e(R,2)||(C=0),C){case 111:R=R.replace(s,":-moz-$1")+R;break;case 112:R=R.replace(r,"::-webkit-input-$1")+R.replace(r,"::-moz-$1")+R.replace(r,":-ms-input-$1")+R}C=0}}return T+R+S}(E,h,c,0,0);return 0<G&&void 0!==(i=g(-2,l,h,h,B,A,l.length,0,0,0))&&(l=i),C=0,A=B=1,l}var j=/^\0+/g,k=/[\0\r\f]/g,l=/: */g,m=/zoo|gra/,n=/([,: ])(transform)/g,o=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,q=/@(k\w+)\s*(\S*)\s*/,r=/::(place)/g,s=/:(read-only)/g,t=/[svh]\w+-[tblr]{2}/,u=/\(\s*(.*)\s*\)/g,v=/([\s\S]*?);/g,w=/-self|flex-/g,x=/[^]*?(:[rp][el]a[\w-]+)[^]*/,y=/stretch|:\s*\w+\-(?:conte|avail)/,z=/([^-])(image-set\()/,A=1,B=1,C=0,D=1,E=[],F=[],G=0,H=null,I=0;return i.use=function a(b){switch(b){case void 0:case null:G=F.length=0;break;default:if("function"==typeof b)F[G++]=b;else if("object"==typeof b)for(var c=0,d=b.length;c<d;++c)a(b[c]);else I=0|!!b}return a},i.set=h,void 0!==a&&h(a),i},aC={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var aD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,aE=(d=function(a){return aD.test(a)||111===a.charCodeAt(0)&&110===a.charCodeAt(1)&&91>a.charCodeAt(2)},e=Object.create(null),function(a){return void 0===e[a]&&(e[a]=d(a)),e[a]}),aF=a.i(32344);function aG(){return(aG=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}var aH=function(a,b){for(var c=[a[0]],d=0,e=b.length;d<e;d+=1)c.push(b[d],a[d+1]);return c},aI=function(a){return null!==a&&"object"==typeof a&&"[object Object]"===(a.toString?a.toString():Object.prototype.toString.call(a))&&!(0,az.typeOf)(a)},aJ=Object.freeze([]),aK=Object.freeze({});function aL(a){return"function"==typeof a}function aM(a){return a.displayName||a.name||"Component"}function aN(a){return a&&"string"==typeof a.styledComponentId}var aO="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",aP=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&(void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY));function aQ(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];throw Error("An error occurred. See https://git.io/JUIaE#"+a+" for more information."+(c.length>0?" Args: "+c.join(", "):""))}var aR=function(){function a(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var b=a.prototype;return b.indexOfGroup=function(a){for(var b=0,c=0;c<a;c++)b+=this.groupSizes[c];return b},b.insertRules=function(a,b){if(a>=this.groupSizes.length){for(var c=this.groupSizes,d=c.length,e=d;a>=e;)(e<<=1)<0&&aQ(16,""+a);this.groupSizes=new Uint32Array(e),this.groupSizes.set(c),this.length=e;for(var f=d;f<e;f++)this.groupSizes[f]=0}for(var g=this.indexOfGroup(a+1),h=0,i=b.length;h<i;h++)this.tag.insertRule(g,b[h])&&(this.groupSizes[a]++,g++)},b.clearGroup=function(a){if(a<this.length){var b=this.groupSizes[a],c=this.indexOfGroup(a),d=c+b;this.groupSizes[a]=0;for(var e=c;e<d;e++)this.tag.deleteRule(c)}},b.getGroup=function(a){var b="";if(a>=this.length||0===this.groupSizes[a])return b;for(var c=this.groupSizes[a],d=this.indexOfGroup(a),e=d+c,f=d;f<e;f++)b+=this.tag.getRule(f)+"/*!sc*/\n";return b},a}(),aS=new Map,aT=new Map,aU=1,aV=function(a){if(aS.has(a))return aS.get(a);for(;aT.has(aU);)aU++;var b=aU++;return aS.set(a,b),aT.set(b,a),b},aW=RegExp("^"+aO+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),aX=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},aY=function(a){var b=document.head,c=a||b,d=document.createElement("style"),e=function(a){for(var b=a.childNodes,c=b.length;c>=0;c--){var d=b[c];if(d&&1===d.nodeType&&d.hasAttribute(aO))return d}}(c),f=void 0!==e?e.nextSibling:null;d.setAttribute(aO,"active"),d.setAttribute("data-styled-version","5.3.11");var g=aX();return g&&d.setAttribute("nonce",g),c.insertBefore(d,f),d},aZ=function(){function a(a){var b=this.element=aY(a);b.appendChild(document.createTextNode("")),this.sheet=function(a){if(a.sheet)return a.sheet;for(var b=document.styleSheets,c=0,d=b.length;c<d;c++){var e=b[c];if(e.ownerNode===a)return e}aQ(17)}(b),this.length=0}var b=a.prototype;return b.insertRule=function(a,b){try{return this.sheet.insertRule(b,a),this.length++,!0}catch(a){return!1}},b.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},b.getRule=function(a){var b=this.sheet.cssRules[a];return void 0!==b&&"string"==typeof b.cssText?b.cssText:""},a}(),a$=function(){function a(a){var b=this.element=aY(a);this.nodes=b.childNodes,this.length=0}var b=a.prototype;return b.insertRule=function(a,b){if(a<=this.length&&a>=0){var c=document.createTextNode(b),d=this.nodes[a];return this.element.insertBefore(c,d||null),this.length++,!0}return!1},b.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},b.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},a}(),a_=function(){function a(a){this.rules=[],this.length=0}var b=a.prototype;return b.insertRule=function(a,b){return a<=this.length&&(this.rules.splice(a,0,b),this.length++,!0)},b.deleteRule=function(a){this.rules.splice(a,1),this.length--},b.getRule=function(a){return a<this.length?this.rules[a]:""},a}(),a0={isServer:!0,useCSSOMInjection:!aP},a1=function(){function a(a,b,c){void 0===a&&(a=aK),void 0===b&&(b={}),this.options=aG({},a0,{},a),this.gs=b,this.names=new Map(c),this.server=!!a.isServer,this.server}a.registerId=function(a){return aV(a)};var b=a.prototype;return b.reconstructWithOptions=function(b,c){return void 0===c&&(c=!0),new a(aG({},this.options,{},b),this.gs,c&&this.names||void 0)},b.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},b.getTag=function(){var a,b,c,d;return this.tag||(this.tag=(b=(a=this.options).isServer,c=a.useCSSOMInjection,d=a.target,new aR(b?new a_(d):c?new aZ(d):new a$(d))))},b.hasNameForId=function(a,b){return this.names.has(a)&&this.names.get(a).has(b)},b.registerName=function(a,b){if(aV(a),this.names.has(a))this.names.get(a).add(b);else{var c=new Set;c.add(b),this.names.set(a,c)}},b.insertRules=function(a,b,c){this.registerName(a,b),this.getTag().insertRules(aV(a),c)},b.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},b.clearRules=function(a){this.getTag().clearGroup(aV(a)),this.clearNames(a)},b.clearTag=function(){this.tag=void 0},b.toString=function(){return function(a){for(var b=a.getTag(),c=b.length,d="",e=0;e<c;e++){var f,g=(f=e,aT.get(f));if(void 0!==g){var h=a.names.get(g),i=b.getGroup(e);if(h&&i&&h.size){var j=aO+".g"+e+'[id="'+g+'"]',k="";void 0!==h&&h.forEach(function(a){a.length>0&&(k+=a+",")}),d+=""+i+j+'{content:"'+k+'"}/*!sc*/\n'}}}return d}(this)},a}(),a2=/(a)(d)/gi,a3=function(a){return String.fromCharCode(a+(a>25?39:97))};function a4(a){var b,c="";for(b=Math.abs(a);b>52;b=b/52|0)c=a3(b%52)+c;return(a3(b%52)+c).replace(a2,"$1-$2")}var a5=function(a,b){for(var c=b.length;c;)a=33*a^b.charCodeAt(--c);return a},a6=function(a){return a5(5381,a)};function a7(a){for(var b=0;b<a.length;b+=1){var c=a[b];if(aL(c)&&!aN(c))return!1}return!0}var a8=a6("5.3.11"),a9=function(){function a(a,b,c){this.rules=a,this.staticRulesId="",this.isStatic=(void 0===c||c.isStatic)&&a7(a),this.componentId=b,this.baseHash=a5(a8,b),this.baseStyle=c,a1.registerId(b)}return a.prototype.generateAndInjectStyles=function(a,b,c){var d=this.componentId,e=[];if(this.baseStyle&&e.push(this.baseStyle.generateAndInjectStyles(a,b,c)),this.isStatic&&!c.hash)if(this.staticRulesId&&b.hasNameForId(d,this.staticRulesId))e.push(this.staticRulesId);else{var f=bq(this.rules,a,b,c).join(""),g=a4(a5(this.baseHash,f)>>>0);if(!b.hasNameForId(d,g)){var h=c(f,"."+g,void 0,d);b.insertRules(d,g,h)}e.push(g),this.staticRulesId=g}else{for(var i=this.rules.length,j=a5(this.baseHash,c.hash),k="",l=0;l<i;l++){var m=this.rules[l];if("string"==typeof m)k+=m;else if(m){var n=bq(m,a,b,c),o=Array.isArray(n)?n.join(""):n;j=a5(j,o+l),k+=o}}if(k){var p=a4(j>>>0);if(!b.hasNameForId(d,p)){var q=c(k,"."+p,void 0,d);b.insertRules(d,p,q)}e.push(p)}}return e.join(" ")},a}(),ba=/^\s*\/\/.*$/gm,bb=[":","[",".","#"];function bc(a){var b,c,d,e,f=void 0===a?aK:a,g=f.options,h=void 0===g?aK:g,i=f.plugins,j=void 0===i?aJ:i,k=new aB(h),l=[],m=function(a){function b(b){if(b)try{a(b+"}")}catch(a){}}return function(c,d,e,f,g,h,i,j,k,l){switch(c){case 1:if(0===k&&64===d.charCodeAt(0))return a(d+";"),"";break;case 2:if(0===j)return d+"/*|*/";break;case 3:switch(j){case 102:case 112:return a(e[0]+d),"";default:return d+(0===l?"/*|*/":"")}case -2:d.split("/*|*/}").forEach(b)}}}(function(a){l.push(a)}),n=function(a,d,f){return 0===d&&-1!==bb.indexOf(f[c.length])||f.match(e)?a:"."+b};function o(a,f,g,h){void 0===h&&(h="&");var i=a.replace(ba,""),j=f&&g?g+" "+f+" { "+i+" }":i;return b=h,d=RegExp("\\"+(c=f)+"\\b","g"),e=RegExp("(\\"+c+"\\b){2,}"),k(g||!f?"":f,j)}return k.use([].concat(j,[function(a,b,e){2===a&&e.length&&e[0].lastIndexOf(c)>0&&(e[0]=e[0].replace(d,n))},m,function(a){if(-2===a){var b=l;return l=[],b}}])),o.hash=j.length?j.reduce(function(a,b){return b.name||aQ(15),a5(a,b.name)},5381).toString():"",o}var bd=ak.default.createContext(),be=(bd.Consumer,ak.default.createContext()),bf=(be.Consumer,new a1),bg=bc();function bh(){return(0,ak.useContext)(bd)||bf}function bi(a){var b=(0,ak.useState)(a.stylisPlugins),c=b[0],d=b[1],e=bh(),f=(0,ak.useMemo)(function(){var b=e;return a.sheet?b=a.sheet:a.target&&(b=b.reconstructWithOptions({target:a.target},!1)),a.disableCSSOMInjection&&(b=b.reconstructWithOptions({useCSSOMInjection:!1})),b},[a.disableCSSOMInjection,a.sheet,a.target]),g=(0,ak.useMemo)(function(){return bc({options:{prefix:!a.disableVendorPrefixes},plugins:c})},[a.disableVendorPrefixes,c]);return(0,ak.useEffect)(function(){(0,aA.default)(c,a.stylisPlugins)||d(a.stylisPlugins)},[a.stylisPlugins]),ak.default.createElement(bd.Provider,{value:f},ak.default.createElement(be.Provider,{value:g},a.children))}var bj=function(){function a(a,b){var c=this;this.inject=function(a,b){void 0===b&&(b=bg);var d=c.name+b.hash;a.hasNameForId(c.id,d)||a.insertRules(c.id,d,b(c.rules,d,"@keyframes"))},this.toString=function(){return aQ(12,String(c.name))},this.name=a,this.id="sc-keyframes-"+a,this.rules=b}return a.prototype.getName=function(a){return void 0===a&&(a=bg),this.name+a.hash},a}(),bk=/([A-Z])/,bl=/([A-Z])/g,bm=/^ms-/,bn=function(a){return"-"+a.toLowerCase()};function bo(a){return bk.test(a)?a.replace(bl,bn).replace(bm,"-ms-"):a}var bp=function(a){return null==a||!1===a||""===a};function bq(a,b,c,d){if(Array.isArray(a)){for(var e,f=[],g=0,h=a.length;g<h;g+=1)""!==(e=bq(a[g],b,c,d))&&(Array.isArray(e)?f.push.apply(f,e):f.push(e));return f}return bp(a)?"":aN(a)?"."+a.styledComponentId:aL(a)?"function"!=typeof a||a.prototype&&a.prototype.isReactComponent||!b?a:bq(a(b),b,c,d):a instanceof bj?c?(a.inject(c,d),a.getName(d)):a:aI(a)?function a(b,c){var d,e=[];for(var f in b)b.hasOwnProperty(f)&&!bp(b[f])&&(Array.isArray(b[f])&&b[f].isCss||aL(b[f])?e.push(bo(f)+":",b[f],";"):aI(b[f])?e.push.apply(e,a(b[f],f)):e.push(bo(f)+": "+(null==(d=b[f])||"boolean"==typeof d||""===d?"":"number"!=typeof d||0===d||f in aC||f.startsWith("--")?String(d).trim():d+"px")+";"));return c?[c+" {"].concat(e,["}"]):e}(a):a.toString()}var br=function(a){return Array.isArray(a)&&(a.isCss=!0),a};function bs(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return aL(a)||aI(a)?br(bq(aH(aJ,[a].concat(c)))):0===c.length&&1===a.length&&"string"==typeof a[0]?a:br(bq(aH(a,c)))}var bt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,bu=/(^-|-$)/g;function bv(a){return a.replace(bt,"-").replace(bu,"")}var bw=function(a){return a4(a6(a)>>>0)};function bx(a){return"string"==typeof a}var by=function(a){return"function"==typeof a||"object"==typeof a&&null!==a&&!Array.isArray(a)},bz=ak.default.createContext();function bA(a){var b=(0,ak.useContext)(bz),c=(0,ak.useMemo)(function(){var c;return c=a.theme,c?aL(c)?c(b):Array.isArray(c)||"object"!=typeof c?aQ(8):b?aG({},b,{},c):c:aQ(14)},[a.theme,b]);return a.children?ak.default.createElement(bz.Provider,{value:c},a.children):null}bz.Consumer;var bB={},bC=function(a){return function a(b,c,d){if(void 0===d&&(d=aK),!(0,az.isValidElementType)(c))return aQ(1,String(c));var e=function(){return b(c,d,bs.apply(void 0,arguments))};return e.withConfig=function(e){return a(b,c,aG({},d,{},e))},e.attrs=function(e){return a(b,c,aG({},d,{attrs:Array.prototype.concat(d.attrs,e).filter(Boolean)}))},e}(function a(b,c,d){var e=aN(b),f=!bx(b),g=c.attrs,h=void 0===g?aJ:g,i=c.componentId,j=void 0===i?(p=c.displayName,q=c.parentComponentId,bB[r="string"!=typeof p?"sc":bv(p)]=(bB[r]||0)+1,s=r+"-"+bw("5.3.11"+r+bB[r]),q?q+"-"+s:s):i,k=c.displayName,l=void 0===k?bx(b)?"styled."+b:"Styled("+aM(b)+")":k,m=c.displayName&&c.componentId?bv(c.displayName)+"-"+c.componentId:c.componentId||j,n=e&&b.attrs?Array.prototype.concat(b.attrs,h).filter(Boolean):h,o=c.shouldForwardProp;e&&b.shouldForwardProp&&(o=c.shouldForwardProp?function(a,d,e){return b.shouldForwardProp(a,d,e)&&c.shouldForwardProp(a,d,e)}:b.shouldForwardProp);var p,q,r,s,t,u=new a9(d,m,e?b.componentStyle:void 0),v=u.isStatic&&0===h.length,w=function(a,b){return function(a,b,c,d){var e,f,g,h,i,j,k,l=a.attrs,m=a.componentStyle,n=a.defaultProps,o=a.foldedComponentIds,p=a.shouldForwardProp,q=a.styledComponentId,r=a.target,s=(e=(0,ak.useContext)(bz),void 0===(f=n)&&(f=aK),g=b.theme!==f.theme&&b.theme||e||f.theme||aK,void 0===g&&(g=aK),h=aG({},b,{theme:g}),i={},l.forEach(function(a){var b,c,d,e=a;for(b in aL(e)&&(e=e(h)),e)h[b]=i[b]="className"===b?(c=i[b],d=e[b],c&&d?c+" "+d:c||d):e[b]}),[h,i]),t=s[0],u=s[1],v=(j=bh(),k=(0,ak.useContext)(be)||bg,d?m.generateAndInjectStyles(aK,j,k):m.generateAndInjectStyles(t,j,k)),w=u.$as||b.$as||u.as||b.as||r,x=bx(w),y=u!==b?aG({},b,{},u):b,z={};for(var A in y)"$"!==A[0]&&"as"!==A&&("forwardedAs"===A?z.as=y[A]:(p?p(A,aE,w):!x||aE(A))&&(z[A]=y[A]));return b.style&&u.style!==b.style&&(z.style=aG({},b.style,{},u.style)),z.className=Array.prototype.concat(o,q,v!==q?v:null,b.className,u.className).filter(Boolean).join(" "),z.ref=c,(0,ak.createElement)(w,z)}(t,a,b,v)};return w.displayName=l,(t=ak.default.forwardRef(w)).attrs=n,t.componentStyle=u,t.displayName=l,t.shouldForwardProp=o,t.foldedComponentIds=e?Array.prototype.concat(b.foldedComponentIds,b.styledComponentId):aJ,t.styledComponentId=m,t.target=e?b.target:b,t.withComponent=function(b){var e=c.componentId,f=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)b.indexOf(c=f[d])>=0||(e[c]=a[c]);return e}(c,["componentId"]),g=e&&e+"-"+(bx(b)?b:bv(aM(b)));return a(b,aG({},f,{attrs:n,componentId:g}),d)},Object.defineProperty(t,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(a){this._foldedDefaultProps=e?function a(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];for(var f=0;f<d.length;f++){var g=d[f];if(by(g))for(var h in g)"__proto__"!==h&&"constructor"!==h&&"prototype"!==h&&function(b,c,d){var e=b[d];by(c)&&by(e)?a(e,c):b[d]=c}(b,g[h],h)}return b}({},b.defaultProps,a):a}}),Object.defineProperty(t,"toString",{value:function(){return"."+t.styledComponentId}}),f&&(0,aF.default)(t,b,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),t},a)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(a){bC[a]=bC(a)}),(f=(function(a,b){this.rules=a,this.componentId=b,this.isStatic=a7(a),a1.registerId(this.componentId+1)}).prototype).createStyles=function(a,b,c,d){var e=d(bq(this.rules,b,c,d).join(""),""),f=this.componentId+a;c.insertRules(f,f,e)},f.removeStyles=function(a,b){b.clearRules(this.componentId+a)},f.renderStyles=function(a,b,c,d){a>2&&a1.registerId(this.componentId+a),this.removeStyles(a,c),this.createStyles(a,b,c,d)};var bD=/^\s*<\/[a-z]/i;(c=(function(){var a=this;this._emitSheetCSS=function(){var b=a.instance.toString();if(!b)return"";var c=aX();return"<style "+[c&&'nonce="'+c+'"',aO+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+b+"</style>"},this.getStyleTags=function(){return a.sealed?aQ(2):a._emitSheetCSS()},this.getStyleElement=function(){if(a.sealed)return aQ(2);var b,c=((b={})[aO]="",b["data-styled-version"]="5.3.11",b.dangerouslySetInnerHTML={__html:a.instance.toString()},b),d=aX();return d&&(c.nonce=d),[ak.default.createElement("style",aG({},c,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new a1({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(a){return this.sealed?aQ(2):ak.default.createElement(bi,{sheet:this.instance},a)},c.interleaveWithNodeStream=function(b){if(this.sealed)return aQ(2);this.seal();var c=a.r(88947),d=(c.Readable,c.Transform),e=this.instance,f=this._emitSheetCSS,g=new d({transform:function(a,b,c){var d=a.toString(),g=f();if(e.clearTag(),bD.test(d)){var h=d.indexOf(">")+1,i=d.slice(0,h),j=d.slice(h);this.push(i+g+j)}else this.push(g+d);c()}});return b.on("error",function(a){g.emit("error",a)}),b.pipe(g)};var bE="SET_ALL_DOCUMENTS",bF="SET_DOCUMENT_LOADING",bG=function(a){return{type:bF,value:a}},bH="NEXT_DOCUMENT",bI=function(){return{type:bH}},bJ="PREVIOUS_DOCUMENT",bK=function(){return{type:bJ}},bL="UPDATE_CURRENT_DOCUMENT",bM=function(a){return{type:bL,document:a}},bN="SET_RENDERER_RECT",bO="SET_MAIN_CONFIG",bP=function(){return(bP=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bQ={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[]},bR=function(a,b){switch(void 0===a&&(a=bQ),b.type){case bE:var c=b.documents;return bP(bP({},a),{documents:c,currentDocument:c[0]||null});case bF:var d=b.value;return bP(bP({},a),{documentLoading:d});case bH:if(a.currentFileNo>=a.documents.length-1)return a;var e=a.currentFileNo+1;return bP(bP({},a),{currentFileNo:e,currentDocument:a.documents[e],documentLoading:!0});case bJ:if(a.currentFileNo<=0)return a;var f=a.currentFileNo-1;return bP(bP({},a),{currentFileNo:a.currentFileNo-1,currentDocument:a.documents[f],documentLoading:!0});case bL:var g=b.document;return bP(bP({},a),{currentDocument:g});case bN:var h=b.rect;return bP(bP({},a),{rendererRect:h});case bO:var i=b.config;return bP(bP({},a),{config:i});default:return a}},bS=function(){return(bS=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bT=(0,ak.createContext)({state:bQ,dispatch:function(){return null}}),bU=function(a){var b=a.children,c=a.documents,d=a.config,e=a.pluginRenderers,f=(0,ak.useReducer)(bR,bS(bS({},bQ),{documents:c||[],currentDocument:c&&c.length?c[0]:void 0,config:d,pluginRenderers:e})),g=f[0],h=f[1];return(0,ak.useEffect)(function(){h({type:bE,documents:c}),d&&h({type:bO,config:d})},[c]),ak.default.createElement(bT.Provider,{value:{state:g,dispatch:h}},b)},bV=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},bW=bs(w||(w=bV(["\n  background-color: ",";\n  color: ",";\n"],["\n  background-color: ",";\n  color: ",";\n"])),function(a){return a.theme.primary},function(a){return a.theme.text_primary}),bX=bs(x||(x=bV(["\n  background-color: ",";\n  color: ",";\n"],["\n  background-color: ",";\n  color: ",";\n"])),function(a){return a.theme.secondary},function(a){return a.theme.text_secondary}),bY=bC.button(y||(y=bV(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  padding: 0;\n  margin: 0 0 0 5px;\n  text-align: center;\n  font-size: 18px;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"],["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  padding: 0;\n  margin: 0 0 0 5px;\n  text-align: center;\n  font-size: 18px;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"])),bW,function(a){return a.disabled?.4:1},function(a){return a.disabled?"none":"all"}),bZ=bC.a(z||(z=bV(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  background-color: ",";\n  color: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  width: 35px;\n  height: 35px;\n  font-size: 18px;\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  background-color: ",";\n  color: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  width: 35px;\n  height: 35px;\n  font-size: 18px;\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"])),function(a){return a.theme.primary},function(a){return a.theme.text_primary});bC(bY)(A||(A=bV([""],[""])));var b$=bC(bY)(B||(B=bV(["\n  ","\n"],["\n  ","\n"])),bX),b_=function(){return(b_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},b0=function(a){return ak.default.createElement(b2,b_({},a))},b1=function(a){return ak.default.createElement(b2,b_({},a,{reverse:!0}))},b2=function(a){var b=a.color,c=a.size,d=a.reverse;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",style:{transform:"".concat(d?"rotate(180deg)":"")},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve"},ak.default.createElement("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:b||"#aaa",fillRule:"evenodd",id:"Arrow_Back"}))},b3=function(a){var b=a.color,c=a.size;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"}},ak.default.createElement("g",null,ak.default.createElement("path",{fill:b||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1\n		z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4\n		S10,20.6,9.6,20.9z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4\n		L22.4,20.9z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),ak.default.createElement("path",{fill:b||"#aaa",d:"M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4\n		C21.1,11.2,21.4,11.3,21.7,11.3z"})))},b4=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},b5=function(){var a=(0,ak.useContext)(bT),b=a.state,c=b.currentDocument,d=b.currentFileNo,e=b.documents,f=a.dispatch;if(e.length<=1||!c)return null;var g=c.uri,h=g.split("/");return h.length&&(g=h[h.length-1]),ak.default.createElement(b6,{id:"doc-nav"},ak.default.createElement("p",{id:"doc-nav-info"},"Doc ",d+1," of ",e.length),ak.default.createElement(b7,{id:"doc-nav-prev",onClick:function(){return f(bK())},disabled:0===d},ak.default.createElement(b0,{color:"#fff",size:"60%"})),ak.default.createElement(b8,{id:"doc-nav-next",onClick:function(){return f(bI())},disabled:d>=e.length-1},ak.default.createElement(b1,{color:"#fff",size:"60%"})))},b6=bC.div(C||(C=b4(["\n  min-width: 150px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0 10px;\n  color: ",";\n"],["\n  min-width: 150px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0 10px;\n  color: ",";\n"])),function(a){return a.theme.text_primary}),b7=bC(b$)(D||(D=b4(["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px 0 10px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px 0 10px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),b8=bC(b7)(E||(E=b4(["\n  margin: 0 5px;\n"],["\n  margin: 0 5px;\n"]))),b9=function(){var a,b,c=(0,ak.useContext)(bT).state,d=c.config,e=c.currentDocument;if(!e||(null==(a=null==d?void 0:d.header)?void 0:a.disableFileName))return null;var f=e.uri||"";f=decodeURI(f),(null==(b=null==d?void 0:d.header)?void 0:b.retainURLParams)||(f=f.split("?")[0]);var g=f.split("/");return g.length&&(f=g[g.length-1]),ak.default.createElement(ca,{id:"file-name","data-testid":"file-name"},f)},ca=bC.div(F||(g=["\n  flex: 1;\n  text-align: left;\n  color: ",";\n  font-weight: bold;\n  margin: 0 10px;\n  overflow: hidden;\n"],h=["\n  flex: 1;\n  text-align: left;\n  color: ",";\n  font-weight: bold;\n  margin: 0 10px;\n  overflow: hidden;\n"],Object.defineProperty?Object.defineProperty(g,"raw",{value:h}):g.raw=h,F=g),function(a){return a.theme.text_primary}),cb=function(){var a,b,c,d=(0,ak.useContext)(bT),e=d.state,f=d.dispatch,g=e.config;if(null==(a=null==g?void 0:g.header)?void 0:a.disableHeader)return null;var h=null==(c=null==(b=null==g?void 0:g.header)?void 0:b.overrideComponent)?void 0:c.call(b,e,function(){return f(bK())},function(){return f(bI())});return h||ak.default.createElement(cc,{id:"header-bar","data-testid":"header-bar"},ak.default.createElement(b9,null),ak.default.createElement(b5,null))},cc=bC.div(G||(i=["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  z-index: 1;\n  padding: 0 10px;\n  background-color: ",";\n  font-size: 16px;\n  min-height: 50px;\n\n  @media (max-width: 768px) {\n    min-height: 30px;\n    padding: 5px;\n    font-size: 10px;\n  }\n"],j=["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  z-index: 1;\n  padding: 0 10px;\n  background-color: ",";\n  font-size: 16px;\n  min-height: 50px;\n\n  @media (max-width: 768px) {\n    min-height: 30px;\n    padding: 5px;\n    font-size: 10px;\n  }\n"],Object.defineProperty?Object.defineProperty(i,"raw",{value:j}):i.raw=j,G=i),function(a){return a.theme.primary}),cd=function(){return(cd=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ce=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},cf=function(a){var b=a.documentURI,c=a.signal,d=a.fileLoaderComplete,e=a.readerTypeFunction;return fetch(b,{signal:c}).then(function(a){var b,c,f,g;return b=void 0,c=void 0,f=void 0,g=function(){var b,c;return ce(this,function(f){switch(f.label){case 0:return[4,a.blob()];case 1:switch(b=f.sent(),(c=new FileReader).addEventListener("loadend",function(){return d(c)}),e){case"arrayBuffer":c.readAsArrayBuffer(b);break;case"binaryString":c.readAsBinaryString(b);break;case"dataURL":c.readAsDataURL(b);break;case"text":c.readAsText(b)}return[2]}})},new(f||(f=Promise))(function(a,d){function e(a){try{i(g.next(a))}catch(a){d(a)}}function h(a){try{i(g.throw(a))}catch(a){d(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof f?c:new f(function(a){a(c)})).then(e,h)}i((g=g.apply(b,c||[])).next())})}).catch(function(a){return a})},cg=function(a){return cf(cd(cd({},a),{readerTypeFunction:"arrayBuffer"}))},ch=function(a){return cf(cd(cd({},a),{readerTypeFunction:"dataURL"}))},ci=function(){var a=(0,ak.useContext)(bT).state,b=a.currentDocument,c=a.pluginRenderers,d=(0,ak.useState)(),e=d[0],f=d[1];return(0,ak.useEffect)(function(){if(b){if(!b.fileType)return void f(void 0);var a=[];null==c||c.map(function(c){void 0!==b.fileType&&c.fileTypes.indexOf(b.fileType)>=0&&a.push(c)});var d=a.sort(function(a,b){return b.weight-a.weight})[0];d&&void 0!==d?f(function(){return d}):f(null)}},[b]),{CurrentRenderer:e}},cj=function(){return(cj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ck=function(){var a=(0,ak.useContext)(bT),b=a.state,c=a.dispatch,d=b.currentFileNo,e=b.currentDocument,f=ci().CurrentRenderer,g=(null==e?void 0:e.uri)||"";return(0,ak.useEffect)(function(){if(e&&void 0===e.fileType){var a=new AbortController;return fetch(g,{method:"HEAD",signal:a.signal}).then(function(a){var b=a.headers.get("content-type"),d=(null==b?void 0:b.split(";"))||[],f=d.length?d[0]:void 0;c(bM(cj(cj({},e),{fileType:f||void 0})))}),function(){a.abort()}}},[d,g]),(0,ak.useEffect)(function(){if(e&&void 0!==f){var a,b=new AbortController,d=b.signal,h=function(a){if(!e||!a)return void c(bG(!1));var b=cj({},e);null!==a.result&&(b.fileData=a.result),c(bM(b)),c(bG(!1))};return null===f?c(bG(!1)):void 0!==f.fileLoader?null==(a=f.fileLoader)||a.call(f,{documentURI:g,signal:d,fileLoaderComplete:h}):ch({documentURI:g,signal:d,fileLoaderComplete:h}),function(){b.abort()}}},[f]),{state:b,dispatch:c,CurrentRenderer:f}},cl=function(){var a=(0,ak.useState)({width:void 0,height:void 0}),b=a[0],c=a[1];return(0,ak.useEffect)(function(){function a(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",a),a(),function(){return window.removeEventListener("resize",a)}},[]),b},cm=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},cn=function(){var a=ck(),b=a.state,c=a.dispatch,d=a.CurrentRenderer,e=b.documents,f=b.documentLoading,g=b.currentDocument,h=cl(),i=(0,ak.useCallback)(function(a){a&&c({type:bN,rect:null==a?void 0:a.getBoundingClientRect()})},[h]);return ak.default.createElement(co,{id:"proxy-renderer",ref:i},ak.default.createElement(function(){return e.length?f?ak.default.createElement(cp,{id:"loading-renderer","data-testid":"loading-renderer"},ak.default.createElement(cr,null,ak.default.createElement(b3,{color:"#444",size:40}))):d?ak.default.createElement(d,{mainState:b}):void 0===d?null:ak.default.createElement("div",{id:"no-renderer","data-testid":"no-renderer"},"No Renderer for file type ",null==g?void 0:g.fileType,ak.default.createElement(cs,{id:"no-renderer-download",href:null==g?void 0:g.uri,download:null==g?void 0:g.uri},"Download File")):ak.default.createElement("div",{id:"no-documents"})},null))},co=bC.div(H||(H=cm(["\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n"],["\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n"]))),cp=bC.div(I||(I=cm(["\n  display: flex;\n  flex: 1;\n  height: 75px;\n  align-items: center;\n  justify-content: center;\n"],["\n  display: flex;\n  flex: 1;\n  height: 75px;\n  align-items: center;\n  justify-content: center;\n"]))),cq=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=bs.apply(void 0,[a].concat(c)).join("");return new bj(bw(e),e)}(J||(J=cm(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"],["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),cr=bC.div(K||(K=cm(["\n  animation-name: ",";\n  animation-duration: 4s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n"],["\n  animation-name: ",";\n  animation-duration: 4s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n"])),cq),cs=bC(bZ)(L||(L=cm(["\n  width: 130px;\n  height: 30px;\n  background-color: ",";\n  @media (max-width: 768px) {\n    width: 125px;\n    height: 25px;\n  }\n"],["\n  width: 130px;\n  height: 30px;\n  background-color: ",";\n  @media (max-width: 768px) {\n    width: 125px;\n    height: 25px;\n  }\n"])),function(a){return a.theme.primary}),ct=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},cu=function(){return(cu=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cv=function(a){var b=a.mainState.currentDocument,c=a.children;return b?ak.default.createElement(cw,cu({id:"image-renderer"},a),c||ak.default.createElement(cx,{id:"image-img",src:b.fileData})):null};cv.fileTypes=[],cv.weight=0;var cw=bC.div(M||(M=ct(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n"],["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n"]))),cx=bC.img(N||(N=ct(["\n  max-width: 95%;\n  max-height: 95%;\n"],["\n  max-width: 95%;\n  max-height: 95%;\n"]))),cy=function(){return(cy=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cz=function(a){return ak.default.createElement(cv,cy({},a))};cz.fileTypes=["bmp","image/bmp"],cz.weight=0;var cA=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},cB=function(a){var b=a.mainState.currentDocument;return(0,ak.useEffect)(function(){var a=null==b?void 0:b.fileData,c=(null==a?void 0:a.replace("data:text/html;base64,",""))||"",d=window.atob(c),e=document.getElementById("html-body"),f=(null==e?void 0:e.contentWindow)&&e.contentWindow;if(f){var g=f.document;g.open(),g.write("".concat(d)),g.close()}},[]),ak.default.createElement(cC,{id:"html-renderer"},ak.default.createElement(cD,{id:"html-body",sandbox:"allow-same-origin"}))};cB.fileTypes=["htm","html","text/htm","text/html"],cB.weight=0,cB.fileLoader=ch;var cC=bC.div(O||(O=cA(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"]))),cD=bC.iframe(P||(P=cA(["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"],["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"])),function(a){return a.theme.secondary}),cE=function(){return(cE=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cF=function(a){return ak.default.createElement(cv,cE({},a))};cF.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"],cF.weight=0;var cG=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},cH=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},cI=function(a){var b=a.mainState.currentDocument;return b?ak.default.createElement(cJ,{id:"msdoc-renderer"},ak.default.createElement(cK,{id:"msdoc-iframe",title:"msdoc-iframe",src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(encodeURIComponent(b.uri)),frameBorder:"0"})):null};cI.fileTypes=cH(cH(cH(cH(cH(cH([],["doc","application/msword"],!0),["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],!0),["xls","application/vnd.ms-excel"],!0),["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],!0),["ppt","application/vnd.ms-powerpoint"],!0),["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],!0),cI.weight=0,cI.fileLoader=function(a){return(0,a.fileLoaderComplete)()};var cJ=bC.div(Q||(Q=cG(["\n  width: 100%;\n"],["\n  width: 100%;\n"]))),cK=bC.iframe(R||(R=cG(["\n  width: 100%;\n  height: 100%;\n  border: 0;\n"],["\n  width: 100%;\n  height: 100%;\n  border: 0;\n"]))),cL=a.i(72700),cM=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},cN=function(a){var b=a.mainState.currentDocument,c=(0,ak.useState)(),d=c[0],e=c[1];if((0,ak.useEffect)(function(){b&&b.fileData&&e(new cL.MSGReader(b.fileData).getFileData())},[null==b?void 0:b.fileData]),(0,ak.useEffect)(function(){if(!(!d||d.hasOwnProperty("error"))){var a=document.getElementById("msg-body"),b=(null==a?void 0:a.contentWindow)&&a.contentWindow;if(b){var c=b.document,e=d.body.replace(/(\r\n|\n|\r)/gm,"<br />");c.open(),c.write("".concat(e)),c.close()}}},[d]),!d||d.hasOwnProperty("error"))return ak.default.createElement("span",null,null==d?void 0:d.error);var f=d.recipients,g=d.subject,h=d.senderEmail,i=d.senderName;return ak.default.createElement(cP,{id:"msg-renderer"},ak.default.createElement("h2",{id:"msg-subject-title",style:{marginBottom:0}},g),ak.default.createElement(cO,{name:i,email:h}),ak.default.createElement(cR,{id:"msg-recipient"},ak.default.createElement("h3",{id:"msg-recipient-title"},"Recipients"),ak.default.createElement("ul",{id:"msg-recipient-ul"},f.map(function(a,b){return ak.default.createElement("li",{key:b,id:"msg-recipient-li"},ak.default.createElement("span",{id:"msg-recipient-name"},a.name),a.hasOwnProperty("email")&&ak.default.createElement("span",{id:"msg-recipient-email"}," - ",a.email))}))),ak.default.createElement(cS,{id:"msg-body",sandbox:"allow-same-origin"}))},cO=function(a){var b=a.name,c=a.email;return b||c?ak.default.createElement(cQ,{id:"msg-sender"},ak.default.createElement("h3",{id:"msg-sender-title"},"Sender"),void 0!==b&&ak.default.createElement("div",{id:"msg-sender-name"},b),void 0!==c&&ak.default.createElement("div",{id:"msg-sender-email"},c)):null};cN.fileTypes=["msg","application/vnd.ms-outlook"],cN.weight=0,cN.fileLoader=cg;var cP=bC.div(S||(S=cM(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"]))),cQ=bC.div(T||(T=cM(["\n  padding: 0 15px 15px 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"],["\n  padding: 0 15px 15px 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"])),function(a){return a.theme.secondary}),cR=bC.div(U||(U=cM(["\n  padding: 0 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"],["\n  padding: 0 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"])),function(a){return a.theme.secondary}),cS=bC.iframe(V||(V=cM(["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"],["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"])),function(a){return a.theme.secondary}),cT={};cT.d=(a,b)=>{for(var c in b)cT.o(b,c)&&!cT.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},cT.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b);var cU=globalThis.pdfjsLib={};cT.d(cU,{AbortException:()=>dj,AnnotationEditorLayer:()=>gd,AnnotationEditorParamsType:()=>c$,AnnotationEditorType:()=>cZ,AnnotationEditorUIManager:()=>d2,AnnotationLayer:()=>f1,AnnotationMode:()=>cY,CMapCompressionType:()=>c2,ColorPicker:()=>f9,DOMSVGFactory:()=>dF,DrawLayer:()=>ge,FeatureTest:()=>dn,GlobalWorkerOptions:()=>eD,ImageKind:()=>c0,InvalidPDFException:()=>df,MissingPDFException:()=>dg,OPS:()=>c3,Outliner:()=>f4,PDFDataRangeTransport:()=>fj,PDFDateString:()=>dQ,PDFWorker:()=>fo,PasswordResponses:()=>c4,PermissionFlag:()=>c_,PixelsPerInch:()=>dB,RenderingCancelledException:()=>dH,TextLayer:()=>e8,UnexpectedResponseException:()=>dh,Util:()=>dq,VerbosityLevel:()=>c1,XfaLayer:()=>fz,build:()=>fv,createValidAbsoluteUrl:()=>da,fetchData:()=>dC,getDocument:()=>fg,getFilenameFromUrl:()=>dK,getPdfFilenameFromUrl:()=>dL,getXfaPageViewport:()=>dR,isDataScheme:()=>dI,isPdfFile:()=>dJ,noContextMenu:()=>dO,normalizeUnicode:()=>dt,renderTextLayer:()=>e9,setLayerDimensions:()=>dV,shadow:()=>db,updateTextLayer:()=>fa,version:()=>fu});let cV="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),cW=[1,0,0,1,0,0],cX=[.001,0,0,.001,0,0],cY={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},cZ={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},c$={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},c_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},c0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},c1={ERRORS:0,WARNINGS:1,INFOS:5},c2={NONE:0,BINARY:1},c3={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},c4={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},c5=c1.WARNINGS;function c6(a){c5>=c1.INFOS&&console.log(`Info: ${a}`)}function c7(a){c5>=c1.WARNINGS&&console.log(`Warning: ${a}`)}function c8(a){throw Error(a)}function c9(a,b){a||c8(b)}function da(a,b=null,c=null){if(!a)return null;try{if(c&&"string"==typeof a){if(c.addDefaultProtocol&&a.startsWith("www.")){let b=a.match(/\./g);b?.length>=2&&(a=`http://${a}`)}if(c.tryConvertEncoding)try{var d;d=a,a=decodeURIComponent(escape(d))}catch{}}let e=b?new URL(a,b):new URL(a);if(function(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(e))return e}catch{}return null}function db(a,b,c,d=!1){return Object.defineProperty(a,b,{value:c,enumerable:!d,configurable:!0,writable:!1}),c}let dc=function(){function a(b,c){this.constructor===a&&c8("Cannot initialize BaseException."),this.message=b,this.name=c}return a.prototype=Error(),a.constructor=a,a}();class dd extends dc{constructor(a,b){super(a,"PasswordException"),this.code=b}}class de extends dc{constructor(a,b){super(a,"UnknownErrorException"),this.details=b}}class df extends dc{constructor(a){super(a,"InvalidPDFException")}}class dg extends dc{constructor(a){super(a,"MissingPDFException")}}class dh extends dc{constructor(a,b){super(a,"UnexpectedResponseException"),this.status=b}}class di extends dc{constructor(a){super(a,"FormatError")}}class dj extends dc{constructor(a){super(a,"AbortException")}}function dk(a){("object"!=typeof a||a?.length===void 0)&&c8("Invalid argument for bytesToString");let b=a.length;if(b<8192)return String.fromCharCode.apply(null,a);let c=[];for(let d=0;d<b;d+=8192){let e=Math.min(d+8192,b),f=a.subarray(d,e);c.push(String.fromCharCode.apply(null,f))}return c.join("")}function dl(a){"string"!=typeof a&&c8("Invalid argument for stringToBytes");let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;++d)c[d]=255&a.charCodeAt(d);return c}function dm(a){let b=Object.create(null);for(let[c,d]of a)b[c]=d;return b}class dn{static get isLittleEndian(){let a;return db(this,"isLittleEndian",((a=new Uint8Array(4))[0]=1,1===new Uint32Array(a.buffer,0,1)[0]))}static get isEvalSupported(){return db(this,"isEvalSupported",function(){try{return Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return db(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?db(this,"platform",{isMac:navigator.platform.includes("Mac")}):db(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return db(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}let dp=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class dq{static makeHexColor(a,b,c){return`#${dp[a]}${dp[b]}${dp[c]}`}static scaleMinMax(a,b){let c;a[0]?(a[0]<0&&(c=b[0],b[0]=b[2],b[2]=c),b[0]*=a[0],b[2]*=a[0],a[3]<0&&(c=b[1],b[1]=b[3],b[3]=c),b[1]*=a[3],b[3]*=a[3]):(c=b[0],b[0]=b[1],b[1]=c,c=b[2],b[2]=b[3],b[3]=c,a[1]<0&&(c=b[1],b[1]=b[3],b[3]=c),b[1]*=a[1],b[3]*=a[1],a[2]<0&&(c=b[0],b[0]=b[2],b[2]=c),b[0]*=a[2],b[2]*=a[2]),b[0]+=a[4],b[1]+=a[5],b[2]+=a[4],b[3]+=a[5]}static transform(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]}static applyTransform(a,b){return[a[0]*b[0]+a[1]*b[2]+b[4],a[0]*b[1]+a[1]*b[3]+b[5]]}static applyInverseTransform(a,b){let c=b[0]*b[3]-b[1]*b[2];return[(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/c,(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/c]}static getAxialAlignedBoundingBox(a,b){let c=this.applyTransform(a,b),d=this.applyTransform(a.slice(2,4),b),e=this.applyTransform([a[0],a[3]],b),f=this.applyTransform([a[2],a[1]],b);return[Math.min(c[0],d[0],e[0],f[0]),Math.min(c[1],d[1],e[1],f[1]),Math.max(c[0],d[0],e[0],f[0]),Math.max(c[1],d[1],e[1],f[1])]}static inverseTransform(a){let b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]}static singularValueDecompose2dScale(a){let b=[a[0],a[2],a[1],a[3]],c=a[0]*b[0]+a[1]*b[2],d=a[0]*b[1]+a[1]*b[3],e=a[2]*b[0]+a[3]*b[2],f=a[2]*b[1]+a[3]*b[3],g=(c+f)/2,h=Math.sqrt((c+f)**2-4*(c*f-e*d))/2;return[Math.sqrt(g+h||1),Math.sqrt(g-h||1)]}static normalizeRect(a){let b=a.slice(0);return a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]),a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]),b}static intersect(a,b){let c=Math.max(Math.min(a[0],a[2]),Math.min(b[0],b[2])),d=Math.min(Math.max(a[0],a[2]),Math.max(b[0],b[2]));if(c>d)return null;let e=Math.max(Math.min(a[1],a[3]),Math.min(b[1],b[3])),f=Math.min(Math.max(a[1],a[3]),Math.max(b[1],b[3]));return e>f?null:[c,e,d,f]}static #a(a,b,c,d,e,f,g,h,i,j){if(i<=0||i>=1)return;let k=1-i,l=i*i,m=l*i,n=k*(k*(k*a+3*i*b)+3*l*c)+m*d,o=k*(k*(k*e+3*i*f)+3*l*g)+m*h;j[0]=Math.min(j[0],n),j[1]=Math.min(j[1],o),j[2]=Math.max(j[2],n),j[3]=Math.max(j[3],o)}static #b(a,b,c,d,e,f,g,h,i,j,k,l){if(1e-12>Math.abs(i)){Math.abs(j)>=1e-12&&this.#a(a,b,c,d,e,f,g,h,-k/j,l);return}let m=j**2-4*k*i;if(m<0)return;let n=Math.sqrt(m),o=2*i;this.#a(a,b,c,d,e,f,g,h,(-j+n)/o,l),this.#a(a,b,c,d,e,f,g,h,(-j-n)/o,l)}static bezierBoundingBox(a,b,c,d,e,f,g,h,i){return i?(i[0]=Math.min(i[0],a,g),i[1]=Math.min(i[1],b,h),i[2]=Math.max(i[2],a,g),i[3]=Math.max(i[3],b,h)):i=[Math.min(a,g),Math.min(b,h),Math.max(a,g),Math.max(b,h)],this.#b(a,c,e,g,b,d,f,h,3*(-a+3*(c-e)+g),6*(a-2*c+e),3*(c-a),i),this.#b(a,c,e,g,b,d,f,h,3*(-b+3*(d-f)+h),6*(b-2*d+f),3*(d-b),i),i}}let dr=null,ds=null;function dt(a){return dr||(dr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ds=new Map([["","t"]])),a.replaceAll(dr,(a,b,c)=>b?b.normalize("NFKC"):ds.get(c))}let du="pdfjs_internal_id_";class dv{constructor(){this.constructor===dv&&c8("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,b){return"none"}addAlphaFilter(a){return"none"}addLuminosityFilter(a){return"none"}addHighlightHCMFilter(a,b,c,d,e){return"none"}destroy(a=!1){}}class dw{constructor(){this.constructor===dw&&c8("Cannot initialize BaseCanvasFactory.")}create(a,b){if(a<=0||b<=0)throw Error("Invalid canvas size");let c=this._createCanvas(a,b);return{canvas:c,context:c.getContext("2d")}}reset(a,b,c){if(!a.canvas)throw Error("Canvas is not specified");if(b<=0||c<=0)throw Error("Invalid canvas size");a.canvas.width=b,a.canvas.height=c}destroy(a){if(!a.canvas)throw Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,b){c8("Abstract method `_createCanvas` called.")}}class dx{constructor({baseUrl:a=null,isCompressed:b=!0}){this.constructor===dx&&c8("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=b}async fetch({name:a}){if(!this.baseUrl)throw Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw Error("CMap name must be specified.");let b=this.baseUrl+a+(this.isCompressed?".bcmap":""),c=this.isCompressed?c2.BINARY:c2.NONE;return this._fetchData(b,c).catch(a=>{throw Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${b}`)})}_fetchData(a,b){c8("Abstract method `_fetchData` called.")}}class dy{constructor({baseUrl:a=null}){this.constructor===dy&&c8("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw Error("Font filename must be specified.");let b=`${this.baseUrl}${a}`;return this._fetchData(b).catch(a=>{throw Error(`Unable to load font data at: ${b}`)})}_fetchData(a){c8("Abstract method `_fetchData` called.")}}class dz{constructor(){this.constructor===dz&&c8("Cannot initialize BaseSVGFactory.")}create(a,b,c=!1){if(a<=0||b<=0)throw Error("Invalid SVG dimensions");let d=this._createSVG("svg:svg");return d.setAttribute("version","1.1"),c||(d.setAttribute("width",`${a}px`),d.setAttribute("height",`${b}px`)),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("viewBox",`0 0 ${a} ${b}`),d}createElement(a){if("string"!=typeof a)throw Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){c8("Abstract method `_createSVG` called.")}}let dA="http://www.w3.org/2000/svg";class dB{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function dC(a,b="text"){if(dN(a,document.baseURI)){let c=await fetch(a);if(!c.ok)throw Error(c.statusText);switch(b){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"json":return c.json()}return c.text()}return new Promise((c,d)=>{let e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType=b,e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE){if(200===e.status||0===e.status){switch(b){case"arraybuffer":case"blob":case"json":c(e.response);return}c(e.responseText);return}d(Error(e.statusText))}},e.send(null)})}class dD extends dx{_fetchData(a,b){return dC(a,this.isCompressed?"arraybuffer":"text").then(a=>({cMapData:a instanceof ArrayBuffer?new Uint8Array(a):dl(a),compressionType:b}))}}class dE extends dy{_fetchData(a){return dC(a,"arraybuffer").then(a=>new Uint8Array(a))}}class dF extends dz{_createSVG(a){return document.createElementNS(dA,a)}}class dG{constructor({viewBox:a,scale:b,rotation:c,offsetX:d=0,offsetY:e=0,dontFlip:f=!1}){let g,h,i,j,k,l,m,n;this.viewBox=a,this.scale=b,this.rotation=c,this.offsetX=d,this.offsetY=e;const o=(a[2]+a[0])/2,p=(a[3]+a[1])/2;switch((c%=360)<0&&(c+=360),c){case 180:g=-1,h=0,i=0,j=1;break;case 90:g=0,h=1,i=1,j=0;break;case 270:g=0,h=-1,i=-1,j=0;break;case 0:g=1,h=0,i=0,j=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}f&&(i=-i,j=-j),0===g?(k=Math.abs(p-a[1])*b+d,l=Math.abs(o-a[0])*b+e,m=(a[3]-a[1])*b,n=(a[2]-a[0])*b):(k=Math.abs(o-a[0])*b+d,l=Math.abs(p-a[1])*b+e,m=(a[2]-a[0])*b,n=(a[3]-a[1])*b),this.transform=[g*b,h*b,i*b,j*b,k-g*b*o-i*b*p,l-h*b*o-j*b*p],this.width=m,this.height=n}get rawDims(){let{viewBox:a}=this;return db(this,"rawDims",{pageWidth:a[2]-a[0],pageHeight:a[3]-a[1],pageX:a[0],pageY:a[1]})}clone({scale:a=this.scale,rotation:b=this.rotation,offsetX:c=this.offsetX,offsetY:d=this.offsetY,dontFlip:e=!1}={}){return new dG({viewBox:this.viewBox.slice(),scale:a,rotation:b,offsetX:c,offsetY:d,dontFlip:e})}convertToViewportPoint(a,b){return dq.applyTransform([a,b],this.transform)}convertToViewportRectangle(a){let b=dq.applyTransform([a[0],a[1]],this.transform),c=dq.applyTransform([a[2],a[3]],this.transform);return[b[0],b[1],c[0],c[1]]}convertToPdfPoint(a,b){return dq.applyInverseTransform([a,b],this.transform)}}class dH extends dc{constructor(a,b=0){super(a,"RenderingCancelledException"),this.extraDelay=b}}function dI(a){let b=a.length,c=0;for(;c<b&&""===a[c].trim();)c++;return"data:"===a.substring(c,c+5).toLowerCase()}function dJ(a){return"string"==typeof a&&/\.pdf$/i.test(a)}function dK(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function dL(a,b="document.pdf"){if("string"!=typeof a)return b;if(dI(a))return c7('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),b;let c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,d=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(a),e=c.exec(d[1])||c.exec(d[2])||c.exec(d[3]);if(e&&(e=e[0]).includes("%"))try{e=c.exec(decodeURIComponent(e))[0]}catch{}return e||b}class dM{started=Object.create(null);times=[];time(a){a in this.started&&c7(`Timer is already running for ${a}`),this.started[a]=Date.now()}timeEnd(a){a in this.started||c7(`Timer has not been started for ${a}`),this.times.push({name:a,start:this.started[a],end:Date.now()}),delete this.started[a]}toString(){let a=[],b=0;for(let{name:a}of this.times)b=Math.max(a.length,b);for(let{name:c,start:d,end:e}of this.times)a.push(`${c.padEnd(b)} ${e-d}ms
`);return a.join("")}}function dN(a,b){try{let{protocol:c}=b?new URL(a,b):new URL(a);return"http:"===c||"https:"===c}catch{return!1}}function dO(a){a.preventDefault()}function dP(a){console.log("Deprecated API usage: "+a)}class dQ{static toDateObject(a){if(!a||"string"!=typeof a)return null;let c=(b||=RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")).exec(a);if(!c)return null;let d=parseInt(c[1],10),e=parseInt(c[2],10);e=e>=1&&e<=12?e-1:0;let f=parseInt(c[3],10);f=f>=1&&f<=31?f:1;let g=parseInt(c[4],10);g=g>=0&&g<=23?g:0;let h=parseInt(c[5],10);h=h>=0&&h<=59?h:0;let i=parseInt(c[6],10);i=i>=0&&i<=59?i:0;let j=c[7]||"Z",k=parseInt(c[8],10);k=k>=0&&k<=23?k:0;let l=parseInt(c[9],10)||0;return l=l>=0&&l<=59?l:0,"-"===j?(g+=k,h+=l):"+"===j&&(g-=k,h-=l),new Date(Date.UTC(d,e,f,g,h,i))}}function dR(a,{scale:b=1,rotation:c=0}){let{width:d,height:e}=a.attributes.style;return new dG({viewBox:[0,0,parseInt(d),parseInt(e)],scale:b,rotation:c})}function dS(a){if(a.startsWith("#")){let b=parseInt(a.slice(1),16);return[(0xff0000&b)>>16,(65280&b)>>8,255&b]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(a=>parseInt(a)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(a=>parseInt(a)).slice(0,3):(c7(`Not a valid color format: "${a}"`),[0,0,0])}function dT(a){let{a:b,b:c,c:d,d:e,e:f,f:g}=a.getTransform();return[b,c,d,e,f,g]}function dU(a){let{a:b,b:c,c:d,d:e,e:f,f:g}=a.getTransform().invertSelf();return[b,c,d,e,f,g]}function dV(a,b,c=!1,d=!0){if(b instanceof dG){let{pageWidth:d,pageHeight:e}=b.rawDims,{style:f}=a,g=dn.isCSSRoundSupported,h=`var(--scale-factor) * ${d}px`,i=`var(--scale-factor) * ${e}px`,j=g?`round(${h}, 1px)`:`calc(${h})`,k=g?`round(${i}, 1px)`:`calc(${i})`;c&&b.rotation%180!=0?(f.width=k,f.height=j):(f.width=j,f.height=k)}d&&a.setAttribute("data-main-rotation",b.rotation)}class dW{#c=null;#d=null;#e;#f=null;constructor(a){this.#e=a}render(){let a=this.#c=document.createElement("div");a.className="editToolbar",a.setAttribute("role","toolbar"),a.addEventListener("contextmenu",dO),a.addEventListener("pointerdown",dW.#g);let b=this.#f=document.createElement("div");b.className="buttons",a.append(b);let c=this.#e.toolbarPosition;if(c){let{style:b}=a,d="ltr"===this.#e._uiManager.direction?1-c[0]:c[0];b.insetInlineEnd=`${100*d}%`,b.top=`calc(${100*c[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),a}static #g(a){a.stopPropagation()}#i(a){this.#e._focusEventsAllowed=!1,a.preventDefault(),a.stopPropagation()}#j(a){this.#e._focusEventsAllowed=!0,a.preventDefault(),a.stopPropagation()}#k(a){a.addEventListener("focusin",this.#i.bind(this),{capture:!0}),a.addEventListener("focusout",this.#j.bind(this),{capture:!0}),a.addEventListener("contextmenu",dO)}hide(){this.#c.classList.add("hidden"),this.#d?.hideDropdown()}show(){this.#c.classList.remove("hidden")}#h(){let a=document.createElement("button");a.className="delete",a.tabIndex=0,a.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#e.editorType}-button`),this.#k(a),a.addEventListener("click",a=>{this.#e._uiManager.delete()}),this.#f.append(a)}get #l(){let a=document.createElement("div");return a.className="divider",a}addAltTextButton(a){this.#k(a),this.#f.prepend(a,this.#l)}addColorPicker(a){this.#d=a;let b=a.renderButton();this.#k(b),this.#f.prepend(b,this.#l)}remove(){this.#c.remove(),this.#d?.destroy(),this.#d=null}}class dX{#f=null;#c=null;#m;constructor(a){this.#m=a}#n(){let a=this.#c=document.createElement("div");a.className="editToolbar",a.setAttribute("role","toolbar"),a.addEventListener("contextmenu",dO);let b=this.#f=document.createElement("div");return b.className="buttons",a.append(b),this.#o(),a}#p(a,b){let c=0,d=0;for(let e of a){let a=e.y+e.height;if(a<c)continue;let f=e.x+(b?e.width:0);if(a>c){d=f,c=a;continue}b?f>d&&(d=f):f<d&&(d=f)}return[b?1-d:d,c]}show(a,b,c){let[d,e]=this.#p(b,c),{style:f}=this.#c||=this.#n();a.append(this.#c),f.insetInlineEnd=`${100*d}%`,f.top=`calc(${100*e}% + var(--editor-toolbar-vert-offset))`}hide(){this.#c.remove()}#o(){let a=document.createElement("button");a.className="highlightButton",a.tabIndex=0,a.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let b=document.createElement("span");a.append(b),b.className="visuallyHidden",b.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),a.addEventListener("contextmenu",dO),a.addEventListener("click",()=>{this.#m.highlightSelection("floating_button")}),this.#f.append(a)}}function dY(a,b,c){for(let d of c)b.addEventListener(d,a[d].bind(a))}class dZ{#q=0;get id(){return`pdfjs_internal_editor_${this.#q++}`}}class d${#r=(function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();let a=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(a);else for(let b=0;b<32;b++)a[b]=Math.floor(255*Math.random());return dk(a)})();#q=0;#s=null;static get _isSVGFittingCanvas(){let a=new OffscreenCanvas(1,3).getContext("2d"),b=new Image;return b.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',db(this,"_isSVGFittingCanvas",b.decode().then(()=>(a.drawImage(b,0,0,1,1,0,0,1,3),0===new Uint32Array(a.getImageData(0,0,1,1).data.buffer)[0])))}async #t(a,b){this.#s||=new Map;let c=this.#s.get(a);if(null===c)return null;if(c?.bitmap)return c.refCounter+=1,c;try{let a;if(c||={bitmap:null,id:`image_${this.#r}_${this.#q++}`,refCounter:0,isSvg:!1},"string"==typeof b?(c.url=b,a=await dC(b,"blob")):a=c.file=b,"image/svg+xml"===a.type){let b=d$._isSVGFittingCanvas,d=new FileReader,e=new Image,f=new Promise((a,f)=>{e.onload=()=>{c.bitmap=e,c.isSvg=!0,a()},d.onload=async()=>{let a=c.svgUrl=d.result;e.src=await b?`${a}#svgView(preserveAspectRatio(none))`:a},e.onerror=d.onerror=f});d.readAsDataURL(a),await f}else c.bitmap=await createImageBitmap(a);c.refCounter=1}catch(a){console.error(a),c=null}return this.#s.set(a,c),c&&this.#s.set(c.id,c),c}async getFromFile(a){let{lastModified:b,name:c,size:d,type:e}=a;return this.#t(`${b}_${c}_${d}_${e}`,a)}async getFromUrl(a){return this.#t(a,a)}async getFromId(a){this.#s||=new Map;let b=this.#s.get(a);return b?b.bitmap?(b.refCounter+=1,b):b.file?this.getFromFile(b.file):this.getFromUrl(b.url):null}getSvgUrl(a){let b=this.#s.get(a);return b?.isSvg?b.svgUrl:null}deleteId(a){this.#s||=new Map;let b=this.#s.get(a);b&&(b.refCounter-=1,0===b.refCounter&&(b.bitmap=null))}isValidId(a){return a.startsWith(`image_${this.#r}_`)}}class d_{#u=[];#v=!1;#w;#x=-1;constructor(a=128){this.#w=a}add({cmd:a,undo:b,post:c,mustExec:d,type:e=NaN,overwriteIfSameType:f=!1,keepUndo:g=!1}){if(d&&a(),this.#v)return;let h={cmd:a,undo:b,post:c,type:e};if(-1===this.#x){this.#u.length>0&&(this.#u.length=0),this.#x=0,this.#u.push(h);return}if(f&&this.#u[this.#x].type===e){g&&(h.undo=this.#u[this.#x].undo),this.#u[this.#x]=h;return}let i=this.#x+1;i===this.#w?this.#u.splice(0,1):(this.#x=i,i<this.#u.length&&this.#u.splice(i)),this.#u.push(h)}undo(){if(-1===this.#x)return;this.#v=!0;let{undo:a,post:b}=this.#u[this.#x];a(),b?.(),this.#v=!1,this.#x-=1}redo(){if(this.#x<this.#u.length-1){this.#x+=1,this.#v=!0;let{cmd:a,post:b}=this.#u[this.#x];a(),b?.(),this.#v=!1}}hasSomethingToUndo(){return -1!==this.#x}hasSomethingToRedo(){return this.#x<this.#u.length-1}destroy(){this.#u=null}}class d0{constructor(a){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:b}=dn.platform;for(const[c,d,e={}]of a)for(const a of c){const c=a.startsWith("mac+");b&&c?(this.callbacks.set(a.slice(4),{callback:d,options:e}),this.allKeys.add(a.split("+").at(-1))):b||c||(this.callbacks.set(a,{callback:d,options:e}),this.allKeys.add(a.split("+").at(-1)))}}#y(a){a.altKey&&this.buffer.push("alt"),a.ctrlKey&&this.buffer.push("ctrl"),a.metaKey&&this.buffer.push("meta"),a.shiftKey&&this.buffer.push("shift"),this.buffer.push(a.key);let b=this.buffer.join("+");return this.buffer.length=0,b}exec(a,b){if(!this.allKeys.has(b.key))return;let c=this.callbacks.get(this.#y(b));if(!c)return;let{callback:d,options:{bubbles:e=!1,args:f=[],checker:g=null}}=c;(!g||g(a,b))&&(d.bind(a,...f,b)(),e||(b.stopPropagation(),b.preventDefault()))}}class d1{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let a=new Map([["CanvasText",null],["Canvas",null]]),b=document.createElement("span");for(let c of(b.style.visibility="hidden",document.body.append(b),a.keys())){b.style.color=c;let d=window.getComputedStyle(b).color;a.set(c,dS(d))}return b.remove(),db(this,"_colors",a)}convert(a){let b=dS(a);if(!window.matchMedia("(forced-colors: active)").matches)return b;for(let[a,c]of this._colors)if(c.every((a,c)=>a===b[c]))return d1._colorsMapping.get(a);return b}getHexCode(a){let b=this._colors.get(a);return b?dq.makeHexColor(...b):a}}class d2{#z=null;#A=new Map;#B=new Map;#C=null;#D=null;#E=null;#F=new d_;#G=0;#H=new Set;#I=null;#J=null;#K=new Set;#L=!1;#M=null;#N=null;#O=null;#P=!1;#Q=null;#R=new dZ;#S=!1;#T=!1;#U=null;#V=null;#W=null;#X=cZ.NONE;#Y=new Set;#Z=null;#$=null;#_=null;#aa=this.blur.bind(this);#ab=this.focus.bind(this);#ac=this.copy.bind(this);#ad=this.cut.bind(this);#ae=this.paste.bind(this);#af=this.keydown.bind(this);#ag=this.keyup.bind(this);#ah=this.onEditingAction.bind(this);#ai=this.onPageChanging.bind(this);#aj=this.onScaleChanging.bind(this);#ak=this.#al.bind(this);#am=this.onRotationChanging.bind(this);#an={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#ao=[0,0];#ap=null;#aq=null;#ar=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let a=d2.prototype,b=a=>a.#aq.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&a.hasSomethingToControl(),c=(a,{target:b})=>{if(b instanceof HTMLInputElement){let{type:a}=b;return"text"!==a&&"number"!==a}return!0},d=this.TRANSLATE_SMALL,e=this.TRANSLATE_BIG;return db(this,"_keyboardManager",new d0([[["ctrl+a","mac+meta+a"],a.selectAll,{checker:c}],[["ctrl+z","mac+meta+z"],a.undo,{checker:c}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],a.redo,{checker:c}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],a.delete,{checker:c}],[["Enter","mac+Enter"],a.addNewEditorFromKeyboard,{checker:(a,{target:b})=>!(b instanceof HTMLButtonElement)&&a.#aq.contains(b)&&!a.isEnterHandled}],[[" ","mac+ "],a.addNewEditorFromKeyboard,{checker:(a,{target:b})=>!(b instanceof HTMLButtonElement)&&a.#aq.contains(document.activeElement)}],[["Escape","mac+Escape"],a.unselectAll],[["ArrowLeft","mac+ArrowLeft"],a.translateSelectedEditors,{args:[-d,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a.translateSelectedEditors,{args:[-e,0],checker:b}],[["ArrowRight","mac+ArrowRight"],a.translateSelectedEditors,{args:[d,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a.translateSelectedEditors,{args:[e,0],checker:b}],[["ArrowUp","mac+ArrowUp"],a.translateSelectedEditors,{args:[0,-d],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a.translateSelectedEditors,{args:[0,-e],checker:b}],[["ArrowDown","mac+ArrowDown"],a.translateSelectedEditors,{args:[0,d],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a.translateSelectedEditors,{args:[0,e],checker:b}]]))}constructor(a,b,c,d,e,f,g,h,i){this.#aq=a,this.#ar=b,this.#C=c,this._eventBus=d,this._eventBus._on("editingaction",this.#ah),this._eventBus._on("pagechanging",this.#ai),this._eventBus._on("scalechanging",this.#aj),this._eventBus._on("rotationchanging",this.#am),this.#as(),this.#at(),this.#D=e.annotationStorage,this.#M=e.filterFactory,this.#$=f,this.#O=g||null,this.#L=h,this.#W=i||null,this.viewParameters={realScale:dB.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){for(let a of(this.#au(),this.#av(),this._eventBus._off("editingaction",this.#ah),this._eventBus._off("pagechanging",this.#ai),this._eventBus._off("scalechanging",this.#aj),this._eventBus._off("rotationchanging",this.#am),this.#B.values()))a.destroy();this.#B.clear(),this.#A.clear(),this.#K.clear(),this.#z=null,this.#Y.clear(),this.#F.destroy(),this.#C?.destroy(),this.#Q?.hide(),this.#Q=null,this.#N&&(clearTimeout(this.#N),this.#N=null),this.#ap&&(clearTimeout(this.#ap),this.#ap=null),this.#aw()}async mlGuess(a){return this.#W?.guess(a)||null}get hasMLManager(){return!!this.#W}get hcmFilter(){return db(this,"hcmFilter",this.#$?this.#M.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return db(this,"direction",getComputedStyle(this.#aq).direction)}get highlightColors(){return db(this,"highlightColors",this.#O?new Map(this.#O.split(",").map(a=>a.split("=").map(a=>a.trim()))):null)}get highlightColorNames(){return db(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,a=>a.reverse())):null)}setMainHighlightColorPicker(a){this.#V=a}editAltText(a){this.#C?.editAltText(this,a)}onPageChanging({pageNumber:a}){this.#G=a-1}focusMainContainer(){this.#aq.focus()}findParent(a,b){for(let c of this.#B.values()){let{x:d,y:e,width:f,height:g}=c.div.getBoundingClientRect();if(a>=d&&a<=d+f&&b>=e&&b<=e+g)return c}return null}disableUserSelect(a=!1){this.#ar.classList.toggle("noUserSelect",a)}addShouldRescale(a){this.#K.add(a)}removeShouldRescale(a){this.#K.delete(a)}onScaleChanging({scale:a}){for(let b of(this.commitOrRemove(),this.viewParameters.realScale=a*dB.PDF_TO_CSS_UNITS,this.#K))b.onScaleChanging()}onRotationChanging({pagesRotation:a}){this.commitOrRemove(),this.viewParameters.rotation=a}#ax({anchorNode:a}){return a.nodeType===Node.TEXT_NODE?a.parentElement:a}highlightSelection(a=""){let b=document.getSelection();if(!b||b.isCollapsed)return;let{anchorNode:c,anchorOffset:d,focusNode:e,focusOffset:f}=b,g=b.toString(),h=this.#ax(b).closest(".textLayer"),i=this.getSelectionBoxes(h);if(i){for(let j of(b.empty(),this.#X===cZ.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:cZ.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0)),this.#B.values()))if(j.hasTextLayer(h)){j.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:a,boxes:i,anchorNode:c,anchorOffset:d,focusNode:e,focusOffset:f,text:g});break}}}#ay(){let a=document.getSelection();if(!a||a.isCollapsed)return;let b=this.#ax(a).closest(".textLayer"),c=this.getSelectionBoxes(b);c&&(this.#Q||=new dX(this),this.#Q.show(b,c,"ltr"===this.direction))}addToAnnotationStorage(a){a.isEmpty()||!this.#D||this.#D.has(a.id)||this.#D.setValue(a.id,a)}#al(){let a=document.getSelection();if(!a||a.isCollapsed){this.#Z&&(this.#Q?.hide(),this.#Z=null,this.#az({hasSelectedText:!1}));return}let{anchorNode:b}=a;if(b!==this.#Z){if(!this.#ax(a).closest(".textLayer")){this.#Z&&(this.#Q?.hide(),this.#Z=null,this.#az({hasSelectedText:!1}));return}if(this.#Q?.hide(),this.#Z=b,this.#az({hasSelectedText:!0}),(this.#X===cZ.HIGHLIGHT||this.#X===cZ.NONE)&&(this.#X===cZ.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#P=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=b=>{("pointerup"!==b.type||0===b.button)&&(window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),"pointerup"===b.type&&this.#aA("main_toolbar"))};window.addEventListener("pointerup",a),window.addEventListener("blur",a)}}}#aA(a=""){this.#X===cZ.HIGHLIGHT?this.highlightSelection(a):this.#L&&this.#ay()}#as(){document.addEventListener("selectionchange",this.#ak)}#aw(){document.removeEventListener("selectionchange",this.#ak)}#aB(){window.addEventListener("focus",this.#ab),window.addEventListener("blur",this.#aa)}#av(){window.removeEventListener("focus",this.#ab),window.removeEventListener("blur",this.#aa)}blur(){if(this.isShiftKeyDown=!1,this.#P&&(this.#P=!1,this.#aA("main_toolbar")),!this.hasSelection)return;let{activeElement:a}=document;for(let b of this.#Y)if(b.div.contains(a)){this.#U=[b,a],b._focusEventsAllowed=!1;break}}focus(){if(!this.#U)return;let[a,b]=this.#U;this.#U=null,b.addEventListener("focusin",()=>{a._focusEventsAllowed=!0},{once:!0}),b.focus()}#at(){window.addEventListener("keydown",this.#af),window.addEventListener("keyup",this.#ag)}#au(){window.removeEventListener("keydown",this.#af),window.removeEventListener("keyup",this.#ag)}#aC(){document.addEventListener("copy",this.#ac),document.addEventListener("cut",this.#ad),document.addEventListener("paste",this.#ae)}#aD(){document.removeEventListener("copy",this.#ac),document.removeEventListener("cut",this.#ad),document.removeEventListener("paste",this.#ae)}addEditListeners(){this.#at(),this.#aC()}removeEditListeners(){this.#au(),this.#aD()}copy(a){if(a.preventDefault(),this.#z?.commitOrRemove(),!this.hasSelection)return;let b=[];for(let a of this.#Y){let c=a.serialize(!0);c&&b.push(c)}0!==b.length&&a.clipboardData.setData("application/pdfjs",JSON.stringify(b))}cut(a){this.copy(a),this.delete()}paste(a){a.preventDefault();let{clipboardData:b}=a;for(let a of b.items)for(let b of this.#J)if(b.isHandlingMimeForPasting(a.type))return void b.paste(a,this.currentLayer);let c=b.getData("application/pdfjs");if(!c)return;try{c=JSON.parse(c)}catch(a){c7(`paste: "${a.message}".`);return}if(!Array.isArray(c))return;this.unselectAll();let d=this.currentLayer;try{let a=[];for(let b of c){let c=d.deserialize(b);if(!c)return;a.push(c)}let b=()=>{for(let b of a)this.#aE(b);this.#aF(a)};this.addCommands({cmd:b,undo:()=>{for(let b of a)b.remove()},mustExec:!0})}catch(a){c7(`paste: "${a.message}".`)}}keydown(a){this.isShiftKeyDown||"Shift"!==a.key||(this.isShiftKeyDown=!0),this.#X===cZ.NONE||this.isEditorHandlingKeyboard||d2._keyboardManager.exec(this,a)}keyup(a){this.isShiftKeyDown&&"Shift"===a.key&&(this.isShiftKeyDown=!1,this.#P&&(this.#P=!1,this.#aA("main_toolbar")))}onEditingAction({name:a}){switch(a){case"undo":case"redo":case"delete":case"selectAll":this[a]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#az(a){Object.entries(a).some(([a,b])=>this.#an[a]!==b)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#an,a)}),this.#X===cZ.HIGHLIGHT&&!1===a.hasSelectedEditor&&this.#aG([[c$.HIGHLIGHT_FREE,!0]]))}#aG(a){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:a})}setEditingState(a){a?(this.#aB(),this.#aC(),this.#az({isEditing:this.#X!==cZ.NONE,isEmpty:this.#aH(),hasSomethingToUndo:this.#F.hasSomethingToUndo(),hasSomethingToRedo:this.#F.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#av(),this.#aD(),this.#az({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(a){if(!this.#J)for(let b of(this.#J=a,this.#J))this.#aG(b.defaultPropertiesToUpdate)}getId(){return this.#R.id}get currentLayer(){return this.#B.get(this.#G)}getLayer(a){return this.#B.get(a)}get currentPageIndex(){return this.#G}addLayer(a){this.#B.set(a.pageIndex,a),this.#S?a.enable():a.disable()}removeLayer(a){this.#B.delete(a.pageIndex)}updateMode(a,b=null,c=!1){if(this.#X!==a){if(this.#X=a,a===cZ.NONE){this.setEditingState(!1),this.#aI();return}for(let b of(this.setEditingState(!0),this.#aJ(),this.unselectAll(),this.#B.values()))b.updateMode(a);if(!b&&c)return void this.addNewEditorFromKeyboard();if(b){for(let a of this.#A.values())if(a.annotationElementId===b){this.setSelected(a),a.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(a){a!==this.#X&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:a})}updateParams(a,b){if(this.#J){switch(a){case c$.CREATE:this.currentLayer.addNewEditor();return;case c$.HIGHLIGHT_DEFAULT_COLOR:this.#V?.updateColor(b);break;case c$.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#_||=new Map).set(a,b),this.showAllEditors("highlight",b)}for(let c of this.#Y)c.updateParams(a,b);for(let c of this.#J)c.updateDefaultParams(a,b)}}showAllEditors(a,b,c=!1){for(let c of this.#A.values())c.editorType===a&&c.show(b);(this.#_?.get(c$.HIGHLIGHT_SHOW_ALL)??!0)!==b&&this.#aG([[c$.HIGHLIGHT_SHOW_ALL,b]])}enableWaiting(a=!1){if(this.#T!==a)for(let b of(this.#T=a,this.#B.values()))a?b.disableClick():b.enableClick(),b.div.classList.toggle("waiting",a)}#aJ(){if(!this.#S){for(let a of(this.#S=!0,this.#B.values()))a.enable();for(let a of this.#A.values())a.enable()}}#aI(){if(this.unselectAll(),this.#S){for(let a of(this.#S=!1,this.#B.values()))a.disable();for(let a of this.#A.values())a.disable()}}getEditors(a){let b=[];for(let c of this.#A.values())c.pageIndex===a&&b.push(c);return b}getEditor(a){return this.#A.get(a)}addEditor(a){this.#A.set(a.id,a)}removeEditor(a){a.div.contains(document.activeElement)&&(this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.focusMainContainer(),this.#N=null},0)),this.#A.delete(a.id),this.unselect(a),a.annotationElementId&&this.#H.has(a.annotationElementId)||this.#D?.remove(a.id)}addDeletedAnnotationElement(a){this.#H.add(a.annotationElementId),this.addChangedExistingAnnotation(a),a.deleted=!0}isDeletedAnnotationElement(a){return this.#H.has(a)}removeDeletedAnnotationElement(a){this.#H.delete(a.annotationElementId),this.removeChangedExistingAnnotation(a),a.deleted=!1}#aE(a){let b=this.#B.get(a.pageIndex);b?b.addOrRebuild(a):(this.addEditor(a),this.addToAnnotationStorage(a))}setActiveEditor(a){this.#z!==a&&(this.#z=a,a&&this.#aG(a.propertiesToUpdate))}get #aK(){let a=null;for(a of this.#Y);return a}updateUI(a){this.#aK===a&&this.#aG(a.propertiesToUpdate)}toggleSelected(a){if(this.#Y.has(a)){this.#Y.delete(a),a.unselect(),this.#az({hasSelectedEditor:this.hasSelection});return}this.#Y.add(a),a.select(),this.#aG(a.propertiesToUpdate),this.#az({hasSelectedEditor:!0})}setSelected(a){for(let b of this.#Y)b!==a&&b.unselect();this.#Y.clear(),this.#Y.add(a),a.select(),this.#aG(a.propertiesToUpdate),this.#az({hasSelectedEditor:!0})}isSelected(a){return this.#Y.has(a)}get firstSelectedEditor(){return this.#Y.values().next().value}unselect(a){a.unselect(),this.#Y.delete(a),this.#az({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#Y.size}get isEnterHandled(){return 1===this.#Y.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#F.undo(),this.#az({hasSomethingToUndo:this.#F.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#aH()})}redo(){this.#F.redo(),this.#az({hasSomethingToUndo:!0,hasSomethingToRedo:this.#F.hasSomethingToRedo(),isEmpty:this.#aH()})}addCommands(a){this.#F.add(a),this.#az({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#aH()})}#aH(){if(0===this.#A.size)return!0;if(1===this.#A.size)for(let a of this.#A.values())return a.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let a=[...this.#Y],b=()=>{for(let b of a)this.#aE(b)};this.addCommands({cmd:()=>{for(let b of a)b.remove()},undo:b,mustExec:!0})}commitOrRemove(){this.#z?.commitOrRemove()}hasSomethingToControl(){return this.#z||this.hasSelection}#aF(a){for(let a of this.#Y)a.unselect();for(let b of(this.#Y.clear(),a))b.isEmpty()||(this.#Y.add(b),b.select());this.#az({hasSelectedEditor:this.hasSelection})}selectAll(){for(let a of this.#Y)a.commit();this.#aF(this.#A.values())}unselectAll(){if((!this.#z||(this.#z.commitOrRemove(),this.#X===cZ.NONE))&&this.hasSelection){for(let a of this.#Y)a.unselect();this.#Y.clear(),this.#az({hasSelectedEditor:!1})}}translateSelectedEditors(a,b,c=!1){if(c||this.commitOrRemove(),!this.hasSelection)return;this.#ao[0]+=a,this.#ao[1]+=b;let[d,e]=this.#ao,f=[...this.#Y];for(let c of(this.#ap&&clearTimeout(this.#ap),this.#ap=setTimeout(()=>{this.#ap=null,this.#ao[0]=this.#ao[1]=0,this.addCommands({cmd:()=>{for(let a of f)this.#A.has(a.id)&&a.translateInPage(d,e)},undo:()=>{for(let a of f)this.#A.has(a.id)&&a.translateInPage(-d,-e)},mustExec:!1})},1e3),f))c.translateInPage(a,b)}setUpDragSession(){if(this.hasSelection)for(let a of(this.disableUserSelect(!0),this.#I=new Map,this.#Y))this.#I.set(a,{savedX:a.x,savedY:a.y,savedPageIndex:a.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!this.#I)return!1;this.disableUserSelect(!1);let a=this.#I;this.#I=null;let b=!1;for(let[{x:c,y:d,pageIndex:e},f]of a)f.newX=c,f.newY=d,f.newPageIndex=e,b||=c!==f.savedX||d!==f.savedY||e!==f.savedPageIndex;if(!b)return!1;let c=(a,b,c,d)=>{if(this.#A.has(a.id)){let e=this.#B.get(d);e?a._setParentAndPosition(e,b,c):(a.pageIndex=d,a.x=b,a.y=c)}};return this.addCommands({cmd:()=>{for(let[b,{newX:d,newY:e,newPageIndex:f}]of a)c(b,d,e,f)},undo:()=>{for(let[b,{savedX:d,savedY:e,savedPageIndex:f}]of a)c(b,d,e,f)},mustExec:!0}),!0}dragSelectedEditors(a,b){if(this.#I)for(let c of this.#I.keys())c.drag(a,b)}rebuild(a){if(null===a.parent){let b=this.getLayer(a.pageIndex);b?(b.changeParent(a),b.addOrRebuild(a)):(this.addEditor(a),this.addToAnnotationStorage(a),a.rebuild())}else a.parent.addOrRebuild(a)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#Y.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(a){return this.#z===a}getActive(){return this.#z}getMode(){return this.#X}get imageManager(){return db(this,"imageManager",new d$)}getSelectionBoxes(a){let b;if(!a)return null;let c=document.getSelection();for(let b=0,d=c.rangeCount;b<d;b++)if(!a.contains(c.getRangeAt(b).commonAncestorContainer))return null;let{x:d,y:e,width:f,height:g}=a.getBoundingClientRect();switch(a.getAttribute("data-main-rotation")){case"90":b=(a,b,c,h)=>({x:(b-e)/g,y:1-(a+c-d)/f,width:h/g,height:c/f});break;case"180":b=(a,b,c,h)=>({x:1-(a+c-d)/f,y:1-(b+h-e)/g,width:c/f,height:h/g});break;case"270":b=(a,b,c,h)=>({x:1-(b+h-e)/g,y:(a-d)/f,width:h/g,height:c/f});break;default:b=(a,b,c,h)=>({x:(a-d)/f,y:(b-e)/g,width:c/f,height:h/g})}let h=[];for(let a=0,d=c.rangeCount;a<d;a++){let d=c.getRangeAt(a);if(!d.collapsed)for(let{x:a,y:c,width:e,height:f}of d.getClientRects())0!==e&&0!==f&&h.push(b(a,c,e,f))}return 0===h.length?null:h}addChangedExistingAnnotation({annotationElementId:a,id:b}){(this.#E||=new Map).set(a,b)}removeChangedExistingAnnotation({annotationElementId:a}){this.#E?.delete(a)}renderAnnotationElement(a){let b=this.#E?.get(a.data.id);if(!b)return;let c=this.#D.getRawValue(b);!c||(this.#X!==cZ.NONE||c.hasBeenModified)&&c.renderAnnotationElement(a)}}class d3{#aL="";#aM=!1;#aN=null;#aO=null;#aP=null;#aQ=!1;#e=null;static _l10nPromise=null;constructor(a){this.#e=a}static initialize(a){d3._l10nPromise||=a}async render(){let a=this.#aN=document.createElement("button");a.className="altText";let b=await d3._l10nPromise.get("pdfjs-editor-alt-text-button-label");a.textContent=b,a.setAttribute("aria-label",b),a.tabIndex="0",a.addEventListener("contextmenu",dO),a.addEventListener("pointerdown",a=>a.stopPropagation());let c=a=>{a.preventDefault(),this.#e._uiManager.editAltText(this.#e)};return a.addEventListener("click",c,{capture:!0}),a.addEventListener("keydown",b=>{b.target===a&&"Enter"===b.key&&(this.#aQ=!0,c(b))}),await this.#aR(),a}finish(){this.#aN&&(this.#aN.focus({focusVisible:this.#aQ}),this.#aQ=!1)}isEmpty(){return!this.#aL&&!this.#aM}get data(){return{altText:this.#aL,decorative:this.#aM}}set data({altText:a,decorative:b}){(this.#aL!==a||this.#aM!==b)&&(this.#aL=a,this.#aM=b,this.#aR())}toggle(a=!1){this.#aN&&(!a&&this.#aP&&(clearTimeout(this.#aP),this.#aP=null),this.#aN.disabled=!a)}destroy(){this.#aN?.remove(),this.#aN=null,this.#aO=null}async #aR(){let a=this.#aN;if(!a)return;if(!this.#aL&&!this.#aM){a.classList.remove("done"),this.#aO?.remove();return}a.classList.add("done"),d3._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(b=>{a.setAttribute("aria-label",b)});let b=this.#aO;if(!b){this.#aO=b=document.createElement("span"),b.className="tooltip",b.setAttribute("role","tooltip");let c=b.id=`alt-text-tooltip-${this.#e.id}`;a.setAttribute("aria-describedby",c),a.addEventListener("mouseenter",()=>{this.#aP=setTimeout(()=>{this.#aP=null,this.#aO.classList.add("show"),this.#e._reportTelemetry({action:"alt_text_tooltip"})},100)}),a.addEventListener("mouseleave",()=>{this.#aP&&(clearTimeout(this.#aP),this.#aP=null),this.#aO?.classList.remove("show")})}b.innerText=this.#aM?await d3._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#aL,b.parentNode||a.append(b);let c=this.#e.getImageForAltText();c?.setAttribute("aria-describedby",b.id)}}class d4{#aS=null;#aL=null;#aT=!1;#aU=!1;#aV=null;#aW=null;#aX=this.focusin.bind(this);#aY=this.focusout.bind(this);#aZ=null;#a$="";#a_=!1;#a0=null;#a1=!1;#a2=!1;#a3=!1;#a4=null;#a5=0;#a6=0;#a7=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#a8=!1;#a9=d4._zIndex++;static _borderLineWidth=-1;static _colorManager=new d1;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let a=d4.prototype._resizeWithKeyboard,b=d2.TRANSLATE_SMALL,c=d2.TRANSLATE_BIG;return db(this,"_resizerKeyboardManager",new d0([[["ArrowLeft","mac+ArrowLeft"],a,{args:[-b,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a,{args:[-c,0]}],[["ArrowRight","mac+ArrowRight"],a,{args:[b,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a,{args:[c,0]}],[["ArrowUp","mac+ArrowUp"],a,{args:[0,-b]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a,{args:[0,-c]}],[["ArrowDown","mac+ArrowDown"],a,{args:[0,b]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a,{args:[0,c]}],[["Escape","mac+Escape"],d4.prototype._stopResizingWithKeyboard]]))}constructor(a){this.constructor===d4&&c8("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:b,rawDims:{pageWidth:c,pageHeight:d,pageX:e,pageY:f}}=this.parent.viewport;this.rotation=b,this.pageRotation=(360+b-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[c,d],this.pageTranslation=[e,f];const[g,h]=this.parentDimensions;this.x=a.x/g,this.y=a.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return db(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){let b=new d5({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});b.annotationElementId=a.annotationElementId,b.deleted=!0,b._uiManager.addToAnnotationStorage(b)}static initialize(a,b,c){if(d4._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(b=>[b,a.get(b.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))])),c?.strings)for(let b of c.strings)d4._l10nPromise.set(b,a.get(b));if(-1!==d4._borderLineWidth)return;let d=getComputedStyle(document.documentElement);d4._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,b){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,b){c8("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#a8}set _isDraggable(a){this.#a8=a,this.div?.classList.toggle("draggable",a)}get isEnterHandled(){return!0}center(){let[a,b]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*b/(2*a),this.y+=this.width*a/(2*b);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*b/(2*a),this.y-=this.width*a/(2*b);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#a9}setParent(a){null!==a?(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions):this.#ba(),this.parent=a}focusin(a){this._focusEventsAllowed&&(this.#a_?this.#a_=!1:this.parent.setSelected(this))}focusout(a){if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let b=a.relatedTarget;!b?.closest(`#${this.id}`)&&(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,b,c,d){let[e,f]=this.parentDimensions;[c,d]=this.screenToPageTranslation(c,d),this.x=(a+c)/e,this.y=(b+d)/f,this.fixAndSetPosition()}#bb([a,b],c,d){[c,d]=this.screenToPageTranslation(c,d),this.x+=c/a,this.y+=d/b,this.fixAndSetPosition()}translate(a,b){this.#bb(this.parentDimensions,a,b)}translateInPage(a,b){this.#a0||=[this.x,this.y],this.#bb(this.pageDimensions,a,b),this.div.scrollIntoView({block:"nearest"})}drag(a,b){this.#a0||=[this.x,this.y];let[c,d]=this.parentDimensions;if(this.x+=a/c,this.y+=b/d,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:a,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,a,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:e,y:f}=this,[g,h]=this.getBaseTranslation();e+=g,f+=h,this.div.style.left=`${(100*e).toFixed(2)}%`,this.div.style.top=`${(100*f).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#a0&&(this.#a0[0]!==this.x||this.#a0[1]!==this.y)}getBaseTranslation(){let[a,b]=this.parentDimensions,{_borderLineWidth:c}=d4,d=c/a,e=c/b;switch(this.rotation){case 90:return[-d,e];case 180:return[d,e];case 270:return[d,-e];default:return[-d,-e]}}get _mustFixPosition(){return!0}fixAndSetPosition(a=this.rotation){let[b,c]=this.pageDimensions,{x:d,y:e,width:f,height:g}=this;if(f*=b,g*=c,d*=b,e*=c,this._mustFixPosition)switch(a){case 0:d=Math.max(0,Math.min(b-f,d)),e=Math.max(0,Math.min(c-g,e));break;case 90:d=Math.max(0,Math.min(b-g,d)),e=Math.min(c,Math.max(f,e));break;case 180:d=Math.min(b,Math.max(f,d)),e=Math.min(c,Math.max(g,e));break;case 270:d=Math.min(b,Math.max(g,d)),e=Math.max(0,Math.min(c-f,e))}this.x=d/=b,this.y=e/=c;let[h,i]=this.getBaseTranslation();d+=h,e+=i;let{style:j}=this.div;j.left=`${(100*d).toFixed(2)}%`,j.top=`${(100*e).toFixed(2)}%`,this.moveInDOM()}static #bc(a,b,c){switch(c){case 90:return[b,-a];case 180:return[-a,-b];case 270:return[-b,a];default:return[a,b]}}screenToPageTranslation(a,b){return d4.#bc(a,b,this.parentRotation)}pageTranslationToScreen(a,b){return d4.#bc(a,b,360-this.parentRotation)}#bd(a){switch(a){case 90:{let[a,b]=this.pageDimensions;return[0,-a/b,b/a,0]}case 180:return[-1,0,0,-1];case 270:{let[a,b]=this.pageDimensions;return[0,a/b,-b/a,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:a,pageDimensions:[b,c]}=this,d=b*a,e=c*a;return dn.isCSSRoundSupported?[Math.round(d),Math.round(e)]:[d,e]}setDims(a,b){let[c,d]=this.parentDimensions;this.div.style.width=`${(100*a/c).toFixed(2)}%`,this.#aU||(this.div.style.height=`${(100*b/d).toFixed(2)}%`)}fixDims(){let{style:a}=this.div,{height:b,width:c}=a,d=c.endsWith("%"),e=!this.#aU&&b.endsWith("%");if(d&&e)return;let[f,g]=this.parentDimensions;d||(a.width=`${(100*parseFloat(c)/f).toFixed(2)}%`),this.#aU||e||(a.height=`${(100*parseFloat(b)/g).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#be(){if(!this.#aV){for(let a of(this.#aV=document.createElement("div"),this.#aV.classList.add("resizers"),this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"])){let b=document.createElement("div");this.#aV.append(b),b.classList.add("resizer",a),b.setAttribute("data-resizer-name",a),b.addEventListener("pointerdown",this.#bf.bind(this,a)),b.addEventListener("contextmenu",dO),b.tabIndex=-1}this.div.prepend(this.#aV)}}#bf(a,b){b.preventDefault();let{isMac:c}=dn.platform;if(0!==b.button||b.ctrlKey&&c)return;this.#aL?.toggle(!1);let d=this.#bg.bind(this,a),e=this._isDraggable;this._isDraggable=!1;let f={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",d,f),window.addEventListener("contextmenu",dO);let g=this.x,h=this.y,i=this.width,j=this.height,k=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(b.target).cursor;let m=()=>{this.parent.togglePointerEvents(!0),this.#aL?.toggle(!0),this._isDraggable=e,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",d,f),window.removeEventListener("contextmenu",dO),this.parent.div.style.cursor=k,this.div.style.cursor=l,this.#bh(g,h,i,j)};window.addEventListener("pointerup",m),window.addEventListener("blur",m)}#bh(a,b,c,d){let e=this.x,f=this.y,g=this.width,h=this.height;(e!==a||f!==b||g!==c||h!==d)&&this.addCommands({cmd:()=>{this.width=g,this.height=h,this.x=e,this.y=f;let[a,b]=this.parentDimensions;this.setDims(a*g,b*h),this.fixAndSetPosition()},undo:()=>{this.width=c,this.height=d,this.x=a,this.y=b;let[e,f]=this.parentDimensions;this.setDims(e*c,f*d),this.fixAndSetPosition()},mustExec:!0})}#bg(a,b){let c,d,e,f,[g,h]=this.parentDimensions,i=this.x,j=this.y,k=this.width,l=this.height,m=d4.MIN_SIZE/g,n=d4.MIN_SIZE/h,o=a=>Math.round(1e4*a)/1e4,p=this.#bd(this.rotation),q=(a,b)=>[p[0]*a+p[2]*b,p[1]*a+p[3]*b],r=this.#bd(360-this.rotation),s=!1,t=!1;switch(a){case"topLeft":s=!0,c=(a,b)=>[0,0],d=(a,b)=>[a,b];break;case"topMiddle":c=(a,b)=>[a/2,0],d=(a,b)=>[a/2,b];break;case"topRight":s=!0,c=(a,b)=>[a,0],d=(a,b)=>[0,b];break;case"middleRight":t=!0,c=(a,b)=>[a,b/2],d=(a,b)=>[0,b/2];break;case"bottomRight":s=!0,c=(a,b)=>[a,b],d=(a,b)=>[0,0];break;case"bottomMiddle":c=(a,b)=>[a/2,b],d=(a,b)=>[a/2,0];break;case"bottomLeft":s=!0,c=(a,b)=>[0,b],d=(a,b)=>[a,0];break;case"middleLeft":t=!0,c=(a,b)=>[0,b/2],d=(a,b)=>[a,b/2]}let u=c(k,l),v=d(k,l),w=q(...v),x=o(i+w[0]),y=o(j+w[1]),z=1,A=1,[B,C]=this.screenToPageTranslation(b.movementX,b.movementY);if([B,C]=(e=B/g,f=C/h,[r[0]*e+r[2]*f,r[1]*e+r[3]*f]),s){let a=Math.hypot(k,l);z=A=Math.max(Math.min(Math.hypot(v[0]-u[0]-B,v[1]-u[1]-C)/a,1/k,1/l),m/k,n/l)}else t?z=Math.max(m,Math.min(1,Math.abs(v[0]-u[0]-B)))/k:A=Math.max(n,Math.min(1,Math.abs(v[1]-u[1]-C)))/l;let D=o(k*z),E=o(l*A),F=x-(w=q(...d(D,E)))[0],G=y-w[1];this.width=D,this.height=E,this.x=F,this.y=G,this.setDims(g*D,h*E),this.fixAndSetPosition()}altTextFinish(){this.#aL?.finish()}async addEditToolbar(){return this.#aZ||this.#a2||(this.#aZ=new dW(this),this.div.append(this.#aZ.render()),this.#aL&&this.#aZ.addAltTextButton(await this.#aL.render())),this.#aZ}removeEditToolbar(){this.#aZ&&(this.#aZ.remove(),this.#aZ=null,this.#aL?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#aL||(d3.initialize(d4._l10nPromise),this.#aL=new d3(this),await this.addEditToolbar())}get altTextData(){return this.#aL?.data}set altTextData(a){this.#aL&&(this.#aL.data=a)}hasAltText(){return!this.#aL?.isEmpty()}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#aT?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",this.#aX),this.div.addEventListener("focusout",this.#aY);let[a,b]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*b/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/b).toFixed(2)}%`);let[c,d]=this.getInitialTranslation();return this.translate(c,d),dY(this,this.div,["pointerdown"]),this.div}pointerdown(a){let{isMac:b}=dn.platform;0!==a.button||a.ctrlKey&&b?a.preventDefault():(this.#a_=!0,this._isDraggable)?this.#bi(a):this.#bj(a)}#bj(a){let{isMac:b}=dn.platform;a.ctrlKey&&!b||a.shiftKey||a.metaKey&&b?this.parent.toggleSelected(this):this.parent.setSelected(this)}#bi(a){let b,c,d=this._uiManager.isSelected(this);this._uiManager.setUpDragSession(),d&&(this.div.classList.add("moving"),b={passive:!0,capture:!0},this.#a5=a.clientX,this.#a6=a.clientY,c=a=>{let{clientX:b,clientY:c}=a,[d,e]=this.screenToPageTranslation(b-this.#a5,c-this.#a6);this.#a5=b,this.#a6=c,this._uiManager.dragSelectedEditors(d,e)},window.addEventListener("pointermove",c,b));let e=()=>{window.removeEventListener("pointerup",e),window.removeEventListener("blur",e),d&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",c,b)),this.#a_=!1,this._uiManager.endDragSession()||this.#bj(a)};window.addEventListener("pointerup",e),window.addEventListener("blur",e)}moveInDOM(){this.#a4&&clearTimeout(this.#a4),this.#a4=setTimeout(()=>{this.#a4=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(a,b,c){a.changeParent(this),this.x=b,this.y=c,this.fixAndSetPosition()}getRect(a,b,c=this.rotation){let d=this.parentScale,[e,f]=this.pageDimensions,[g,h]=this.pageTranslation,i=a/d,j=b/d,k=this.x*e,l=this.y*f,m=this.width*e,n=this.height*f;switch(c){case 0:return[k+i+g,f-l-j-n+h,k+i+m+g,f-l-j+h];case 90:return[k+j+g,f-l+i+h,k+j+n+g,f-l+i+m+h];case 180:return[k-i-m+g,f-l+j+h,k-i+g,f-l+j+n+h];case 270:return[k-j-n+g,f-l-i-m+h,k-j+g,f-l-i+h];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(a,b){let[c,d,e,f]=a,g=e-c,h=f-d;switch(this.rotation){case 0:return[c,b-f,g,h];case 90:return[c,b-d,h,g];case 180:return[e,b-d,g,h];case 270:return[e,b-f,h,g];default:throw Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#a2=!0}disableEditMode(){this.#a2=!1}isInEditMode(){return this.#a2}shouldGetKeyboardEvents(){return this.#a3}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#aX),this.div?.addEventListener("focusout",this.#aY)}rotate(a){}serialize(a=!1,b=null){c8("An editor must be serializable")}static deserialize(a,b,c){let d=new this.prototype.constructor({parent:b,id:b.getNextId(),uiManager:c});d.rotation=a.rotation;let[e,f]=d.pageDimensions,[g,h,i,j]=d.getRectInCurrentCoords(a.rect,f);return d.x=g/e,d.y=h/f,d.width=i/e,d.height=j/f,d}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",this.#aX),this.div.removeEventListener("focusout",this.#aY),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#a4&&(clearTimeout(this.#a4),this.#a4=null),this.#ba(),this.removeEditToolbar(),this.#a7){for(let a of this.#a7.values())clearTimeout(a);this.#a7=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#be(),this.#aV.classList.remove("hidden"),dY(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(a){if(!this.isResizable||a.target!==this.div||"Enter"!==a.key)return;this._uiManager.setSelected(this),this.#aW={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let b=this.#aV.children;if(!this.#aS){this.#aS=Array.from(b);let a=this.#bk.bind(this),c=this.#bl.bind(this);for(let b of this.#aS){let d=b.getAttribute("data-resizer-name");b.setAttribute("role","spinbutton"),b.addEventListener("keydown",a),b.addEventListener("blur",c),b.addEventListener("focus",this.#bm.bind(this,d)),d4._l10nPromise.get(`pdfjs-editor-resizer-label-${d}`).then(a=>b.setAttribute("aria-label",a))}}let c=this.#aS[0],d=0;for(let a of b){if(a===c)break;d++}let e=(360-this.rotation+this.parentRotation)%360/90*(this.#aS.length/4);if(e!==d){if(e<d)for(let a=0;a<d-e;a++)this.#aV.append(this.#aV.firstChild);else if(e>d)for(let a=0;a<e-d;a++)this.#aV.firstChild.before(this.#aV.lastChild);let a=0;for(let c of b){let b=this.#aS[a++].getAttribute("data-resizer-name");d4._l10nPromise.get(`pdfjs-editor-resizer-label-${b}`).then(a=>c.setAttribute("aria-label",a))}}this.#bn(0),this.#a3=!0,this.#aV.firstChild.focus({focusVisible:!0}),a.preventDefault(),a.stopImmediatePropagation()}#bk(a){d4._resizerKeyboardManager.exec(this,a)}#bl(a){this.#a3&&a.relatedTarget?.parentNode!==this.#aV&&this.#ba()}#bm(a){this.#a$=this.#a3?a:""}#bn(a){if(this.#aS)for(let b of this.#aS)b.tabIndex=a}_resizeWithKeyboard(a,b){this.#a3&&this.#bg(this.#a$,{movementX:a,movementY:b})}#ba(){if(this.#a3=!1,this.#bn(-1),this.#aW){let{savedX:a,savedY:b,savedWidth:c,savedHeight:d}=this.#aW;this.#bh(a,b,c,d),this.#aW=null}}_stopResizingWithKeyboard(){this.#ba(),this.div.focus()}select(){(this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#aZ)?this.#aZ?.show():this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this.#aZ?.show()})}unselect(){this.#aV?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this.#aZ?.hide()}updateParams(a,b){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#a1}set isEditing(a){this.#a1=a,this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,b){this.#aU=!0;let{style:c}=this.div;c.aspectRatio=a/b,c.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(a,b=!1){if(b){this.#a7||=new Map;let{action:b}=a,c=this.#a7.get(b);c&&clearTimeout(c),c=setTimeout(()=>{this._reportTelemetry(a),this.#a7.delete(b),0===this.#a7.size&&(this.#a7=null)},d4._telemetryTimeout),this.#a7.set(b,c);return}a.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:a}})}show(a=this._isVisible){this.div.classList.toggle("hidden",!a),this._isVisible=a}enable(){this.div&&(this.div.tabIndex=0),this.#aT=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#aT=!0}renderAnnotationElement(a){let b=a.container.querySelector(".annotationContent");if(b){if("CANVAS"===b.nodeName){let a=b;(b=document.createElement("div")).classList.add("annotationContent",this.editorType),a.before(b)}}else(b=document.createElement("div")).classList.add("annotationContent",this.editorType),a.container.prepend(b);return b}resetAnnotationElement(a){let{firstChild:b}=a.container;"DIV"===b.nodeName&&b.classList.contains("annotationContent")&&b.remove()}}class d5 extends d4{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}class d6{constructor(a){this.h1=a?0|a:0xc3d2e1f0,this.h2=a?0|a:0xc3d2e1f0}update(a){let b,c;if("string"==typeof a){b=new Uint8Array(2*a.length),c=0;for(let d=0,e=a.length;d<e;d++){let e=a.charCodeAt(d);e<=255?b[c++]=e:(b[c++]=e>>>8,b[c++]=255&e)}}else if(ArrayBuffer.isView(a))c=(b=a.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let d=c>>2,e=c-4*d,f=new Uint32Array(b.buffer,0,d),g=0,h=0,i=this.h1,j=this.h2;for(let a=0;a<d;a++)1&a?(i^=g=0x1b873593*(g=(g=0xcc9e2d51*(g=f[a])&0xffff0000|11601*g&65535)<<15|g>>>17)&0xffff0000|13715*g&65535,i=5*(i=i<<13|i>>>19)+0xe6546b64):(j^=h=0x1b873593*(h=(h=0xcc9e2d51*(h=f[a])&0xffff0000|11601*h&65535)<<15|h>>>17)&0xffff0000|13715*h&65535,j=5*(j=j<<13|j>>>19)+0xe6546b64);switch(g=0,e){case 3:g^=b[4*d+2]<<16;case 2:g^=b[4*d+1]<<8;case 1:g^=b[4*d],g=0x1b873593*(g=(g=0xcc9e2d51*g&0xffff0000|11601*g&65535)<<15|g>>>17)&0xffff0000|13715*g&65535,1&d?i^=g:j^=g}this.h1=i,this.h2=j}hexdigest(){let a=this.h1,b=this.h2;return a^=b>>>1,b=0xff51afd7*b&0xffff0000|((b<<16|(a=0xed558ccd*a&0xffff0000|36045*a&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,a^=b>>>1,b=0xc4ceb9fe*b&0xffff0000|((b<<16|(a=0x1a85ec53*a&0xffff0000|60499*a&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((a^=b>>>1)>>>0).toString(16).padStart(8,"0")+(b>>>0).toString(16).padStart(8,"0")}}let d7=Object.freeze({map:null,hash:"",transfer:void 0});class d8{#bo=!1;#bp=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,b){let c=this.#bp.get(a);return void 0===c?b:Object.assign(b,c)}getRawValue(a){return this.#bp.get(a)}remove(a){if(this.#bp.delete(a),0===this.#bp.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let a of this.#bp.values())if(a instanceof d4)return;this.onAnnotationEditor(null)}}setValue(a,b){let c=this.#bp.get(a),d=!1;if(void 0!==c)for(let[a,e]of Object.entries(b))c[a]!==e&&(d=!0,c[a]=e);else d=!0,this.#bp.set(a,b);d&&this.#bq(),b instanceof d4&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(b.constructor._type)}has(a){return this.#bp.has(a)}getAll(){return this.#bp.size>0?dm(this.#bp):null}setAll(a){for(let[b,c]of Object.entries(a))this.setValue(b,c)}get size(){return this.#bp.size}#bq(){this.#bo||(this.#bo=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#bo&&(this.#bo=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new d9(this)}get serializable(){if(0===this.#bp.size)return d7;let a=new Map,b=new d6,c=[],d=Object.create(null),e=!1;for(let[c,f]of this.#bp){let g=f instanceof d4?f.serialize(!1,d):f;g&&(a.set(c,g),b.update(`${c}:${JSON.stringify(g)}`),e||=!!g.bitmap)}if(e)for(let b of a.values())b.bitmap&&c.push(b.bitmap);return a.size>0?{map:a,hash:b.hexdigest(),transfer:c}:d7}get editorStats(){let a=null,b=new Map;for(let c of this.#bp.values()){if(!(c instanceof d4))continue;let d=c.telemetryFinalData;if(!d)continue;let{type:e}=d;b.has(e)||b.set(e,Object.getPrototypeOf(c).constructor),a||=Object.create(null);let f=a[e]||=new Map;for(let[a,b]of Object.entries(d)){if("type"===a)continue;let c=f.get(a);c||(c=new Map,f.set(a,c));let d=c.get(b)??0;c.set(b,d+1)}}for(let[c,d]of b)a[c]=d.computeTelemetryFinalData(a[c]);return a}}class d9 extends d8{#br;constructor(a){super();const{map:b,hash:c,transfer:d}=a.serializable,e=structuredClone(b,d?{transfer:d}:null);this.#br={map:e,hash:c,transfer:d}}get print(){c8("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#br}}class ea{#bs=new Set;constructor({ownerDocument:a=globalThis.document,styleElement:b=null}){this._document=a,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(a){this.nativeFontFaces.add(a),this._document.fonts.add(a)}removeNativeFontFace(a){this.nativeFontFaces.delete(a),this._document.fonts.delete(a)}insertRule(a){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let b=this.styleElement.sheet;b.insertRule(a,b.cssRules.length)}clear(){for(let a of this.nativeFontFaces)this._document.fonts.delete(a);this.nativeFontFaces.clear(),this.#bs.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:a,_inspectFont:b}){if(!(!a||this.#bs.has(a.loadedName))){if(c9(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:c,src:d,style:e}=a,f=new FontFace(c,d,e);this.addNativeFontFace(f);try{await f.load(),this.#bs.add(c),b?.(a)}catch{c7(`Cannot load system font: ${a.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(f)}return}c8("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(a){if(a.attached||a.missingFile&&!a.systemFontInfo)return;if(a.attached=!0,a.systemFontInfo)return void await this.loadSystemFont(a);if(this.isFontLoadingAPISupported){let b=a.createNativeFontFace();if(b){this.addNativeFontFace(b);try{await b.loaded}catch(c){throw c7(`Failed to load font '${b.family}': '${c}'.`),a.disableFontFace=!0,c}}return}let b=a.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(b=>{let c=this._queueLoadingCallback(b);this._prepareFontLoadEvent(a,c)})}}get isFontLoadingAPISupported(){return db(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let a=!1;return cV?a=!0:"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(a=!0),db(this,"isSyncFontLoadingSupported",a)}_queueLoadingCallback(a){let{loadingRequests:b}=this,c={done:!1,complete:function(){for(c9(!c.done,"completeRequest() cannot be called twice."),c.done=!0;b.length>0&&b[0].done;)setTimeout(b.shift().callback,0)},callback:a};return b.push(c),c}get _loadTestFont(){return db(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(a,b){var c;let d,e;function f(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|255&a.charCodeAt(b+3)}function g(a,b,c,d){return a.substring(0,b)+d+a.substring(b+c)}let h=this._document.createElement("canvas");h.width=1,h.height=1;let i=h.getContext("2d"),j=0,k=`lt${Date.now()}${this.loadTestFontId++}`,l=this._loadTestFont,m=f(l=g(l,976,k.length,k),16);for(d=0,e=k.length-3;d<e;d+=4)m=m-0x58585858+f(k,d)|0;d<k.length&&(m=m-0x58585858+f(k+"XXX",d)|0),l=g(l,16,4,String.fromCharCode((c=m)>>24&255,c>>16&255,c>>8&255,255&c));let n=`url(data:font/opentype;base64,${btoa(l)});`,o=`@font-face {font-family:"${k}";src:${n}}`;this.insertRule(o);let p=this._document.createElement("div");for(let b of(p.style.visibility="hidden",p.style.width=p.style.height="10px",p.style.position="absolute",p.style.top=p.style.left="0px",[a.loadedName,k])){let a=this._document.createElement("span");a.textContent="Hi",a.style.fontFamily=b,p.append(a)}this._document.body.append(p),function a(b,c){if(++j>30){c7("Load test font never loaded."),c();return}(i.font="30px "+b,i.fillText(".",0,20),i.getImageData(0,0,1,1).data[3]>0)?c():setTimeout(a.bind(null,b,c))}(k,()=>{p.remove(),b.complete()})}}class eb{constructor(a,{disableFontFace:b=!1,inspectFont:c=null}){for(const b in this.compiledGlyphs=Object.create(null),a)this[b]=a[b];this.disableFontFace=!0===b,this._inspectFont=c}createNativeFontFace(){let a;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let b={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(b.style=`oblique ${this.cssFontInfo.italicAngle}deg`),a=new FontFace(this.cssFontInfo.fontFamily,this.data,b)}else a=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),a}createFontFaceRule(){let a;if(!this.data||this.disableFontFace)return null;let b=dk(this.data),c=`url(data:${this.mimetype};base64,${btoa(b)});`;if(this.cssFontInfo){let b=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(b+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${b}src:${c}}`}else a=`@font-face {font-family:"${this.loadedName}";src:${c}}`;return this._inspectFont?.(this,c),a}getPathGenerator(a,b){let c;if(void 0!==this.compiledGlyphs[b])return this.compiledGlyphs[b];try{c=a.get(this.loadedName+"_path_"+b)}catch(a){c7(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(c)||0===c.length)return this.compiledGlyphs[b]=function(a,b){};let d=[];for(let a=0,b=c.length;a<b;)switch(c[a++]){case 0:{let[b,e,f,g,h,i]=c.slice(a,a+6);d.push(a=>a.bezierCurveTo(b,e,f,g,h,i)),a+=6}break;case 1:{let[b,e]=c.slice(a,a+2);d.push(a=>a.moveTo(b,e)),a+=2}break;case 2:{let[b,e]=c.slice(a,a+2);d.push(a=>a.lineTo(b,e)),a+=2}break;case 3:{let[b,e,f,g]=c.slice(a,a+4);d.push(a=>a.quadraticCurveTo(b,e,f,g)),a+=4}break;case 4:d.push(a=>a.restore());break;case 5:d.push(a=>a.save());break;case 6:c9(2===d.length,"Scale command is only valid at the third position.");break;case 7:{let[b,e,f,g,h,i]=c.slice(a,a+6);d.push(a=>a.transform(b,e,f,g,h,i)),a+=6}break;case 8:{let[b,e]=c.slice(a,a+2);d.push(a=>a.translate(b,e)),a+=2}}return this.compiledGlyphs[b]=function(a,b){d[0](a),d[1](a),a.scale(b,-b);for(let b=2,c=d.length;b<c;b++)d[b](a)}}}if(cV){var ec=Promise.withResolvers(),ed=null;(async()=>{let a,b,c=await import("fs"),d=await import("http");return new Map(Object.entries({fs:c,http:d,https:await import("https"),url:await import("url"),canvas:a,path2d:b}))})().then(a=>{ed=a,ec.resolve()},a=>{c7(`loadPackages: ${a}`),ed=new Map,ec.resolve()})}class ee{static get promise(){return ec.promise}static get(a){return ed?.get(a)}}let ef=function(a){return ee.get("fs").promises.readFile(a).then(a=>new Uint8Array(a))},eg="Fill",eh="Stroke",ei="Shading";function ej(a,b){if(!b)return;let c=b[2]-b[0],d=b[3]-b[1],e=new Path2D;e.rect(b[0],b[1],c,d),a.clip(e)}class ek{constructor(){this.constructor===ek&&c8("Cannot initialize BaseShadingPattern.")}getPattern(){c8("Abstract method `getPattern` called.")}}class el extends ek{constructor(a){super(),this._type=a[1],this._bbox=a[2],this._colorStops=a[3],this._p0=a[4],this._p1=a[5],this._r0=a[6],this._r1=a[7],this.matrix=null}_createGradient(a){let b;for(let c of("axial"===this._type?b=a.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(b=a.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))b.addColorStop(c[0],c[1]);return b}getPattern(a,b,c,d){let e;if(d===eh||d===eg){let f=b.current.getClippedPathBoundingBox(d,dT(a))||[0,0,0,0],g=Math.ceil(f[2]-f[0])||1,h=Math.ceil(f[3]-f[1])||1,i=b.cachedCanvases.getCanvas("pattern",g,h,!0),j=i.context;j.clearRect(0,0,j.canvas.width,j.canvas.height),j.beginPath(),j.rect(0,0,j.canvas.width,j.canvas.height),j.translate(-f[0],-f[1]),c=dq.transform(c,[1,0,0,1,f[0],f[1]]),j.transform(...b.baseTransform),this.matrix&&j.transform(...this.matrix),ej(j,this._bbox),j.fillStyle=this._createGradient(j),j.fill(),e=a.createPattern(i.canvas,"no-repeat");let k=new DOMMatrix(c);e.setTransform(k)}else ej(a,this._bbox),e=this._createGradient(a);return e}}function em(a,b,c,d,e,f,g,h){let i,j,k,l,m,n,o,p,q,r=b.coords,s=b.colors,t=a.data,u=4*a.width;r[c+1]>r[d+1]&&(i=c,c=d,d=i,i=f,f=g,g=i),r[d+1]>r[e+1]&&(i=d,d=e,e=i,i=g,g=h,h=i),r[c+1]>r[d+1]&&(i=c,c=d,d=i,i=f,f=g,g=i);let v=(r[c]+b.offsetX)*b.scaleX,w=(r[c+1]+b.offsetY)*b.scaleY,x=(r[d]+b.offsetX)*b.scaleX,y=(r[d+1]+b.offsetY)*b.scaleY,z=(r[e]+b.offsetX)*b.scaleX,A=(r[e+1]+b.offsetY)*b.scaleY;if(w>=A)return;let B=s[f],C=s[f+1],D=s[f+2],E=s[g],F=s[g+1],G=s[g+2],H=s[h],I=s[h+1],J=s[h+2],K=Math.round(w),L=Math.round(A);for(let a=K;a<=L;a++){let b;if(a<y){let b=a<w?0:(w-a)/(w-y);j=v-(v-x)*b,k=B-(B-E)*b,l=C-(C-F)*b,m=D-(D-G)*b}else{let b;j=x-(x-z)*(b=a>A?1:y===A?0:(y-a)/(y-A)),k=E-(E-H)*b,l=F-(F-I)*b,m=G-(G-J)*b}n=v-(v-z)*(b=a<w?0:a>A?1:(w-a)/(w-A)),o=B-(B-H)*b,p=C-(C-I)*b,q=D-(D-J)*b;let c=Math.round(Math.min(j,n)),d=Math.round(Math.max(j,n)),e=u*a+4*c;for(let a=c;a<=d;a++)(b=(j-a)/(j-n))<0?b=0:b>1&&(b=1),t[e++]=k-(k-o)*b|0,t[e++]=l-(l-p)*b|0,t[e++]=m-(m-q)*b|0,t[e++]=255}}class en extends ek{constructor(a){super(),this._coords=a[2],this._colors=a[3],this._figures=a[4],this._bounds=a[5],this._bbox=a[7],this._background=a[8],this.matrix=null}_createMeshCanvas(a,b,c){let d=Math.floor(this._bounds[0]),e=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,g=Math.ceil(this._bounds[3])-e,h=Math.min(Math.ceil(Math.abs(f*a[0]*1.1)),3e3),i=Math.min(Math.ceil(Math.abs(g*a[1]*1.1)),3e3),j=f/h,k=g/i,l={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-e,scaleX:1/j,scaleY:1/k},m=h+4,n=i+4,o=c.getCanvas("mesh",m,n,!1),p=o.context,q=p.createImageData(h,i);if(b){let a=q.data;for(let c=0,d=a.length;c<d;c+=4)a[c]=b[0],a[c+1]=b[1],a[c+2]=b[2],a[c+3]=255}for(let a of this._figures)!function(a,b,c){let d,e,f=b.coords,g=b.colors;switch(b.type){case"lattice":let h=b.verticesPerRow,i=Math.floor(f.length/h)-1,j=h-1;for(d=0;d<i;d++){let b=d*h;for(let d=0;d<j;d++,b++)em(a,c,f[b],f[b+1],f[b+h],g[b],g[b+1],g[b+h]),em(a,c,f[b+h+1],f[b+1],f[b+h],g[b+h+1],g[b+1],g[b+h])}break;case"triangles":for(d=0,e=f.length;d<e;d+=3)em(a,c,f[d],f[d+1],f[d+2],g[d],g[d+1],g[d+2]);break;default:throw Error("illegal figure")}}(q,a,l);return p.putImageData(q,2,2),{canvas:o.canvas,offsetX:d-2*j,offsetY:e-2*k,scaleX:j,scaleY:k}}getPattern(a,b,c,d){let e;if(ej(a,this._bbox),d===ei)e=dq.singularValueDecompose2dScale(dT(a));else if(e=dq.singularValueDecompose2dScale(b.baseTransform),this.matrix){let a=dq.singularValueDecompose2dScale(this.matrix);e=[e[0]*a[0],e[1]*a[1]]}let f=this._createMeshCanvas(e,d===ei?null:this._background,b.cachedCanvases);return d!==ei&&(a.setTransform(...b.baseTransform),this.matrix&&a.transform(...this.matrix)),a.translate(f.offsetX,f.offsetY),a.scale(f.scaleX,f.scaleY),a.createPattern(f.canvas,"no-repeat")}}class eo extends ek{getPattern(){return"hotpink"}}class ep{static MAX_PATTERN_SIZE=3e3;constructor(a,b,c,d,e){this.operatorList=a[2],this.matrix=a[3],this.bbox=a[4],this.xstep=a[5],this.ystep=a[6],this.paintType=a[7],this.tilingType=a[8],this.color=b,this.ctx=c,this.canvasGraphicsFactory=d,this.baseTransform=e}createPatternCanvas(a){let b=this.operatorList,c=this.bbox,d=this.xstep,e=this.ystep,f=this.paintType,g=this.tilingType,h=this.color,i=this.canvasGraphicsFactory;c6("TilingType: "+g);let j=c[0],k=c[1],l=c[2],m=c[3],n=dq.singularValueDecompose2dScale(this.matrix),o=dq.singularValueDecompose2dScale(this.baseTransform),p=[n[0]*o[0],n[1]*o[1]],q=this.getSizeAndScale(d,this.ctx.canvas.width,p[0]),r=this.getSizeAndScale(e,this.ctx.canvas.height,p[1]),s=a.cachedCanvases.getCanvas("pattern",q.size,r.size,!0),t=s.context,u=i.createCanvasGraphics(t);u.groupLevel=a.groupLevel,this.setFillAndStrokeStyleToContext(u,f,h);let v=j,w=k,x=l,y=m;return j<0&&(v=0,x+=Math.abs(j)),k<0&&(w=0,y+=Math.abs(k)),t.translate(-(q.scale*v),-(r.scale*w)),u.transform(q.scale,0,0,r.scale,0,0),t.save(),this.clipBbox(u,v,w,x,y),u.baseTransform=dT(u.ctx),u.executeOperatorList(b),u.endDrawing(),{canvas:s.canvas,scaleX:q.scale,scaleY:r.scale,offsetX:v,offsetY:w}}getSizeAndScale(a,b,c){a=Math.abs(a);let d=Math.max(ep.MAX_PATTERN_SIZE,b),e=Math.ceil(a*c);return e>=d?e=d:c=e/a,{scale:c,size:e}}clipBbox(a,b,c,d,e){let f=d-b,g=e-c;a.ctx.rect(b,c,f,g),a.current.updateRectMinMax(dT(a.ctx),[b,c,d,e]),a.clip(),a.endPath()}setFillAndStrokeStyleToContext(a,b,c){let d=a.ctx,e=a.current;switch(b){case 1:let f=this.ctx;d.fillStyle=f.fillStyle,d.strokeStyle=f.strokeStyle,e.fillColor=f.fillStyle,e.strokeColor=f.strokeStyle;break;case 2:let g=dq.makeHexColor(c[0],c[1],c[2]);d.fillStyle=g,d.strokeStyle=g,e.fillColor=g,e.strokeColor=g;break;default:throw new di(`Unsupported paint type: ${b}`)}}getPattern(a,b,c,d){let e=c;d!==ei&&(e=dq.transform(e,b.baseTransform),this.matrix&&(e=dq.transform(e,this.matrix)));let f=this.createPatternCanvas(b),g=new DOMMatrix(e);g=(g=g.translate(f.offsetX,f.offsetY)).scale(1/f.scaleX,1/f.scaleY);let h=a.createPattern(f.canvas,"repeat");return h.setTransform(g),h}}class eq{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,b,c){let d;return void 0!==this.cache[a]?(d=this.cache[a],this.canvasFactory.reset(d,b,c)):(d=this.canvasFactory.create(b,c),this.cache[a]=d),d}delete(a){delete this.cache[a]}clear(){for(let a in this.cache){let b=this.cache[a];this.canvasFactory.destroy(b),delete this.cache[a]}}}function er(a,b,c,d,e,f,g,h,i,j){let[k,l,m,n,o,p]=dT(a);if(0===l&&0===m){let q=Math.round(g*k+o),r=Math.round(h*n+p),s=Math.abs(Math.round((g+i)*k+o)-q)||1,t=Math.abs(Math.round((h+j)*n+p)-r)||1;return a.setTransform(Math.sign(k),0,0,Math.sign(n),q,r),a.drawImage(b,c,d,e,f,0,0,s,t),a.setTransform(k,l,m,n,o,p),[s,t]}if(0===k&&0===n){let q=Math.round(h*m+o),r=Math.round(g*l+p),s=Math.abs(Math.round((h+j)*m+o)-q)||1,t=Math.abs(Math.round((g+i)*l+p)-r)||1;return a.setTransform(0,Math.sign(l),Math.sign(m),0,q,r),a.drawImage(b,c,d,e,f,0,0,t,s),a.setTransform(k,l,m,n,o,p),[t,s]}return a.drawImage(b,c,d,e,f,g,h,i,j),[Math.hypot(k,l)*i,Math.hypot(m,n)*j]}class es{constructor(a,b){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=cW,this.textMatrixScale=1,this.fontMatrix=cX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,b])}clone(){let a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,b){this.x=a,this.y=b}updatePathMinMax(a,b,c){[b,c]=dq.applyTransform([b,c],a),this.minX=Math.min(this.minX,b),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,b),this.maxY=Math.max(this.maxY,c)}updateRectMinMax(a,b){let c=dq.applyTransform(b,a),d=dq.applyTransform(b.slice(2),a),e=dq.applyTransform([b[0],b[3]],a),f=dq.applyTransform([b[2],b[1]],a);this.minX=Math.min(this.minX,c[0],d[0],e[0],f[0]),this.minY=Math.min(this.minY,c[1],d[1],e[1],f[1]),this.maxX=Math.max(this.maxX,c[0],d[0],e[0],f[0]),this.maxY=Math.max(this.maxY,c[1],d[1],e[1],f[1])}updateScalingPathMinMax(a,b){dq.scaleMinMax(a,b),this.minX=Math.min(this.minX,b[0]),this.minY=Math.min(this.minY,b[1]),this.maxX=Math.max(this.maxX,b[2]),this.maxY=Math.max(this.maxY,b[3])}updateCurvePathMinMax(a,b,c,d,e,f,g,h,i,j){let k=dq.bezierBoundingBox(b,c,d,e,f,g,h,i,j);j||this.updateRectMinMax(a,k)}getPathBoundingBox(a=eg,b=null){let c=[this.minX,this.minY,this.maxX,this.maxY];if(a===eh){b||c8("Stroke bounding box must include transform.");let a=dq.singularValueDecompose2dScale(b),d=a[0]*this.lineWidth/2,e=a[1]*this.lineWidth/2;c[0]-=d,c[1]-=e,c[2]+=d,c[3]+=e}return c}updateClipFromPath(){let a=dq.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=eg,b=null){return dq.intersect(this.clipBox,this.getPathBoundingBox(a,b))}}function et(a,b){let c,d,e,f;if("undefined"!=typeof ImageData&&b instanceof ImageData)return void a.putImageData(b,0,0);let g=b.height,h=b.width,i=g%16,j=(g-i)/16,k=0===i?j:j+1,l=a.createImageData(h,16),m=0,n,o=b.data,p=l.data;if(b.kind===c0.GRAYSCALE_1BPP){let b=o.byteLength,f=new Uint32Array(p.buffer,0,p.byteLength>>2),g=f.length,q=h+7>>3,r=dn.isLittleEndian?0xff000000:255;for(c=0;c<k;c++){for(d=0,e=c<j?16:i,n=0;d<e;d++){let a=b-m,c=0,d=a>q?h:8*a-7,e=-8&d,g=0,i=0;for(;c<e;c+=8)i=o[m++],f[n++]=128&i?0xffffffff:r,f[n++]=64&i?0xffffffff:r,f[n++]=32&i?0xffffffff:r,f[n++]=16&i?0xffffffff:r,f[n++]=8&i?0xffffffff:r,f[n++]=4&i?0xffffffff:r,f[n++]=2&i?0xffffffff:r,f[n++]=1&i?0xffffffff:r;for(;c<d;c++)0===g&&(i=o[m++],g=128),f[n++]=i&g?0xffffffff:r,g>>=1}for(;n<g;)f[n++]=0;a.putImageData(l,0,16*c)}}else if(b.kind===c0.RGBA_32BPP){for(c=0,d=0,f=16*h*4;c<j;c++)p.set(o.subarray(m,m+f)),m+=f,a.putImageData(l,0,d),d+=16;c<k&&(f=h*i*4,p.set(o.subarray(m,m+f)),a.putImageData(l,0,d))}else if(b.kind===c0.RGB_24BPP)for(c=0,f=h*(e=16);c<k;c++){for(c>=j&&(f=h*(e=i)),n=0,d=f;d--;)p[n++]=o[m++],p[n++]=o[m++],p[n++]=o[m++],p[n++]=255;a.putImageData(l,0,16*c)}else throw Error(`bad image kind: ${b.kind}`)}function eu(a,b){if(b.bitmap)return void a.drawImage(b.bitmap,0,0);let c=b.height,d=b.width,e=c%16,f=(c-e)/16,g=0===e?f:f+1,h=a.createImageData(d,16),i=0,j=b.data,k=h.data;for(let b=0;b<g;b++){let c=b<f?16:e;({srcPos:i}=function({src:a,srcPos:b=0,dest:c,width:d,height:e,nonBlackColor:f=0xffffffff,inverseDecode:g=!1}){let h=dn.isLittleEndian?0xff000000:255,[i,j]=g?[f,h]:[h,f],k=d>>3,l=7&d,m=a.length;c=new Uint32Array(c.buffer);let n=0;for(let d=0;d<e;d++){for(let d=b+k;b<d;b++){let d=b<m?a[b]:255;c[n++]=128&d?j:i,c[n++]=64&d?j:i,c[n++]=32&d?j:i,c[n++]=16&d?j:i,c[n++]=8&d?j:i,c[n++]=4&d?j:i,c[n++]=2&d?j:i,c[n++]=1&d?j:i}if(0===l)continue;let d=b<m?a[b++]:255;for(let a=0;a<l;a++)c[n++]=d&1<<7-a?j:i}return{srcPos:b,destPos:n}}({src:j,srcPos:i,dest:k,width:d,height:c,nonBlackColor:0})),a.putImageData(h,0,16*b)}}function ev(a,b){for(let c of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==a[c]&&(b[c]=a[c]);void 0!==a.setLineDash&&(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset)}function ew(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",void 0!==a.setLineDash&&(a.setLineDash([]),a.lineDashOffset=0),!cV){let{filter:b}=a;"none"!==b&&""!==b&&(a.filter="none")}}function ex(a,b){if(b)return!0;let c=dq.singularValueDecompose2dScale(a);c[0]=Math.fround(c[0]),c[1]=Math.fround(c[1]);let d=Math.fround((globalThis.devicePixelRatio||1)*dB.PDF_TO_CSS_UNITS);return c[0]<=d&&c[1]<=d}let ey=["butt","round","square"],ez=["miter","round","bevel"],eA={},eB={};class eC{constructor(a,b,c,d,e,{optionalContentConfig:f,markedContentStack:g=null},h,i){this.ctx=a,this.current=new es(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=c,this.canvasFactory=d,this.filterFactory=e,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=g||[],this.optionalContentConfig=f,this.cachedCanvases=new eq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=i,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,b=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):b}beginDrawing({transform:a,viewport:b,transparency:c=!1,background:d=null}){let e=this.ctx.canvas.width,f=this.ctx.canvas.height,g=this.ctx.fillStyle;if(this.ctx.fillStyle=d||"#ffffff",this.ctx.fillRect(0,0,e,f),this.ctx.fillStyle=g,c){let a=this.cachedCanvases.getCanvas("transparent",e,f);this.compositeCtx=this.ctx,this.transparentCanvas=a.canvas,this.ctx=a.context,this.ctx.save(),this.ctx.transform(...dT(this.compositeCtx))}this.ctx.save(),ew(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...b.transform),this.viewportScale=b.scale,this.baseTransform=dT(this.ctx)}executeOperatorList(a,b,c,d){let e,f=a.argsArray,g=a.fnArray,h=b||0,i=f.length;if(i===h)return h;let j=i-h>10&&"function"==typeof c,k=j?Date.now()+15:0,l=0,m=this.commonObjs,n=this.objs;for(;;){if(void 0!==d&&h===d.nextBreakPoint)return d.breakIt(h,c),h;if((e=g[h])!==c3.dependency)this[e].apply(this,f[h]);else for(let a of f[h]){let b=a.startsWith("g_")?m:n;if(!b.has(a))return b.get(a,c),h}if(++h===i)return h;if(j&&++l>10){if(Date.now()>k)return c(),h;l=0}}}#bt(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){for(let a of(this.#bt(),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let b of a.values())"undefined"!=typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement&&(b.width=b.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.#bu()}#bu(){if(this.pageColors){let a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==a){let b=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=b}}}_scaleImage(a,b){let c,d,e=a.width,f=a.height,g=Math.max(Math.hypot(b[0],b[1]),1),h=Math.max(Math.hypot(b[2],b[3]),1),i=e,j=f,k="prescale1";for(;g>2&&i>1||h>2&&j>1;){let b=i,e=j;g>2&&i>1&&(b=i>=16384?Math.floor(i/2)-1||1:Math.ceil(i/2),g/=i/b),h>2&&j>1&&(e=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j)/2,h/=j/e),(d=(c=this.cachedCanvases.getCanvas(k,b,e)).context).clearRect(0,0,b,e),d.drawImage(a,0,0,i,j,0,0,b,e),a=c.canvas,i=b,j=e,k="prescale1"===k?"prescale2":"prescale1"}return{img:a,paintWidth:i,paintHeight:j}}_createMaskCanvas(a){let b,c,d,e,f=this.ctx,{width:g,height:h}=a,i=this.current.fillColor,j=this.current.patternFill,k=dT(f);if((a.bitmap||a.data)&&a.count>1){let e=a.bitmap||a.data.buffer;c=JSON.stringify(j?k:[k.slice(0,4),i]),(b=this._cachedBitmapsMap.get(e))||(b=new Map,this._cachedBitmapsMap.set(e,b));let f=b.get(c);if(f&&!j)return{canvas:f,offsetX:Math.round(Math.min(k[0],k[2])+k[4]),offsetY:Math.round(Math.min(k[1],k[3])+k[5])};d=f}d||eu((e=this.cachedCanvases.getCanvas("maskCanvas",g,h)).context,a);let l=dq.transform(k,[1/g,0,0,-1/h,0,0]);l=dq.transform(l,[1,0,0,1,0,-h]);let[m,n,o,p]=dq.getAxialAlignedBoundingBox([0,0,g,h],l),q=Math.round(o-m)||1,r=Math.round(p-n)||1,s=this.cachedCanvases.getCanvas("fillCanvas",q,r),t=s.context;t.translate(-m,-n),t.transform(...l),!d&&(d=(d=this._scaleImage(e.canvas,dU(t))).img,b&&j&&b.set(c,d)),t.imageSmoothingEnabled=ex(dT(t),a.interpolate),er(t,d,0,0,d.width,d.height,0,0,g,h),t.globalCompositeOperation="source-in";let u=dq.transform(dU(t),[1,0,0,1,-m,-n]);return t.fillStyle=j?i.getPattern(f,this,u,eg):i,t.fillRect(0,0,g,h),b&&!j&&(this.cachedCanvases.delete("fillCanvas"),b.set(c,s.canvas)),{canvas:s.canvas,offsetX:Math.round(m),offsetY:Math.round(n)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ey[a]}setLineJoin(a){this.ctx.lineJoin=ez[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,b){let c=this.ctx;void 0!==c.setLineDash&&(c.setLineDash(a),c.lineDashOffset=b)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let[b,c]of a)switch(b){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c[0],c[1]);break;case"CA":this.current.strokeAlpha=c;break;case"ca":this.current.fillAlpha=c,this.ctx.globalAlpha=c;break;case"BM":this.ctx.globalCompositeOperation=c;break;case"SMask":this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let a=this.ctx.canvas.width,b=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,d=this.cachedCanvases.getCanvas(c,a,b);this.suspendedCtx=this.ctx,this.ctx=d.context;let e=this.ctx;e.setTransform(...dT(this.suspendedCtx)),ev(this.suspendedCtx,e);var f=this.suspendedCtx;if(e._removeMirroring)throw Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){f.save(),this.__originalSave()},e.restore=function(){f.restore(),this.__originalRestore()},e.translate=function(a,b){f.translate(a,b),this.__originalTranslate(a,b)},e.scale=function(a,b){f.scale(a,b),this.__originalScale(a,b)},e.transform=function(a,b,c,d,e,g){f.transform(a,b,c,d,e,g),this.__originalTransform(a,b,c,d,e,g)},e.setTransform=function(a,b,c,d,e,g){f.setTransform(a,b,c,d,e,g),this.__originalSetTransform(a,b,c,d,e,g)},e.resetTransform=function(){f.resetTransform(),this.__originalResetTransform()},e.rotate=function(a){f.rotate(a),this.__originalRotate(a)},e.clip=function(a){f.clip(a),this.__originalClip(a)},e.moveTo=function(a,b){f.moveTo(a,b),this.__originalMoveTo(a,b)},e.lineTo=function(a,b){f.lineTo(a,b),this.__originalLineTo(a,b)},e.bezierCurveTo=function(a,b,c,d,e,g){f.bezierCurveTo(a,b,c,d,e,g),this.__originalBezierCurveTo(a,b,c,d,e,g)},e.rect=function(a,b,c,d){f.rect(a,b,c,d),this.__originalRect(a,b,c,d)},e.closePath=function(){f.closePath(),this.__originalClosePath()},e.beginPath=function(){f.beginPath(),this.__originalBeginPath()},this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ev(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let b=this.current.activeSMask,c=this.suspendedCtx;this.composeSMask(c,b,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(a,b,c,d){let e=d[0],f=d[1],g=d[2]-e,h=d[3]-f;0!==g&&0!==h&&(this.genericComposeSMask(b.context,c,g,h,b.subtype,b.backdrop,b.transferMap,e,f,b.offsetX,b.offsetY),a.save(),a.globalAlpha=1,a.globalCompositeOperation="source-over",a.setTransform(1,0,0,1,0,0),a.drawImage(c.canvas,0,0),a.restore())}genericComposeSMask(a,b,c,d,e,f,g,h,i,j,k){let l=a.canvas,m=h-j,n=i-k;if(f){if(m<0||n<0||m+c>l.width||n+d>l.height){let a=this.cachedCanvases.getCanvas("maskExtension",c,d),b=a.context;b.drawImage(l,-m,-n),f.some(a=>0!==a)&&(b.globalCompositeOperation="destination-atop",b.fillStyle=dq.makeHexColor(...f),b.fillRect(0,0,c,d),b.globalCompositeOperation="source-over"),l=a.canvas,m=n=0}else if(f.some(a=>0!==a)){a.save(),a.globalAlpha=1,a.setTransform(1,0,0,1,0,0);let b=new Path2D;b.rect(m,n,c,d),a.clip(b),a.globalCompositeOperation="destination-atop",a.fillStyle=dq.makeHexColor(...f),a.fillRect(m,n,c,d),a.restore()}}b.save(),b.globalAlpha=1,b.setTransform(1,0,0,1,0,0),"Alpha"===e&&g?b.filter=this.filterFactory.addAlphaFilter(g):"Luminosity"===e&&(b.filter=this.filterFactory.addLuminosityFilter(g));let o=new Path2D;o.rect(h,i,c,d),b.clip(o),b.globalCompositeOperation="destination-in",b.drawImage(l,m,n,c,d,h,i,c,d),b.restore()}save(){this.inSMaskMode?(ev(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ev(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,b,c){let d,e,f=this.ctx,g=this.current,h=g.x,i=g.y,j=dT(f),k=0===j[0]&&0===j[3]||0===j[1]&&0===j[2],l=k?c.slice(0):null;for(let c=0,m=0,n=a.length;c<n;c++)switch(0|a[c]){case c3.rectangle:h=b[m++],i=b[m++];let n=b[m++],o=b[m++],p=h+n,q=i+o;f.moveTo(h,i),0===n||0===o?f.lineTo(p,q):(f.lineTo(p,i),f.lineTo(p,q),f.lineTo(h,q)),k||g.updateRectMinMax(j,[h,i,p,q]),f.closePath();break;case c3.moveTo:h=b[m++],i=b[m++],f.moveTo(h,i),k||g.updatePathMinMax(j,h,i);break;case c3.lineTo:h=b[m++],i=b[m++],f.lineTo(h,i),k||g.updatePathMinMax(j,h,i);break;case c3.curveTo:d=h,e=i,h=b[m+4],i=b[m+5],f.bezierCurveTo(b[m],b[m+1],b[m+2],b[m+3],h,i),g.updateCurvePathMinMax(j,d,e,b[m],b[m+1],b[m+2],b[m+3],h,i,l),m+=6;break;case c3.curveTo2:d=h,e=i,f.bezierCurveTo(h,i,b[m],b[m+1],b[m+2],b[m+3]),g.updateCurvePathMinMax(j,d,e,h,i,b[m],b[m+1],b[m+2],b[m+3],l),h=b[m+2],i=b[m+3],m+=4;break;case c3.curveTo3:d=h,e=i,h=b[m+2],i=b[m+3],f.bezierCurveTo(b[m],b[m+1],h,i,h,i),g.updateCurvePathMinMax(j,d,e,b[m],b[m+1],h,i,h,i,l),m+=4;break;case c3.closePath:f.closePath()}k&&g.updateScalingPathMinMax(j,l),g.setCurrentPoint(h,i)}closePath(){this.ctx.closePath()}stroke(a=!0){let b=this.ctx,c=this.current.strokeColor;b.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof c&&c?.getPattern?(b.save(),b.strokeStyle=c.getPattern(b,this,dU(b),eh),this.rescaleAndStroke(!1),b.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),b.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){let b=this.ctx,c=this.current.fillColor,d=this.current.patternFill,e=!1;d&&(b.save(),b.fillStyle=c.getPattern(b,this,dU(b),eg),e=!0);let f=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==f&&(this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill()),e&&b.restore(),a&&this.consumePath(f)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=eA}eoClip(){this.pendingClip=eB}beginText(){this.current.textMatrix=cW,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let a=this.pendingTextPaths,b=this.ctx;if(void 0===a)return void b.beginPath();for(let c of(b.save(),b.beginPath(),a))b.setTransform(...c.transform),b.translate(c.x,c.y),c.addToPath(b,c.fontSize);b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,b){let c=this.commonObjs.get(a),d=this.current;if(!c)throw Error(`Can't find font for ${a}`);if(d.fontMatrix=c.fontMatrix||cX,(0===d.fontMatrix[0]||0===d.fontMatrix[3])&&c7("Invalid font matrix for font "+a),b<0?(b=-b,d.fontDirection=-1):d.fontDirection=1,this.current.font=c,this.current.fontSize=b,c.isType3Font)return;let e=c.loadedName||"sans-serif",f=c.systemFontInfo?.css||`"${e}", ${c.fallbackName}`,g="normal";c.black?g="900":c.bold&&(g="bold");let h=c.italic?"italic":"normal",i=b;b<16?i=16:b>100&&(i=100),this.current.fontSizeScale=b/i,this.ctx.font=`${h} ${g} ${i}px ${f}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,b){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=b}setLeadingMoveText(a,b){this.setLeading(-b),this.moveText(a,b)}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.hypot(a,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,b,c,d){let e,f=this.ctx,g=this.current,h=g.font,i=g.textRenderingMode,j=g.fontSize/g.fontSizeScale,k=3&i,l=!!(4&i),m=g.patternFill&&!h.missingFile;(h.disableFontFace||l||m)&&(e=h.getPathGenerator(this.commonObjs,a)),h.disableFontFace||m?(f.save(),f.translate(b,c),f.beginPath(),e(f,j),d&&f.setTransform(...d),(0===k||2===k)&&f.fill(),(1===k||2===k)&&f.stroke(),f.restore()):((0===k||2===k)&&f.fillText(a,b,c),(1===k||2===k)&&f.strokeText(a,b,c)),l&&(this.pendingTextPaths||=[]).push({transform:dT(f),x:b,y:c,fontSize:j,addToPath:e})}get isFontSubpixelAAEnabled(){let{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);let b=a.getImageData(0,0,10,10).data,c=!1;for(let a=3;a<b.length;a+=4)if(b[a]>0&&b[a]<255){c=!0;break}return db(this,"isFontSubpixelAAEnabled",c)}showText(a){let b,c=this.current,d=c.font;if(d.isType3Font)return this.showType3Text(a);let e=c.fontSize;if(0===e)return;let f=this.ctx,g=c.fontSizeScale,h=c.charSpacing,i=c.wordSpacing,j=c.fontDirection,k=c.textHScale*j,l=a.length,m=d.vertical,n=m?1:-1,o=d.defaultVMetrics,p=e*c.fontMatrix[0],q=0===c.textRenderingMode&&!d.disableFontFace&&!c.patternFill;if(f.save(),f.transform(...c.textMatrix),f.translate(c.x,c.y+c.textRise),j>0?f.scale(k,-1):f.scale(k,1),c.patternFill){f.save();let a=c.fillColor.getPattern(f,this,dU(f),eg);b=dT(f),f.restore(),f.fillStyle=a}let r=c.lineWidth,s=c.textMatrixScale;if(0===s||0===r){let a=3&c.textRenderingMode;(1===a||2===a)&&(r=this.getSinglePixelWidth())}else r/=s;if(1!==g&&(f.scale(g,g),r/=g),f.lineWidth=r,d.isInvalidPDFjsFont){let b=[],d=0;for(let c of a)b.push(c.unicode),d+=c.width;f.fillText(b.join(""),0,0),c.x+=d*p*k,f.restore(),this.compose();return}let t=0,u;for(u=0;u<l;++u){let c,k,l=a[u];if("number"==typeof l){t+=n*l*e/1e3;continue}let r=!1,s=(l.isSpace?i:0)+h,v=l.fontChar,w=l.accent,x=l.width;if(m){let a=l.vmetric||o,b=-(l.vmetric?a[1]:.5*x)*p,d=a[2]*p;x=a?-a[0]:x,c=b/g,k=(t+d)/g}else c=t/g,k=0;if(d.remeasure&&x>0){let a=1e3*f.measureText(v).width/e*g;if(x<a&&this.isFontSubpixelAAEnabled){let b=x/a;r=!0,f.save(),f.scale(b,1),c/=b}else x!==a&&(c+=(x-a)/2e3*e/g)}if(this.contentVisible&&(l.isInFont||d.missingFile)){if(q&&!w)f.fillText(v,c,k);else if(this.paintChar(v,c,k,b),w){let a=c+e*w.offset.x/g,d=k-e*w.offset.y/g;this.paintChar(w.fontChar,a,d,b)}}t+=m?x*p-s*j:x*p+s*j,r&&f.restore()}m?c.y-=t:c.x+=t*k,f.restore(),this.compose()}showType3Text(a){let b,c,d,e,f=this.ctx,g=this.current,h=g.font,i=g.fontSize,j=g.fontDirection,k=h.vertical?1:-1,l=g.charSpacing,m=g.wordSpacing,n=g.textHScale*j,o=g.fontMatrix||cX,p=a.length;if(3!==g.textRenderingMode&&0!==i){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...g.textMatrix),f.translate(g.x,g.y),f.scale(n,j),b=0;b<p;++b){if("number"==typeof(c=a[b])){e=k*c*i/1e3,this.ctx.translate(e,0),g.x+=e*n;continue}let j=(c.isSpace?m:0)+l,p=h.charProcOperatorList[c.operatorListId];if(!p){c7(`Type3 character "${c.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=c,this.save(),f.scale(i,i),f.transform(...o),this.executeOperatorList(p),this.restore()),d=dq.applyTransform([c.width,0],o)[0]*i+j,f.translate(d,0),g.x+=d*n}f.restore(),this.processingType3=null}}setCharWidth(a,b){}setCharWidthAndBounds(a,b,c,d,e,f){this.ctx.rect(c,d,e-c,f-d),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let b;if("TilingPattern"===a[0]){let c=a[1],d=this.baseTransform||dT(this.ctx);b=new ep(a,c,this.ctx,{createCanvasGraphics:a=>new eC(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},d)}else b=this._getPattern(a[1],a[2]);return b}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,b,c){let d=dq.makeHexColor(a,b,c);this.ctx.strokeStyle=d,this.current.strokeColor=d}setFillRGBColor(a,b,c){let d=dq.makeHexColor(a,b,c);this.ctx.fillStyle=d,this.current.fillColor=d,this.current.patternFill=!1}_getPattern(a,b=null){let c;return this.cachedPatterns.has(a)?c=this.cachedPatterns.get(a):(c=function(a){switch(a[0]){case"RadialAxial":return new el(a);case"Mesh":return new en(a);case"Dummy":return new eo}throw Error(`Unknown IR type: ${a[0]}`)}(this.getObject(a)),this.cachedPatterns.set(a,c)),b&&(c.matrix=b),c}shadingFill(a){if(!this.contentVisible)return;let b=this.ctx;this.save(),b.fillStyle=this._getPattern(a).getPattern(b,this,dU(b),ei);let c=dU(b);{let{width:a,height:d}=b.canvas,[e,f,g,h]=dq.getAxialAlignedBoundingBox([0,0,a,d],c);this.ctx.fillRect(e,f,g-e,h-f)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){c8("Should not call beginInlineImage")}beginImageData(){c8("Should not call beginImageData")}paintFormXObjectBegin(a,b){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),a&&this.transform(...a),this.baseTransform=dT(this.ctx),b)){let a=b[2]-b[0],c=b[3]-b[1];this.ctx.rect(b[0],b[1],a,c),this.current.updateRectMinMax(dT(this.ctx),b),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let b=this.ctx;a.isolated||c6("TODO: Support non-isolated groups."),a.knockout&&c7("Knockout groups not supported.");let c=dT(b);if(a.matrix&&b.transform(...a.matrix),!a.bbox)throw Error("Bounding box is required.");let d=dq.getAxialAlignedBoundingBox(a.bbox,dT(b)),e=[0,0,b.canvas.width,b.canvas.height],f=Math.floor((d=dq.intersect(d,e)||[0,0,0,0])[0]),g=Math.floor(d[1]),h=Math.max(Math.ceil(d[2])-f,1),i=Math.max(Math.ceil(d[3])-g,1);this.current.startNewPathAndClipBox([0,0,h,i]);let j="groupAt"+this.groupLevel;a.smask&&(j+="_smask_"+this.smaskCounter++%2);let k=this.cachedCanvases.getCanvas(j,h,i),l=k.context;l.translate(-f,-g),l.transform(...c),a.smask?this.smaskStack.push({canvas:k.canvas,context:l,offsetX:f,offsetY:g,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(f,g),b.save()),ev(b,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;let b=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let a=dT(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);let c=dq.getAxialAlignedBoundingBox([0,0,b.canvas.width,b.canvas.height],a);this.ctx.drawImage(b.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(a,b,c,d,e){if(this.#bt(),ew(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),b){let d=b[2]-b[0],f=b[3]-b[1];if(e&&this.annotationCanvasMap){c=c.slice(),c[4]-=b[0],c[5]-=b[1],(b=b.slice())[0]=b[1]=0,b[2]=d,b[3]=f;let[e,g]=dq.singularValueDecompose2dScale(dT(this.ctx)),{viewportScale:h}=this,i=Math.ceil(d*this.outputScaleX*h),j=Math.ceil(f*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(i,j);let{canvas:k,context:l}=this.annotationCanvas;this.annotationCanvasMap.set(a,k),this.annotationCanvas.savedCtx=this.ctx,this.ctx=l,this.ctx.save(),this.ctx.setTransform(e,0,0,-g,0,f*g),ew(this.ctx)}else ew(this.ctx),this.ctx.rect(b[0],b[1],d,f),this.ctx.clip(),this.endPath()}this.current=new es(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...c),this.transform(...d)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#bu(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;let b=a.count;(a=this.getObject(a.data,a)).count=b;let c=this.ctx,d=this.processingType3;if(d&&(void 0===d.compiled&&(d.compiled=function(a){let b,c,d,{width:e,height:f}=a;if(e>1e3||f>1e3)return null;let g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=e+1,i=new Uint8Array(h*(f+1)),j=e+7&-8,k=new Uint8Array(j*f),l=0;for(let b of a.data){let a=128;for(;a>0;)k[l++]=b&a?0:255,a>>=1}let m=0;for(0!==k[l=0]&&(i[0]=1,++m),c=1;c<e;c++)k[l]!==k[l+1]&&(i[c]=k[l]?2:1,++m),l++;for(0!==k[l]&&(i[c]=2,++m),b=1;b<f;b++){l=b*j,d=b*h,k[l-j]!==k[l]&&(i[d]=k[l]?1:8,++m);let a=4*!!k[l]+8*!!k[l-j];for(c=1;c<e;c++)g[a=(a>>2)+4*!!k[l+1]+8*!!k[l-j+1]]&&(i[d+c]=g[a],++m),l++;if(k[l-j]!==k[l]&&(i[d+c]=k[l]?2:4,++m),m>1e3)return null}for(l=j*(f-1),d=b*h,0!==k[l]&&(i[d]=8,++m),c=1;c<e;c++)k[l]!==k[l+1]&&(i[d+c]=k[l]?4:8,++m),l++;if(0!==k[l]&&(i[d+c]=4,++m),m>1e3)return null;let n=new Int32Array([0,h,-1,0,-h,0,0,0,1]),o=new Path2D;for(b=0;m&&b<=f;b++){let a=b*h,c=a+e;for(;a<c&&!i[a];)a++;if(a===c)continue;o.moveTo(a%h,b);let d=a,f=i[a];do{let b=n[f];do a+=b;while(!i[a])let c=i[a];5!==c&&10!==c?(f=c,i[a]=0):(f=c&51*f>>4,i[a]&=f>>2|f<<2),o.lineTo(a%h,a/h|0),!i[a]&&--m}while(d!==a)--b}return k=null,i=null,function(a){a.save(),a.scale(1/e,-1/f),a.translate(0,-f),a.fill(o),a.beginPath(),a.restore()}}(a)),d.compiled))return void d.compiled(c);let e=this._createMaskCanvas(a),f=e.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(f,e.offsetX,e.offsetY),c.restore(),this.compose()}paintImageMaskXObjectRepeat(a,b,c=0,d=0,e,f){if(!this.contentVisible)return;a=this.getObject(a.data,a);let g=this.ctx;g.save();let h=dT(g);g.transform(b,c,d,e,0,0);let i=this._createMaskCanvas(a);g.setTransform(1,0,0,1,i.offsetX-h[4],i.offsetY-h[5]);for(let a=0,j=f.length;a<j;a+=2){let j=dq.transform(h,[b,c,d,e,f[a],f[a+1]]),[k,l]=dq.applyTransform([0,0],j);g.drawImage(i.canvas,k,l)}g.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;let b=this.ctx,c=this.current.fillColor,d=this.current.patternFill;for(let e of a){let{data:a,width:f,height:g,transform:h}=e,i=this.cachedCanvases.getCanvas("maskCanvas",f,g),j=i.context;j.save(),eu(j,this.getObject(a,e)),j.globalCompositeOperation="source-in",j.fillStyle=d?c.getPattern(j,this,dU(b),eg):c,j.fillRect(0,0,f,g),j.restore(),b.save(),b.transform(...h),b.scale(1,-1),er(b,i.canvas,0,0,f,g,0,-1,1,1),b.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;let b=this.getObject(a);b?this.paintInlineImageXObject(b):c7("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,b,c,d){if(!this.contentVisible)return;let e=this.getObject(a);if(!e)return void c7("Dependent image isn't ready yet");let f=e.width,g=e.height,h=[];for(let a=0,e=d.length;a<e;a+=2)h.push({transform:[b,0,0,c,d[a],d[a+1]],x:0,y:0,w:f,h:g});this.paintInlineImageXObjectGroup(e,h)}applyTransferMapsToCanvas(a){return"none"!==this.current.transferMaps&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if("none"===this.current.transferMaps)return a.bitmap;let{bitmap:b,width:c,height:d}=a,e=this.cachedCanvases.getCanvas("inlineImage",c,d),f=e.context;return f.filter=this.current.transferMaps,f.drawImage(b,0,0),f.filter="none",e.canvas}paintInlineImageXObject(a){let b;if(!this.contentVisible)return;let c=a.width,d=a.height,e=this.ctx;if(this.save(),!cV){let{filter:a}=e;"none"!==a&&""!==a&&(e.filter="none")}if(e.scale(1/c,-1/d),a.bitmap)b=this.applyTransferMapsToBitmap(a);else if("function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)b=a;else{let e=this.cachedCanvases.getCanvas("inlineImage",c,d).context;et(e,a),b=this.applyTransferMapsToCanvas(e)}let f=this._scaleImage(b,dU(e));e.imageSmoothingEnabled=ex(dT(e),a.interpolate),er(e,f.img,0,0,f.paintWidth,f.paintHeight,0,-d,c,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,b){let c;if(!this.contentVisible)return;let d=this.ctx;if(a.bitmap)c=a.bitmap;else{let b=a.width,d=a.height,e=this.cachedCanvases.getCanvas("inlineImage",b,d).context;et(e,a),c=this.applyTransferMapsToCanvas(e)}for(let a of b)d.save(),d.transform(...a.transform),d.scale(1,-1),er(d,c,a.x,a.y,a.w,a.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,b){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,b){"OC"===a?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(b)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){let b=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);let c=this.ctx;this.pendingClip&&(b||(this.pendingClip===eB?c.clip("evenodd"):c.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let a=dT(this.ctx);if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{let b=Math.abs(a[0]*a[3]-a[2]*a[1]),c=Math.hypot(a[0],a[2]),d=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(c,d)/b}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let a,b,{lineWidth:c}=this.current,{a:d,b:e,c:f,d:g}=this.ctx.getTransform();if(0===e&&0===f){let e=Math.abs(d),f=Math.abs(g);if(e===f)if(0===c)a=b=1/e;else{let d=e*c;a=b=d<1?1/d:1}else if(0===c)a=1/e,b=1/f;else{let d=e*c,g=f*c;a=d<1?1/d:1,b=g<1?1/g:1}}else{let h=Math.abs(d*g-e*f),i=Math.hypot(d,e),j=Math.hypot(f,g);if(0===c)a=j/h,b=i/h;else{let d=c*h;a=j>d?j/d:1,b=i>d?i/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=b}return this._cachedScaleForStroking}rescaleAndStroke(a){let{ctx:b}=this,{lineWidth:c}=this.current,[d,e]=this.getScaleForStroking();if(b.lineWidth=c||1,1===d&&1===e)return void b.stroke();let f=b.getLineDash();if(a&&b.save(),b.scale(d,e),f.length>0){let a=Math.max(d,e);b.setLineDash(f.map(b=>b/a)),b.lineDashOffset/=a}b.stroke(),a&&b.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}for(let a in c3)void 0!==eC.prototype[a]&&(eC.prototype[c3[a]]=eC.prototype[a]);class eD{static #bv=null;static #bw="";static get workerPort(){return this.#bv}static set workerPort(a){if(!("undefined"!=typeof Worker&&a instanceof Worker)&&null!==a)throw Error("Invalid `workerPort` type.");this.#bv=a}static get workerSrc(){return this.#bw}static set workerSrc(a){if("string"!=typeof a)throw Error("Invalid `workerSrc` type.");this.#bw=a}}function eE(a){switch(!(a instanceof Error||"object"==typeof a&&null!==a)&&c8('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new dj(a.message);case"MissingPDFException":return new dg(a.message);case"PasswordException":return new dd(a.message,a.code);case"UnexpectedResponseException":return new dh(a.message,a.status);case"UnknownErrorException":return new de(a.message,a.details);default:return new de(a.message,a.toString())}}class eF{constructor(a,b,c){this.sourceName=a,this.targetName=b,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{let b=a.data;if(b.targetName!==this.sourceName)return;if(b.stream)return void this.#bx(b);if(b.callback){let a=b.callbackId,c=this.callbackCapabilities[a];if(!c)throw Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],1===b.callback)c.resolve(b.data);else if(2===b.callback)c.reject(eE(b.reason));else throw Error("Unexpected callback case");return}let d=this.actionHandler[b.action];if(!d)throw Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){let a=this.sourceName,e=b.sourceName;new Promise(function(a){a(d(b.data))}).then(function(d){c.postMessage({sourceName:a,targetName:e,callback:1,callbackId:b.callbackId,data:d})},function(d){c.postMessage({sourceName:a,targetName:e,callback:2,callbackId:b.callbackId,reason:eE(d)})});return}b.streamId?this.#by(b):d(b.data)},c.addEventListener("message",this._onComObjOnMessage)}on(a,b){let c=this.actionHandler;if(c[a])throw Error(`There is already an actionName called "${a}"`);c[a]=b}send(a,b,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:b},c)}sendWithPromise(a,b,c){let d=this.callbackId++,e=Promise.withResolvers();this.callbackCapabilities[d]=e;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:d,data:b},c)}catch(a){e.reject(a)}return e.promise}sendWithStream(a,b,c,d){let e=this.streamId++,f=this.sourceName,g=this.targetName,h=this.comObj;return new ReadableStream({start:c=>{let i=Promise.withResolvers();return this.streamControllers[e]={controller:c,startCall:i,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:f,targetName:g,action:a,streamId:e,data:b,desiredSize:c.desiredSize},d),i.promise},pull:a=>{let b=Promise.withResolvers();return this.streamControllers[e].pullCall=b,h.postMessage({sourceName:f,targetName:g,stream:6,streamId:e,desiredSize:a.desiredSize}),b.promise},cancel:a=>{c9(a instanceof Error,"cancel must have a valid reason");let b=Promise.withResolvers();return this.streamControllers[e].cancelCall=b,this.streamControllers[e].isClosed=!0,h.postMessage({sourceName:f,targetName:g,stream:1,streamId:e,reason:eE(a)}),b.promise}},c)}#by(a){let b=a.streamId,c=this.sourceName,d=a.sourceName,e=this.comObj,f=this,g=this.actionHandler[a.action],h={enqueue(a,f=1,g){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=f,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),e.postMessage({sourceName:c,targetName:d,stream:4,streamId:b,chunk:a},g)},close(){this.isCancelled||(this.isCancelled=!0,e.postMessage({sourceName:c,targetName:d,stream:3,streamId:b}),delete f.streamSinks[b])},error(a){c9(a instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,e.postMessage({sourceName:c,targetName:d,stream:5,streamId:b,reason:eE(a)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[b]=h,new Promise(function(b){b(g(a.data,h))}).then(function(){e.postMessage({sourceName:c,targetName:d,stream:8,streamId:b,success:!0})},function(a){e.postMessage({sourceName:c,targetName:d,stream:8,streamId:b,reason:eE(a)})})}#bx(a){let b=a.streamId,c=this.sourceName,d=a.sourceName,e=this.comObj,f=this.streamControllers[b],g=this.streamSinks[b];switch(a.stream){case 8:a.success?f.startCall.resolve():f.startCall.reject(eE(a.reason));break;case 7:a.success?f.pullCall.resolve():f.pullCall.reject(eE(a.reason));break;case 6:if(!g){e.postMessage({sourceName:c,targetName:d,stream:7,streamId:b,success:!0});break}g.desiredSize<=0&&a.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=a.desiredSize,new Promise(function(a){a(g.onPull?.())}).then(function(){e.postMessage({sourceName:c,targetName:d,stream:7,streamId:b,success:!0})},function(a){e.postMessage({sourceName:c,targetName:d,stream:7,streamId:b,reason:eE(a)})});break;case 4:if(c9(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(a.chunk);break;case 3:if(c9(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),this.#bz(f,b);break;case 5:c9(f,"error should have stream controller"),f.controller.error(eE(a.reason)),this.#bz(f,b);break;case 2:a.success?f.cancelCall.resolve():f.cancelCall.reject(eE(a.reason)),this.#bz(f,b);break;case 1:if(!g)break;new Promise(function(b){b(g.onCancel?.(eE(a.reason)))}).then(function(){e.postMessage({sourceName:c,targetName:d,stream:2,streamId:b,success:!0})},function(a){e.postMessage({sourceName:c,targetName:d,stream:2,streamId:b,reason:eE(a)})}),g.sinkCapability.reject(eE(a.reason)),g.isCancelled=!0,delete this.streamSinks[b];break;default:throw Error("Unexpected stream case")}}async #bz(a,b){await Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete this.streamControllers[b]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class eG{#bA;#bB;constructor({parsedData:a,rawData:b}){this.#bA=a,this.#bB=b}getRaw(){return this.#bB}get(a){return this.#bA.get(a)??null}getAll(){return dm(this.#bA)}has(a){return this.#bA.has(a)}}let eH=Symbol("INTERNAL");class eI{#bC=!1;#bD=!1;#bE=!1;#bF=!0;constructor(a,{name:b,intent:c,usage:d}){this.#bC=!!(2&a),this.#bD=!!(4&a),this.name=b,this.intent=c,this.usage=d}get visible(){if(this.#bE)return this.#bF;if(!this.#bF)return!1;let{print:a,view:b}=this.usage;return this.#bC?b?.viewState!=="OFF":!this.#bD||a?.printState!=="OFF"}_setVisible(a,b,c=!1){a!==eH&&c8("Internal method `_setVisible` called."),this.#bE=c,this.#bF=b}}class eJ{#bG=null;#bH=new Map;#bI=null;#bJ=null;constructor(a,b=2){if(this.renderingIntent=b,this.name=null,this.creator=null,null===a)return;for(const c of(this.name=a.name,this.creator=a.creator,this.#bJ=a.order,a.groups))this.#bH.set(c.id,new eI(b,c));if("OFF"===a.baseState)for(const a of this.#bH.values())a._setVisible(eH,!1);for(const b of a.on)this.#bH.get(b)._setVisible(eH,!0);for(const b of a.off)this.#bH.get(b)._setVisible(eH,!1);this.#bI=this.getHash()}#bK(a){let b=a.length;if(b<2)return!0;let c=a[0];for(let d=1;d<b;d++){let b,e=a[d];if(Array.isArray(e))b=this.#bK(e);else{if(!this.#bH.has(e))return c7(`Optional content group not found: ${e}`),!0;b=this.#bH.get(e).visible}switch(c){case"And":if(!b)return!1;break;case"Or":if(b)return!0;break;case"Not":return!b;default:return!0}}return"And"===c}isVisible(a){if(0===this.#bH.size)return!0;if(!a)return c6("Optional content group not defined."),!0;if("OCG"===a.type)return this.#bH.has(a.id)?this.#bH.get(a.id).visible:(c7(`Optional content group not found: ${a.id}`),!0);if("OCMD"===a.type){if(a.expression)return this.#bK(a.expression);if(a.policy&&"AnyOn"!==a.policy){if("AllOn"===a.policy){for(let b of a.ids){if(!this.#bH.has(b)){c7(`Optional content group not found: ${b}`);break}if(!this.#bH.get(b).visible)return!1}return!0}else if("AnyOff"===a.policy){for(let b of a.ids){if(!this.#bH.has(b))return c7(`Optional content group not found: ${b}`),!0;if(!this.#bH.get(b).visible)return!0}return!1}else if("AllOff"===a.policy){for(let b of a.ids){if(!this.#bH.has(b)){c7(`Optional content group not found: ${b}`);break}if(this.#bH.get(b).visible)return!1}return!0}}else{for(let b of a.ids){if(!this.#bH.has(b))return c7(`Optional content group not found: ${b}`),!0;if(this.#bH.get(b).visible)return!0}return!1}return c7(`Unknown optional content policy ${a.policy}.`),!0}return c7(`Unknown group type ${a.type}.`),!0}setVisibility(a,b=!0){let c=this.#bH.get(a);c?(c._setVisible(eH,!!b,!0),this.#bG=null):c7(`Optional content group not found: ${a}`)}setOCGState({state:a,preserveRB:b}){let c;for(let b of a){switch(b){case"ON":case"OFF":case"Toggle":c=b;continue}let a=this.#bH.get(b);if(a)switch(c){case"ON":a._setVisible(eH,!0);break;case"OFF":a._setVisible(eH,!1);break;case"Toggle":a._setVisible(eH,!a.visible)}}this.#bG=null}get hasInitialVisibility(){return null===this.#bI||this.getHash()===this.#bI}getOrder(){return this.#bH.size?this.#bJ?this.#bJ.slice():[...this.#bH.keys()]:null}getGroups(){return this.#bH.size>0?dm(this.#bH):null}getGroup(a){return this.#bH.get(a)||null}getHash(){if(null!==this.#bG)return this.#bG;let a=new d6;for(let[b,c]of this.#bH)a.update(`${b}:${c.visible}`);return this.#bG=a.hexdigest()}}class eK{constructor(a,{disableRange:b=!1,disableStream:c=!1}){c9(a,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:d,initialData:e,progressiveDone:f,contentDispositionFilename:g}=a;if(this._queuedChunks=[],this._progressiveDone=f,this._contentDispositionFilename=g,e?.length>0){const a=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=a,this._isStreamingSupported=!c,this._isRangeSupported=!b,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],a.addRangeListener((a,b)=>{this._onReceiveData({begin:a,chunk:b})}),a.addProgressListener((a,b)=>{this._onProgress({loaded:a,total:b})}),a.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),a.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),a.transportReady()}_onReceiveData({begin:a,chunk:b}){let c=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;void 0===a?this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c):c9(this._rangeReaders.some(function(b){return b._begin===a&&(b._enqueue(c),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){void 0===a.total?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){let b=this._rangeReaders.indexOf(a);b>=0&&this._rangeReaders.splice(b,1)}getFullReader(){c9(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let a=this._queuedChunks;return this._queuedChunks=null,new eL(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,b){if(b<=this._progressiveDataLength)return null;let c=new eM(this,a,b);return this._pdfDataRangeTransport.requestDataRange(a,b),this._rangeReaders.push(c),c}cancelAllRequests(a){for(let b of(this._fullRequestReader?.cancel(a),this._rangeReaders.slice(0)))b.cancel(a);this._pdfDataRangeTransport.abort()}}class eL{constructor(a,b,c=!1,d=null){for(const e of(this._stream=a,this._done=c||!1,this._filename=dJ(d)?d:null,this._queuedChunks=b||[],this._loaded=0,this._queuedChunks))this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let a=Promise.withResolvers();return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class eM{constructor(a,b,c){this._stream=a,this._begin=b,this._end=c,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(0===this._requests.length)this._queuedChunk=a;else{for(let b of(this._requests.shift().resolve({value:a,done:!1}),this._requests))b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let a=Promise.withResolvers();return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function eN({getResponseHeader:a,isHttp:b,rangeChunkSize:c,disableRange:d}){let e={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(a("Content-Length"),10);return Number.isInteger(f)&&(e.suggestedLength=f,f<=2*c||d||!b||"bytes"!==a("Accept-Ranges")||"identity"!==(a("Content-Encoding")||"identity")||(e.allowRangeRequests=!0)),e}function eO(a){let b=a("Content-Disposition");if(b){let a=function(a){let b=!0,c=d("filename\\*","i").exec(a);if(c){let a=g(c=c[1]);return f(a=i(a=h(a=unescape(a))))}if(c=function(a){let b,c=[],e=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(b=e.exec(a));){let[,a,d,e]=b;if((a=parseInt(a,10))in c){if(0===a)break;continue}c[a]=[d,e]}let f=[];for(let a=0;a<c.length&&a in c;++a){let[b,d]=c[a];d=g(d),b&&(d=unescape(d),0===a&&(d=h(d))),f.push(d)}return f.join("")}(a))return f(i(c));if(c=d("filename","i").exec(a)){let a=g(c=c[1]);return f(a=i(a))}function d(a,b){return RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function e(a,c){if(a){if(!/^[\x00-\xFF]+$/.test(c))return c;try{let d=new TextDecoder(a,{fatal:!0}),e=dl(c);c=d.decode(e),b=!1}catch{}}return c}function f(a){return b&&/[\x80-\xff]/.test(a)&&(a=e("utf-8",a),b&&(a=e("iso-8859-1",a))),a}function g(a){if(a.startsWith('"')){let b=a.slice(1).split('\\"');for(let a=0;a<b.length;++a){let c=b[a].indexOf('"');-1!==c&&(b[a]=b[a].slice(0,c),b.length=a+1),b[a]=b[a].replaceAll(/\\(.)/g,"$1")}a=b.join('"')}return a}function h(a){let b=a.indexOf("'");return -1===b?a:e(a.slice(0,b),a.slice(b+1).replace(/^[^']*'/,""))}function i(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,b,c,d){if("q"===c||"Q"===c)return e(b,d=(d=d.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(a,b){return String.fromCharCode(parseInt(b,16))}));try{d=atob(d)}catch{}return e(b,d)})}return""}(b);if(a.includes("%"))try{a=decodeURIComponent(a)}catch{}if(dJ(a))return a}return null}function eP(a,b){return 404===a||0===a&&b.startsWith("file:")?new dg('Missing PDF "'+b+'".'):new dh(`Unexpected server response (${a}) while retrieving PDF "${b}".`,a)}function eQ(a){return 200===a||206===a}function eR(a,b,c){return{method:"GET",headers:a,signal:c.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function eS(a){let b=new Headers;for(let c in a){let d=a[c];void 0!==d&&b.append(c,d)}return b}function eT(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(c7(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class eU{constructor(a){this.source=a,this.isHttp=/^https?:/i.test(a.url),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return c9(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new eV(this),this._fullRequestReader}getRangeReader(a,b){if(b<=this._progressiveDataLength)return null;let c=new eW(this,a,b);return this._rangeRequestReaders.push(c),c}cancelAllRequests(a){for(let b of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))b.cancel(a)}}class eV{constructor(a){this._stream=a,this._reader=null,this._loaded=0,this._filename=null;const b=a.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=Promise.withResolvers(),this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=eS(this._stream.httpHeaders);const c=b.url;fetch(c,eR(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!eQ(a.status))throw eP(a.status,c);this._reader=a.body.getReader(),this._headersCapability.resolve();let b=b=>a.headers.get(b),{allowRangeRequests:d,suggestedLength:e}=eN({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=e||this._contentLength,this._filename=eO(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new dj("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:a,done:b}=await this._reader.read();return b?{value:a,done:b}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:eT(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}class eW{constructor(a,b,c){this._stream=a,this._reader=null,this._loaded=0;const d=a.source;this._withCredentials=d.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=eS(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${c-1}`);const e=d.url;fetch(e,eR(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!eQ(a.status))throw eP(a.status,e);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:a,done:b}=await this._reader.read();return b?{value:a,done:b}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded}),{value:eT(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}class eX{constructor(a,b={}){this.url=a,this.isHttp=/^https?:/i.test(a),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(a,b,c){let d={begin:a,end:b};for(let a in c)d[a]=c[a];return this.request(d)}requestFull(a){return this.request(a)}request(a){let b=new XMLHttpRequest,c=this.currXhrId++,d=this.pendingRequests[c]={xhr:b};for(let a in b.open("GET",this.url),b.withCredentials=this.withCredentials,this.httpHeaders){let c=this.httpHeaders[a];void 0!==c&&b.setRequestHeader(a,c)}return this.isHttp&&"begin"in a&&"end"in a?(b.setRequestHeader("Range",`bytes=${a.begin}-${a.end-1}`),d.expectedStatus=206):d.expectedStatus=200,b.responseType="arraybuffer",a.onError&&(b.onerror=function(c){a.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,c),b.onprogress=this.onProgress.bind(this,c),d.onHeadersReceived=a.onHeadersReceived,d.onDone=a.onDone,d.onError=a.onError,d.onProgress=a.onProgress,b.send(null),c}onProgress(a,b){let c=this.pendingRequests[a];c&&c.onProgress?.(b)}onStateChange(a,b){let c,d=this.pendingRequests[a];if(!d)return;let e=d.xhr;if(e.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),4!==e.readyState||!(a in this.pendingRequests))return;if(delete this.pendingRequests[a],0===e.status&&this.isHttp)return void d.onError?.(e.status);let f=e.status||200;if((200!==f||206!==d.expectedStatus)&&f!==d.expectedStatus)return void d.onError?.(e.status);let g="string"!=typeof(c=e.response)?c:dl(c).buffer;if(206===f){let a=e.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);d.onDone({begin:parseInt(b[1],10),chunk:g})}else g?d.onDone({begin:0,chunk:g}):d.onError?.(e.status)}getRequestXhr(a){return this.pendingRequests[a].xhr}isPendingRequest(a){return a in this.pendingRequests}abortRequest(a){let b=this.pendingRequests[a].xhr;delete this.pendingRequests[a],b.abort()}}class eY{constructor(a){this._source=a,this._manager=new eX(a.url,{httpHeaders:a.httpHeaders,withCredentials:a.withCredentials}),this._rangeChunkSize=a.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(a){let b=this._rangeRequestReaders.indexOf(a);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return c9(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eZ(this._manager,this._source),this._fullRequestReader}getRangeReader(a,b){let c=new e$(this._manager,a,b);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(a){for(let b of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))b.cancel(a)}}class eZ{constructor(a,b){this._manager=a;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=a.requestFull(c),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let a=this._fullRequestId,b=this._manager.getRequestXhr(a),c=a=>b.getResponseHeader(a),{allowRangeRequests:d,suggestedLength:e}=eN({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=e||this._contentLength,this._filename=eO(c),this._isRangeSupported&&this._manager.abortRequest(a),this._headersReceivedCapability.resolve()}_onDone(a){if(a&&(this._requests.length>0?this._requests.shift().resolve({value:a.chunk,done:!1}):this._cachedChunks.push(a.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(a){for(let b of(this._storedError=eP(a,this._url),this._headersReceivedCapability.reject(this._storedError),this._requests))b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(a){this.onProgress?.({loaded:a.loaded,total:a.lengthComputable?a.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let a=Promise.withResolvers();return this._requests.push(a),a.promise}cancel(a){for(let b of(this._done=!0,this._headersReceivedCapability.reject(a),this._requests))b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class e${constructor(a,b,c){this._manager=a;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._requestId=a.requestRange(b,c,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(a){let b=a.chunk;for(let a of(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(a){for(let b of(this._storedError=eP(a,this._url),this._requests))b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(a){this.isStreamingSupported||this.onProgress?.({loaded:a.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let a=Promise.withResolvers();return this._requests.push(a),a.promise}cancel(a){for(let a of(this._done=!0,this._requests))a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}let e_=/^file:\/\/\/[a-zA-Z]:\//;class e0{constructor(a){this.source=a,this.url=function(a){let b=ee.get("url"),c=b.parse(a);return"file:"===c.protocol||c.host?c:/^[a-z]:[/\\]/i.test(a)?b.parse(`file:///${a}`):(c.host||(c.protocol="file:"),c)}(a.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return c9(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new e6(this):new e4(this),this._fullRequestReader}getRangeReader(a,b){if(b<=this._progressiveDataLength)return null;let c=this.isFsUrl?new e7(this,a,b):new e5(this,a,b);return this._rangeRequestReaders.push(c),c}cancelAllRequests(a){for(let b of(this._fullRequestReader?.cancel(a),this._rangeRequestReaders.slice(0)))b.cancel(a)}}class e1{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=a.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let a=this._readableStream.read();return null===a?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=a.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){this._readableStream?this._readableStream.destroy(a):this._error(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new dj("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class e2{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const b=a.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let a=this._readableStream.read();return null===a?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=a.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){this._readableStream?this._readableStream.destroy(a):this._error(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function e3(a,b){return{protocol:a.protocol,auth:a.auth,host:a.hostname,port:a.port,path:a.path,method:"GET",headers:b}}class e4 extends e1{constructor(a){super(a);const b=b=>{if(404===b.statusCode){let a=new dg(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(b);let c=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:d,suggestedLength:e}=eN({getResponseHeader:c,isHttp:a.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=e||this._contentLength,this._filename=eO(c)};if(this._request=null,"http:"===this._url.protocol){const c=ee.get("http");this._request=c.request(e3(this._url,a.httpHeaders),b)}else{const c=ee.get("https");this._request=c.request(e3(this._url,a.httpHeaders),b)}this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class e5 extends e2{constructor(a,b,c){for(const b in super(a),this._httpHeaders={},a.httpHeaders){const c=a.httpHeaders[b];void 0!==c&&(this._httpHeaders[b]=c)}this._httpHeaders.Range=`bytes=${b}-${c-1}`;const d=a=>{if(404===a.statusCode){let a=new dg(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(a)};if(this._request=null,"http:"===this._url.protocol){const a=ee.get("http");this._request=a.request(e3(this._url,this._httpHeaders),d)}else{const a=ee.get("https");this._request=a.request(e3(this._url,this._httpHeaders),d)}this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class e6 extends e1{constructor(a){super(a);let b=decodeURIComponent(this._url.path);e_.test(this._url.href)&&(b=b.replace(/^\//,""));const c=ee.get("fs");c.promises.lstat(b).then(a=>{this._contentLength=a.size,this._setReadableStream(c.createReadStream(b)),this._headersCapability.resolve()},a=>{"ENOENT"===a.code&&(a=new dg(`Missing PDF "${b}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class e7 extends e2{constructor(a,b,c){super(a);let d=decodeURIComponent(this._url.path);e_.test(this._url.href)&&(d=d.replace(/^\//,""));const e=ee.get("fs");this._setReadableStream(e.createReadStream(d,{start:b,end:c-1}))}}class e8{#bL=Promise.withResolvers();#aq=null;#bM=!1;#bN=!!globalThis.FontInspector?.enabled;#bO=null;#bP=null;#bQ=0;#bR=0;#bS=null;#bT=null;#bU=0;#bV=0;#bW=Object.create(null);#bX=[];#bY=null;#bZ=[];#b$=new WeakMap;#b_=null;static #b0=new Map;static #b1=new Map;static #b2=new Set;constructor({textContentSource:a,container:b,viewport:c}){if(a instanceof ReadableStream)this.#bY=a;else if("object"==typeof a)this.#bY=new ReadableStream({start(b){b.enqueue(a),b.close()}});else throw Error('No "textContentSource" parameter specified.');this.#aq=this.#bT=b,this.#bV=c.scale*(globalThis.devicePixelRatio||1),this.#bU=c.rotation,this.#bP={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:d,pageHeight:e,pageX:f,pageY:g}=c.rawDims;this.#b_=[1,0,0,-1,-f,g+e],this.#bR=d,this.#bQ=e,dV(b,c),this.#bL.promise.catch(()=>{}).then(()=>{e8.#b2.delete(this),this.#bP=null,this.#bW=null})}render(){let a=()=>{this.#bS.read().then(({value:b,done:c})=>{c?this.#bL.resolve():(this.#bO??=b.lang,Object.assign(this.#bW,b.styles),this.#b3(b.items),a())},this.#bL.reject)};return this.#bS=this.#bY.getReader(),e8.#b2.add(this),a(),this.#bL.promise}update({viewport:a,onBefore:b=null}){let c=a.scale*(globalThis.devicePixelRatio||1),d=a.rotation;if(d!==this.#bU&&(b?.(),this.#bU=d,dV(this.#bT,{rotation:d})),c!==this.#bV){b?.(),this.#bV=c;let a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:e8.#b4(this.#bO)};for(let b of this.#bZ)a.properties=this.#b$.get(b),a.div=b,this.#b5(a)}}cancel(){let a=new dj("TextLayer task cancelled.");this.#bS?.cancel(a).catch(()=>{}),this.#bS=null,this.#bL.reject(a)}get textDivs(){return this.#bZ}get textContentItemsStr(){return this.#bX}#b3(a){if(this.#bM)return;this.#bP.ctx||=e8.#b4(this.#bO);let b=this.#bZ,c=this.#bX;for(let d of a){if(b.length>1e5){c7("Ignoring additional textDivs for performance reasons."),this.#bM=!0;return}if(void 0===d.str){if("beginMarkedContentProps"===d.type||"beginMarkedContent"===d.type){let a=this.#aq;this.#aq=document.createElement("span"),this.#aq.classList.add("markedContent"),null!==d.id&&this.#aq.setAttribute("id",`${d.id}`),a.append(this.#aq)}else"endMarkedContent"===d.type&&(this.#aq=this.#aq.parentNode);continue}c.push(d.str),this.#b6(d)}}#b6(a){let b,c,d=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:""!==a.str,hasEOL:a.hasEOL,fontSize:0};this.#bZ.push(d);let f=dq.transform(this.#b_,a.transform),g=Math.atan2(f[1],f[0]),h=this.#bW[a.fontName];h.vertical&&(g+=Math.PI/2);let i=this.#bN&&h.fontSubstitution||h.fontFamily,j=Math.hypot(f[2],f[3]),k=j*e8.#b7(i,this.#bO);0===g?(b=f[4],c=f[5]-k):(b=f[4]+k*Math.sin(g),c=f[5]-k*Math.cos(g));let l="calc(var(--scale-factor)*",m=d.style;this.#aq===this.#bT?(m.left=`${(100*b/this.#bR).toFixed(2)}%`,m.top=`${(100*c/this.#bQ).toFixed(2)}%`):(m.left=`${l}${b.toFixed(2)}px)`,m.top=`${l}${c.toFixed(2)}px)`),m.fontSize=`${l}${j.toFixed(2)}px)`,m.fontFamily=i,e.fontSize=j,d.setAttribute("role","presentation"),d.textContent=a.str,d.dir=a.dir,this.#bN&&(d.dataset.fontName=h.fontSubstitutionLoadedName||a.fontName),0!==g&&(e.angle=180/Math.PI*g);let n=!1;if(a.str.length>1)n=!0;else if(" "!==a.str&&a.transform[0]!==a.transform[3]){let b=Math.abs(a.transform[0]),c=Math.abs(a.transform[3]);b!==c&&Math.max(b,c)/Math.min(b,c)>1.5&&(n=!0)}if(n&&(e.canvasWidth=h.vertical?a.height:a.width),this.#b$.set(d,e),this.#bP.div=d,this.#bP.properties=e,this.#b5(this.#bP),e.hasText&&this.#aq.append(d),e.hasEOL){let a=document.createElement("br");a.setAttribute("role","presentation"),this.#aq.append(a)}}#b5(a){let{div:b,properties:c,ctx:d,prevFontSize:e,prevFontFamily:f}=a,{style:g}=b,h="";if(0!==c.canvasWidth&&c.hasText){let{fontFamily:i}=g,{canvasWidth:j,fontSize:k}=c;(e!==k||f!==i)&&(d.font=`${k*this.#bV}px ${i}`,a.prevFontSize=k,a.prevFontFamily=i);let{width:l}=d.measureText(b.textContent);l>0&&(h=`scaleX(${j*this.#bV/l})`)}0!==c.angle&&(h=`rotate(${c.angle}deg) ${h}`),h.length>0&&(g.transform=h)}static cleanup(){if(!(this.#b2.size>0)){for(let{canvas:a}of(this.#b0.clear(),this.#b1.values()))a.remove();this.#b1.clear()}}static #b4(a=null){let b=this.#b1.get(a||="");if(!b){let c=document.createElement("canvas");c.className="hiddenCanvasElement",c.lang=a,document.body.append(c),b=c.getContext("2d",{alpha:!1}),this.#b1.set(a,b)}return b}static #b7(a,b){let c=this.#b0.get(a);if(c)return c;let d=this.#b4(b),e=d.font;d.canvas.width=d.canvas.height=30,d.font=`30px ${a}`;let f=d.measureText(""),g=f.fontBoundingBoxAscent,h=Math.abs(f.fontBoundingBoxDescent);if(g){let b=g/(g+h);return this.#b0.set(a,b),d.canvas.width=d.canvas.height=0,d.font=e,b}d.strokeStyle="red",d.clearRect(0,0,30,30),d.strokeText("g",0,0);let i=d.getImageData(0,0,30,30).data;h=0;for(let a=i.length-1-3;a>=0;a-=4)if(i[a]>0){h=Math.ceil(a/4/30);break}d.clearRect(0,0,30,30),d.strokeText("A",0,30),i=d.getImageData(0,0,30,30).data,g=0;for(let a=0,b=i.length;a<b;a+=4)if(i[a]>0){g=30-Math.floor(a/4/30);break}d.canvas.width=d.canvas.height=0,d.font=e;let j=g?g/(g+h):.8;return this.#b0.set(a,j),j}}function e9(){dP("`renderTextLayer`, please use `TextLayer` instead.");let{textContentSource:a,container:b,viewport:c,...d}=arguments[0],e=Object.keys(d);e.length>0&&c7("Ignoring `renderTextLayer` parameters: "+e.join(", "));let f=new e8({textContentSource:a,container:b,viewport:c}),{textDivs:g,textContentItemsStr:h}=f;return{promise:f.render(),textDivs:g,textContentItemsStr:h}}function fa(){dP("`updateTextLayer`, please use `TextLayer` instead.")}class fb{static textContent(a){let b=[],c={items:b,styles:Object.create(null)};return!function a(c){if(!c)return;let d=null,e=c.name;if("#text"===e)d=c.value;else{if(!fb.shouldBuildText(e))return;c?.attributes?.textContent?d=c.attributes.textContent:c.value&&(d=c.value)}if(null!==d&&b.push({str:d}),c.children)for(let b of c.children)a(b)}(a),c}static shouldBuildText(a){return"textarea"!==a&&"input"!==a&&"option"!==a&&"select"!==a}}let fc=cV?class extends dw{_createCanvas(a,b){return ee.get("canvas").createCanvas(a,b)}}:class extends dw{constructor({ownerDocument:a=globalThis.document}={}){super(),this._document=a}_createCanvas(a,b){let c=this._document.createElement("canvas");return c.width=a,c.height=b,c}},fd=cV?class extends dx{_fetchData(a,b){return ef(a).then(a=>({cMapData:a,compressionType:b}))}}:dD,fe=cV?class extends dv{}:class extends dv{#b8;#b9;#ca;#cb;#cc;#q=0;constructor({docId:a,ownerDocument:b=globalThis.document}={}){super(),this.#ca=a,this.#cb=b}get #s(){return this.#b8||=new Map}get #cd(){return this.#cc||=new Map}get #ce(){if(!this.#b9){let a=this.#cb.createElement("div"),{style:b}=a;b.visibility="hidden",b.contain="strict",b.width=b.height=0,b.position="absolute",b.top=b.left=0,b.zIndex=-1;let c=this.#cb.createElementNS(dA,"svg");c.setAttribute("width",0),c.setAttribute("height",0),this.#b9=this.#cb.createElementNS(dA,"defs"),a.append(c),c.append(this.#b9),this.#cb.body.append(a)}return this.#b9}#cf(a){if(1===a.length){let b=a[0],c=Array(256);for(let a=0;a<256;a++)c[a]=b[a]/255;let d=c.join(",");return[d,d,d]}let[b,c,d]=a,e=Array(256),f=Array(256),g=Array(256);for(let a=0;a<256;a++)e[a]=b[a]/255,f[a]=c[a]/255,g[a]=d[a]/255;return[e.join(","),f.join(","),g.join(",")]}addFilter(a){if(!a)return"none";let b=this.#s.get(a);if(b)return b;let[c,d,e]=this.#cf(a),f=1===a.length?c:`${c}${d}${e}`;if(b=this.#s.get(f))return this.#s.set(a,b),b;let g=`g_${this.#ca}_transfer_map_${this.#q++}`,h=`url(#${g})`;this.#s.set(a,h),this.#s.set(f,h);let i=this.#cg(g);return this.#ch(c,d,e,i),h}addHCMFilter(a,b){let c=`${a}-${b}`,d="base",e=this.#cd.get(d);if(e?.key===c||(e?(e.filter?.remove(),e.key=c,e.url="none",e.filter=null):(e={key:c,url:"none",filter:null},this.#cd.set(d,e)),!a||!b))return e.url;let f=this.#ci(a);a=dq.makeHexColor(...f);let g=this.#ci(b);if(b=dq.makeHexColor(...g),this.#ce.style.color="","#000000"===a&&"#ffffff"===b||a===b)return e.url;let h=Array(256);for(let a=0;a<=255;a++){let b=a/255;h[a]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}let i=h.join(","),j=`g_${this.#ca}_hcm_filter`,k=e.filter=this.#cg(j);this.#ch(i,i,i,k),this.#cj(k);let l=(a,b)=>{let c=f[a]/255,d=g[a]/255,e=Array(b+1);for(let a=0;a<=b;a++)e[a]=c+a/b*(d-c);return e.join(",")};return this.#ch(l(0,5),l(1,5),l(2,5),k),e.url=`url(#${j})`,e.url}addAlphaFilter(a){let b=this.#s.get(a);if(b)return b;let[c]=this.#cf([a]),d=`alpha_${c}`;if(b=this.#s.get(d))return this.#s.set(a,b),b;let e=`g_${this.#ca}_alpha_map_${this.#q++}`,f=`url(#${e})`;this.#s.set(a,f),this.#s.set(d,f);let g=this.#cg(e);return this.#ck(c,g),f}addLuminosityFilter(a){let b,c,d=this.#s.get(a||"luminosity");if(d)return d;if(a?([b]=this.#cf([a]),c=`luminosity_${b}`):c="luminosity",d=this.#s.get(c))return this.#s.set(a,d),d;let e=`g_${this.#ca}_luminosity_map_${this.#q++}`,f=`url(#${e})`;this.#s.set(a,f),this.#s.set(c,f);let g=this.#cg(e);return this.#cl(g),a&&this.#ck(b,g),f}addHighlightHCMFilter(a,b,c,d,e){let f=`${b}-${c}-${d}-${e}`,g=this.#cd.get(a);if(g?.key===f||(g?(g.filter?.remove(),g.key=f,g.url="none",g.filter=null):(g={key:f,url:"none",filter:null},this.#cd.set(a,g)),!b||!c))return g.url;let[h,i]=[b,c].map(this.#ci.bind(this)),j=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),k=Math.round(.2126*i[0]+.7152*i[1]+.0722*i[2]),[l,m]=[d,e].map(this.#ci.bind(this));k<j&&([j,k,l,m]=[k,j,m,l]),this.#ce.style.color="";let n=(a,b,c)=>{let d=Array(256),e=(k-j)/c,f=a/255,g=(b-a)/(255*c),h=0;for(let a=0;a<=c;a++){let b=Math.round(j+a*e),c=f+a*g;for(let a=h;a<=b;a++)d[a]=c;h=b+1}for(let a=h;a<256;a++)d[a]=d[h-1];return d.join(",")},o=`g_${this.#ca}_hcm_${a}_filter`,p=g.filter=this.#cg(o);return this.#cj(p),this.#ch(n(l[0],m[0],5),n(l[1],m[1],5),n(l[2],m[2],5),p),g.url=`url(#${o})`,g.url}destroy(a=!1){a&&0!==this.#cd.size||(this.#b9&&(this.#b9.parentNode.parentNode.remove(),this.#b9=null),this.#b8&&(this.#b8.clear(),this.#b8=null),this.#q=0)}#cl(a){let b=this.#cb.createElementNS(dA,"feColorMatrix");b.setAttribute("type","matrix"),b.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),a.append(b)}#cj(a){let b=this.#cb.createElementNS(dA,"feColorMatrix");b.setAttribute("type","matrix"),b.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),a.append(b)}#cg(a){let b=this.#cb.createElementNS(dA,"filter");return b.setAttribute("color-interpolation-filters","sRGB"),b.setAttribute("id",a),this.#ce.append(b),b}#cm(a,b,c){let d=this.#cb.createElementNS(dA,b);d.setAttribute("type","discrete"),d.setAttribute("tableValues",c),a.append(d)}#ch(a,b,c,d){let e=this.#cb.createElementNS(dA,"feComponentTransfer");d.append(e),this.#cm(e,"feFuncR",a),this.#cm(e,"feFuncG",b),this.#cm(e,"feFuncB",c)}#ck(a,b){let c=this.#cb.createElementNS(dA,"feComponentTransfer");b.append(c),this.#cm(c,"feFuncA",a)}#ci(a){return this.#ce.style.color=a,dS(getComputedStyle(this.#ce).getPropertyValue("color"))}},ff=cV?class extends dy{_fetchData(a){return ef(a)}}:dE;function fg(a){if("string"==typeof a||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a}),"object"!=typeof a)throw Error("Invalid parameter in getDocument, need parameter object.");if(!a.url&&!a.data&&!a.range)throw Error("Invalid parameter object: need either .data, .range or .url");let b=new fi,{docId:c}=b,d=a.url?function(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(cV&&"string"==typeof a)return a}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(a.url):null,e=a.data?function(a){if(cV&&"undefined"!=typeof Buffer&&a instanceof Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if("string"==typeof a)return dl(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"object"==typeof a&&!isNaN(a?.length))return new Uint8Array(a);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(a.data):null,f=a.httpHeaders||null,g=!0===a.withCredentials,h=a.password??null,i=a.range instanceof fj?a.range:null,j=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:65536,k=a.worker instanceof fo?a.worker:null,l=a.verbosity,m="string"!=typeof a.docBaseUrl||dI(a.docBaseUrl)?null:a.docBaseUrl,n="string"==typeof a.cMapUrl?a.cMapUrl:null,o=!1!==a.cMapPacked,p=a.CMapReaderFactory||fd,q="string"==typeof a.standardFontDataUrl?a.standardFontDataUrl:null,r=a.StandardFontDataFactory||ff,s=!0!==a.stopAtErrors,t=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,u=!1!==a.isEvalSupported,v="boolean"==typeof a.isOffscreenCanvasSupported?a.isOffscreenCanvasSupported:!cV,w=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,x="boolean"==typeof a.disableFontFace?a.disableFontFace:cV,y=!0===a.fontExtraProperties,z=!0===a.enableXfa,A=a.ownerDocument||globalThis.document,B=!0===a.disableRange,C=!0===a.disableStream,D=!0===a.disableAutoFetch,E=!0===a.pdfBug,F=i?i.length:a.length??NaN,G="boolean"==typeof a.useSystemFonts?a.useSystemFonts:!cV&&!x,H="boolean"==typeof a.useWorkerFetch?a.useWorkerFetch:p===dD&&r===dE&&n&&q&&dN(n,document.baseURI)&&dN(q,document.baseURI),I=a.canvasFactory||new fc({ownerDocument:A}),J=a.filterFactory||new fe({docId:c,ownerDocument:A});Number.isInteger(l)&&(c5=l);let K={canvasFactory:I,filterFactory:J};if(H||(K.cMapReaderFactory=new p({baseUrl:n,isCompressed:o}),K.standardFontDataFactory=new r({baseUrl:q})),!k){let a={verbosity:l,port:eD.workerPort};b._worker=k=a.port?fo.fromPort(a):new fo(a)}let L={docId:c,apiVersion:"4.3.136",data:e,password:h,disableAutoFetch:D,rangeChunkSize:j,length:F,docBaseUrl:m,enableXfa:z,evaluatorOptions:{maxImageSize:t,disableFontFace:x,ignoreErrors:s,isEvalSupported:u,isOffscreenCanvasSupported:v,canvasMaxAreaInBytes:w,fontExtraProperties:y,useSystemFonts:G,cMapUrl:H?n:null,standardFontDataUrl:H?q:null}},M={disableFontFace:x,fontExtraProperties:y,ownerDocument:A,pdfBug:E,styleElement:null,loadingParams:{disableAutoFetch:D,enableXfa:z}};return k.promise.then(function(){let a;if(b.destroyed)throw Error("Loading aborted");if(k.destroyed)throw Error("Worker was destroyed");let h=k.messageHandler.sendWithPromise("GetDocRequest",L,e?[e.buffer]:null);if(i)a=new eK(i,{disableRange:B,disableStream:C});else if(!e){var l;l={url:d,length:F,httpHeaders:f,withCredentials:g,rangeChunkSize:j,disableRange:B,disableStream:C},a=cV?"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&dN(l.url)?new eU(l):new e0(l):dN(l.url)?new eU(l):new eY(l)}return h.then(d=>{if(b.destroyed)throw Error("Loading aborted");if(k.destroyed)throw Error("Worker was destroyed");let e=new eF(c,d,k.port),f=new fp(e,b,a,M,K);b._transport=f,e.send("Ready",null)})}).catch(b._capability.reject),b}function fh(a){return"object"==typeof a&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0}class fi{static #ca=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fi.#ca++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(a){throw this._worker?.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class fj{constructor(a,b,c=!1,d=null){this.length=a,this.initialData=b,this.progressiveDone=c,this.contentDispositionFilename=d,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,b){for(let c of this._rangeListeners)c(a,b)}onDataProgress(a,b){this._readyCapability.promise.then(()=>{for(let c of this._progressListeners)c(a,b)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(let b of this._progressiveReadListeners)b(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,b){c8("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class fk{constructor(a,b){this._pdfInfo=a,this._transport=b}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return db(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:a="display"}={}){let{renderingIntent:b}=this._transport.getRenderingIntent(a);return this._transport.getOptionalContentConfig(b)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(a){return this._transport.cachedPageNumber(a)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class fl{#cn=null;#co=!1;constructor(a,b,c,d=!1){this._pageIndex=a,this._pageInfo=b,this._transport=c,this._stats=d?new dM:null,this._pdfBug=d,this.commonObjs=c.commonObjs,this.objs=new fr,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:b=this.rotate,offsetX:c=0,offsetY:d=0,dontFlip:e=!1}={}){return new dG({viewBox:this.view,scale:a,rotation:b,offsetX:c,offsetY:d,dontFlip:e})}getAnnotations({intent:a="display"}={}){let{renderingIntent:b}=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,b)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return db(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:a,viewport:b,intent:c="display",annotationMode:d=cY.ENABLE,transform:e=null,background:f=null,optionalContentConfigPromise:g=null,annotationCanvasMap:h=null,pageColors:i=null,printAnnotationStorage:j=null}){this._stats?.time("Overall");let k=this._transport.getRenderingIntent(c,d,j),{renderingIntent:l,cacheKey:m}=k;this.#co=!1,this.#cp(),g||=this._transport.getOptionalContentConfig(l);let n=this._intentStates.get(m);n||(n=Object.create(null),this._intentStates.set(m,n)),n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null);let o=!!(4&l);n.displayReadyCapability||(n.displayReadyCapability=Promise.withResolvers(),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(k));let p=a=>{n.renderTasks.delete(q),(this._maybeCleanupAfterRender||o)&&(this.#co=!0),this.#cq(!o),a?(q.capability.reject(a),this._abortOperatorList({intentState:n,reason:a instanceof Error?a:Error(a)})):q.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},q=new ft({callback:p,params:{canvasContext:a,viewport:b,transform:e,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:n.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!o,pdfBug:this._pdfBug,pageColors:i});(n.renderTasks||=new Set).add(q);let r=q.task;return Promise.all([n.displayReadyCapability.promise,g]).then(([a,b])=>{if(this.destroyed)return void p();if(this._stats?.time("Rendering"),!(b.renderingIntent&l))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");q.initializeGraphics({transparency:a,optionalContentConfig:b}),q.operatorListChanged()}).catch(p),r}getOperatorList({intent:a="display",annotationMode:b=cY.ENABLE,printAnnotationStorage:c=null}={}){let d,e=this._transport.getRenderingIntent(a,b,c,!0),f=this._intentStates.get(e.cacheKey);return f||(f=Object.create(null),this._intentStates.set(e.cacheKey,f)),f.opListReadCapability||((d=Object.create(null)).operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(d))},f.opListReadCapability=Promise.withResolvers(),(f.renderTasks||=new Set).add(d),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(e)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:b=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===a,disableNormalization:!0===b},{highWaterMark:100,size:a=>a.items.length})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>fb.textContent(a));let b=this.streamTextContent(a);return new Promise(function(a,c){let d=b.getReader(),e={items:[],styles:Object.create(null),lang:null};!function b(){d.read().then(function({value:c,done:d}){d?a(e):(e.lang??=c.lang,Object.assign(e.styles,c.styles),e.items.push(...c.items),b())},c)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let a=[];for(let b of this._intentStates.values())if(this._abortOperatorList({intentState:b,reason:Error("Page was destroyed."),force:!0}),!b.opListReadCapability)for(let c of b.renderTasks)a.push(c.completed),c.cancel();return this.objs.clear(),this.#co=!1,this.#cp(),Promise.all(a)}cleanup(a=!1){this.#co=!0;let b=this.#cq(!1);return a&&b&&(this._stats&&=new dM),b}#cq(a=!1){if(this.#cp(),!this.#co||this.destroyed)return!1;if(a)return this.#cn=setTimeout(()=>{this.#cn=null,this.#cq(!1)},5e3),!1;for(let{renderTasks:a,operatorList:b}of this._intentStates.values())if(a.size>0||!b.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#co=!1,!0}#cp(){this.#cn&&(clearTimeout(this.#cn),this.#cn=null)}_startRenderPage(a,b){let c=this._intentStates.get(b);c&&(this._stats?.timeEnd("Page Request"),c.displayReadyCapability?.resolve(a))}_renderPageChunk(a,b){for(let c=0,d=a.length;c<d;c++)b.operatorList.fnArray.push(a.fnArray[c]),b.operatorList.argsArray.push(a.argsArray[c]);for(let c of(b.operatorList.lastChunk=a.lastChunk,b.operatorList.separateAnnots=a.separateAnnots,b.renderTasks))c.operatorListChanged();a.lastChunk&&this.#cq(!0)}_pumpOperatorList({renderingIntent:a,cacheKey:b,annotationStorageSerializable:c}){let{map:d,transfer:e}=c,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:b,annotationStorage:d},e).getReader(),g=this._intentStates.get(b);g.streamReader=f;let h=()=>{f.read().then(({value:a,done:b})=>{if(b){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,g),h())},a=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){for(let a of(g.operatorList.lastChunk=!0,g.renderTasks))a.operatorListChanged();this.#cq(!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(a);else if(g.opListReadCapability)g.opListReadCapability.reject(a);else throw a}})};h()}_abortOperatorList({intentState:a,reason:b,force:c=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!c){if(a.renderTasks.size>0)return;if(b instanceof dH){let c=100;b.extraDelay>0&&b.extraDelay<1e3&&(c+=b.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:b,force:!0})},c);return}}if(a.streamReader.cancel(new dj(b.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(let[b,c]of this._intentStates)if(c===a){this._intentStates.delete(b);break}this.cleanup()}}}get stats(){return this._stats}}class fm{#cr=new Set;#cs=Promise.resolve();postMessage(a,b){let c={data:structuredClone(a,b?{transfer:b}:null)};this.#cs.then(()=>{for(let a of this.#cr)a.call(this,c)})}addEventListener(a,b){this.#cr.add(b)}removeEventListener(a,b){this.#cr.delete(b)}terminate(){this.#cr.clear()}}let fn={isWorkerDisabled:!1,fakeWorkerId:0};cV&&(fn.isWorkerDisabled=!0,eD.workerSrc||="./pdf.worker.mjs"),fn.isSameOrigin=function(a,b){let c;try{if(!(c=new URL(a)).origin||"null"===c.origin)return!1}catch{return!1}let d=new URL(b,c);return c.origin===d.origin},fn.createCDNWrapper=function(a){let b=`await import("${a}");`;return URL.createObjectURL(new Blob([b],{type:"text/javascript"}))};class fo{static #ct;constructor({name:a=null,port:b=null,verbosity:c=c5}={}){if(this.name=a,this.destroyed=!1,this.verbosity=c,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,b){if(fo.#ct?.has(b))throw Error("Cannot use more than one PDFWorker per port.");(fo.#ct||=new WeakMap).set(b,this),this._initializeFromPort(b);return}this._initialize()}get promise(){return cV?Promise.all([ee.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new eF("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!fn.isWorkerDisabled&&!fo.#cu){let{workerSrc:a}=fo;try{fn.isSameOrigin(window.location.href,a)||(a=fn.createCDNWrapper(new URL(a,window.location).href));let b=new Worker(a,{type:"module"}),c=new eF("main","worker",b),d=()=>{b.removeEventListener("error",e),c.destroy(),b.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},e=()=>{this._webWorker||d()};b.addEventListener("error",e),c.on("test",a=>{(b.removeEventListener("error",e),this.destroyed)?d():a?(this._messageHandler=c,this._port=b,this._webWorker=b,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),b.terminate())}),c.on("ready",a=>{if(b.removeEventListener("error",e),this.destroyed)return void d();try{f()}catch{this._setupFakeWorker()}});let f=()=>{let a=new Uint8Array;c.send("test",a,[a.buffer])};f();return}catch{c6("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){fn.isWorkerDisabled||(c7("Setting up fake worker."),fn.isWorkerDisabled=!0),fo._setupFakeWorkerGlobal.then(a=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let b=new fm;this._port=b;let c=`fake${fn.fakeWorkerId++}`,d=new eF(c+"_worker",c,b);a.setup(d,b);let e=new eF(c,c+"_worker",b);this._messageHandler=e,this._readyCapability.resolve(),e.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),fo.#ct?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){if(!a?.port)throw Error("PDFWorker.fromPort - invalid method signature.");let b=this.#ct?.get(a.port);if(b){if(b._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return b}return new fo(a)}static get workerSrc(){if(eD.workerSrc)return eD.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get #cu(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return db(this,"_setupFakeWorkerGlobal",(async()=>this.#cu?this.#cu:(await import(this.workerSrc)).WorkerMessageHandler)())}}class fp{#cv=new Map;#cw=new Map;#cx=new Map;#cy=new Map;#cz=null;constructor(a,b,c,d,e){this.messageHandler=a,this.loadingTask=b,this.commonObjs=new fr,this.fontLoader=new ea({ownerDocument:d.ownerDocument,styleElement:d.styleElement}),this.loadingParams=d.loadingParams,this._params=d,this.canvasFactory=e.canvasFactory,this.filterFactory=e.filterFactory,this.cMapReaderFactory=e.cMapReaderFactory,this.standardFontDataFactory=e.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=c,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#cA(a,b=null){let c=this.#cv.get(a);if(c)return c;let d=this.messageHandler.sendWithPromise(a,b);return this.#cv.set(a,d),d}get annotationStorage(){return db(this,"annotationStorage",new d8)}getRenderingIntent(a,b=cY.ENABLE,c=null,d=!1){let e=2,f=d7;switch(a){case"any":e=1;break;case"display":break;case"print":e=4;break;default:c7(`getRenderingIntent - invalid intent: ${a}`)}switch(b){case cY.DISABLE:e+=64;break;case cY.ENABLE:break;case cY.ENABLE_FORMS:e+=16;break;case cY.ENABLE_STORAGE:f=(4&(e+=32)&&c instanceof d9?c:this.annotationStorage).serializable;break;default:c7(`getRenderingIntent - invalid annotationMode: ${b}`)}return d&&(e+=256),{renderingIntent:e,cacheKey:`${e}_${f.hash}`,annotationStorageSerializable:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#cz?.reject(Error("Worker was destroyed during onPassword callback"));let a=[];for(let b of this.#cw.values())a.push(b._destroy());this.#cw.clear(),this.#cx.clear(),this.#cy.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let b=this.messageHandler.sendWithPromise("Terminate",null);return a.push(b),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#cv.clear(),this.filterFactory.destroy(),e8.cleanup(),this._networkStream?.cancelAllRequests(new dj("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:a,loadingTask:b}=this;a.on("GetReader",(a,b)=>{c9(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},b.onPull=()=>{this._fullReader.read().then(function({value:a,done:c}){c?b.close():(c9(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(a),1,[a]))}).catch(a=>{b.error(a)})},b.onCancel=a=>{this._fullReader.cancel(a),b.ready.catch(a=>{if(!this.destroyed)throw a})}}),a.on("ReaderHeadersReady",a=>{let c=Promise.withResolvers(),d=this._fullReader;return d.headersReady.then(()=>{d.isStreamingSupported&&d.isRangeSupported||(this._lastProgress&&b.onProgress?.(this._lastProgress),d.onProgress=a=>{b.onProgress?.({loaded:a.loaded,total:a.total})}),c.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},c.reject),c.promise}),a.on("GetRangeReader",(a,b)=>{c9(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let c=this._networkStream.getRangeReader(a.begin,a.end);c?(b.onPull=()=>{c.read().then(function({value:a,done:c}){c?b.close():(c9(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(a),1,[a]))}).catch(a=>{b.error(a)})},b.onCancel=a=>{c.cancel(a),b.ready.catch(a=>{if(!this.destroyed)throw a})}):b.close()}),a.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,b._capability.resolve(new fk(a,this))}),a.on("DocException",function(a){let c;switch(a.name){case"PasswordException":c=new dd(a.message,a.code);break;case"InvalidPDFException":c=new df(a.message);break;case"MissingPDFException":c=new dg(a.message);break;case"UnexpectedResponseException":c=new dh(a.message,a.status);break;case"UnknownErrorException":c=new de(a.message,a.details);break;default:c8("DocException - expected a valid Error.")}b._capability.reject(c)}),a.on("PasswordRequest",a=>{if(this.#cz=Promise.withResolvers(),b.onPassword){let c=a=>{a instanceof Error?this.#cz.reject(a):this.#cz.resolve({password:a})};try{b.onPassword(c,a.code)}catch(a){this.#cz.reject(a)}}else this.#cz.reject(new dd(a.message,a.code));return this.#cz.promise}),a.on("DataLoaded",a=>{b.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),a.on("StartRenderPage",a=>{this.destroyed||this.#cw.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),a.on("commonobj",([b,c,d])=>{if(this.destroyed||this.commonObjs.has(b))return null;switch(c){case"Font":let{disableFontFace:e,fontExtraProperties:f,pdfBug:g}=this._params;if("error"in d){let a=d.error;c7(`Error during font loading: ${a}`),this.commonObjs.resolve(b,a);break}let h=new eb(d,{disableFontFace:e,inspectFont:g&&globalThis.FontInspector?.enabled?(a,b)=>globalThis.FontInspector.fontAdded(a,b):null});this.fontLoader.bind(h).catch(()=>a.sendWithPromise("FontFallback",{id:b})).finally(()=>{!f&&h.data&&(h.data=null),this.commonObjs.resolve(b,h)});break;case"CopyLocalImage":let{imageRef:i}=d;for(let a of(c9(i,"The imageRef must be defined."),this.#cw.values()))for(let[,c]of a.objs)if(c?.ref===i){if(!c.dataLen)return null;return this.commonObjs.resolve(b,structuredClone(c)),c.dataLen}break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(b,d);break;default:throw Error(`Got unknown common object type ${c}`)}return null}),a.on("obj",([a,b,c,d])=>{if(this.destroyed)return;let e=this.#cw.get(b);if(!e.objs.has(a)){if(0===e._intentStates.size)return void d?.bitmap?.close();switch(c){case"Image":e.objs.resolve(a,d),d?.dataLen>1e7&&(e._maybeCleanupAfterRender=!0);break;case"Pattern":e.objs.resolve(a,d);break;default:throw Error(`Got unknown object type ${c}`)}}}),a.on("DocProgress",a=>{this.destroyed||b.onProgress?.({loaded:a.loaded,total:a.total})}),a.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(a):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(a):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&c7("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:a,transfer:b}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:this._fullReader?.filename??null},b).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(Error("Invalid page request."));let b=a-1,c=this.#cx.get(b);if(c)return c;let d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:b}).then(c=>{if(this.destroyed)throw Error("Transport destroyed");c.refStr&&this.#cy.set(c.refStr,a);let d=new fl(b,c,this,this._params.pdfBug);return this.#cw.set(b,d),d});return this.#cx.set(b,d),d}getPageIndex(a){return fh(a)?this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(a,b){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:b})}getFieldObjects(){return this.#cA("GetFieldObjects")}hasJSActions(){return this.#cA("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return"string"!=typeof a?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#cA("GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(a){return this.#cA("GetOptionalContentConfig").then(b=>new eJ(b,a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let a="GetMetadata",b=this.#cv.get(a);if(b)return b;let c=this.messageHandler.sendWithPromise(a,null).then(a=>({info:a[0],metadata:a[1]?new eG(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#cv.set(a,c),c}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){for(let a of(await this.messageHandler.sendWithPromise("Cleanup",null),this.#cw.values()))if(!a.cleanup())throw Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),this.#cv.clear(),this.filterFactory.destroy(!0),e8.cleanup()}}cachedPageNumber(a){if(!fh(a))return null;let b=0===a.gen?`${a.num}R`:`${a.num}R${a.gen}`;return this.#cy.get(b)??null}}let fq=Symbol("INITIAL_DATA");class fr{#cB=Object.create(null);#cC(a){return this.#cB[a]||={...Promise.withResolvers(),data:fq}}get(a,b=null){if(b){let c=this.#cC(a);return c.promise.then(()=>b(c.data)),null}let c=this.#cB[a];if(!c||c.data===fq)throw Error(`Requesting object that isn't resolved yet ${a}.`);return c.data}has(a){let b=this.#cB[a];return!!b&&b.data!==fq}resolve(a,b=null){let c=this.#cC(a);c.data=b,c.resolve()}clear(){for(let a in this.#cB){let{data:b}=this.#cB[a];b?.bitmap?.close()}this.#cB=Object.create(null)}*[Symbol.iterator](){for(let a in this.#cB){let{data:b}=this.#cB[a];b!==fq&&(yield[a,b])}}}class fs{#cD=null;constructor(a){this.#cD=a,this.onContinue=null}get promise(){return this.#cD.capability.promise}cancel(a=0){this.#cD.cancel(null,a)}get separateAnnots(){let{separateAnnots:a}=this.#cD.operatorList;if(!a)return!1;let{annotationCanvasMap:b}=this.#cD;return a.form||a.canvas&&b?.size>0}}class ft{static #cE=new WeakSet;constructor({callback:a,params:b,objs:c,commonObjs:d,annotationCanvasMap:e,operatorList:f,pageIndex:g,canvasFactory:h,filterFactory:i,useRequestAnimationFrame:j=!1,pdfBug:k=!1,pageColors:l=null}){this.callback=a,this.params=b,this.objs=c,this.commonObjs=d,this.annotationCanvasMap=e,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=g,this.canvasFactory=h,this.filterFactory=i,this._pdfBug=k,this.pageColors=l,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===j&&!1,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new fs(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=b.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:b}){if(this.cancelled)return;if(this._canvas){if(ft.#cE.has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ft.#cE.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:c,viewport:d,transform:e,background:f}=this.params;this.gfx=new eC(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:b},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:e,viewport:d,transparency:a,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(a=null,b=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),ft.#cE.delete(this._canvas),this.callback(a||new dH(`Rendering cancelled, page ${this._pageIndex+1}`,b))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ft.#cE.delete(this._canvas),this.callback())))}}let fu="4.3.136",fv="0cec64437";function fw(a){return Math.floor(255*Math.max(0,Math.min(1,a))).toString(16).padStart(2,"0")}function fx(a){return Math.max(0,Math.min(255,255*a))}class fy{static CMYK_G([a,b,c,d]){return["G",1-Math.min(1,.3*a+.59*c+.11*b+d)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_rgb([a]){return[a=fx(a),a,a]}static G_HTML([a]){let b=fw(a);return`#${b}${b}${b}`}static RGB_G([a,b,c]){return["G",.3*a+.59*b+.11*c]}static RGB_rgb(a){return a.map(fx)}static RGB_HTML(a){return`#${a.map(fw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([a,b,c,d]){return["RGB",1-Math.min(1,a+d),1-Math.min(1,c+d),1-Math.min(1,b+d)]}static CMYK_rgb([a,b,c,d]){return[fx(1-Math.min(1,a+d)),fx(1-Math.min(1,c+d)),fx(1-Math.min(1,b+d))]}static CMYK_HTML(a){let b=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([a,b,c]){let d=1-a,e=1-b,f=1-c,g=Math.min(d,e,f);return["CMYK",d,e,f,g]}}class fz{static setupStorage(a,b,c,d,e){let f=d.getValue(b,{value:null});switch(c.name){case"textarea":if(null!==f.value&&(a.textContent=f.value),"print"===e)break;a.addEventListener("input",a=>{d.setValue(b,{value:a.target.value})});break;case"input":if("radio"===c.attributes.type||"checkbox"===c.attributes.type){if(f.value===c.attributes.xfaOn?a.setAttribute("checked",!0):f.value===c.attributes.xfaOff&&a.removeAttribute("checked"),"print"===e)break;a.addEventListener("change",a=>{d.setValue(b,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(null!==f.value&&a.setAttribute("value",f.value),"print"===e)break;a.addEventListener("input",a=>{d.setValue(b,{value:a.target.value})})}break;case"select":if(null!==f.value)for(let b of(a.setAttribute("value",f.value),c.children))b.attributes.value===f.value?b.attributes.selected=!0:b.attributes.hasOwnProperty("selected")&&delete b.attributes.selected;a.addEventListener("input",a=>{let c=a.target.options,e=-1===c.selectedIndex?"":c[c.selectedIndex].value;d.setValue(b,{value:e})})}}static setAttributes({html:a,element:b,storage:c=null,intent:d,linkService:e}){let{attributes:f}=b,g=a instanceof HTMLAnchorElement;for(let[b,c]of("radio"===f.type&&(f.name=`${f.name}-${d}`),Object.entries(f)))if(null!=c)switch(b){case"class":c.length&&a.setAttribute(b,c.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",c);break;case"style":Object.assign(a.style,c);break;case"textContent":a.textContent=c;break;default:g&&("href"===b||"newWindow"===b)||a.setAttribute(b,c)}g&&e.addLinkAttributes(a,f.href,f.newWindow),c&&f.dataId&&this.setupStorage(a,f.dataId,b,c)}static render(a){let b=a.annotationStorage,c=a.linkService,d=a.xfaHtml,e=a.intent||"display",f=document.createElement(d.name);d.attributes&&this.setAttributes({html:f,element:d,intent:e,linkService:c});let g="richText"!==e,h=a.div;if(h.append(f),a.viewport){let b=`matrix(${a.viewport.transform.join(",")})`;h.style.transform=b}g&&h.setAttribute("class","xfaLayer xfaFont");let i=[];if(0===d.children.length){if(d.value){let a=document.createTextNode(d.value);f.append(a),g&&fb.shouldBuildText(d.name)&&i.push(a)}return{textDivs:i}}let j=[[d,-1,f]];for(;j.length>0;){let[a,d,f]=j.at(-1);if(d+1===a.children.length){j.pop();continue}let h=a.children[++j.at(-1)[1]];if(null===h)continue;let{name:k}=h;if("#text"===k){let a=document.createTextNode(h.value);i.push(a),f.append(a);continue}let l=h?.attributes?.xmlns?document.createElementNS(h.attributes.xmlns,k):document.createElement(k);if(f.append(l),h.attributes&&this.setAttributes({html:l,element:h,storage:b,intent:e,linkService:c}),h.children?.length>0)j.push([h,-1,l]);else if(h.value){let a=document.createTextNode(h.value);g&&fb.shouldBuildText(k)&&i.push(a),l.append(a)}}for(let a of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:i}}static update(a){let b=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=b,a.div.hidden=!1}}let fA=new WeakSet;function fB(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class fC{static create(a){switch(a.data.annotationType){case 2:return new fE(a);case 1:return new fF(a);case 20:switch(a.data.fieldType){case"Tx":return new fH(a);case"Btn":if(a.data.radioButton)return new fK(a);if(a.data.checkBox)return new fJ(a);return new fL(a);case"Ch":return new fM(a);case"Sig":return new fI(a)}return new fG(a);case 16:return new fN(a);case 3:return new fP(a);case 4:return new fQ(a);case 5:return new fR(a);case 6:return new fS(a);case 8:return new fT(a);case 14:return new fV(a);case 15:return new fW(a);case 7:return new fU(a);case 9:return new fX(a);case 10:return new fY(a);case 11:return new fZ(a);case 12:return new f$(a);case 13:return new f_(a);case 17:return new f0(a);default:return new fD(a)}}}class fD{#cF=null;#cG=!1;#cH=null;constructor(a,{isRenderable:b=!1,ignoreBorder:c=!1,createQuadrilaterals:d=!1}={}){this.isRenderable=b,this.data=a.data,this.layer=a.layer,this.linkService=a.linkService,this.downloadManager=a.downloadManager,this.imageResourcesPath=a.imageResourcesPath,this.renderForms=a.renderForms,this.svgFactory=a.svgFactory,this.annotationStorage=a.annotationStorage,this.enableScripting=a.enableScripting,this.hasJSActions=a.hasJSActions,this._fieldObjects=a.fieldObjects,this.parent=a.parent,b&&(this.container=this._createContainer(c)),d&&this._createQuadrilaterals()}static _hasPopupData({titleObj:a,contentsObj:b,richText:c}){return!!(a?.str||b?.str||c?.str)}get hasPopupData(){return fD._hasPopupData(this.data)}updateEdited(a){if(!this.container)return;this.#cF||={rect:this.data.rect.slice(0)};let{rect:b}=a;b&&this.#cI(b),this.#cH?.popup.updateEdited(a)}resetEdited(){this.#cF&&(this.#cI(this.#cF.rect),this.#cH?.popup.resetEdited(),this.#cF=null)}#cI(a){let{container:{style:b},data:{rect:c,rotation:d},parent:{viewport:{rawDims:{pageWidth:e,pageHeight:f,pageX:g,pageY:h}}}}=this;c?.splice(0,4,...a);let{width:i,height:j}=fB(a);b.left=`${100*(a[0]-g)/e}%`,b.top=`${100*(f-a[3]+h)/f}%`,0===d?(b.width=`${100*i/e}%`,b.height=`${100*j/f}%`):this.setRotation(d)}_createContainer(a){let{data:b,parent:{page:c,viewport:d}}=this,e=document.createElement("section");e.setAttribute("data-annotation-id",b.id),this instanceof fG||(e.tabIndex=1e3);let{style:f}=e;if(f.zIndex=this.parent.zIndex++,b.popupRef&&e.setAttribute("aria-haspopup","dialog"),b.alternativeText&&(e.title=b.alternativeText),b.noRotate&&e.classList.add("norotate"),!b.rect||this instanceof fN){let{rotation:a}=b;return b.hasOwnCanvas||0===a||this.setRotation(a,e),e}let{width:g,height:h}=fB(b.rect);if(!a&&b.borderStyle.width>0){f.borderWidth=`${b.borderStyle.width}px`;let a=b.borderStyle.horizontalCornerRadius,c=b.borderStyle.verticalCornerRadius;switch(a>0||c>0?f.borderRadius=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`:this instanceof fK&&(f.borderRadius=`calc(${g}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`),b.borderStyle.style){case 1:f.borderStyle="solid";break;case 2:f.borderStyle="dashed";break;case 3:c7("Unimplemented border style: beveled");break;case 4:c7("Unimplemented border style: inset");break;case 5:f.borderBottomStyle="solid"}let d=b.borderColor||null;d?(this.#cG=!0,f.borderColor=dq.makeHexColor(0|d[0],0|d[1],0|d[2])):f.borderWidth=0}let i=dq.normalizeRect([b.rect[0],c.view[3]-b.rect[1]+c.view[1],b.rect[2],c.view[3]-b.rect[3]+c.view[1]]),{pageWidth:j,pageHeight:k,pageX:l,pageY:m}=d.rawDims;f.left=`${100*(i[0]-l)/j}%`,f.top=`${100*(i[1]-m)/k}%`;let{rotation:n}=b;return b.hasOwnCanvas||0===n?(f.width=`${100*g/j}%`,f.height=`${100*h/k}%`):this.setRotation(n,e),e}setRotation(a,b=this.container){let c,d;if(!this.data.rect)return;let{pageWidth:e,pageHeight:f}=this.parent.viewport.rawDims,{width:g,height:h}=fB(this.data.rect);a%180==0?(c=100*g/e,d=100*h/f):(c=100*h/e,d=100*g/f),b.style.width=`${c}%`,b.style.height=`${d}%`,b.setAttribute("data-main-rotation",(360-a)%360)}get _commonActions(){let a=(a,b,c)=>{let d=c.detail[a],e=d[0],f=d.slice(1);c.target.style[b]=fy[`${e}_HTML`](f),this.annotationStorage.setValue(this.data.id,{[b]:fy[`${e}_rgb`](f)})};return db(this,"_commonActions",{display:a=>{let{display:b}=a.detail,c=b%2==1;this.container.style.visibility=c?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:c,noPrint:1===b||2===b})},print:a=>{this.annotationStorage.setValue(this.data.id,{noPrint:!a.detail.print})},hidden:a=>{let{hidden:b}=a.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.target.disabled=a.detail.readonly},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:b=>{a("bgColor","backgroundColor",b)},fillColor:b=>{a("fillColor","backgroundColor",b)},fgColor:b=>{a("fgColor","color",b)},textColor:b=>{a("textColor","color",b)},borderColor:b=>{a("borderColor","borderColor",b)},strokeColor:b=>{a("strokeColor","borderColor",b)},rotation:a=>{let b=a.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(a,b){let c=this._commonActions;for(let d of Object.keys(b.detail)){let e=a[d]||c[d];e?.(b)}}_setDefaultPropertiesFromJS(a){if(!this.enableScripting)return;let b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;let c=this._commonActions;for(let[d,e]of Object.entries(b)){let f=c[d];f&&(f({detail:{[d]:e},target:a}),delete b[d])}}_createQuadrilaterals(){let a;if(!this.container)return;let{quadPoints:b}=this.data;if(!b)return;let[c,d,e,f]=this.data.rect;if(1===b.length){let[,{x:a,y:g},{x:h,y:i}]=b[0];if(e===a&&f===g&&c===h&&d===i)return}let{style:g}=this.container;if(this.#cG){let{borderColor:b,borderWidth:c}=g;g.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${c}">`],this.container.classList.add("hasBorder")}let h=e-c,i=f-d,{svgFactory:j}=this,k=j.createElement("svg");k.classList.add("quadrilateralsContainer"),k.setAttribute("width",0),k.setAttribute("height",0);let l=j.createElement("defs");k.append(l);let m=j.createElement("clipPath"),n=`clippath_${this.data.id}`;for(let[,{x:d,y:e},{x:g,y:k}]of(m.setAttribute("id",n),m.setAttribute("clipPathUnits","objectBoundingBox"),l.append(m),b)){let b=j.createElement("rect"),l=(g-c)/h,n=(f-e)/i,o=(d-g)/h,p=(e-k)/i;b.setAttribute("x",l),b.setAttribute("y",n),b.setAttribute("width",o),b.setAttribute("height",p),m.append(b),a?.push(`<rect vector-effect="non-scaling-stroke" x="${l}" y="${n}" width="${o}" height="${p}"/>`)}this.#cG&&(a.push("</g></svg>')"),g.backgroundImage=a.join("")),this.container.append(k),this.container.style.clipPath=`url(#${n})`}_createPopup(){let{container:a,data:b}=this;a.setAttribute("aria-haspopup","dialog");let c=this.#cH=new fN({data:{color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,parentRect:b.rect,borderStyle:0,id:`popup_${b.id}`,rotation:b.rotation},parent:this.parent,elements:[this]});this.parent.div.append(c.render())}render(){c8("Abstract method `AnnotationElement.render` called")}_getElementsByName(a,b=null){let c=[];if(this._fieldObjects){let d=this._fieldObjects[a];if(d)for(let{page:a,id:e,exportValues:f}of d){if(-1===a||e===b)continue;let d="string"==typeof f?f:null,g=document.querySelector(`[data-element-id="${e}"]`);if(g&&!fA.has(g)){c7(`_getElementsByName - element not allowed: ${e}`);continue}c.push({id:e,exportValue:d,domElement:g})}return c}for(let d of document.getElementsByName(a)){let{exportValue:a}=d,e=d.getAttribute("data-element-id");e!==b&&fA.has(d)&&c.push({id:e,exportValue:a,domElement:d})}return c}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let a=this.getElementsToTriggerPopup();if(Array.isArray(a))for(let b of a)b.classList.add("highlightArea");else a.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:a,data:{id:b}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:a,editId:b})})}}class fE extends fD{constructor(a,b=null){super(a,{isRenderable:!0,ignoreBorder:!!b?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=a.data.isTooltipOnly}render(){let{data:a,linkService:b}=this,c=document.createElement("a");c.setAttribute("data-element-id",a.id);let d=!1;return a.url?(b.addLinkAttributes(c,a.url,a.newWindow),d=!0):a.action?(this._bindNamedAction(c,a.action),d=!0):a.attachment?(this.#cJ(c,a.attachment,a.attachmentDest),d=!0):a.setOCGState?(this.#cK(c,a.setOCGState),d=!0):a.dest?(this._bindLink(c,a.dest),d=!0):(a.actions&&(a.actions.Action||a.actions["Mouse Up"]||a.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(c,a),d=!0),a.resetForm?(this._bindResetFormAction(c,a.resetForm),d=!0):this.isTooltipOnly&&!d&&(this._bindLink(c,""),d=!0)),this.container.classList.add("linkAnnotation"),d&&this.container.append(c),this.container}#cL(){this.container.setAttribute("data-internal-link","")}_bindLink(a,b){a.href=this.linkService.getDestinationHash(b),a.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||""===b)&&this.#cL()}_bindNamedAction(a,b){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(b),!1),this.#cL()}#cJ(a,b,c=null){a.href=this.linkService.getAnchorUrl(""),b.description&&(a.title=b.description),a.onclick=()=>(this.downloadManager?.openOrDownloadData(b.content,b.filename,c),!1),this.#cL()}#cK(a,b){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeSetOCGState(b),!1),this.#cL()}_bindJSAction(a,b){a.href=this.linkService.getAnchorUrl("");let c=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let d of Object.keys(b.actions)){let e=c.get(d);e&&(a[e]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:d}}),!1))}a.onclick||(a.onclick=()=>!1),this.#cL()}_bindResetFormAction(a,b){let c=a.onclick;if(c||(a.href=this.linkService.getAnchorUrl("")),this.#cL(),!this._fieldObjects){c7('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),c||(a.onclick=()=>!1);return}a.onclick=()=>{c?.();let{fields:a,refs:d,include:e}=b,f=[];if(0!==a.length||0!==d.length){let b=new Set(d);for(let c of a)for(let{id:a}of this._fieldObjects[c]||[])b.add(a);for(let a of Object.values(this._fieldObjects))for(let c of a)b.has(c.id)===e&&f.push(c)}else for(let a of Object.values(this._fieldObjects))f.push(...a);let g=this.annotationStorage,h=[];for(let a of f){let{id:b}=a;switch(h.push(b),a.type){case"text":{let c=a.defaultValue||"";g.setValue(b,{value:c});break}case"checkbox":case"radiobutton":{let c=a.defaultValue===a.exportValues;g.setValue(b,{value:c});break}case"combobox":case"listbox":{let c=a.defaultValue||"";g.setValue(b,{value:c});break}default:continue}let c=document.querySelector(`[data-element-id="${b}"]`);if(c){if(!fA.has(c)){c7(`_bindResetFormAction - element not allowed: ${b}`);continue}c.dispatchEvent(new Event("resetform"))}}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class fF extends fD{constructor(a){super(a,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let a=document.createElement("img");return a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",a.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),a.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(a),this.container}}class fG extends fD{render(){return this.container}showElementAndHideCanvas(a){this.data.hasOwnCanvas&&(a.previousSibling?.nodeName==="CANVAS"&&(a.previousSibling.hidden=!0),a.hidden=!1)}_getKeyModifier(a){return dn.platform.isMac?a.metaKey:a.ctrlKey}_setEventListener(a,b,c,d,e){c.includes("mouse")?a.addEventListener(c,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:e(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):a.addEventListener(c,a=>{if("blur"===c){if(!b.focused||!a.relatedTarget)return;b.focused=!1}else if("focus"===c){if(b.focused)return;b.focused=!0}e&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:e(a)}})})}_setEventListeners(a,b,c,d){for(let[e,f]of c)("Action"===f||this.data.actions?.[f])&&(("Focus"===f||"Blur"===f)&&(b||={focused:!1}),this._setEventListener(a,b,e,f,d),"Focus"!==f||this.data.actions?.Blur?"Blur"!==f||this.data.actions?.Focus||this._setEventListener(a,b,"focus","Focus",null):this._setEventListener(a,b,"blur","Blur",null))}_setBackgroundColor(a){let b=this.data.backgroundColor||null;a.style.backgroundColor=null===b?"transparent":dq.makeHexColor(b[0],b[1],b[2])}_setTextStyle(a){let b,{fontColor:c}=this.data.defaultAppearanceData,d=this.data.defaultAppearanceData.fontSize||9,e=a.style,f=a=>Math.round(10*a)/10;if(this.data.multiLine){let a=Math.abs(this.data.rect[3]-this.data.rect[1]-2),c=Math.round(a/(1.35*d))||1;b=Math.min(d,f(a/c/1.35))}else b=Math.min(d,f(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));e.fontSize=`calc(${b}px * var(--scale-factor))`,e.color=dq.makeHexColor(c[0],c[1],c[2]),null!==this.data.textAlignment&&(e.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(a,b){b?a.setAttribute("required",!0):a.removeAttribute("required"),a.setAttribute("aria-required",b)}}class fH extends fG{constructor(a){super(a,{isRenderable:a.renderForms||a.data.hasOwnCanvas||!a.data.hasAppearance&&!!a.data.fieldValue})}setPropertyOnSiblings(a,b,c,d){let e=this.annotationStorage;for(let f of this._getElementsByName(a.name,a.id))f.domElement&&(f.domElement[b]=c),e.setValue(f.id,{[d]:c})}render(){let a=this.annotationStorage,b=this.data.id;this.container.classList.add("textWidgetAnnotation");let c=null;if(this.renderForms){let d=a.getValue(b,{value:this.data.fieldValue}),e=d.value||"",f=a.getValue(b,{charLimit:this.data.maxLen}).charLimit;f&&e.length>f&&(e=e.slice(0,f));let g=d.formattedValue||this.data.textContent?.join("\n")||null;g&&this.data.comb&&(g=g.replaceAll(/\s+/g,""));let h={userValue:e,formattedValue:g,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((c=document.createElement("textarea")).textContent=g??e,this.data.doNotScroll&&(c.style.overflowY="hidden")):((c=document.createElement("input")).type="text",c.setAttribute("value",g??e),this.data.doNotScroll&&(c.style.overflowX="hidden")),this.data.hasOwnCanvas&&(c.hidden=!0),fA.add(c),c.setAttribute("data-element-id",b),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.tabIndex=1e3,this._setRequired(c,this.data.required),f&&(c.maxLength=f),c.addEventListener("input",d=>{a.setValue(b,{value:d.target.value}),this.setPropertyOnSiblings(c,"value",d.target.value,"value"),h.formattedValue=null}),c.addEventListener("resetform",a=>{let b=this.data.defaultFieldValue??"";c.value=h.userValue=b,h.formattedValue=null});let i=a=>{let{formattedValue:b}=h;null!=b&&(a.target.value=b),a.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){c.addEventListener("focus",a=>{if(h.focused)return;let{target:b}=a;h.userValue&&(b.value=h.userValue),h.lastCommittedValue=b.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),c.addEventListener("updatefromsandbox",c=>{this.showElementAndHideCanvas(c.target),this._dispatchEventFromSandbox({value(c){h.userValue=c.detail.value??"",a.setValue(b,{value:h.userValue.toString()}),c.target.value=h.userValue},formattedValue(c){let{formattedValue:d}=c.detail;h.formattedValue=d,null!=d&&c.target!==document.activeElement&&(c.target.value=d),a.setValue(b,{formattedValue:d})},selRange(a){a.target.setSelectionRange(...a.detail.selRange)},charLimit:c=>{let{charLimit:d}=c.detail,{target:e}=c;if(0===d)return void e.removeAttribute("maxLength");e.setAttribute("maxLength",d);let f=h.userValue;f&&!(f.length<=d)&&(e.value=h.userValue=f=f.slice(0,d),a.setValue(b,{value:f}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:f,willCommit:!0,commitKey:1,selStart:e.selectionStart,selEnd:e.selectionEnd}}))}},c)}),c.addEventListener("keydown",a=>{h.commitKey=1;let c=-1;if("Escape"===a.key?c=0:"Enter"!==a.key||this.data.multiLine?"Tab"===a.key&&(h.commitKey=3):c=2,-1===c)return;let{value:d}=a.target;h.lastCommittedValue!==d&&(h.lastCommittedValue=d,h.userValue=d,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:d,willCommit:!0,commitKey:c,selStart:a.target.selectionStart,selEnd:a.target.selectionEnd}}))});let d=i;i=null,c.addEventListener("blur",a=>{if(!h.focused||!a.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);let{value:c}=a.target;h.userValue=c,h.lastCommittedValue!==c&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:c,willCommit:!0,commitKey:h.commitKey,selStart:a.target.selectionStart,selEnd:a.target.selectionEnd}}),d(a)}),this.data.actions?.Keystroke&&c.addEventListener("beforeinput",a=>{h.lastCommittedValue=null;let{data:c,target:d}=a,{value:e,selectionStart:f,selectionEnd:g}=d,i=f,j=g;switch(a.inputType){case"deleteWordBackward":{let a=e.substring(0,f).match(/\w*[^\w]*$/);a&&(i-=a[0].length);break}case"deleteWordForward":{let a=e.substring(f).match(/^[^\w]*\w*/);a&&(j+=a[0].length);break}case"deleteContentBackward":f===g&&(i-=1);break;case"deleteContentForward":f===g&&(j+=1)}a.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:e,change:c||"",willCommit:!1,selStart:i,selEnd:j}})}),this._setEventListeners(c,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.value)}if(i&&c.addEventListener("blur",i),this.data.comb){let a=(this.data.rect[2]-this.data.rect[0])/f;c.classList.add("comb"),c.style.letterSpacing=`calc(${a}px * var(--scale-factor) - 1ch)`}}else(c=document.createElement("div")).textContent=this.data.fieldValue,c.style.verticalAlign="middle",c.style.display="table-cell",this.data.hasOwnCanvas&&(c.hidden=!0);return this._setTextStyle(c),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class fI extends fG{constructor(a){super(a,{isRenderable:!!a.data.hasOwnCanvas})}}class fJ extends fG{constructor(a){super(a,{isRenderable:a.renderForms})}render(){let a=this.annotationStorage,b=this.data,c=b.id,d=a.getValue(c,{value:b.exportValue===b.fieldValue}).value;"string"==typeof d&&(d="Off"!==d,a.setValue(c,{value:d})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let e=document.createElement("input");return fA.add(e),e.setAttribute("data-element-id",c),e.disabled=b.readOnly,this._setRequired(e,this.data.required),e.type="checkbox",e.name=b.fieldName,d&&e.setAttribute("checked",!0),e.setAttribute("exportValue",b.exportValue),e.tabIndex=1e3,e.addEventListener("change",d=>{let{name:e,checked:f}=d.target;for(let d of this._getElementsByName(e,c)){let c=f&&d.exportValue===b.exportValue;d.domElement&&(d.domElement.checked=c),a.setValue(d.id,{value:c})}a.setValue(c,{value:f})}),e.addEventListener("resetform",a=>{let c=b.defaultFieldValue||"Off";a.target.checked=c===b.exportValue}),this.enableScripting&&this.hasJSActions&&(e.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({value(b){b.target.checked="Off"!==b.detail.value,a.setValue(c,{value:b.target.checked})}},b)}),this._setEventListeners(e,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(e),this._setDefaultPropertiesFromJS(e),this.container.append(e),this.container}}class fK extends fG{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let a=this.annotationStorage,b=this.data,c=b.id,d=a.getValue(c,{value:b.fieldValue===b.buttonValue}).value;if("string"==typeof d&&(d=d!==b.buttonValue,a.setValue(c,{value:d})),d)for(let d of this._getElementsByName(b.fieldName,c))a.setValue(d.id,{value:!1});let e=document.createElement("input");if(fA.add(e),e.setAttribute("data-element-id",c),e.disabled=b.readOnly,this._setRequired(e,this.data.required),e.type="radio",e.name=b.fieldName,d&&e.setAttribute("checked",!0),e.tabIndex=1e3,e.addEventListener("change",b=>{let{name:d,checked:e}=b.target;for(let b of this._getElementsByName(d,c))a.setValue(b.id,{value:!1});a.setValue(c,{value:e})}),e.addEventListener("resetform",a=>{let c=b.defaultFieldValue;a.target.checked=null!=c&&c===b.buttonValue}),this.enableScripting&&this.hasJSActions){let d=b.buttonValue;e.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({value:b=>{let e=d===b.detail.value;for(let d of this._getElementsByName(b.target.name)){let b=e&&d.id===c;d.domElement&&(d.domElement.checked=b),a.setValue(d.id,{value:b})}}},b)}),this._setEventListeners(e,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(e),this._setDefaultPropertiesFromJS(e),this.container.append(e),this.container}}class fL extends fE{constructor(a){super(a,{ignoreBorder:a.data.hasAppearance})}render(){let a=super.render();a.classList.add("buttonWidgetAnnotation","pushButton");let b=a.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),a}}class fM extends fG{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let a=this.annotationStorage,b=this.data.id,c=a.getValue(b,{value:this.data.fieldValue}),d=document.createElement("select");fA.add(d),d.setAttribute("data-element-id",b),d.disabled=this.data.readOnly,this._setRequired(d,this.data.required),d.name=this.data.fieldName,d.tabIndex=1e3;let e=this.data.combo&&this.data.options.length>0;for(let a of(!this.data.combo&&(d.size=this.data.options.length,this.data.multiSelect&&(d.multiple=!0)),d.addEventListener("resetform",a=>{let b=this.data.defaultFieldValue;for(let a of d.options)a.selected=a.value===b}),this.data.options)){let b=document.createElement("option");b.textContent=a.displayValue,b.value=a.exportValue,c.value.includes(a.exportValue)&&(b.setAttribute("selected",!0),e=!1),d.append(b)}let f=null;if(e){let a=document.createElement("option");a.value=" ",a.setAttribute("hidden",!0),a.setAttribute("selected",!0),d.prepend(a),f=()=>{a.remove(),d.removeEventListener("input",f),f=null},d.addEventListener("input",f)}let g=a=>{let b=a?"value":"textContent",{options:c,multiple:e}=d;return e?Array.prototype.filter.call(c,a=>a.selected).map(a=>a[b]):-1===c.selectedIndex?null:c[c.selectedIndex][b]},h=g(!1),i=a=>{let b=a.target.options;return Array.prototype.map.call(b,a=>({displayValue:a.textContent,exportValue:a.value}))};return this.enableScripting&&this.hasJSActions?(d.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({value(c){f?.();let e=c.detail.value,i=new Set(Array.isArray(e)?e:[e]);for(let a of d.options)a.selected=i.has(a.value);a.setValue(b,{value:g(!0)}),h=g(!1)},multipleSelection(a){d.multiple=!0},remove(c){let e=d.options,f=c.detail.remove;e[f].selected=!1,d.remove(f),e.length>0&&-1===Array.prototype.findIndex.call(e,a=>a.selected)&&(e[0].selected=!0),a.setValue(b,{value:g(!0),items:i(c)}),h=g(!1)},clear(c){for(;0!==d.length;)d.remove(0);a.setValue(b,{value:null,items:[]}),h=g(!1)},insert(c){let{index:e,displayValue:f,exportValue:j}=c.detail.insert,k=d.children[e],l=document.createElement("option");l.textContent=f,l.value=j,k?k.before(l):d.append(l),a.setValue(b,{value:g(!0),items:i(c)}),h=g(!1)},items(c){let{items:e}=c.detail;for(;0!==d.length;)d.remove(0);for(let a of e){let{displayValue:b,exportValue:c}=a,e=document.createElement("option");e.textContent=b,e.value=c,d.append(e)}d.options.length>0&&(d.options[0].selected=!0),a.setValue(b,{value:g(!0),items:i(c)}),h=g(!1)},indices(c){let d=new Set(c.detail.indices);for(let a of c.target.options)a.selected=d.has(a.index);a.setValue(b,{value:g(!0)}),h=g(!1)},editable(a){a.target.disabled=!a.detail.editable}},c)}),d.addEventListener("input",c=>{let d=g(!0),e=g(!1);a.setValue(b,{value:d}),c.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:h,change:e,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(d,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],a=>a.target.value)):d.addEventListener("input",function(c){a.setValue(b,{value:g(!0)})}),this.data.combo&&this._setTextStyle(d),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class fN extends fD{constructor(a){const{data:b,elements:c}=a;super(a,{isRenderable:fD._hasPopupData(b)}),this.elements=c,this.popup=null}render(){this.container.classList.add("popupAnnotation");let a=this.popup=new fO({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),b=[];for(let c of this.elements)c.popup=a,b.push(c.data.id),c.addHighlightArea();return this.container.setAttribute("aria-controls",b.map(a=>`${du}${a}`).join(",")),this.container}}class fO{#cM=this.#cN.bind(this);#cO=this.#cP.bind(this);#cQ=this.#cR.bind(this);#cS=this.#cT.bind(this);#cU=null;#aq=null;#cV=null;#cW=null;#cX=null;#cY=null;#cZ=null;#c$=!1;#c_=null;#x=null;#c0=null;#c1=null;#c2=null;#cF=null;#c3=!1;constructor({container:a,color:b,elements:c,titleObj:d,modificationDate:e,contentsObj:f,richText:g,parent:h,rect:i,parentRect:j,open:k}){for(const k of(this.#aq=a,this.#c2=d,this.#cV=f,this.#c1=g,this.#cY=h,this.#cU=b,this.#c0=i,this.#cZ=j,this.#cX=c,this.#cW=dQ.toDateObject(e),this.trigger=c.flatMap(a=>a.getElementsToTriggerPopup()),this.trigger))k.addEventListener("click",this.#cS),k.addEventListener("mouseenter",this.#cQ),k.addEventListener("mouseleave",this.#cO),k.classList.add("popupTriggerArea");for(const a of c)a.container?.addEventListener("keydown",this.#cM);this.#aq.hidden=!0,k&&this.#cT()}render(){if(this.#c_)return;let a=this.#c_=document.createElement("div");if(a.className="popup",this.#cU){let b=a.style.outlineColor=dq.makeHexColor(...this.#cU);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?a.style.backgroundColor=`color-mix(in srgb, ${b} 30%, white)`:a.style.backgroundColor=dq.makeHexColor(...this.#cU.map(a=>Math.floor(.7*(255-a)+a)))}let b=document.createElement("span");b.className="header";let c=document.createElement("h1");if(b.append(c),{dir:c.dir,str:c.textContent}=this.#c2,a.append(b),this.#cW){let a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),a.setAttribute("data-l10n-args",JSON.stringify({date:this.#cW.toLocaleDateString(),time:this.#cW.toLocaleTimeString()})),b.append(a)}let d=this.#c4;if(d)fz.render({xfaHtml:d,intent:"richText",div:a}),a.lastChild.classList.add("richText","popupContent");else{let b=this._formatContents(this.#cV);a.append(b)}this.#aq.append(a)}get #c4(){let a=this.#c1,b=this.#cV;return a?.str&&(!b?.str||b.str===a.str)&&this.#c1.html||null}get #c5(){return this.#c4?.attributes?.style?.fontSize||0}get #c6(){return this.#c4?.attributes?.style?.color||null}#c7(a){let b=[],c={style:{color:this.#c6,fontSize:this.#c5?`calc(${this.#c5}px * var(--scale-factor))`:""}};for(let d of a.split("\n"))b.push({name:"span",value:d,attributes:c});return{str:a,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:b}]}}}_formatContents({str:a,dir:b}){let c=document.createElement("p");c.classList.add("popupContent"),c.dir=b;let d=a.split(/(?:\r\n?|\n)/);for(let a=0,b=d.length;a<b;++a){let e=d[a];c.append(document.createTextNode(e)),a<b-1&&c.append(document.createElement("br"))}return c}#cN(a){a.altKey||a.shiftKey||a.ctrlKey||a.metaKey||("Enter"===a.key||"Escape"===a.key&&this.#c$)&&this.#cT()}updateEdited({rect:a,popupContent:b}){this.#cF||={contentsObj:this.#cV,richText:this.#c1},a&&(this.#x=null),b&&(this.#c1=this.#c7(b),this.#cV=null),this.#c_?.remove(),this.#c_=null}resetEdited(){this.#cF&&({contentsObj:this.#cV,richText:this.#c1}=this.#cF,this.#cF=null,this.#c_?.remove(),this.#c_=null,this.#x=null)}#c8(){if(null!==this.#x)return;let{page:{view:a},viewport:{rawDims:{pageWidth:b,pageHeight:c,pageX:d,pageY:e}}}=this.#cY,f=!!this.#cZ,g=f?this.#cZ:this.#c0;for(let a of this.#cX)if(!g||null!==dq.intersect(a.data.rect,g)){g=a.data.rect,f=!0;break}let h=dq.normalizeRect([g[0],a[3]-g[1]+a[1],g[2],a[3]-g[3]+a[1]]),i=f?g[2]-g[0]+5:0,j=h[0]+i,k=h[1];this.#x=[100*(j-d)/b,100*(k-e)/c];let{style:l}=this.#aq;l.left=`${this.#x[0]}%`,l.top=`${this.#x[1]}%`}#cT(){this.#c$=!this.#c$,this.#c$?(this.#cR(),this.#aq.addEventListener("click",this.#cS),this.#aq.addEventListener("keydown",this.#cM)):(this.#cP(),this.#aq.removeEventListener("click",this.#cS),this.#aq.removeEventListener("keydown",this.#cM))}#cR(){this.#c_||this.render(),this.isVisible?this.#c$&&this.#aq.classList.add("focused"):(this.#c8(),this.#aq.hidden=!1,this.#aq.style.zIndex=parseInt(this.#aq.style.zIndex)+1e3)}#cP(){this.#aq.classList.remove("focused"),!this.#c$&&this.isVisible&&(this.#aq.hidden=!0,this.#aq.style.zIndex=parseInt(this.#aq.style.zIndex)-1e3)}forceHide(){this.#c3=this.isVisible,this.#c3&&(this.#aq.hidden=!0)}maybeShow(){this.#c3&&(this.#c_||this.#cR(),this.#c3=!1,this.#aq.hidden=!1)}get isVisible(){return!1===this.#aq.hidden}}class fP extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0}),this.textContent=a.data.textContent,this.textPosition=a.data.textPosition,this.annotationEditorType=cZ.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let a=document.createElement("div");for(let b of(a.classList.add("annotationTextContent"),a.setAttribute("role","comment"),this.textContent)){let c=document.createElement("span");c.textContent=b,a.append(c)}this.container.append(a)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class fQ extends fD{#c9=null;constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let a=this.data,{width:b,height:c}=fB(a.rect),d=this.svgFactory.create(b,c,!0),e=this.#c9=this.svgFactory.createElement("svg:line");return e.setAttribute("x1",a.rect[2]-a.lineCoordinates[0]),e.setAttribute("y1",a.rect[3]-a.lineCoordinates[1]),e.setAttribute("x2",a.rect[2]-a.lineCoordinates[2]),e.setAttribute("y2",a.rect[3]-a.lineCoordinates[3]),e.setAttribute("stroke-width",a.borderStyle.width||1),e.setAttribute("stroke","transparent"),e.setAttribute("fill","transparent"),d.append(e),this.container.append(d),!a.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#c9}addHighlightArea(){this.container.classList.add("highlightArea")}}class fR extends fD{#da=null;constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let a=this.data,{width:b,height:c}=fB(a.rect),d=this.svgFactory.create(b,c,!0),e=a.borderStyle.width,f=this.#da=this.svgFactory.createElement("svg:rect");return f.setAttribute("x",e/2),f.setAttribute("y",e/2),f.setAttribute("width",b-e),f.setAttribute("height",c-e),f.setAttribute("stroke-width",e||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!a.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#da}addHighlightArea(){this.container.classList.add("highlightArea")}}class fS extends fD{#db=null;constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let a=this.data,{width:b,height:c}=fB(a.rect),d=this.svgFactory.create(b,c,!0),e=a.borderStyle.width,f=this.#db=this.svgFactory.createElement("svg:ellipse");return f.setAttribute("cx",b/2),f.setAttribute("cy",c/2),f.setAttribute("rx",b/2-e/2),f.setAttribute("ry",c/2-e/2),f.setAttribute("stroke-width",e||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!a.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#db}addHighlightArea(){this.container.classList.add("highlightArea")}}class fT extends fD{#dc=null;constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let a=this.data,{width:b,height:c}=fB(a.rect),d=this.svgFactory.create(b,c,!0),e=[];for(let b of a.vertices){let c=b.x-a.rect[0],d=a.rect[3]-b.y;e.push(c+","+d)}e=e.join(" ");let f=this.#dc=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",e),f.setAttribute("stroke-width",a.borderStyle.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!a.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#dc}addHighlightArea(){this.container.classList.add("highlightArea")}}class fU extends fT{constructor(a){super(a),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fV extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class fW extends fD{#dd=[];constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=cZ.INK}render(){this.container.classList.add(this.containerClassName);let a=this.data,{width:b,height:c}=fB(a.rect),d=this.svgFactory.create(b,c,!0);for(let b of a.inkLists){let c=[];for(let d of b){let b=d.x-a.rect[0],e=a.rect[3]-d.y;c.push(`${b},${e}`)}c=c.join(" ");let e=this.svgFactory.createElement(this.svgElementName);this.#dd.push(e),e.setAttribute("points",c),e.setAttribute("stroke-width",a.borderStyle.width||1),e.setAttribute("stroke","transparent"),e.setAttribute("fill","transparent"),!a.popupRef&&this.hasPopupData&&this._createPopup(),d.append(e)}return this.container.append(d),this.container}getElementsToTriggerPopup(){return this.#dd}addHighlightArea(){this.container.classList.add("highlightArea")}}class fX extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class fY extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fZ extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class f$ extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class f_ extends fD{constructor(a){super(a,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class f0 extends fD{#de=null;constructor(a){super(a,{isRenderable:!0});const{file:b}=this.data;this.filename=b.filename,this.content=b.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...b})}render(){let a;this.container.classList.add("fileAttachmentAnnotation");let{container:b,data:c}=this;c.hasAppearance||0===c.fillAlpha?a=document.createElement("div"):((a=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(c.name)?"paperclip":"pushpin"}.svg`,c.fillAlpha&&c.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(100*c.fillAlpha)}%);`)),a.addEventListener("dblclick",this.#df.bind(this)),this.#de=a;let{isMac:d}=dn.platform;return b.addEventListener("keydown",a=>{"Enter"===a.key&&(d?a.metaKey:a.ctrlKey)&&this.#df()}),!c.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),b.append(a),b}getElementsToTriggerPopup(){return this.#de}addHighlightArea(){this.container.classList.add("highlightArea")}#df(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class f1{#dg=null;#dh=null;#di=new Map;constructor({div:a,accessibilityManager:b,annotationCanvasMap:c,annotationEditorUIManager:d,page:e,viewport:f}){this.div=a,this.#dg=b,this.#dh=c,this.page=e,this.viewport=f,this.zIndex=0,this._annotationEditorUIManager=d}#dj(a,b){let c=a.firstChild||a;c.id=`${du}${b}`,this.div.append(a),this.#dg?.moveElementInDOM(this.div,a,c,!1)}async render(a){let{annotations:b}=a,c=this.div;dV(c,this.viewport);let d=new Map,e={data:null,layer:c,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||"",renderForms:!1!==a.renderForms,svgFactory:new dF,annotationStorage:a.annotationStorage||new d8,enableScripting:!0===a.enableScripting,hasJSActions:a.hasJSActions,fieldObjects:a.fieldObjects,parent:this,elements:null};for(let a of b){if(a.noHTML)continue;let b=16===a.annotationType;if(b){let b=d.get(a.id);if(!b)continue;e.elements=b}else{let{width:b,height:c}=fB(a.rect);if(b<=0||c<=0)continue}e.data=a;let c=fC.create(e);if(!c.isRenderable)continue;if(!b&&a.popupRef){let b=d.get(a.popupRef);b?b.push(c):d.set(a.popupRef,[c])}let f=c.render();a.hidden&&(f.style.visibility="hidden"),this.#dj(f,a.id),c.annotationEditorType>0&&(this.#di.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#dk()}update({viewport:a}){let b=this.div;this.viewport=a,dV(b,{rotation:a.rotation}),this.#dk(),b.hidden=!1}#dk(){if(!this.#dh)return;let a=this.div;for(let[b,c]of this.#dh){let d=a.querySelector(`[data-annotation-id="${b}"]`);if(!d)continue;c.className="annotationContent";let{firstChild:e}=d;e?"CANVAS"===e.nodeName?e.replaceWith(c):e.classList.contains("annotationContent")?e.after(c):e.before(c):d.append(c)}this.#dh.clear()}getEditableAnnotations(){return Array.from(this.#di.values())}getEditableAnnotation(a){return this.#di.get(a)}}let f2=/\r\n?|\n/g;class f3 extends d4{#dl=this.editorDivBlur.bind(this);#dm=this.editorDivFocus.bind(this);#dn=this.editorDivInput.bind(this);#dp=this.editorDivKeydown.bind(this);#dq=this.editorDivPaste.bind(this);#cU;#dr="";#ds=`${this.id}-editor`;#c5;#dt=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let a=f3.prototype,b=a=>a.isEmpty(),c=d2.TRANSLATE_SMALL,d=d2.TRANSLATE_BIG;return db(this,"_keyboardManager",new d0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-c,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-d,0],checker:b}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[c,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[d,0],checker:b}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-c],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-d],checker:b}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,c],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,d],checker:b}]]))}static _type="freetext";static _editorType=cZ.FREETEXT;constructor(a){super({...a,name:"freeTextEditor"}),this.#cU=a.color||f3._defaultColor||d4._defaultLineColor,this.#c5=a.fontSize||f3._defaultFontSize}static initialize(a,b){d4.initialize(a,b,{strings:["pdfjs-free-text-default-content"]});let c=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(c.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,b){switch(a){case c$.FREETEXT_SIZE:f3._defaultFontSize=b;break;case c$.FREETEXT_COLOR:f3._defaultColor=b}}updateParams(a,b){switch(a){case c$.FREETEXT_SIZE:this.#du(b);break;case c$.FREETEXT_COLOR:this.#dv(b)}}static get defaultPropertiesToUpdate(){return[[c$.FREETEXT_SIZE,f3._defaultFontSize],[c$.FREETEXT_COLOR,f3._defaultColor||d4._defaultLineColor]]}get propertiesToUpdate(){return[[c$.FREETEXT_SIZE,this.#c5],[c$.FREETEXT_COLOR,this.#cU]]}#du(a){let b=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#c5)*this.parentScale),this.#c5=a,this.#dw()},c=this.#c5;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#dv(a){let b=a=>{this.#cU=this.editorDiv.style.color=a},c=this.#cU;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,b){this._uiManager.translateSelectedEditors(a,b,!0)}getInitialTranslation(){let a=this.parentScale;return[-f3._internalPadding*a,-(f3._internalPadding+this.#c5)*a]}rebuild(){!this.parent||(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(cZ.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#dp),this.editorDiv.addEventListener("focus",this.#dm),this.editorDiv.addEventListener("blur",this.#dl),this.editorDiv.addEventListener("input",this.#dn),this.editorDiv.addEventListener("paste",this.#dq))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#ds),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#dp),this.editorDiv.removeEventListener("focus",this.#dm),this.editorDiv.removeEventListener("blur",this.#dl),this.editorDiv.removeEventListener("input",this.#dn),this.editorDiv.removeEventListener("paste",this.#dq),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#dx(){let a=[];for(let b of(this.editorDiv.normalize(),this.editorDiv.childNodes))a.push(f3.#dy(b));return a.join("\n")}#dw(){let a,[b,c]=this.parentDimensions;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{let{currentLayer:b,div:c}=this,d=c.style.display,e=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",b.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",e)}this.rotation%180==this.parentRotation%180?(this.width=a.width/b,this.height=a.height/c):(this.width=a.height/b,this.height=a.width/c),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let a=this.#dr,b=this.#dr=this.#dx().trimEnd();if(a===b)return;let c=a=>{(this.#dr=a,a)?(this.#dz(),this._uiManager.rebuild(this),this.#dw()):this.remove()};this.addCommands({cmd:()=>{c(b)},undo:()=>{c(a)},mustExec:!1}),this.#dw()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&"Enter"===a.key&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){f3._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let a,b;if(this.div)return this.div;this.width&&(a=this.x,b=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#ds),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),d4._l10nPromise.get("pdfjs-free-text-default-content").then(a=>this.editorDiv?.setAttribute("default-content",a)),this.editorDiv.contentEditable=!0;let{style:c}=this.editorDiv;if(c.fontSize=`calc(${this.#c5}px * var(--scale-factor))`,c.color=this.#cU,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),dY(this,this.div,["dblclick","keydown"]),this.width){let[c,d]=this.parentDimensions;if(this.annotationElementId){let e,f,{position:g}=this.#dt,[h,i]=this.getInitialTranslation();[h,i]=this.pageTranslationToScreen(h,i);let[j,k]=this.pageDimensions,[l,m]=this.pageTranslation;switch(this.rotation){case 0:e=a+(g[0]-l)/j,f=b+this.height-(g[1]-m)/k;break;case 90:e=a+(g[0]-l)/j,f=b-(g[1]-m)/k,[h,i]=[i,-h];break;case 180:e=a-this.width+(g[0]-l)/j,f=b-(g[1]-m)/k,[h,i]=[-h,-i];break;case 270:e=a+(g[0]-l-this.height*k)/j,f=b+(g[1]-m-this.width*j)/k,[h,i]=[-i,h]}this.setAt(e*c,f*d,h,i)}else this.setAt(a*c,b*d,this.width*c,this.height*d);this.#dz(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static #dy(a){return(a.nodeType===Node.TEXT_NODE?a.nodeValue:a.innerText).replaceAll(f2,"")}editorDivPaste(a){let b=a.clipboardData||window.clipboardData,{types:c}=b;if(1===c.length&&"text/plain"===c[0])return;a.preventDefault();let d=f3.#dA(b.getData("text")||"").replaceAll(f2,"\n");if(!d)return;let e=window.getSelection();if(!e.rangeCount)return;this.editorDiv.normalize(),e.deleteFromDocument();let f=e.getRangeAt(0);if(!d.includes("\n")){f.insertNode(document.createTextNode(d)),this.editorDiv.normalize(),e.collapseToStart();return}let{startContainer:g,startOffset:h}=f,i=[],j=[];if(g.nodeType===Node.TEXT_NODE){let a=g.parentElement;if(j.push(g.nodeValue.slice(h).replaceAll(f2,"")),a!==this.editorDiv){let b=i;for(let c of this.editorDiv.childNodes){if(c===a){b=j;continue}b.push(f3.#dy(c))}}i.push(g.nodeValue.slice(0,h).replaceAll(f2,""))}else if(g===this.editorDiv){let a=i,b=0;for(let c of this.editorDiv.childNodes)b++===h&&(a=j),a.push(f3.#dy(c))}this.#dr=`${i.join("\n")}${d}${j.join("\n")}`,this.#dz();let k=new Range,l=i.reduce((a,b)=>a+b.length,0);for(let{firstChild:a}of this.editorDiv.childNodes)if(a.nodeType===Node.TEXT_NODE){let b=a.nodeValue.length;if(l<=b){k.setStart(a,l),k.setEnd(a,l);break}l-=b}e.removeAllRanges(),e.addRange(k)}#dz(){if(this.editorDiv.replaceChildren(),this.#dr)for(let a of this.#dr.split("\n")){let b=document.createElement("div");b.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(b)}}#dB(){return this.#dr.replaceAll(""," ")}static #dA(a){return a.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static deserialize(a,b,c){let d=null;if(a instanceof fP){let{data:{defaultAppearanceData:{fontSize:b,fontColor:c},rect:e,rotation:f,id:g},textContent:h,textPosition:i,parent:{page:{pageNumber:j}}}=a;if(!h||0===h.length)return null;d=a={annotationType:cZ.FREETEXT,color:Array.from(c),fontSize:b,value:h.join("\n"),position:i,pageIndex:j-1,rect:e.slice(0),rotation:f,id:g,deleted:!1}}let e=super.deserialize(a,b,c);return e.#c5=a.fontSize,e.#cU=dq.makeHexColor(...a.color),e.#dr=f3.#dA(a.value),e.annotationElementId=a.id||null,e.#dt=d,e}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let b=f3._internalPadding*this.parentScale,c=this.getRect(b,b),d=d4._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#cU),e={annotationType:cZ.FREETEXT,color:d,fontSize:this.#c5,value:this.#dB(),pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?e:this.annotationElementId&&!this.#dC(e)?null:(e.id=this.annotationElementId,e)}#dC(a){let{value:b,fontSize:c,color:d,pageIndex:e}=this.#dt;return this._hasBeenMoved||a.value!==b||a.fontSize!==c||a.color.some((a,b)=>a!==d[b])||a.pageIndex!==e}renderAnnotationElement(a){let b=super.renderAnnotationElement(a);if(this.deleted)return b;let{style:c}=b;for(let a of(c.fontSize=`calc(${this.#c5}px * var(--scale-factor))`,c.color=this.#cU,b.replaceChildren(),this.#dr.split("\n"))){let c=document.createElement("div");c.append(a?document.createTextNode(a):document.createElement("br")),b.append(c)}let d=f3._internalPadding*this.parentScale;return a.updateEdited({rect:this.getRect(d,d),popupContent:this.#dr}),b}resetAnnotationElement(a){super.resetAnnotationElement(a),a.resetEdited()}}class f4{#dD;#dE=[];#dF=[];constructor(a,b=0,c=0,d=!0){let e=1/0,f=-1/0,g=1/0,h=-1/0;for(const{x:c,y:d,width:i,height:j}of a){const a=1e-4*Math.floor((c-b)/1e-4),k=1e-4*Math.ceil((c+i+b)/1e-4),l=1e-4*Math.floor((d-b)/1e-4),m=1e-4*Math.ceil((d+j+b)/1e-4),n=[a,l,m,!0],o=[k,l,m,!1];this.#dE.push(n,o),e=Math.min(e,a),f=Math.max(f,k),g=Math.min(g,l),h=Math.max(h,m)}const i=f-e+2*c,j=h-g+2*c,k=e-c,l=g-c,m=this.#dE.at(d?-1:-2),n=[m[0],m[2]];for(const a of this.#dE){const[b,c,d]=a;a[0]=(b-k)/i,a[1]=(c-l)/j,a[2]=(d-l)/j}this.#dD={x:k,y:l,width:i,height:j,lastPoint:n}}getOutlines(){this.#dE.sort((a,b)=>a[0]-b[0]||a[1]-b[1]||a[2]-b[2]);let a=[];for(let b of this.#dE)b[3]?(a.push(...this.#dG(b)),this.#dH(b)):(this.#dI(b),a.push(...this.#dG(b)));return this.#dJ(a)}#dJ(a){let b,c=[],d=new Set;for(let b of a){let[a,d,e]=b;c.push([a,d,b],[a,e,b])}c.sort((a,b)=>a[1]-b[1]||a[0]-b[0]);for(let a=0,b=c.length;a<b;a+=2){let b=c[a][2],e=c[a+1][2];b.push(e),e.push(b),d.add(b),d.add(e)}let e=[];for(;d.size>0;){let a=d.values().next().value,[c,f,g,h,i]=a;d.delete(a);let j=c,k=f;for(b=[c,g],e.push(b);;){let a;if(d.has(h))a=h;else if(d.has(i))a=i;else break;d.delete(a),[c,f,g,h,i]=a,j!==c&&(b.push(j,k,c,k===f?f:g),j=c),k=k===f?g:f}b.push(j,k)}return new f6(e,this.#dD)}#dK(a){let b=this.#dF,c=0,d=b.length-1;for(;c<=d;){let e=c+d>>1,f=b[e][0];if(f===a)return e;f<a?c=e+1:d=e-1}return d+1}#dH([,a,b]){let c=this.#dK(a);this.#dF.splice(c,0,[a,b])}#dI([,a,b]){let c=this.#dK(a);for(let d=c;d<this.#dF.length;d++){let[c,e]=this.#dF[d];if(c!==a)break;if(c===a&&e===b)return void this.#dF.splice(d,1)}for(let d=c-1;d>=0;d--){let[c,e]=this.#dF[d];if(c!==a)break;if(c===a&&e===b)return void this.#dF.splice(d,1)}}#dG(a){let[b,c,d]=a,e=[[b,c,d]],f=this.#dK(d);for(let a=0;a<f;a++){let[c,d]=this.#dF[a];for(let a=0,f=e.length;a<f;a++){let[,g,h]=e[a];if(!(d<=g)&&!(h<=c)){if(g>=c){if(h>d)e[a][1]=d;else{if(1===f)return[];e.splice(a,1),a--,f--}continue}e[a][2]=c,h>d&&e.push([b,d,h])}}}return e}}class f5{toSVGPath(){throw Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw Error("Abstract getter `box` must be implemented.")}serialize(a,b){throw Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof f8}}class f6 extends f5{#dD;#dL;constructor(a,b){super(),this.#dL=a,this.#dD=b}toSVGPath(){let a=[];for(let b of this.#dL){let[c,d]=b;a.push(`M${c} ${d}`);for(let e=2;e<b.length;e+=2){let f=b[e],g=b[e+1];f===c?(a.push(`V${g}`),d=g):g===d&&(a.push(`H${f}`),c=f)}a.push("Z")}return a.join(" ")}serialize([a,b,c,d],e){let f=[],g=c-a,h=d-b;for(let b of this.#dL){let c=Array(b.length);for(let e=0;e<b.length;e+=2)c[e]=a+b[e]*g,c[e+1]=d-b[e+1]*h;f.push(c)}return f}get box(){return this.#dD}}class f7{#dD;#dM=[];#dN;#dO;#dP=[];#dQ=new Float64Array(18);#dR;#dS;#dT;#dU;#dV;#dW;#dX=[];static #dY=8;static #dZ=2;static #d$=f7.#dY+f7.#dZ;constructor({x:a,y:b},c,d,e,f,g=0){this.#dD=c,this.#dW=e*d,this.#dO=f,this.#dQ.set([NaN,NaN,NaN,NaN,a,b],6),this.#dN=g,this.#dU=f7.#dY*d,this.#dT=f7.#d$*d,this.#dV=d,this.#dX.push(a,b)}get free(){return!0}isEmpty(){return isNaN(this.#dQ[8])}#d_(){let a=this.#dQ.subarray(4,6),b=this.#dQ.subarray(16,18),[c,d,e,f]=this.#dD;return[(this.#dR+(a[0]-b[0])/2-c)/e,(this.#dS+(a[1]-b[1])/2-d)/f,(this.#dR+(b[0]-a[0])/2-c)/e,(this.#dS+(b[1]-a[1])/2-d)/f]}add({x:a,y:b}){this.#dR=a,this.#dS=b;let[c,d,e,f]=this.#dD,[g,h,i,j]=this.#dQ.subarray(8,12),k=a-i,l=b-j,m=Math.hypot(k,l);if(m<this.#dT)return!1;let n=m-this.#dU,o=n/m,p=o*k,q=o*l,r=g,s=h;g=i,h=j,i+=p,j+=q,this.#dX?.push(a,b);let t=-q/n*this.#dW,u=p/n*this.#dW;return(this.#dQ.set(this.#dQ.subarray(2,8),0),this.#dQ.set([i+t,j+u],4),this.#dQ.set(this.#dQ.subarray(14,18),12),this.#dQ.set([i-t,j-u],16),isNaN(this.#dQ[6]))?(0===this.#dP.length&&(this.#dQ.set([g+t,h+u],2),this.#dP.push(NaN,NaN,NaN,NaN,(g+t-c)/e,(h+u-d)/f),this.#dQ.set([g-t,h-u],14),this.#dM.push(NaN,NaN,NaN,NaN,(g-t-c)/e,(h-u-d)/f)),this.#dQ.set([r,s,g,h,i,j],6),!this.isEmpty()):((this.#dQ.set([r,s,g,h,i,j],6),Math.abs(Math.atan2(s-h,r-g)-Math.atan2(q,p))<Math.PI/2)?([g,h,i,j]=this.#dQ.subarray(2,6),this.#dP.push(NaN,NaN,NaN,NaN,((g+i)/2-c)/e,((h+j)/2-d)/f),[g,h,r,s]=this.#dQ.subarray(14,18),this.#dM.push(NaN,NaN,NaN,NaN,((r+g)/2-c)/e,((s+h)/2-d)/f)):([r,s,g,h,i,j]=this.#dQ.subarray(0,6),this.#dP.push(((r+5*g)/6-c)/e,((s+5*h)/6-d)/f,((5*g+i)/6-c)/e,((5*h+j)/6-d)/f,((g+i)/2-c)/e,((h+j)/2-d)/f),[i,j,g,h,r,s]=this.#dQ.subarray(12,18),this.#dM.push(((r+5*g)/6-c)/e,((s+5*h)/6-d)/f,((5*g+i)/6-c)/e,((5*h+j)/6-d)/f,((g+i)/2-c)/e,((h+j)/2-d)/f)),!0)}toSVGPath(){if(this.isEmpty())return"";let a=this.#dP,b=this.#dM,c=this.#dQ.subarray(4,6),d=this.#dQ.subarray(16,18),[e,f,g,h]=this.#dD,[i,j,k,l]=this.#d_();if(isNaN(this.#dQ[6])&&!this.isEmpty())return`M${(this.#dQ[2]-e)/g} ${(this.#dQ[3]-f)/h} L${(this.#dQ[4]-e)/g} ${(this.#dQ[5]-f)/h} L${i} ${j} L${k} ${l} L${(this.#dQ[16]-e)/g} ${(this.#dQ[17]-f)/h} L${(this.#dQ[14]-e)/g} ${(this.#dQ[15]-f)/h} Z`;let m=[];m.push(`M${a[4]} ${a[5]}`);for(let b=6;b<a.length;b+=6)isNaN(a[b])?m.push(`L${a[b+4]} ${a[b+5]}`):m.push(`C${a[b]} ${a[b+1]} ${a[b+2]} ${a[b+3]} ${a[b+4]} ${a[b+5]}`);m.push(`L${(c[0]-e)/g} ${(c[1]-f)/h} L${i} ${j} L${k} ${l} L${(d[0]-e)/g} ${(d[1]-f)/h}`);for(let a=b.length-6;a>=6;a-=6)isNaN(b[a])?m.push(`L${b[a+4]} ${b[a+5]}`):m.push(`C${b[a]} ${b[a+1]} ${b[a+2]} ${b[a+3]} ${b[a+4]} ${b[a+5]}`);return m.push(`L${b[4]} ${b[5]} Z`),m.join(" ")}getOutlines(){let a=this.#dP,b=this.#dM,c=this.#dQ,d=c.subarray(4,6),e=c.subarray(16,18),[f,g,h,i]=this.#dD,j=new Float64Array((this.#dX?.length??0)+2);for(let a=0,b=j.length-2;a<b;a+=2)j[a]=(this.#dX[a]-f)/h,j[a+1]=(this.#dX[a+1]-g)/i;j[j.length-2]=(this.#dR-f)/h,j[j.length-1]=(this.#dS-g)/i;let[k,l,m,n]=this.#d_();if(isNaN(c[6])&&!this.isEmpty()){let a=new Float64Array(36);return a.set([NaN,NaN,NaN,NaN,(c[2]-f)/h,(c[3]-g)/i,NaN,NaN,NaN,NaN,(c[4]-f)/h,(c[5]-g)/i,NaN,NaN,NaN,NaN,k,l,NaN,NaN,NaN,NaN,m,n,NaN,NaN,NaN,NaN,(c[16]-f)/h,(c[17]-g)/i,NaN,NaN,NaN,NaN,(c[14]-f)/h,(c[15]-g)/i],0),new f8(a,j,this.#dD,this.#dV,this.#dN,this.#dO)}let o=new Float64Array(this.#dP.length+24+this.#dM.length),p=a.length;for(let b=0;b<p;b+=2){if(isNaN(a[b])){o[b]=o[b+1]=NaN;continue}o[b]=a[b],o[b+1]=a[b+1]}o.set([NaN,NaN,NaN,NaN,(d[0]-f)/h,(d[1]-g)/i,NaN,NaN,NaN,NaN,k,l,NaN,NaN,NaN,NaN,m,n,NaN,NaN,NaN,NaN,(e[0]-f)/h,(e[1]-g)/i],p),p+=24;for(let a=b.length-6;a>=6;a-=6)for(let c=0;c<6;c+=2){if(isNaN(b[a+c])){o[p]=o[p+1]=NaN,p+=2;continue}o[p]=b[a+c],o[p+1]=b[a+c+1],p+=2}return o.set([NaN,NaN,NaN,NaN,b[4],b[5]],p),new f8(o,j,this.#dD,this.#dV,this.#dN,this.#dO)}}class f8 extends f5{#dD;#d0=null;#dN;#dO;#dX;#dV;#d1;constructor(a,b,c,d,e,f){super(),this.#d1=a,this.#dX=b,this.#dD=c,this.#dV=d,this.#dN=e,this.#dO=f,this.#d2(f);const{x:g,y:h,width:i,height:j}=this.#d0;for(let b=0,c=a.length;b<c;b+=2)a[b]=(a[b]-g)/i,a[b+1]=(a[b+1]-h)/j;for(let a=0,c=b.length;a<c;a+=2)b[a]=(b[a]-g)/i,b[a+1]=(b[a+1]-h)/j}toSVGPath(){let a=[`M${this.#d1[4]} ${this.#d1[5]}`];for(let b=6,c=this.#d1.length;b<c;b+=6){if(isNaN(this.#d1[b])){a.push(`L${this.#d1[b+4]} ${this.#d1[b+5]}`);continue}a.push(`C${this.#d1[b]} ${this.#d1[b+1]} ${this.#d1[b+2]} ${this.#d1[b+3]} ${this.#d1[b+4]} ${this.#d1[b+5]}`)}return a.push("Z"),a.join(" ")}serialize([a,b,c,d],e){let f,g,h=c-a,i=d-b;switch(e){case 0:f=this.#d3(this.#d1,a,d,h,-i),g=this.#d3(this.#dX,a,d,h,-i);break;case 90:f=this.#d4(this.#d1,a,b,h,i),g=this.#d4(this.#dX,a,b,h,i);break;case 180:f=this.#d3(this.#d1,c,b,-h,i),g=this.#d3(this.#dX,c,b,-h,i);break;case 270:f=this.#d4(this.#d1,c,d,-h,-i),g=this.#d4(this.#dX,c,d,-h,-i)}return{outline:Array.from(f),points:[Array.from(g)]}}#d3(a,b,c,d,e){let f=new Float64Array(a.length);for(let g=0,h=a.length;g<h;g+=2)f[g]=b+a[g]*d,f[g+1]=c+a[g+1]*e;return f}#d4(a,b,c,d,e){let f=new Float64Array(a.length);for(let g=0,h=a.length;g<h;g+=2)f[g]=b+a[g+1]*d,f[g+1]=c+a[g]*e;return f}#d2(a){let b=this.#d1,c=b[4],d=b[5],e=c,f=d,g=c,h=d,i=c,j=d,k=a?Math.max:Math.min;for(let a=6,l=b.length;a<l;a+=6){if(isNaN(b[a]))e=Math.min(e,b[a+4]),f=Math.min(f,b[a+5]),g=Math.max(g,b[a+4]),h=Math.max(h,b[a+5]),j<b[a+5]?(i=b[a+4],j=b[a+5]):j===b[a+5]&&(i=k(i,b[a+4]));else{let l=dq.bezierBoundingBox(c,d,...b.slice(a,a+6));e=Math.min(e,l[0]),f=Math.min(f,l[1]),g=Math.max(g,l[2]),h=Math.max(h,l[3]),j<l[3]?(i=l[2],j=l[3]):j===l[3]&&(i=k(i,l[2]))}c=b[a+4],d=b[a+5]}let l=e-this.#dN,m=f-this.#dN,n=g-e+2*this.#dN,o=h-f+2*this.#dN;this.#d0={x:l,y:m,width:n,height:o,lastPoint:[i,j]}}get box(){return this.#d0}getNewOutline(a,b){let{x:c,y:d,width:e,height:f}=this.#d0,[g,h,i,j]=this.#dD,k=e*i,l=f*j,m=c*i+g,n=d*j+h,o=new f7({x:this.#dX[0]*k+m,y:this.#dX[1]*l+n},this.#dD,this.#dV,a,this.#dO,b??this.#dN);for(let a=2;a<this.#dX.length;a+=2)o.add({x:this.#dX[a]*k+m,y:this.#dX[a+1]*l+n});return o.getOutlines()}}class f9{#cM=this.#cN.bind(this);#d5=this.#g.bind(this);#d6=null;#d7=null;#d8;#d9=null;#ea=!1;#eb=!1;#e=null;#ec;#m=null;#ed;static get _keyboardManager(){return db(this,"_keyboardManager",new d0([[["Escape","mac+Escape"],f9.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],f9.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],f9.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],f9.prototype._moveToPrevious],[["Home","mac+Home"],f9.prototype._moveToBeginning],[["End","mac+End"],f9.prototype._moveToEnd]]))}constructor({editor:a=null,uiManager:b=null}){a?(this.#eb=!1,this.#ed=c$.HIGHLIGHT_COLOR,this.#e=a):(this.#eb=!0,this.#ed=c$.HIGHLIGHT_DEFAULT_COLOR),this.#m=a?._uiManager||b,this.#ec=this.#m._eventBus,this.#d8=a?.color||this.#m?.highlightColors.values().next().value||"#FFFF98"}renderButton(){let a=this.#d6=document.createElement("button");a.className="colorPicker",a.tabIndex="0",a.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),a.setAttribute("aria-haspopup",!0),a.addEventListener("click",this.#ee.bind(this)),a.addEventListener("keydown",this.#cM);let b=this.#d7=document.createElement("span");return b.className="swatch",b.setAttribute("aria-hidden",!0),b.style.backgroundColor=this.#d8,a.append(b),a}renderMainDropdown(){let a=this.#d9=this.#ef();return a.setAttribute("aria-orientation","horizontal"),a.setAttribute("aria-labelledby","highlightColorPickerLabel"),a}#ef(){let a=document.createElement("div");for(let[b,c]of(a.addEventListener("contextmenu",dO),a.className="dropdown",a.role="listbox",a.setAttribute("aria-multiselectable",!1),a.setAttribute("aria-orientation","vertical"),a.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#m.highlightColors)){let d=document.createElement("button");d.tabIndex="0",d.role="option",d.setAttribute("data-color",c),d.title=b,d.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${b}`);let e=document.createElement("span");d.append(e),e.className="swatch",e.style.backgroundColor=c,d.setAttribute("aria-selected",c===this.#d8),d.addEventListener("click",this.#eg.bind(this,c)),a.append(d)}return a.addEventListener("keydown",this.#cM),a}#eg(a,b){b.stopPropagation(),this.#ec.dispatch("switchannotationeditorparams",{source:this,type:this.#ed,value:a})}_colorSelectFromKeyboard(a){if(a.target===this.#d6)return void this.#ee(a);let b=a.target.getAttribute("data-color");b&&this.#eg(b,a)}_moveToNext(a){this.#eh?a.target===this.#d6?this.#d9.firstChild?.focus():a.target.nextSibling?.focus():this.#ee(a)}_moveToPrevious(a){if(a.target===this.#d9?.firstChild||a.target===this.#d6){this.#eh&&this._hideDropdownFromKeyboard();return}this.#eh||this.#ee(a),a.target.previousSibling?.focus()}_moveToBeginning(a){this.#eh?this.#d9.firstChild?.focus():this.#ee(a)}_moveToEnd(a){this.#eh?this.#d9.lastChild?.focus():this.#ee(a)}#cN(a){f9._keyboardManager.exec(this,a)}#ee(a){if(this.#eh)return void this.hideDropdown();if(this.#ea=0===a.detail,window.addEventListener("pointerdown",this.#d5),this.#d9)return void this.#d9.classList.remove("hidden");let b=this.#d9=this.#ef();this.#d6.append(b)}#g(a){this.#d9?.contains(a.target)||this.hideDropdown()}hideDropdown(){this.#d9?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#d5)}get #eh(){return this.#d9&&!this.#d9.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#eb){if(!this.#eh)return void this.#e?.unselect();this.hideDropdown(),this.#d6.focus({preventScroll:!0,focusVisible:this.#ea})}}updateColor(a){if(this.#d7&&(this.#d7.style.backgroundColor=a),!this.#d9)return;let b=this.#m.highlightColors.values();for(let c of this.#d9.children)c.setAttribute("aria-selected",b.next().value===a)}destroy(){this.#d6?.remove(),this.#d6=null,this.#d7=null,this.#d9?.remove(),this.#d9=null}}class ga extends d4{#ei=null;#ej=0;#ek;#el=null;#d=null;#em=null;#en=null;#eo=0;#ep=null;#eq=null;#q=null;#er=!1;#af=this.#es.bind(this);#et=null;#eu;#ev=null;#ew="";#dW;#ex="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=cZ.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let a=ga.prototype;return db(this,"_keyboardManager",new d0([[["ArrowLeft","mac+ArrowLeft"],a._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],a._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],a._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],a._moveCaret,{args:[3]}]]))}constructor(a){super({...a,name:"highlightEditor"}),this.color=a.color||ga._defaultColor,this.#dW=a.thickness||ga._defaultThickness,this.#eu=a.opacity||ga._defaultOpacity,this.#ek=a.boxes||null,this.#ex=a.methodOfCreation||"",this.#ew=a.text||"",this._isDraggable=!1,a.highlightId>-1?(this.#er=!0,this.#ey(a),this.#ez()):(this.#ei=a.anchorNode,this.#ej=a.anchorOffset,this.#en=a.focusNode,this.#eo=a.focusOffset,this.#eA(),this.#ez(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#er?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#dW,methodOfCreation:this.#ex}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(a){return{numberOfColors:a.get("color").size}}#eA(){let a=new f4(this.#ek,.001);this.#eq=a.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#eq.box;let b=new f4(this.#ek,.0025,.001,"ltr"===this._uiManager.direction);this.#em=b.getOutlines();let{lastPoint:c}=this.#em.box;this.#et=[(c[0]-this.x)/this.width,(c[1]-this.y)/this.height]}#ey({highlightOutlines:a,highlightId:b,clipPathId:c}){if(this.#eq=a,this.#em=a.getNewOutline(this.#dW/2+1.5,.0025),b>=0)this.#q=b,this.#el=c,this.parent.drawLayer.finalizeLine(b,a),this.#ev=this.parent.drawLayer.highlightOutline(this.#em);else if(this.parent){let b=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#q,a),this.parent.drawLayer.updateBox(this.#q,ga.#eB(this.#eq.box,(b-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#ev,this.#em),this.parent.drawLayer.updateBox(this.#ev,ga.#eB(this.#em.box,b))}let{x:d,y:e,width:f,height:g}=a.box;switch(this.rotation){case 0:this.x=d,this.y=e,this.width=f,this.height=g;break;case 90:{let[a,b]=this.parentDimensions;this.x=e,this.y=1-d,this.width=f*b/a,this.height=g*a/b;break}case 180:this.x=1-d,this.y=1-e,this.width=f,this.height=g;break;case 270:{let[a,b]=this.parentDimensions;this.x=1-e,this.y=d,this.width=f*b/a,this.height=g*a/b}}let{lastPoint:h}=this.#em.box;this.#et=[(h[0]-d)/f,(h[1]-e)/g]}static initialize(a,b){d4.initialize(a,b),ga._defaultColor||=b.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(a,b){switch(a){case c$.HIGHLIGHT_DEFAULT_COLOR:ga._defaultColor=b;break;case c$.HIGHLIGHT_THICKNESS:ga._defaultThickness=b}}translateInPage(a,b){}get toolbarPosition(){return this.#et}updateParams(a,b){switch(a){case c$.HIGHLIGHT_COLOR:this.#dv(b);break;case c$.HIGHLIGHT_THICKNESS:this.#eC(b)}}static get defaultPropertiesToUpdate(){return[[c$.HIGHLIGHT_DEFAULT_COLOR,ga._defaultColor],[c$.HIGHLIGHT_THICKNESS,ga._defaultThickness]]}get propertiesToUpdate(){return[[c$.HIGHLIGHT_COLOR,this.color||ga._defaultColor],[c$.HIGHLIGHT_THICKNESS,this.#dW||ga._defaultThickness],[c$.HIGHLIGHT_FREE,this.#er]]}#dv(a){let b=a=>{this.color=a,this.parent?.drawLayer.changeColor(this.#q,a),this.#d?.updateColor(a)},c=this.color;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(a)},!0)}#eC(a){let b=this.#dW,c=a=>{this.#dW=a,this.#eD(a)};this.addCommands({cmd:c.bind(this,a),undo:c.bind(this,b),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:a},!0)}async addEditToolbar(){let a=await super.addEditToolbar();return a?(this._uiManager.highlightColors&&(this.#d=new f9({editor:this}),a.addColorPicker(this.#d)),a):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#eE())}getBaseTranslation(){return[0,0]}getRect(a,b){return super.getRect(a,b,this.#eE())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#eF(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){!this.parent||(super.rebuild(),null!==this.div&&(this.#ez(),this.isAttachedToDOM||this.parent.add(this)))}setParent(a){let b=!1;this.parent&&!a?this.#eF():a&&(this.#ez(a),b=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(a),this.show(this._isVisible),b&&this.select()}#eD(a){if(!this.#er)return;this.#ey({highlightOutlines:this.#eq.getNewOutline(a/2)}),this.fixAndSetPosition();let[b,c]=this.parentDimensions;this.setDims(this.width*b,this.height*c)}#eF(){null!==this.#q&&this.parent&&(this.parent.drawLayer.remove(this.#q),this.#q=null,this.parent.drawLayer.remove(this.#ev),this.#ev=null)}#ez(a=this.parent){null===this.#q&&({id:this.#q,clipPathId:this.#el}=a.drawLayer.highlight(this.#eq,this.color,this.#eu),this.#ev=a.drawLayer.highlightOutline(this.#em),this.#ep&&(this.#ep.style.clipPath=this.#el))}static #eB({x:a,y:b,width:c,height:d},e){switch(e){case 90:return{x:1-b-d,y:a,width:d,height:c};case 180:return{x:1-a-c,y:1-b-d,width:c,height:d};case 270:return{x:b,y:1-a-c,width:d,height:c}}return{x:a,y:b,width:c,height:d}}rotate(a){let b,{drawLayer:c}=this.parent;this.#er?(a=(a-this.rotation+360)%360,b=ga.#eB(this.#eq.box,a)):b=ga.#eB(this,a),c.rotate(this.#q,a),c.rotate(this.#ev,a),c.updateBox(this.#q,b),c.updateBox(this.#ev,ga.#eB(this.#em.box,a))}render(){if(this.div)return this.div;let a=super.render();this.#ew&&(a.setAttribute("aria-label",this.#ew),a.setAttribute("role","mark")),this.#er?a.classList.add("free"):this.div.addEventListener("keydown",this.#af);let b=this.#ep=document.createElement("div");a.append(b),b.setAttribute("aria-hidden","true"),b.className="internal",b.style.clipPath=this.#el;let[c,d]=this.parentDimensions;return this.setDims(this.width*c,this.height*d),dY(this,this.#ep,["pointerover","pointerleave"]),this.enableEditing(),a}pointerover(){this.parent.drawLayer.addClass(this.#ev,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#ev,"hovered")}#es(a){ga._keyboardManager.exec(this,a)}_moveCaret(a){switch(this.parent.unselect(this),a){case 0:case 2:this.#eG(!0);break;case 1:case 3:this.#eG(!1)}}#eG(a){if(!this.#ei)return;let b=window.getSelection();a?b.setPosition(this.#ei,this.#ej):b.setPosition(this.#en,this.#eo)}select(){super.select(),this.#ev&&(this.parent?.drawLayer.removeClass(this.#ev,"hovered"),this.parent?.drawLayer.addClass(this.#ev,"selected"))}unselect(){super.unselect(),this.#ev&&(this.parent?.drawLayer.removeClass(this.#ev,"selected"),this.#er||this.#eG(!1))}get _mustFixPosition(){return!this.#er}show(a=this._isVisible){super.show(a),this.parent&&(this.parent.drawLayer.show(this.#q,a),this.parent.drawLayer.show(this.#ev,a))}#eE(){return this.#er?this.rotation:0}#eH(){if(this.#er)return null;let[a,b]=this.pageDimensions,c=this.#ek,d=Array(8*c.length),e=0;for(let{x:f,y:g,width:h,height:i}of c){let c=f*a,j=(1-g-i)*b;d[e]=d[e+4]=c,d[e+1]=d[e+3]=j,d[e+2]=d[e+6]=c+h*a,d[e+5]=d[e+7]=j+i*b,e+=8}return d}#eI(a){return this.#eq.serialize(a,this.#eE())}static startHighlighting(a,b,{target:c,x:d,y:e}){let{x:f,y:g,width:h,height:i}=c.getBoundingClientRect(),j=b=>{this.#eJ(a,b)},k={capture:!0,passive:!1},l=a=>{a.preventDefault(),a.stopPropagation()},m=b=>{c.removeEventListener("pointermove",j),window.removeEventListener("blur",m),window.removeEventListener("pointerup",m),window.removeEventListener("pointerdown",l,k),window.removeEventListener("contextmenu",dO),this.#eK(a,b)};window.addEventListener("blur",m),window.addEventListener("pointerup",m),window.addEventListener("pointerdown",l,k),window.addEventListener("contextmenu",dO),c.addEventListener("pointermove",j),this._freeHighlight=new f7({x:d,y:e},[f,g,h,i],a.scale,this._defaultThickness/2,b,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=a.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static #eJ(a,b){this._freeHighlight.add(b)&&a.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static #eK(a,b){this._freeHighlight.isEmpty()?a.drawLayer.removeFreeHighlight(this._freeHighlightId):a.createAndAddNewEditor(b,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(a,b,c){let d=super.deserialize(a,b,c),{rect:[e,f,g,h],color:i,quadPoints:j}=a;d.color=dq.makeHexColor(...i),d.#eu=a.opacity;let[k,l]=d.pageDimensions;d.width=(g-e)/k,d.height=(h-f)/l;let m=d.#ek=[];for(let a=0;a<j.length;a+=8)m.push({x:(j[4]-g)/k,y:(h-(1-j[a+5]))/l,width:(j[a+2]-j[a])/k,height:(j[a+5]-j[a+1])/l});return d.#eA(),d}serialize(a=!1){if(this.isEmpty()||a)return null;let b=this.getRect(0,0),c=d4._colorManager.convert(this.color);return{annotationType:cZ.HIGHLIGHT,color:c,opacity:this.#eu,thickness:this.#dW,quadPoints:this.#eH(),outlines:this.#eI(b),pageIndex:this.pageIndex,rect:b,rotation:this.#eE(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class gb extends d4{#eL=0;#eM=0;#eN=this.canvasPointermove.bind(this);#eO=this.canvasPointerleave.bind(this);#eP=this.canvasPointerup.bind(this);#eQ=this.canvasPointerdown.bind(this);#eR=null;#eS=new Path2D;#eT=!1;#eU=!1;#eV=!1;#eW=null;#eX=0;#eY=0;#eZ=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=cZ.INK;constructor(a){super({...a,name:"inkEditor"}),this.color=a.color||null,this.thickness=a.thickness||null,this.opacity=a.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(a,b){d4.initialize(a,b)}static updateDefaultParams(a,b){switch(a){case c$.INK_THICKNESS:gb._defaultThickness=b;break;case c$.INK_COLOR:gb._defaultColor=b;break;case c$.INK_OPACITY:gb._defaultOpacity=b/100}}updateParams(a,b){switch(a){case c$.INK_THICKNESS:this.#eC(b);break;case c$.INK_COLOR:this.#dv(b);break;case c$.INK_OPACITY:this.#e$(b)}}static get defaultPropertiesToUpdate(){return[[c$.INK_THICKNESS,gb._defaultThickness],[c$.INK_COLOR,gb._defaultColor||d4._defaultLineColor],[c$.INK_OPACITY,Math.round(100*gb._defaultOpacity)]]}get propertiesToUpdate(){return[[c$.INK_THICKNESS,this.thickness||gb._defaultThickness],[c$.INK_COLOR,this.color||gb._defaultColor||d4._defaultLineColor],[c$.INK_OPACITY,Math.round(100*(this.opacity??gb._defaultOpacity))]]}#eC(a){let b=a=>{this.thickness=a,this.#e_()},c=this.thickness;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#dv(a){let b=a=>{this.color=a,this.#e0()},c=this.color;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#e$(a){let b=a=>{this.opacity=a,this.#e0()};a/=100;let c=this.opacity;this.addCommands({cmd:b.bind(this,a),undo:b.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c$.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#e1(),this.#e2()),this.isAttachedToDOM||(this.parent.add(this),this.#e3()),this.#e_()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#eR&&(clearTimeout(this.#eR),this.#eR=null),this.#eW.disconnect(),this.#eW=null,super.remove())}setParent(a){!this.parent&&a?this._uiManager.removeShouldRescale(this):this.parent&&null===a&&this._uiManager.addShouldRescale(this),super.setParent(a)}onScaleChanging(){let[a,b]=this.parentDimensions,c=this.width*a,d=this.height*b;this.setDimensions(c,d)}enableEditMode(){this.#eT||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#eQ))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#eQ))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#e4(){let{parentRotation:a,parentDimensions:[b,c]}=this;switch(a){case 90:return[0,c,c,b];case 180:return[b,c,b,c];case 270:return[b,0,c,b];default:return[0,0,b,c]}}#e5(){let{ctx:a,color:b,opacity:c,thickness:d,parentScale:e,scaleFactor:f}=this;a.lineWidth=d*e/f,a.lineCap="round",a.lineJoin="round",a.miterLimit=10,a.strokeStyle=`${b}${Math.round(Math.min(255,Math.max(1,255*c))).toString(16).padStart(2,"0")}`}#e6(a,b){this.canvas.addEventListener("contextmenu",dO),this.canvas.addEventListener("pointerleave",this.#eO),this.canvas.addEventListener("pointermove",this.#eN),this.canvas.addEventListener("pointerup",this.#eP),this.canvas.removeEventListener("pointerdown",this.#eQ),this.isEditing=!0,this.#eV||(this.#eV=!0,this.#e3(),this.thickness||=gb._defaultThickness,this.color||=gb._defaultColor||d4._defaultLineColor,this.opacity??=gb._defaultOpacity),this.currentPath.push([a,b]),this.#eU=!1,this.#e5(),this.#eZ=()=>{this.#e7(),this.#eZ&&window.requestAnimationFrame(this.#eZ)},window.requestAnimationFrame(this.#eZ)}#e8(a,b){let[c,d]=this.currentPath.at(-1);if(this.currentPath.length>1&&a===c&&b===d)return;let e=this.currentPath,f=this.#eS;if(e.push([a,b]),this.#eU=!0,e.length<=2){f.moveTo(...e[0]),f.lineTo(a,b);return}3===e.length&&(this.#eS=f=new Path2D,f.moveTo(...e[0])),this.#e9(f,...e.at(-3),...e.at(-2),a,b)}#fa(){if(0===this.currentPath.length)return;let a=this.currentPath.at(-1);this.#eS.lineTo(...a)}#fb(a,b){let c;if(this.#eZ=null,a=Math.min(Math.max(a,0),this.canvas.width),b=Math.min(Math.max(b,0),this.canvas.height),this.#e8(a,b),this.#fa(),1!==this.currentPath.length)c=this.#fc();else{let d=[a,b];c=[[d,d.slice(),d.slice(),d]]}let d=this.#eS,e=this.currentPath;this.currentPath=[],this.#eS=new Path2D;let f=()=>{this.allRawPaths.push(e),this.paths.push(c),this.bezierPath2D.push(d),this._uiManager.rebuild(this)},g=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#e1(),this.#e2()),this.#e_())};this.addCommands({cmd:f,undo:g,mustExec:!0})}#e7(){if(!this.#eU)return;this.#eU=!1,this.thickness,this.parentScale;let a=this.currentPath.slice(-3);a.map(a=>a[0]),a.map(a=>a[1]);let{ctx:b}=this;for(let a of(b.save(),b.clearRect(0,0,this.canvas.width,this.canvas.height),this.bezierPath2D))b.stroke(a);b.stroke(this.#eS),b.restore()}#e9(a,b,c,d,e,f,g){let h=(b+d)/2,i=(c+e)/2,j=(d+f)/2,k=(e+g)/2;a.bezierCurveTo(h+2*(d-h)/3,i+2*(e-i)/3,j+2*(d-j)/3,k+2*(e-k)/3,j,k)}#fc(){let a,b=this.currentPath;if(b.length<=2)return[[b[0],b[0],b.at(-1),b.at(-1)]];let c=[],[d,e]=b[0];for(a=1;a<b.length-2;a++){let[f,g]=b[a],[h,i]=b[a+1],j=(f+h)/2,k=(g+i)/2,l=[d+2*(f-d)/3,e+2*(g-e)/3],m=[j+2*(f-j)/3,k+2*(g-k)/3];c.push([[d,e],l,m,[j,k]]),[d,e]=[j,k]}let[f,g]=b[a],[h,i]=b[a+1],j=[d+2*(f-d)/3,e+2*(g-e)/3];return c.push([[d,e],j,[h+2*(f-h)/3,i+2*(g-i)/3],[h,i]]),c}#e0(){if(this.isEmpty())return void this.#fd();this.#e5();let{canvas:a,ctx:b}=this;for(let c of(b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,a.width,a.height),this.#fd(),this.bezierPath2D))b.stroke(c)}commit(){this.#eT||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#eT=!0,this.div.classList.add("disabled"),this.#e_(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),this.enableEditMode())}canvasPointerdown(a){0===a.button&&this.isInEditMode()&&!this.#eT&&(this.setInForeground(),a.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#e6(a.offsetX,a.offsetY))}canvasPointermove(a){a.preventDefault(),this.#e8(a.offsetX,a.offsetY)}canvasPointerup(a){a.preventDefault(),this.#fe(a)}canvasPointerleave(a){this.#fe(a)}#fe(a){this.canvas.removeEventListener("pointerleave",this.#eO),this.canvas.removeEventListener("pointermove",this.#eN),this.canvas.removeEventListener("pointerup",this.#eP),this.canvas.addEventListener("pointerdown",this.#eQ),this.#eR&&clearTimeout(this.#eR),this.#eR=setTimeout(()=>{this.#eR=null,this.canvas.removeEventListener("contextmenu",dO)},10),this.#fb(a.offsetX,a.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#e1(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#e2(){this.#eW=new ResizeObserver(a=>{let b=a[0].contentRect;b.width&&b.height&&this.setDimensions(b.width,b.height)}),this.#eW.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#eT}render(){let a,b;if(this.div)return this.div;this.width&&(a=this.x,b=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[c,d,e,f]=this.#e4();if(this.setAt(c,d,0,0),this.setDims(e,f),this.#e1(),this.width){let[c,d]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*d),this.setAt(a*c,b*d,this.width*c,this.height*d),this.#eV=!0,this.#e3(),this.setDims(this.width*c,this.height*d),this.#e0(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#e2(),this.div}#e3(){if(!this.#eV)return;let[a,b]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*a),this.canvas.height=Math.ceil(this.height*b),this.#fd()}setDimensions(a,b){let c=Math.round(a),d=Math.round(b);if(this.#eX===c&&this.#eY===d)return;this.#eX=c,this.#eY=d,this.canvas.style.visibility="hidden";let[e,f]=this.parentDimensions;this.width=a/e,this.height=b/f,this.fixAndSetPosition(),this.#eT&&this.#ff(a,b),this.#e3(),this.#e0(),this.canvas.style.visibility="visible",this.fixDims()}#ff(a,b){let c=this.#fg(),d=(a-c)/this.#eM,e=(b-c)/this.#eL;this.scaleFactor=Math.min(d,e)}#fd(){let a=this.#fg()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+a,this.translationY*this.scaleFactor+a)}static #fh(a){let b=new Path2D;for(let c=0,d=a.length;c<d;c++){let[d,e,f,g]=a[c];0===c&&b.moveTo(...d),b.bezierCurveTo(e[0],e[1],f[0],f[1],g[0],g[1])}return b}static #fi(a,b,c){let[d,e,f,g]=b;switch(c){case 0:for(let b=0,c=a.length;b<c;b+=2)a[b]+=d,a[b+1]=g-a[b+1];break;case 90:for(let b=0,c=a.length;b<c;b+=2){let c=a[b];a[b]=a[b+1]+d,a[b+1]=c+e}break;case 180:for(let b=0,c=a.length;b<c;b+=2)a[b]=f-a[b],a[b+1]+=e;break;case 270:for(let b=0,c=a.length;b<c;b+=2){let c=a[b];a[b]=f-a[b+1],a[b+1]=g-c}break;default:throw Error("Invalid rotation")}return a}static #fj(a,b,c){let[d,e,f,g]=b;switch(c){case 0:for(let b=0,c=a.length;b<c;b+=2)a[b]-=d,a[b+1]=g-a[b+1];break;case 90:for(let b=0,c=a.length;b<c;b+=2){let c=a[b];a[b]=a[b+1]-e,a[b+1]=c-d}break;case 180:for(let b=0,c=a.length;b<c;b+=2)a[b]=f-a[b],a[b+1]-=e;break;case 270:for(let b=0,c=a.length;b<c;b+=2){let c=a[b];a[b]=g-a[b+1],a[b+1]=f-c}break;default:throw Error("Invalid rotation")}return a}#fk(a,b,c,d){let e=[],f=this.thickness/2,g=a*b+f,h=a*c+f;for(let b of this.paths){let c=[],f=[];for(let d=0,e=b.length;d<e;d++){let[i,j,k,l]=b[d];if(i[0]===l[0]&&i[1]===l[1]&&1===e){let b=a*i[0]+g,d=a*i[1]+h;c.push(b,d),f.push(b,d);break}let m=a*i[0]+g,n=a*i[1]+h,o=a*j[0]+g,p=a*j[1]+h,q=a*k[0]+g,r=a*k[1]+h,s=a*l[0]+g,t=a*l[1]+h;0===d&&(c.push(m,n),f.push(m,n)),c.push(o,p,q,r,s,t),f.push(o,p),d===e-1&&f.push(s,t)}e.push({bezier:gb.#fi(c,d,this.rotation),points:gb.#fi(f,d,this.rotation)})}return e}#fl(){let a=1/0,b=-1/0,c=1/0,d=-1/0;for(let e of this.paths)for(let[f,g,h,i]of e){let e=dq.bezierBoundingBox(...f,...g,...h,...i);a=Math.min(a,e[0]),c=Math.min(c,e[1]),b=Math.max(b,e[2]),d=Math.max(d,e[3])}return[a,c,b,d]}#fg(){return this.#eT?Math.ceil(this.thickness*this.parentScale):0}#e_(a=!1){if(this.isEmpty())return;if(!this.#eT)return void this.#e0();let b=this.#fl(),c=this.#fg();this.#eM=Math.max(d4.MIN_SIZE,b[2]-b[0]),this.#eL=Math.max(d4.MIN_SIZE,b[3]-b[1]);let d=Math.ceil(c+this.#eM*this.scaleFactor),e=Math.ceil(c+this.#eL*this.scaleFactor),[f,g]=this.parentDimensions;this.width=d/f,this.height=e/g,this.setAspectRatio(d,e);let h=this.translationX,i=this.translationY;this.translationX=-b[0],this.translationY=-b[1],this.#e3(),this.#e0(),this.#eX=d,this.#eY=e,this.setDims(d,e);let j=a?c/this.scaleFactor/2:0;this.translate(h-this.translationX-j,i-this.translationY-j)}static deserialize(a,b,c){if(a instanceof fW)return null;let d=super.deserialize(a,b,c);d.thickness=a.thickness,d.color=dq.makeHexColor(...a.color),d.opacity=a.opacity;let[e,f]=d.pageDimensions,g=d.width*e,h=d.height*f,i=d.parentScale,j=a.thickness/2;d.#eT=!0,d.#eX=Math.round(g),d.#eY=Math.round(h);let{paths:k,rect:l,rotation:m}=a;for(let{bezier:a}of k){a=gb.#fj(a,l,m);let b=[];d.paths.push(b);let c=i*(a[0]-j),e=i*(a[1]-j);for(let d=2,f=a.length;d<f;d+=6){let f=i*(a[d]-j),g=i*(a[d+1]-j),h=i*(a[d+2]-j),k=i*(a[d+3]-j),l=i*(a[d+4]-j),m=i*(a[d+5]-j);b.push([[c,e],[f,g],[h,k],[l,m]]),c=l,e=m}let f=this.#fh(b);d.bezierPath2D.push(f)}let n=d.#fl();return d.#eM=Math.max(d4.MIN_SIZE,n[2]-n[0]),d.#eL=Math.max(d4.MIN_SIZE,n[3]-n[1]),d.#ff(g,h),d}serialize(){if(this.isEmpty())return null;let a=this.getRect(0,0),b=d4._colorManager.convert(this.ctx.strokeStyle);return{annotationType:cZ.INK,color:b,thickness:this.thickness,opacity:this.opacity,paths:this.#fk(this.scaleFactor/this.parentScale,this.translationX,this.translationY,a),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class gc extends d4{#fm=null;#fn=null;#fo=null;#fp=null;#fq=null;#fr="";#fs=null;#eW=null;#ft=null;#fu=!1;#fv=!1;static _type="stamp";static _editorType=cZ.STAMP;constructor(a){super({...a,name:"stampEditor"}),this.#fp=a.bitmapUrl,this.#fq=a.bitmapFile}static initialize(a,b){d4.initialize(a,b)}static get supportedTypes(){return db(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(a=>`image/${a}`))}static get supportedTypesStr(){return db(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,b){b.pasteEditor(cZ.STAMP,{bitmapFile:a.getAsFile()})}#fw(a,b=!1){a?(this.#fm=a.bitmap,b||(this.#fn=a.id,this.#fu=a.isSvg),a.file&&(this.#fr=a.file.name),this.#e1()):this.remove()}#fx(){this.#fo=null,this._uiManager.enableWaiting(!1),this.#fs&&this.div.focus()}#fy(){if(this.#fn){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#fn).then(a=>this.#fw(a,!0)).finally(()=>this.#fx());return}if(this.#fp){let a=this.#fp;this.#fp=null,this._uiManager.enableWaiting(!0),this.#fo=this._uiManager.imageManager.getFromUrl(a).then(a=>this.#fw(a)).finally(()=>this.#fx());return}if(this.#fq){let a=this.#fq;this.#fq=null,this._uiManager.enableWaiting(!0),this.#fo=this._uiManager.imageManager.getFromFile(a).then(a=>this.#fw(a)).finally(()=>this.#fx());return}let a=document.createElement("input");a.type="file",a.accept=gc.supportedTypesStr,this.#fo=new Promise(b=>{a.addEventListener("change",async()=>{if(a.files&&0!==a.files.length){this._uiManager.enableWaiting(!0);let b=await this._uiManager.imageManager.getFromFile(a.files[0]);this.#fw(b)}else this.remove();b()}),a.addEventListener("cancel",()=>{this.remove(),b()})}).finally(()=>this.#fx()),a.click()}remove(){this.#fn&&(this.#fm=null,this._uiManager.imageManager.deleteId(this.#fn),this.#fs?.remove(),this.#fs=null,this.#eW?.disconnect(),this.#eW=null,this.#ft&&(clearTimeout(this.#ft),this.#ft=null)),super.remove()}rebuild(){if(!this.parent){this.#fn&&this.#fy();return}super.rebuild(),null!==this.div&&(this.#fn&&null===this.#fs&&this.#fy(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#fo||this.#fm||this.#fp||this.#fq||this.#fn)}get isResizable(){return!0}render(){let a,b;if(this.div)return this.div;if(this.width&&(a=this.x,b=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#fm?this.#e1():this.#fy(),this.width){let[c,d]=this.parentDimensions;this.setAt(a*c,b*d,this.width*c,this.height*d)}return this.div}#e1(){let{div:a}=this,{width:b,height:c}=this.#fm,[d,e]=this.pageDimensions;if(this.width)b=this.width*d,c=this.height*e;else if(b>.75*d||c>.75*e){let a=Math.min(.75*d/b,.75*e/c);b*=a,c*=a}let[f,g]=this.parentDimensions;this.setDims(b*f/d,c*g/e),this._uiManager.enableWaiting(!1);let h=this.#fs=document.createElement("canvas");a.append(h),a.hidden=!1,this.#fz(b,c),this.#e2(),this.#fv||(this.parent.addUndoableEditor(this),this.#fv=!0),this._reportTelemetry({action:"inserted_image"}),this.#fr&&h.setAttribute("aria-label",this.#fr)}#fA(a,b){let[c,d]=this.parentDimensions;this.width=a/c,this.height=b/d,this.setDims(a,b),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#ft&&clearTimeout(this.#ft),this.#ft=setTimeout(()=>{this.#ft=null,this.#fz(a,b)},200)}#fB(a,b){let{width:c,height:d}=this.#fm,e=c,f=d,g=this.#fm;for(;e>2*a||f>2*b;){let c=e,d=f;e>2*a&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2)),f>2*b&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));let h=new OffscreenCanvas(e,f);h.getContext("2d").drawImage(g,0,0,c,d,0,0,e,f),g=h.transferToImageBitmap()}return g}#fz(a,b){a=Math.ceil(a),b=Math.ceil(b);let c=this.#fs;if(!c||c.width===a&&c.height===b)return;c.width=a,c.height=b;let d=this.#fu?this.#fm:this.#fB(a,b);if(this._uiManager.hasMLManager&&!this.hasAltText()){let c=new OffscreenCanvas(a,b).getContext("2d");c.drawImage(d,0,0,d.width,d.height,0,0,a,b),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,a,b).data,width:a,height:b,channels:4}}).then(a=>{let b=a?.output||"";this.parent&&b&&!this.hasAltText()&&(this.altTextData={altText:b,decorative:!1})})}let e=c.getContext("2d");e.filter=this._uiManager.hcmFilter,e.drawImage(d,0,0,d.width,d.height,0,0,a,b)}getImageForAltText(){return this.#fs}#fC(a){if(a){if(this.#fu){let a=this._uiManager.imageManager.getSvgUrl(this.#fn);if(a)return a}let a=document.createElement("canvas");return{width:a.width,height:a.height}=this.#fm,a.getContext("2d").drawImage(this.#fm,0,0),a.toDataURL()}if(this.#fu){let[a,b]=this.pageDimensions,c=Math.round(this.width*a*dB.PDF_TO_CSS_UNITS),d=Math.round(this.height*b*dB.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(c,d);return e.getContext("2d").drawImage(this.#fm,0,0,this.#fm.width,this.#fm.height,0,0,c,d),e.transferToImageBitmap()}return structuredClone(this.#fm)}#e2(){this.#eW=new ResizeObserver(a=>{let b=a[0].contentRect;b.width&&b.height&&this.#fA(b.width,b.height)}),this.#eW.observe(this.div)}static deserialize(a,b,c){if(a instanceof f_)return null;let d=super.deserialize(a,b,c),{rect:e,bitmapUrl:f,bitmapId:g,isSvg:h,accessibilityData:i}=a;g&&c.imageManager.isValidId(g)?d.#fn=g:d.#fp=f,d.#fu=h;let[j,k]=d.pageDimensions;return d.width=(e[2]-e[0])/j,d.height=(e[3]-e[1])/k,i&&(d.altTextData=i),d}serialize(a=!1,b=null){if(this.isEmpty())return null;let c={annotationType:cZ.STAMP,bitmapId:this.#fn,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#fu,structTreeParentId:this._structTreeParentId};if(a)return c.bitmapUrl=this.#fC(!0),c.accessibilityData=this.altTextData,c;let{decorative:d,altText:e}=this.altTextData;if(!d&&e&&(c.accessibilityData={type:"Figure",alt:e}),null===b)return c;b.stamps||=new Map;let f=this.#fu?(c.rect[2]-c.rect[0])*(c.rect[3]-c.rect[1]):null;if(b.stamps.has(this.#fn)){if(this.#fu){let a=b.stamps.get(this.#fn);f>a.area&&(a.area=f,a.serialized.bitmap.close(),a.serialized.bitmap=this.#fC(!1))}}else b.stamps.set(this.#fn,{area:f,serialized:c}),c.bitmap=this.#fC(!1);return c}}class gd{#dg;#fD=!1;#fE=null;#fF=null;#fG=null;#fH=null;#fI=null;#fJ=new Map;#fK=!1;#fL=!1;#fM=!1;#fN=null;#m;static _initialized=!1;static #J=new Map([f3,gb,gc,ga].map(a=>[a._editorType,a]));constructor({uiManager:a,pageIndex:b,div:c,accessibilityManager:d,annotationLayer:e,drawLayer:f,textLayer:g,viewport:h,l10n:i}){const j=[...gd.#J.values()];if(!gd._initialized)for(const b of(gd._initialized=!0,j))b.initialize(i,a);a.registerEditorTypes(j),this.#m=a,this.pageIndex=b,this.div=c,this.#dg=d,this.#fE=e,this.viewport=h,this.#fN=g,this.drawLayer=f,this.#m.addLayer(this)}get isEmpty(){return 0===this.#fJ.size}get isInvisible(){return this.isEmpty&&this.#m.getMode()===cZ.NONE}updateToolbar(a){this.#m.updateToolbar(a)}updateMode(a=this.#m.getMode()){switch(this.#fO(),a){case cZ.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case cZ.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case cZ.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:b}=this.div;for(let c of gd.#J.values())b.toggle(`${c._type}Editing`,a===c._editorType);this.div.hidden=!1}hasTextLayer(a){return a===this.#fN?.div}addInkEditorIfNeeded(a){if(this.#m.getMode()===cZ.INK){if(!a){for(let a of this.#fJ.values())if(a.isEmpty())return void a.setInBackground()}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(a){this.#m.setEditingState(a)}addCommands(a){this.#m.addCommands(a)}togglePointerEvents(a=!1){this.div.classList.toggle("disabled",!a)}toggleAnnotationLayerPointerEvents(a=!1){this.#fE?.div.classList.toggle("disabled",!a)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);let a=new Set;for(let b of this.#fJ.values())b.enableEditing(),b.show(!0),b.annotationElementId&&(this.#m.removeChangedExistingAnnotation(b),a.add(b.annotationElementId));if(this.#fE)for(let b of this.#fE.getEditableAnnotations()){if(b.hide(),this.#m.isDeletedAnnotationElement(b.data.id)||a.has(b.data.id))continue;let c=this.deserialize(b);c&&(this.addOrRebuild(c),c.enableEditing())}}disable(){this.#fM=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let a=new Map,b=new Map;for(let c of this.#fJ.values())if(c.disableEditing(),c.annotationElementId){if(null!==c.serialize()){a.set(c.annotationElementId,c);continue}b.set(c.annotationElementId,c),this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}if(this.#fE)for(let c of this.#fE.getEditableAnnotations()){let{id:d}=c.data;if(this.#m.isDeletedAnnotationElement(d))continue;let e=b.get(d);if(e){e.resetAnnotationElement(c),e.show(!1),c.show();continue}(e=a.get(d))&&(this.#m.addChangedExistingAnnotation(e),e.renderAnnotationElement(c),e.show(!1)),c.show()}this.#fO(),this.isEmpty&&(this.div.hidden=!0);let{classList:c}=this.div;for(let a of gd.#J.values())c.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#fM=!1}getEditableAnnotation(a){return this.#fE?.getEditableAnnotation(a)||null}setActiveEditor(a){this.#m.getActive()!==a&&this.#m.setActiveEditor(a)}enableTextSelection(){this.div.tabIndex=-1,this.#fN?.div&&!this.#fH&&(this.#fH=this.#fP.bind(this),this.#fN.div.addEventListener("pointerdown",this.#fH),this.#fN.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#fN?.div&&this.#fH&&(this.#fN.div.removeEventListener("pointerdown",this.#fH),this.#fH=null,this.#fN.div.classList.remove("highlighting"))}#fP(a){if(this.#m.unselectAll(),a.target===this.#fN.div){let{isMac:b}=dn.platform;0!==a.button||a.ctrlKey&&b||(this.#m.showAllEditors("highlight",!0,!0),this.#fN.div.classList.add("free"),ga.startHighlighting(this,"ltr"===this.#m.direction,a),this.#fN.div.addEventListener("pointerup",()=>{this.#fN.div.classList.remove("free")},{once:!0}),a.preventDefault())}}enableClick(){this.#fG||(this.#fG=this.pointerdown.bind(this),this.#fF=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#fG),this.div.addEventListener("pointerup",this.#fF))}disableClick(){this.#fG&&(this.div.removeEventListener("pointerdown",this.#fG),this.div.removeEventListener("pointerup",this.#fF),this.#fG=null,this.#fF=null)}attach(a){this.#fJ.set(a.id,a);let{annotationElementId:b}=a;b&&this.#m.isDeletedAnnotationElement(b)&&this.#m.removeDeletedAnnotationElement(a)}detach(a){this.#fJ.delete(a.id),this.#dg?.removePointerInTextLayer(a.contentDiv),!this.#fM&&a.annotationElementId&&this.#m.addDeletedAnnotationElement(a)}remove(a){this.detach(a),this.#m.removeEditor(a),a.div.remove(),a.isAttachedToDOM=!1,this.#fL||this.addInkEditorIfNeeded(!1)}changeParent(a){a.parent!==this&&(a.parent&&a.annotationElementId&&(this.#m.addDeletedAnnotationElement(a.annotationElementId),d4.deleteAnnotationElement(a),a.annotationElementId=null),this.attach(a),a.parent?.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(a.parent!==this||!a.isAttachedToDOM){if(this.changeParent(a),this.#m.addEditor(a),this.attach(a),!a.isAttachedToDOM){let b=a.render();this.div.append(b),a.isAttachedToDOM=!0}a.fixAndSetPosition(),a.onceAdded(),this.#m.addToAnnotationStorage(a),a._reportTelemetry(a.telemetryInitialData)}}moveEditorInDOM(a){if(!a.isAttachedToDOM)return;let{activeElement:b}=document;a.div.contains(b)&&!this.#fI&&(a._focusEventsAllowed=!1,this.#fI=setTimeout(()=>{this.#fI=null,a.div.contains(document.activeElement)?a._focusEventsAllowed=!0:(a.div.addEventListener("focusin",()=>{a._focusEventsAllowed=!0},{once:!0}),b.focus())},0)),a._structTreeParentId=this.#dg?.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?(a.parent||=this,a.rebuild(),a.show()):this.add(a)}addUndoableEditor(a){this.addCommands({cmd:()=>a._uiManager.rebuild(a),undo:()=>{a.remove()},mustExec:!1})}getNextId(){return this.#m.getId()}get #fQ(){return gd.#J.get(this.#m.getMode())}#fR(a){let b=this.#fQ;return b?new b.prototype.constructor(a):null}canCreateNewEmptyEditor(){return this.#fQ?.canCreateNewEmptyEditor()}pasteEditor(a,b){this.#m.updateToolbar(a),this.#m.updateMode(a);let{offsetX:c,offsetY:d}=this.#fS(),e=this.getNextId(),f=this.#fR({parent:this,id:e,x:c,y:d,uiManager:this.#m,isCentered:!0,...b});f&&this.add(f)}deserialize(a){return gd.#J.get(a.annotationType??a.annotationEditorType)?.deserialize(a,this,this.#m)||null}createAndAddNewEditor(a,b,c={}){let d=this.getNextId(),e=this.#fR({parent:this,id:d,x:a.offsetX,y:a.offsetY,uiManager:this.#m,isCentered:b,...c});return e&&this.add(e),e}#fS(){let{x:a,y:b,width:c,height:d}=this.div.getBoundingClientRect(),e=Math.max(0,a),f=Math.max(0,b),g=Math.min(window.innerWidth,a+c),h=Math.min(window.innerHeight,b+d),i=(e+g)/2-a,j=(f+h)/2-b,[k,l]=this.viewport.rotation%180==0?[i,j]:[j,i];return{offsetX:k,offsetY:l}}addNewEditor(){this.createAndAddNewEditor(this.#fS(),!0)}setSelected(a){this.#m.setSelected(a)}toggleSelected(a){this.#m.toggleSelected(a)}isSelected(a){return this.#m.isSelected(a)}unselect(a){this.#m.unselect(a)}pointerup(a){let{isMac:b}=dn.platform;if(0===a.button&&(!a.ctrlKey||!b)&&a.target===this.div&&this.#fK){if(this.#fK=!1,!this.#fD){this.#fD=!0;return}if(this.#m.getMode()===cZ.STAMP)return void this.#m.unselectAll();this.createAndAddNewEditor(a,!1)}}pointerdown(a){if(this.#m.getMode()===cZ.HIGHLIGHT&&this.enableTextSelection(),this.#fK){this.#fK=!1;return}let{isMac:b}=dn.platform;if(0!==a.button||a.ctrlKey&&b||a.target!==this.div)return;this.#fK=!0;let c=this.#m.getActive();this.#fD=!c||c.isEmpty()}findNewParent(a,b,c){let d=this.#m.findParent(b,c);return null!==d&&d!==this&&(d.changeParent(a),!0)}destroy(){for(let a of(this.#m.getActive()?.parent===this&&(this.#m.commitOrRemove(),this.#m.setActiveEditor(null)),this.#fI&&(clearTimeout(this.#fI),this.#fI=null),this.#fJ.values()))this.#dg?.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,this.#fJ.clear(),this.#m.removeLayer(this)}#fO(){for(let a of(this.#fL=!0,this.#fJ.values()))a.isEmpty()&&a.remove();this.#fL=!1}render({viewport:a}){for(let b of(this.viewport=a,dV(this.div,a),this.#m.getEditors(this.pageIndex)))this.add(b),b.rebuild();this.updateMode()}update({viewport:a}){this.#m.commitOrRemove(),this.#fO();let b=this.viewport.rotation,c=a.rotation;if(this.viewport=a,dV(this.div,{rotation:c}),b!==c)for(let a of this.#fJ.values())a.rotate(c);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:a,pageHeight:b}=this.viewport.rawDims;return[a,b]}get scale(){return this.#m.viewParameters.realScale}}class ge{#cY=null;#q=0;#fT=new Map;#fU=new Map;constructor({pageIndex:a}){this.pageIndex=a}setParent(a){if(!this.#cY){this.#cY=a;return}if(this.#cY!==a){if(this.#fT.size>0)for(let b of this.#fT.values())b.remove(),a.append(b);this.#cY=a}}static get _svgFactory(){return db(this,"_svgFactory",new dF)}static #fV(a,{x:b=0,y:c=0,width:d=1,height:e=1}={}){let{style:f}=a;f.top=`${100*c}%`,f.left=`${100*b}%`,f.width=`${100*d}%`,f.height=`${100*e}%`}#fW(a){let b=ge._svgFactory.create(1,1,!0);return this.#cY.append(b),b.setAttribute("aria-hidden",!0),ge.#fV(b,a),b}#fX(a,b){let c=ge._svgFactory.createElement("clipPath");a.append(c);let d=`clip_${b}`;c.setAttribute("id",d),c.setAttribute("clipPathUnits","objectBoundingBox");let e=ge._svgFactory.createElement("use");return c.append(e),e.setAttribute("href",`#${b}`),e.classList.add("clip"),d}highlight(a,b,c,d=!1){let e=this.#q++,f=this.#fW(a.box);f.classList.add("highlight"),a.free&&f.classList.add("free");let g=ge._svgFactory.createElement("defs");f.append(g);let h=ge._svgFactory.createElement("path");g.append(h);let i=`path_p${this.pageIndex}_${e}`;h.setAttribute("id",i),h.setAttribute("d",a.toSVGPath()),d&&this.#fU.set(e,h);let j=this.#fX(g,i),k=ge._svgFactory.createElement("use");return f.append(k),f.setAttribute("fill",b),f.setAttribute("fill-opacity",c),k.setAttribute("href",`#${i}`),this.#fT.set(e,f),{id:e,clipPathId:`url(#${j})`}}highlightOutline(a){let b,c=this.#q++,d=this.#fW(a.box);d.classList.add("highlightOutline");let e=ge._svgFactory.createElement("defs");d.append(e);let f=ge._svgFactory.createElement("path");e.append(f);let g=`path_p${this.pageIndex}_${c}`;if(f.setAttribute("id",g),f.setAttribute("d",a.toSVGPath()),f.setAttribute("vector-effect","non-scaling-stroke"),a.free){d.classList.add("free");let a=ge._svgFactory.createElement("mask");e.append(a),b=`mask_p${this.pageIndex}_${c}`,a.setAttribute("id",b),a.setAttribute("maskUnits","objectBoundingBox");let f=ge._svgFactory.createElement("rect");a.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");let h=ge._svgFactory.createElement("use");a.append(h),h.setAttribute("href",`#${g}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}let h=ge._svgFactory.createElement("use");d.append(h),h.setAttribute("href",`#${g}`),b&&h.setAttribute("mask",`url(#${b})`);let i=h.cloneNode();return d.append(i),h.classList.add("mainOutline"),i.classList.add("secondaryOutline"),this.#fT.set(c,d),c}finalizeLine(a,b){let c=this.#fU.get(a);this.#fU.delete(a),this.updateBox(a,b.box),c.setAttribute("d",b.toSVGPath())}updateLine(a,b){this.#fT.get(a).firstChild.firstChild.setAttribute("d",b.toSVGPath())}removeFreeHighlight(a){this.remove(a),this.#fU.delete(a)}updatePath(a,b){this.#fU.get(a).setAttribute("d",b.toSVGPath())}updateBox(a,b){ge.#fV(this.#fT.get(a),b)}show(a,b){this.#fT.get(a).classList.toggle("hidden",!b)}rotate(a,b){this.#fT.get(a).setAttribute("data-main-rotation",b)}changeColor(a,b){this.#fT.get(a).setAttribute("fill",b)}changeOpacity(a,b){this.#fT.get(a).setAttribute("fill-opacity",b)}addClass(a,b){this.#fT.get(a).classList.add(b)}removeClass(a,b){this.#fT.get(a).classList.remove(b)}remove(a){null!==this.#cY&&(this.#fT.get(a).remove(),this.#fT.delete(a))}destroy(){for(let a of(this.#cY=null,this.#fT.values()))a.remove();this.#fT.clear()}}var gf=cU.AbortException,gg=cU.AnnotationEditorLayer,gh=cU.AnnotationEditorParamsType,gi=cU.AnnotationEditorType,gj=cU.AnnotationEditorUIManager,gk=cU.AnnotationLayer,gl=cU.AnnotationMode,gm=cU.CMapCompressionType,gn=cU.ColorPicker,go=cU.DOMSVGFactory,gp=cU.DrawLayer,gq=cU.FeatureTest,gr=cU.GlobalWorkerOptions,gs=cU.ImageKind,gt=cU.InvalidPDFException,gu=cU.MissingPDFException,gv=cU.OPS,gw=cU.Outliner,gx=cU.PDFDataRangeTransport,gy=cU.PDFDateString,gz=cU.PDFWorker,gA=cU.PasswordResponses,gB=cU.PermissionFlag,gC=cU.PixelsPerInch,gD=cU.RenderingCancelledException,gE=cU.TextLayer,gF=cU.UnexpectedResponseException,gG=cU.Util,gH=cU.VerbosityLevel,gI=cU.XfaLayer,gJ=cU.build,gK=cU.createValidAbsoluteUrl,gL=cU.fetchData,gM=cU.getDocument,gN=cU.getFilenameFromUrl,gO=cU.getPdfFilenameFromUrl,gP=cU.getXfaPageViewport,gQ=cU.isDataScheme,gR=cU.isPdfFile,gS=cU.noContextMenu,gT=cU.normalizeUnicode,gU=cU.renderTextLayer,gV=cU.setLayerDimensions,gW=cU.shadow,gX=cU.updateTextLayer,gY=cU.version;a.s(["AbortException",()=>gf,"AnnotationEditorLayer",()=>gg,"AnnotationEditorParamsType",()=>gh,"AnnotationEditorType",()=>gi,"AnnotationEditorUIManager",()=>gj,"AnnotationLayer",()=>gk,"AnnotationMode",()=>gl,"CMapCompressionType",()=>gm,"ColorPicker",()=>gn,"DOMSVGFactory",()=>go,"DrawLayer",()=>gp,"FeatureTest",()=>gq,"GlobalWorkerOptions",()=>gr,"ImageKind",()=>gs,"InvalidPDFException",()=>gt,"MissingPDFException",()=>gu,"OPS",()=>gv,"Outliner",()=>gw,"PDFDataRangeTransport",()=>gx,"PDFDateString",()=>gy,"PDFWorker",()=>gz,"PasswordResponses",()=>gA,"PermissionFlag",()=>gB,"PixelsPerInch",()=>gC,"RenderingCancelledException",()=>gD,"TextLayer",()=>gE,"UnexpectedResponseException",()=>gF,"Util",()=>gG,"VerbosityLevel",()=>gH,"XfaLayer",()=>gI,"build",()=>gJ,"createValidAbsoluteUrl",()=>gK,"fetchData",()=>gL,"getDocument",()=>gM,"getFilenameFromUrl",()=>gN,"getPdfFilenameFromUrl",()=>gO,"getXfaPageViewport",()=>gP,"isDataScheme",()=>gQ,"isPdfFile",()=>gR,"noContextMenu",()=>gS,"normalizeUnicode",()=>gT,"renderTextLayer",()=>gU,"setLayerDimensions",()=>gV,"shadow",()=>gW,"updateTextLayer",()=>gX,"version",()=>gY],21166);var gZ=a.i(21166),gZ=gZ,g$="SET_ZOOM_LEVEL",g_=function(a){return{type:g$,value:a}},g0="SET_PDF_PAGINATED",g1="SET_NUM_PAGES",g2=function(a){return{type:g1,value:a}},g3="SET_CURRENT_PAGE",g4=function(a){return{type:g3,value:a}},g5=function(){return(g5=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g6={zoomLevel:1,paginated:!0,numPages:0,currentPage:1},g7=function(a,b){switch(void 0===a&&(a=g6),b.type){case g$:var c=b.value;return g5(g5({},a),{zoomLevel:c});case g0:var c=b.value;return g5(g5({},a),{paginated:c});case g1:var c=b.value;return g5(g5({},a),{numPages:c});case g3:var c=b.value;return g5(g5({},a),{currentPage:c});default:return a}},g8=function(){return(g8=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g9=(0,ak.createContext)({state:g6,dispatch:function(){return null}}),ha=function(a){var b=a.children,c=a.mainState,d=(0,ak.useReducer)(g7,g8(g8({},g6),{mainState:c})),e=d[0],f=d[1];return ak.default.createElement(g9.Provider,{value:{state:e,dispatch:f}},b)},hb=function(){return(hb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hc=function(a){return ak.default.createElement(he,hb({},a,{reverse:!0}))},hd=function(a){return ak.default.createElement(he,hb({},a))},he=function(a){var b=a.color,c=a.size,d=a.reverse;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",style:{transform:"".concat(d?"rotate(180deg)":"")},viewBox:"0 0 12 12",version:"1.1"},ak.default.createElement("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ak.default.createElement("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)"},ak.default.createElement("g",{id:"AV",transform:"translate(100.000000, 852.000000)"},ak.default.createElement("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)"},ak.default.createElement("g",null,ak.default.createElement("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),ak.default.createElement("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:b||"#aaa"})))))))},hf=function(a){var b=a.color,c=a.size,d=a.reverse;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",style:{transform:"".concat(d?"rotate(180deg)":"")},id:"Layer_1",viewBox:"0 0 24 24"},ak.default.createElement("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:b||"#aaa"}),ak.default.createElement("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:b||"#aaa"}))},hg=function(a){return ak.default.createElement(hi,hb({},a))},hh=function(a){return ak.default.createElement(hi,hb({},a,{reverse:!0}))},hi=function(a){var b=a.color,c=a.size,d=a.reverse;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",viewBox:"0 0 32 32",version:"1.1"},ak.default.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ak.default.createElement("g",{id:"search-plus-icon",fill:b||"#aaa"},ak.default.createElement("path",{id:"search-plus",d:d?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"}))))},hj=function(a){var b=a.color,c=a.size;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",viewBox:"0 0 24 24"},ak.default.createElement("path",{fill:b||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"}))},hk=function(a){var b=a.color,c=a.size,d=a.reverse;return ak.default.createElement("svg",{width:c||"100%",height:c||"100%",style:{transform:"".concat(d?"rotate(90deg)":"")},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve"},ak.default.createElement("path",{fill:b||"#aaa",d:"M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574\n  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98\n  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28\n  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852\n  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z"}))},hl=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a};let hm=function(){var a=(0,ak.useContext)(g9),b=a.state,c=b.currentPage,d=b.numPages,e=a.dispatch;return ak.default.createElement(hn,{id:"pdf-pagination"},ak.default.createElement(ho,{id:"pdf-pagination-prev",onClick:function(){return e(g4(c-1))},disabled:1===c},ak.default.createElement(hc,{color:"#000",size:"50%"})),ak.default.createElement(hq,{id:"pdf-pagination-info"},"Page ",c,"/",d),ak.default.createElement(hp,{id:"pdf-pagination-next",onClick:function(){return e(g4(c+1))},disabled:c>=d},ak.default.createElement(hd,{color:"#000",size:"50%"})))};var hn=bC.div(W||(W=hl(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),ho=bC(bY)(X||(X=hl(["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),hp=bC(ho)(Y||(Y=hl(["\n  margin: 0 20px 0 5px;\n"],["\n  margin: 0 20px 0 5px;\n"]))),hq=bC.div(Z||(Z=hl(["\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"],["\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"])),function(a){return a.theme.text_primary}),hr=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a};let hs=function(){var a=(0,ak.useContext)(g9),b=a.state,c=b.mainState,d=b.paginated,e=b.zoomLevel,f=b.numPages,g=a.dispatch,h=(null==c?void 0:c.currentDocument)||null;return ak.default.createElement(ht,{id:"pdf-controls"},d&&f>1&&ak.default.createElement(hm,null),(null==h?void 0:h.fileData)&&ak.default.createElement(hv,{id:"pdf-download",href:null==h?void 0:h.fileData,download:null==h?void 0:h.uri},ak.default.createElement(hf,{color:"#000",size:"75%"})),ak.default.createElement(hu,{id:"pdf-zoom-out",onMouseDown:function(){return g(g_(e-.1))}},ak.default.createElement(hh,{color:"#000",size:"80%"})),ak.default.createElement(hu,{id:"pdf-zoom-in",onMouseDown:function(){return g(g_(e+.1))}},ak.default.createElement(hg,{color:"#000",size:"80%"})),ak.default.createElement(hu,{id:"pdf-zoom-reset",onMouseDown:function(){return g(g_(g6.zoomLevel))},disabled:e===g6.zoomLevel},ak.default.createElement(hj,{color:"#000",size:"70%"})),f>1&&ak.default.createElement(hu,{id:"pdf-toggle-pagination",onMouseDown:function(){return g({type:g0,value:!d})}},ak.default.createElement(hk,{color:"#000",size:"70%",reverse:d})))};var ht=bC.div($||($=hr(["\n  display: flex;\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  justify-content: flex-end;\n  padding: 8px;\n  background-color: ",";\n  box-shadow: 0px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    padding: 6px;\n  }\n"],["\n  display: flex;\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  justify-content: flex-end;\n  padding: 8px;\n  background-color: ",";\n  box-shadow: 0px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    padding: 6px;\n  }\n"])),function(a){return a.theme.tertiary}),hu=bC(bY)(_||(_=hr(["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),hv=bC(bZ)(aa||(aa=hr(["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),hw=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},hx=hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw(hw([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function hy(a,b){var c={};return hx.forEach(function(d){var e=a[d];e&&(b?c[d]=function(a){return e(a,b(d))}:c[d]=e)}),c}function hz(a){var b=!1;return{promise:new Promise(function(c,d){a.then(function(a){return!b&&c(a)}).catch(function(a){return!b&&d(a)})}),cancel:function(){b=!0}}}var hA=a.i(98621);function hB(a,b){if(!a)throw Error("Invariant failed")}var hC=a.i(29505),hD=Object.prototype.hasOwnProperty;function hE(a,b,c){for(c of a.keys())if(hF(c,b))return c}function hF(a,b){var c,d,e;if(a===b)return!0;if(a&&b&&(c=a.constructor)===b.constructor){if(c===Date)return a.getTime()===b.getTime();if(c===RegExp)return a.toString()===b.toString();if(c===Array){if((d=a.length)===b.length)for(;d--&&hF(a[d],b[d]););return -1===d}if(c===Set){if(a.size!==b.size)return!1;for(d of a)if((e=d)&&"object"==typeof e&&!(e=hE(b,e))||!b.has(e))return!1;return!0}if(c===Map){if(a.size!==b.size)return!1;for(d of a)if((e=d[0])&&"object"==typeof e&&!(e=hE(b,e))||!hF(d[1],b.get(e)))return!1;return!0}if(c===ArrayBuffer)a=new Uint8Array(a),b=new Uint8Array(b);else if(c===DataView){if((d=a.byteLength)===b.byteLength)for(;d--&&a.getInt8(d)===b.getInt8(d););return -1===d}if(ArrayBuffer.isView(a)){if((d=a.byteLength)===b.byteLength)for(;d--&&a[d]===b[d];);return -1===d}if(!c||"object"==typeof a){for(c in d=0,a)if(hD.call(a,c)&&++d&&!hD.call(b,c)||!(c in b)||!hF(a[c],b[c]))return!1;return Object.keys(b).length===d}}return a!=a&&b!=b}var hG=gZ;let hH=(0,ak.createContext)(null);function hI({children:a,type:b}){return(0,aj.jsx)("div",{className:`react-pdf__message react-pdf__message--${b}`,children:a})}class hJ{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(a){this.pdfDocument=a}setViewer(a){this.pdfViewer=a}setExternalLinkRel(a){this.externalLinkRel=a}setExternalLinkTarget(a){this.externalLinkTarget=a}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return hB(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(a){hB(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=a}get rotation(){return 0}set rotation(a){}goToDestination(a){return new Promise(b=>{hB(this.pdfDocument,"PDF document not loaded."),hB(a,"Destination is not specified."),"string"==typeof a?this.pdfDocument.getDestination(a).then(b):Array.isArray(a)?b(a):a.then(b)}).then(a=>{hB(Array.isArray(a),`"${a}" is not a valid destination array.`);let b=a[0];new Promise(a=>{hB(this.pdfDocument,"PDF document not loaded."),b instanceof Object?this.pdfDocument.getPageIndex(b).then(b=>{a(b)}).catch(()=>{hB(!1,`"${b}" is not a valid page reference.`)}):"number"==typeof b?a(b):hB(!1,`"${b}" is not a valid destination reference.`)}).then(b=>{let c=b+1;hB(this.pdfViewer,"PDF viewer is not initialized."),hB(c>=1&&c<=this.pagesCount,`"${c}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:a,pageIndex:b,pageNumber:c})})})}navigateTo(a){this.goToDestination(a)}goToPage(a){hB(this.pdfViewer,"PDF viewer is not initialized."),hB(a>=1&&a<=this.pagesCount,`"${a}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:a-1,pageNumber:a})}addLinkAttributes(a,b,c){a.href=b,a.rel=this.externalLinkRel||"noopener noreferrer nofollow",a.target=c?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}let hK="undefined"!=typeof document,hL=hK&&"file:"===window.location.protocol;function hM(a){return null!=a}function hN(a){return"string"==typeof a&&/^data:/.test(a)}function hO(a){hB(hN(a),"Invalid data URI.");let[b="",c=""]=a.split(",");return -1!==b.split(";").indexOf("base64")?atob(c):unescape(c)}function hP(){(0,hC.default)(!hL,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.")}function hQ(a){a&&a.cancel&&a.cancel()}function hR(a,b){return Object.defineProperty(a,"width",{get(){return this.view[2]*b},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*b},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function hS(a,b){switch(b.type){case"RESOLVE":return{value:b.value,error:void 0};case"REJECT":return{value:!1,error:b.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function hT(){return(0,ak.useReducer)(hS,{value:void 0,error:void 0})}var hU=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let{PDFDataRangeTransport:hV}=hG,hW=(a,b)=>{switch(b){case 1:a(prompt("Enter the password to open this PDF file."));break;case 2:a(prompt("Invalid password. Please try again."))}};function hX(a){return"object"==typeof a&&null!==a&&("data"in a||"range"in a||"url"in a)}let hY=(0,ak.forwardRef)(function(a,b){var{children:c,className:d,error:e="Failed to load PDF file.",externalLinkRel:f,externalLinkTarget:g,file:h,inputRef:i,imageResourcesPath:j,loading:k="Loading PDF",noData:l="No PDF file specified.",onItemClick:m,onLoadError:n,onLoadProgress:o,onLoadSuccess:p,onPassword:q=hW,onSourceError:r,onSourceSuccess:s,options:t,renderMode:u,rotate:v}=a,w=hU(a,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);let[x,y]=hT(),{value:z,error:A}=x,[B,C]=hT(),{value:D,error:E}=B,F=(0,ak.useRef)(new hJ),G=(0,ak.useRef)([]),H=(0,ak.useRef)(void 0),I=(0,ak.useRef)(void 0);h&&h!==H.current&&hX(h)&&((0,hC.default)(!hF(h,H.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),H.current=h),t&&t!==I.current&&((0,hC.default)(!hF(t,I.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),I.current=t);let J=(0,ak.useRef)({scrollPageIntoView:a=>{let{dest:b,pageNumber:c,pageIndex:d=c-1}=a;if(m)return void m({dest:b,pageIndex:d,pageNumber:c});let e=G.current[d];e?e.scrollIntoView():(0,hC.default)(!1,`An internal link leading to page ${c} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,ak.useImperativeHandle)(b,()=>({linkService:F,pages:G,viewer:J}),[]),(0,ak.useEffect)(function(){y({type:"RESET"})},[h,y]);let K=(0,ak.useCallback)(()=>{var a,b,c,d;return a=this,b=void 0,c=void 0,d=function*(){if(!h)return null;if("string"==typeof h)return hN(h)?{data:hO(h)}:(hP(),{url:h});if(h instanceof hV)return{range:h};if(h instanceof ArrayBuffer)return{data:h};if(hK&&(hB(hK,"isBlob can only be used in a browser environment"),h instanceof Blob))return{data:yield new Promise((a,b)=>{let c=new FileReader;c.onload=()=>{if(!c.result)return b(Error("Error while reading a file."));a(c.result)},c.onerror=a=>{if(!a.target)return b(Error("Error while reading a file."));let{error:c}=a.target;if(!c)return b(Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return b(Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return b(Error("Error while reading a file: Security error."));case c.ABORT_ERR:return b(Error("Error while reading a file: Aborted."));default:return b(Error("Error while reading a file."))}},c.readAsArrayBuffer(h)})};if(hB("object"==typeof h,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),hB(hX(h),"Invalid parameter object: need either .data, .range or .url"),"url"in h&&"string"==typeof h.url){if(hN(h.url)){let{url:a}=h,b=hU(h,["url"]);return Object.assign({data:hO(a)},b)}hP()}return h},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},[h]);function L(a,b){G.current[a]=b}function M(a){delete G.current[a]}(0,ak.useEffect)(()=>{let a=hz(K());return a.promise.then(a=>{y({type:"RESOLVE",value:a})}).catch(a=>{y({type:"REJECT",error:a})}),()=>{hQ(a)}},[K,y]),(0,ak.useEffect)(()=>{if(void 0!==z){if(!1===z)return void(A&&((0,hC.default)(!1,A.toString()),r&&r(A)));s&&s()}},[z]),(0,ak.useEffect)(function(){C({type:"RESET"})},[C,z]),(0,ak.useEffect)(function(){if(!z)return;let a=Object.assign(Object.assign({},z),t),b=hG.getDocument(a);return o&&(b.onProgress=o),q&&(b.onPassword=q),b.promise.then(a=>{C({type:"RESOLVE",value:a})}).catch(a=>{b.destroyed||C({type:"REJECT",error:a})}),()=>{b.destroy()}},[t,C,z]),(0,ak.useEffect)(()=>{if(void 0!==D){if(!1===D)return void(E&&((0,hC.default)(!1,E.toString()),n&&n(E)));D&&(p&&p(D),G.current=Array(D.numPages),F.current.setDocument(D))}},[D]),(0,ak.useEffect)(function(){F.current.setViewer(J.current),F.current.setExternalLinkRel(f),F.current.setExternalLinkTarget(g)},[f,g]);let N=(0,ak.useMemo)(()=>({imageResourcesPath:j,linkService:F.current,onItemClick:m,pdf:D,registerPage:L,renderMode:u,rotate:v,unregisterPage:M}),[j,m,D,u,v]),O=(0,ak.useMemo)(()=>hy(w,()=>D),[w,D]);return(0,aj.jsx)("div",Object.assign({className:(0,hA.default)("react-pdf__Document",d),ref:i,style:{"--scale-factor":"1"}},O,{children:h?null==D?(0,aj.jsx)(hI,{type:"loading",children:"function"==typeof k?k():k}):!1===D?(0,aj.jsx)(hI,{type:"error",children:"function"==typeof e?e():e}):(0,aj.jsx)(hH.Provider,{value:N,children:c}):(0,aj.jsx)(hI,{type:"no-data",children:"function"==typeof l?l():l})}))});function hZ(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a.filter(Boolean);return c.length<=1?c[0]||null:function(a){c.forEach(function(b){"function"==typeof b?b(a):b&&(b.current=a)})}}let h$=(0,ak.createContext)(null),h_={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},h0=/^H(\d+)$/;function h1(a){return"children"in a}function h2(a){return!!h1(a)&&1===a.children.length&&0 in a.children&&"id"in a.children[0]}function h3({className:a,node:b}){let c=(0,ak.useMemo)(()=>b?Object.assign(Object.assign({},function(a){let b={};if(h1(a)){let{role:c}=a,d=c.match(h0);if(d)b.role="heading",b["aria-level"]=Number(d[1]);else if(c in h_){let a=h_[c];a&&(b.role=a)}}return b}(b)),function a(b){let c={};if(h1(b)){if(void 0!==b.alt&&(c["aria-label"]=b.alt),void 0!==b.lang&&(c.lang=b.lang),h2(b)){let[d]=b.children;if(d){let b=a(d);return Object.assign(Object.assign({},c),b)}}}else"id"in b&&(c["aria-owns"]=b.id);return c}(b)):null,[b]),d=(0,ak.useMemo)(()=>!h1(b)||h2(b)?null:b.children.map((a,b)=>(0,aj.jsx)(h3,{node:a},b)),[b]);return(0,aj.jsx)("span",Object.assign({className:a},c,{children:d}))}function h4(){return(0,ak.useContext)(h$)}function h5(){let a=h4();hB(a,"Unable to find Page context.");let{onGetStructTreeError:b,onGetStructTreeSuccess:c}=a,[d,e]=hT(),{value:f,error:g}=d,{customTextRenderer:h,page:i}=a;return((0,ak.useEffect)(function(){e({type:"RESET"})},[e,i]),(0,ak.useEffect)(function(){if(h||!i)return;let a=hz(i.getStructTree());return a.promise.then(a=>{e({type:"RESOLVE",value:a})}).catch(a=>{e({type:"REJECT",error:a})}),()=>hQ(a)},[h,i,e]),(0,ak.useEffect)(()=>{if(void 0!==f){if(!1===f)return void(g&&((0,hC.default)(!1,g.toString()),b&&b(g)));f&&c&&c(f)}},[f]),f)?(0,aj.jsx)(h3,{className:"react-pdf__Page__structTree structTree",node:f}):null}function h6(a){let b=h4();hB(b,"Unable to find Page context.");let{_className:c,canvasBackground:d,devicePixelRatio:e=hK&&window.devicePixelRatio||1,onRenderError:f,onRenderSuccess:g,page:h,renderForms:i,renderTextLayer:j,rotate:k,scale:l}=Object.assign(Object.assign({},b),a),{canvasRef:m}=a;hB(h,"Attempted to render page canvas, but no page was specified.");let n=(0,ak.useRef)(null);function o(a){"RenderingCancelledException"!==a.name&&((0,hC.default)(!1,a.toString()),f&&f(a))}let p=(0,ak.useMemo)(()=>h.getViewport({scale:l*e,rotation:k}),[e,h,k,l]),q=(0,ak.useMemo)(()=>h.getViewport({scale:l,rotation:k}),[h,k,l]);(0,ak.useEffect)(function(){if(!h)return;h.cleanup();let{current:a}=n;if(!a)return;a.width=p.width,a.height=p.height,a.style.width=`${Math.floor(q.width)}px`,a.style.height=`${Math.floor(q.height)}px`,a.style.visibility="hidden";let b={annotationMode:i?gl.ENABLE_FORMS:gl.ENABLE,canvasContext:a.getContext("2d",{alpha:!1}),viewport:p};d&&(b.background=d);let c=h.render(b);return c.promise.then(()=>{a.style.visibility="",h&&g&&g(hR(h,l))}).catch(o),()=>hQ(c)},[d,n,e,h,i,p,q]);let r=(0,ak.useCallback)(()=>{let{current:a}=n;a&&(a.width=0,a.height=0)},[n]);return(0,ak.useEffect)(()=>r,[r]),(0,aj.jsx)("canvas",{className:`${c}__canvas`,dir:"ltr",ref:hZ(m,n),style:{display:"block",userSelect:"none"},children:j?(0,aj.jsx)(h5,{}):null})}function h7(){let a=h4();hB(a,"Unable to find Page context.");let{customTextRenderer:b,onGetTextError:c,onGetTextSuccess:d,onRenderTextLayerError:e,onRenderTextLayerSuccess:f,page:g,pageIndex:h,pageNumber:i,rotate:j,scale:k}=a;hB(g,"Attempted to load page text content, but no page was specified.");let[l,m]=hT(),{value:n,error:o}=l,p=(0,ak.useRef)(null),q=(0,ak.useRef)(void 0);(0,hC.default)(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,ak.useEffect)(function(){m({type:"RESET"})},[g,m]),(0,ak.useEffect)(function(){if(!g)return;let a=hz(g.getTextContent());return a.promise.then(a=>{m({type:"RESOLVE",value:a})}).catch(a=>{m({type:"REJECT",error:a})}),()=>hQ(a)},[g,m]),(0,ak.useEffect)(()=>{if(void 0!==n){if(!1===n)return void(o&&((0,hC.default)(!1,o.toString()),c&&c(o)));n&&d&&d(n)}},[n]);let r=(0,ak.useCallback)(()=>{f&&f()},[f]),s=(0,ak.useCallback)(a=>{(0,hC.default)(!1,a.toString()),e&&e(a)},[e]),t=(0,ak.useMemo)(()=>g.getViewport({scale:k,rotation:j}),[g,j,k]);return(0,ak.useLayoutEffect)(function(){if(!g||!n)return;let{current:a}=p;if(!a)return;a.innerHTML="";let c=new gE({container:a,textContentSource:g.streamTextContent({includeMarkedContent:!0}),viewport:t});return c.render().then(()=>{let c=document.createElement("div");c.className="endOfContent",a.append(c),q.current=c;let d=a.querySelectorAll('[role="presentation"]');if(b){let a=0;n.items.forEach((c,e)=>{if(!("str"in c))return;let f=d[a];f&&(f.innerHTML=b(Object.assign({pageIndex:h,pageNumber:i,itemIndex:e},c)),a+=c.str&&c.hasEOL?2:1)})}r()}).catch(s),()=>hQ(c)},[b,s,r,g,h,i,n,t]),(0,aj.jsx)("div",{className:(0,hA.default)("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){let a=q.current;a&&a.classList.remove("active")},onMouseDown:function(){let a=q.current;a&&a.classList.add("active")},ref:p})}function h8(){return(0,ak.useContext)(hH)}function h9(){let a=h8(),b=h4();hB(b,"Unable to find Page context.");let{imageResourcesPath:c,linkService:d,onGetAnnotationsError:e,onGetAnnotationsSuccess:f,onRenderAnnotationLayerError:g,onRenderAnnotationLayerSuccess:h,page:i,pdf:j,renderForms:k,rotate:l,scale:m=1}=Object.assign(Object.assign({},a),b);hB(j,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),hB(i,"Attempted to load page annotations, but no page was specified."),hB(d,"Attempted to load page annotations, but no linkService was specified.");let[n,o]=hT(),{value:p,error:q}=n,r=(0,ak.useRef)(null);(0,hC.default)(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,ak.useEffect)(function(){o({type:"RESET"})},[o,i]),(0,ak.useEffect)(function(){if(!i)return;let a=hz(i.getAnnotations());return a.promise.then(a=>{o({type:"RESOLVE",value:a})}).catch(a=>{o({type:"REJECT",error:a})}),()=>{hQ(a)}},[o,i,k]),(0,ak.useEffect)(()=>{if(void 0!==p){if(!1===p)return void(q&&((0,hC.default)(!1,q.toString()),e&&e(q)));p&&f&&f(p)}},[p]);let s=(0,ak.useMemo)(()=>i.getViewport({scale:m,rotation:l}),[i,l,m]);return(0,ak.useEffect)(function(){if(!j||!i||!d||!p)return;let{current:a}=r;if(!a)return;let b=s.clone({dontFlip:!0}),e={annotations:p,annotationStorage:j.annotationStorage,div:a,imageResourcesPath:c,linkService:d,page:i,renderForms:k,viewport:b};a.innerHTML="";try{new gk({accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:a,l10n:null,page:i,viewport:b}).render(e),h&&h()}catch(a){(0,hC.default)(!1,`${a}`),g&&g(a)}return()=>{}},[p,c,d,i,k,s]),(0,aj.jsx)("div",{className:(0,hA.default)("react-pdf__Page__annotations","annotationLayer"),ref:r})}var ia=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};function ib(a){let b=Object.assign(Object.assign({},h8()),a),{_className:c="react-pdf__Page",_enableRegisterUnregisterPage:d=!0,canvasBackground:e,canvasRef:f,children:g,className:h,customRenderer:i,customTextRenderer:j,devicePixelRatio:k,error:l="Failed to load the page.",height:m,inputRef:n,loading:o="Loading page",noData:p="No page specified.",onGetAnnotationsError:q,onGetAnnotationsSuccess:r,onGetStructTreeError:s,onGetStructTreeSuccess:t,onGetTextError:u,onGetTextSuccess:v,onLoadError:w,onLoadSuccess:x,onRenderAnnotationLayerError:y,onRenderAnnotationLayerSuccess:z,onRenderError:A,onRenderSuccess:B,onRenderTextLayerError:C,onRenderTextLayerSuccess:D,pageIndex:E,pageNumber:F,pdf:G,registerPage:H,renderAnnotationLayer:I=!0,renderForms:J=!1,renderMode:K="canvas",renderTextLayer:L=!0,rotate:M,scale:N=1,unregisterPage:O,width:P}=b,Q=ia(b,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[R,S]=hT(),{value:T,error:U}=R,V=(0,ak.useRef)(null);hB(G,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");let W=hM(F)?F-1:null!=E?E:null,X=null!=F?F:hM(E)?E+1:null,Y=null!=M?M:T?T.rotate:null,Z=(0,ak.useMemo)(()=>{if(!T)return null;let a=1,b=null!=N?N:1;if(P||m){let b=T.getViewport({scale:1,rotation:Y});P?a=P/b.width:m&&(a=m/b.height)}return b*a},[m,T,Y,N,P]);(0,ak.useEffect)(function(){return()=>{hM(W)&&d&&O&&O(W)}},[d,G,W,O]),(0,ak.useEffect)(function(){S({type:"RESET"})},[S,G,W]),(0,ak.useEffect)(function(){if(!G||!X)return;let a=hz(G.getPage(X));return a.promise.then(a=>{S({type:"RESOLVE",value:a})}).catch(a=>{S({type:"REJECT",error:a})}),()=>hQ(a)},[S,G,W,X,H]),(0,ak.useEffect)(()=>{if(void 0!==T){if(!1===T)return void(U&&((0,hC.default)(!1,U.toString()),w&&w(U)));!function(){if(x){if(!T||!Z)return;x(hR(T,Z))}if(d&&H){if(!hM(W)||!V.current)return;H(W,V.current)}}()}},[T,Z]);let $=(0,ak.useMemo)(()=>T&&hM(W)&&X&&hM(Y)&&hM(Z)?{_className:c,canvasBackground:e,customTextRenderer:j,devicePixelRatio:k,onGetAnnotationsError:q,onGetAnnotationsSuccess:r,onGetStructTreeError:s,onGetStructTreeSuccess:t,onGetTextError:u,onGetTextSuccess:v,onRenderAnnotationLayerError:y,onRenderAnnotationLayerSuccess:z,onRenderError:A,onRenderSuccess:B,onRenderTextLayerError:C,onRenderTextLayerSuccess:D,page:T,pageIndex:W,pageNumber:X,renderForms:J,renderTextLayer:L,rotate:Y,scale:Z}:null,[c,e,j,k,q,r,s,t,u,v,y,z,A,B,C,D,T,W,X,J,L,Y,Z]),_=(0,ak.useMemo)(()=>hy(Q,()=>T?Z?hR(T,Z):void 0:T),[Q,T,Z]),aa=`${W}@${Z}/${Y}`;return(0,aj.jsx)("div",Object.assign({className:(0,hA.default)(c,h),"data-page-number":X,ref:hZ(n,V),style:{"--scale-factor":`${Z}`,backgroundColor:e||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},_,{children:X?null===G||null==T?(0,aj.jsx)(hI,{type:"loading",children:"function"==typeof o?o():o}):!1===G||!1===T?(0,aj.jsx)(hI,{type:"error",children:"function"==typeof l?l():l}):(0,aj.jsxs)(h$.Provider,{value:$,children:[function(){switch(K){case"custom":return hB(i,'renderMode was set to "custom", but no customRenderer was passed.'),(0,aj.jsx)(i,{},`${aa}_custom`);case"none":return null;default:return(0,aj.jsx)(h6,{canvasRef:f},`${aa}_canvas`)}}(),L?(0,aj.jsx)(h7,{},`${aa}_text`):null,I?(0,aj.jsx)(h9,{},`${aa}_annotations`):null,g]}):(0,aj.jsx)(hI,{type:"no-data",children:"function"==typeof p?p():p})}))}var ic=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a};let id=function(a){var b=a.pageNum,c=(0,ak.useContext)(g9).state,d=c.mainState,e=c.paginated,f=c.zoomLevel,g=c.numPages,h=c.currentPage,i=(null==d?void 0:d.rendererRect)||null,j=b||h;return ak.default.createElement(ie,{id:"pdf-page-wrapper",last:j>=g},!e&&ak.default.createElement(ig,{id:"pdf-page-info"},"Page ",j,"/",g),ak.default.createElement(ib,{pageNumber:j||h,scale:f,height:((null==i?void 0:i.height)||100)-100,width:((null==i?void 0:i.width)||100)-100}))};var ie=bC.div(ab||(ab=ic(["\n  margin: 20px 0;\n"],["\n  margin: 20px 0;\n"]))),ig=bC.div(ac||(ac=ic(["\n  padding: 0 0 10px 10px;\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"],["\n  padding: 0 0 10px 10px;\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"])),function(a){return a.theme.text_tertiary}),ih=function(a){for(var b=(0,ak.useContext)(g9).state.numPages,c=[],d=0;d<b;d++)c.push(ak.default.createElement(id,{key:d+1,pageNum:d+1}));return ak.default.createElement(ak.default.Fragment,null,c)},ii=bC(hY)(ad||(k=["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n"],l=["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n"],Object.defineProperty?Object.defineProperty(k,"raw",{value:l}):k.raw=l,ad=k));let ij=function(){var a=(0,ak.useContext)(g9),b=a.state,c=b.mainState,d=b.paginated,e=a.dispatch,f=(null==c?void 0:c.currentDocument)||null;return((0,ak.useEffect)(function(){e(g2(g6.numPages))},[f]),f&&void 0!==f.fileData)?ak.default.createElement(ii,{file:f.fileData,onLoadSuccess:function(a){return e(g2(a.numPages))},loading:ak.default.createElement("span",null,"Loading...")},d?ak.default.createElement(id,null):ak.default.createElement(ih,null)):null};gZ.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.mjs",{get url(){return`file://${a.P("node_modules/react-doc-viewer/build/utils/importMeta.js")}`}}.url).toString();var ik=function(a){var b=a.mainState;return ak.default.createElement(ha,{mainState:b},ak.default.createElement(il,{id:"pdf-renderer","data-testid":"pdf-renderer"},ak.default.createElement(hs,null),ak.default.createElement(ij,null)))};ik.fileTypes=["pdf","application/pdf"],ik.weight=0;var il=bC.div(ae||(m=["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow-y: auto;\n\n  /* width */\n  &::-webkit-scrollbar {\n    ",";\n  }\n  /* Track */\n  &::-webkit-scrollbar-track {\n    /* background: ","; */\n  }\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n"],n=["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow-y: auto;\n\n  /* width */\n  &::-webkit-scrollbar {\n    ",";\n  }\n  /* Track */\n  &::-webkit-scrollbar-track {\n    /* background: ","; */\n  }\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n"],Object.defineProperty?Object.defineProperty(m,"raw",{value:n}):m.raw=n,ae=m),function(a){return a.theme.disableThemeScrollbar?"":"width: 10px"},function(a){return a.theme.secondary},function(a){return a.theme.tertiary},function(a){return a.theme.primary}),im=function(){return(im=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},io=bC(cv)(af||(o=["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background-color: white;\n  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),\n    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n"],p=["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background-color: white;\n  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),\n    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n"],Object.defineProperty?Object.defineProperty(o,"raw",{value:p}):o.raw=p,af=o)),ip=function(a){return ak.default.createElement(io,im({},a))};ip.fileTypes=["png","image/png"],ip.weight=0;var iq=void 0,ir=void 0,is=void 0,it=[],iu=function(){var a=iA(2,0);if(18761===a)is=!0;else if(19789===a)is=!1;else throw TypeError("Invalid byte order value.");return is},iv=function(){if(42!==iA(2,2))throw RangeError("You forgot your towel!");return!0},iw=function(a){var b={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"};return a in b?b[a]:"Tag"+a},ix=function(a){var b,c={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"};return a in c&&(b=c[a]),b},iy=function(a){var b;return -1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(a)?b=1:-1!==["SHORT","SSHORT"].indexOf(a)?b=2:-1!==["LONG","SLONG","FLOAT"].indexOf(a)?b=4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(a)&&(b=8),b},iz=function(a,b,c){var d=b+Math.floor((c=c||0)/8),e=c+a;if(e<=0)throw RangeError("No bits requested");if(e<=8)var f=24+c,g=ir.getUint8(d,is);else if(e<=16)var f=16+c,g=ir.getUint16(d,is);else if(e<=32)var f=c,g=ir.getUint32(d,is);else throw RangeError("Too many bits requested");return{bits:g<<f>>>32-a,byteOffset:d+Math.floor(e/8),bitOffset:e%8}},iA=function(a,b){if(a<=0)throw RangeError("No bytes requested");if(a<=1)return ir.getUint8(b,is);if(a<=2)return ir.getUint16(b,is);if(a<=3)return ir.getUint32(b,is)>>>8;if(a<=4)return ir.getUint32(b,is);else throw RangeError("Too many bytes requested")},iB=function(a,b,c,d){var e=[],f=iy(b);if(f*c<=4){if(!1===is)var g=d>>>(4-f)*8;else var g=d;e.push(g)}else for(var h=0;h<c;h++){var i=f*h;if(f>=8)if(-1!==["RATIONAL","SRATIONAL"].indexOf(b))e.push(iA(4,d+i)),e.push(iA(4,d+i+4));else throw TypeError("Can't handle this field type or size");else e.push(iA(f,d+i))}return"ASCII"===b&&e.forEach(function(a,b,c){c[b]=String.fromCharCode(a)}),e},iC=function(a,b){var c=Math.pow(2,8-b);return Math.floor(a*c+(c-1))},iD=function(a,b,c,d){return void 0===d&&(d=1),"rgba("+a+", "+b+", "+c+", "+d+")"},iE=function(a){for(var b=iA(2,a),c=[],d=a+2,e=0;e<b;d+=12,e++){var f=iA(2,d),g=iA(2,d+2),h=iA(4,d+4),i=iA(4,d+8),j=iw(f),k=ix(g),l=iB(j,k,h,i);c[j]={type:k,values:l}}it.push(c);var m=iA(4,d);return 0===m?it:iE(m)},iF=function(a,b){var c=b||document.createElement("canvas");if(a&&(is=iu(ir=new DataView(a)),iv(ir,is))){var d=(it=iE(iA(4,4)))[0],e=d.ImageWidth.values[0],f=d.ImageLength.values[0];c.width=e,c.height=f;var g=[],h=d.Compression?d.Compression.values[0]:1,i=d.SamplesPerPixel.values[0],j=[],k=0,l=!1;if(d.BitsPerSample.values.forEach(function(a,b,c){j[b]={bitsPerSample:a,hasBytesPerSample:!1,bytesPerSample:void 0},a%8==0&&(j[b].hasBytesPerSample=!0,j[b].bytesPerSample=a/8),k+=a},iq),k%8==0){l=!0;var m=k/8}var n=d.StripOffsets.values,o=n.length;if(d.StripByteCounts)var p=d.StripByteCounts.values;else if(1===o)var p=[Math.ceil(e*f*k/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var q=0;q<o;q++){var r=n[q];g[q]=[];for(var s=p[q],t=0,u=0,v=1,w=!0,x=[],y=0,z=0,A=0;t<s;t+=v)switch(h){case 1:for(var B=0,x=[];B<i;B++)if(j[B].hasBytesPerSample){var C=j[B].bytesPerSample*B;x.push(iA(j[B].bytesPerSample,r+t+C))}else{var D=iz(j[B].bitsPerSample,r+t,u);throw x.push(D.bits),t=D.byteOffset-r,u=D.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(g[q].push(x),l)v=m;else throw v=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(w){w=!1;var E=1,F=1,G=ir.getInt8(r+t,is);G>=0&&G<=127?E=G+1:G>=-127&&G<=-1?F=-G+1:w=!0}else{for(var H=iA(1,r+t),B=0;B<F;B++){if(j[z].hasBytesPerSample)A=A<<8*y|H,++y===j[z].bytesPerSample&&(x.push(A),A=y=0,z++);else throw RangeError("Cannot handle sub-byte bits per sample");z===i&&(g[q].push(x),x=[],z=0)}0==--E&&(w=!0)}v=1}}if(c.getContext){var I=c.getContext("2d");if(I.fillStyle=iD(255,255,255,0),d.RowsPerStrip)var J=d.RowsPerStrip.values[0];else var J=f;var K=g.length,L=f%J,M=0===L?J:L,N=J,O=0,P=d.PhotometricInterpretation.values[0],Q=[],R=0;if(d.ExtraSamples&&(R=(Q=d.ExtraSamples.values).length),d.ColorMap)var S=d.ColorMap.values,T=Math.pow(2,j[0].bitsPerSample);for(var q=0;q<K;q++){q+1===K&&(N=M);for(var U=g[q].length,V=O*q,W=0,X=0;X<U;W++)for(var Y=0;Y<e;Y++,X++){var Z=g[q][X],$=0,_=0,aa=0,ab=1;if(R>0){for(var ac=0;ac<R;ac++)if(1===Q[ac]||2===Q[ac]){ab=Z[3+ac]/256;break}}switch(P){case 0:if(j[0].hasBytesPerSample)var ad=Math.pow(16,2*j[0].bytesPerSample);Z.forEach(function(a,b,c){c[b]=ad-a});case 1:$=_=aa=iC(Z[0],j[0].bitsPerSample);break;case 2:$=iC(Z[0],j[0].bitsPerSample),_=iC(Z[1],j[1].bitsPerSample),aa=iC(Z[2],j[2].bitsPerSample);break;case 3:if(void 0===S)throw Error("Palette image missing color map");var ae=Z[0];$=iC(S[ae],16),_=iC(S[T+ae],16),aa=iC(S[2*T+ae],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",P)}I.fillStyle=iD($,_,aa,ab),I.fillRect(Y,V+W,1,1)}O=N}}return c}},iG=function(){return(iG=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},iH=function(a){var b=a.mainState.currentDocument,c=(0,ak.useState)(!1),d=c[0],e=c[1],f=(0,ak.useState)(!1),g=f[0],h=f[1];return((0,ak.useEffect)(function(){if(b&&!d){var a=document.getElementById("tiff-img");try{a&&iF(b.fileData,a),e(!0)}catch(a){h(!0)}}},[]),g)?ak.default.createElement(cv,iG({},a),ak.default.createElement("div",null,"Your file is corrupted. Please check it on your machine.")):ak.default.createElement(cv,iG({},a),ak.default.createElement(iI,{id:"tiff-img"}))};iH.fileTypes=["tif","tiff","image/tif","image/tiff"],iH.weight=0,iH.fileLoader=cg;var iI=bC.canvas(ag||(q=["\n  max-width: 95%;\n  max-height: 95%;\n"],r=["\n  max-width: 95%;\n  max-height: 95%;\n"],Object.defineProperty?Object.defineProperty(q,"raw",{value:r}):q.raw=r,ag=q)),iJ=function(a){var b=a.mainState.currentDocument;return ak.default.createElement(iK,{id:"txt-renderer"},null==b?void 0:b.fileData)};iJ.fileTypes=["txt","text/plain"],iJ.weight=0,iJ.fileLoader=function(a){return cf(cd(cd({},a),{readerTypeFunction:"text"}))};var iK=bC.div(ah||(s=["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 30px;\n"],t=["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 30px;\n"],Object.defineProperty?Object.defineProperty(s,"raw",{value:t}):s.raw=t,ah=s)),iL={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",text_primary:"#000",text_secondary:"#fff",text_tertiary:"#00000044",disableThemeScrollbar:!1},iM=[cz,cB,cF,cI,cN,ik,ip,iH,iJ],iN=function(){return(iN=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let iO=function(a){var b=a.documents,c=a.theme;if(!b||void 0===b)throw Error("Please provide an array of documents to DocViewer.\ne.g. <DocViewer documents={[ { uri: 'https://mypdf.pdf' } ]} />");return ak.default.createElement(bU,iN({},a),ak.default.createElement(bA,{theme:c?iN(iN({},iL),c):iL},ak.default.createElement(iP,iN({id:"react-doc-viewer","data-testid":"react-doc-viewer"},a),ak.default.createElement(cb,null),ak.default.createElement(cn,null))))};var iP=bC.div(ai||(u=["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: #eee;\n"],v=["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: #eee;\n"],Object.defineProperty?Object.defineProperty(u,"raw",{value:v}):u.raw=v,ai=u));function iQ(){let{id:a}=(0,al.useParams)(),b=(0,al.useRouter)(),{user:c,isAuthenticated:d,isLoading:e}=(0,am.useAuth)(),{toast:f}=(0,ax.useToast)(),[g,h]=(0,ak.useState)(null),[i,j]=(0,ak.useState)(!0),[k,l]=(0,ak.useState)(null),[m,n]=(0,ak.useState)(null),[o,p]=(0,ak.useState)(!1),[q,r]=(0,ak.useState)(null),[s,t]=(0,ak.useState)(!1),[u,v]=(0,ak.useState)(null),[w,x]=(0,ak.useState)(null);(0,ak.useEffect)(()=>{e||d||b.push("/")},[d,e,b]),(0,ak.useEffect)(()=>{(async()=>{if(!(!a||Array.isArray(a))&&d&&!e&&c){if(!("string"==typeof a&&""!==a.trim()&&"undefined"!==a&&!a.includes("undefined")&&!a.includes(".pdf")&&!a.includes("."))){l("Invalid document ID format. Please check the URL and try again. Document ID should be an identifier, not a filename."),j(!1);return}try{j(!0),l(null);let b=await ay.default.getAccessToken();if(!b)throw Error("No authentication token found");let c=await fetch(`/api/documents/${a}/preview`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!c.ok)if(404===c.status)throw Error("Document not found. The requested document may have been deleted or the ID is incorrect.");else if(400===c.status)throw Error("Invalid document ID format. Please check the URL and try again.");else if(403===c.status)throw Error("Access denied. You do not have permission to view this document.");else{let a=await c.json();throw Error(a.error||`Failed to fetch document: ${c.status} ${c.statusText}`)}let d=await c.json();console.log("Document data received:",d),console.log("Preview URL:",d.previewUrl),console.log("File URL:",d.fileUrl),console.log("File Type:",d.fileType),console.log("File Name:",d.fileName),h(d),n(d.previewUrl),x(d.previewUrl),y(d.id)}catch(b){console.error("Error fetching document preview:",b);let a=b instanceof Error?b.message:"Failed to load document preview. Please try again later.";l(a),f({title:"Error",description:a,variant:"destructive"})}finally{j(!1)}}})()},[a,d,e,c]);let y=async a=>{try{t(!0);let b=await ay.default.getAccessToken();if(!b)return;let c=await fetch(`/api/qpro/by-document/${a}`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(c.ok){let a=await c.json();a.analysis&&r(a.analysis)}}catch(a){console.error("Error fetching QPRO analysis:",a)}finally{t(!1)}},z=async()=>{if(g){p(!0);try{let a=`/api/documents/${g.id}/download-direct?token=${await ay.default.getAccessToken()}`,b=globalThis.document.createElement("a");b.href=a,b.download=g.fileName||`document-${g.id}`,globalThis.document.body.appendChild(b),b.click(),globalThis.document.body.removeChild(b)}catch(a){console.error("Download error:",a),f({title:"Download Error",description:a instanceof Error?a.message:"Failed to download document. Please try again.",variant:"destructive"})}finally{p(!1)}}},A=()=>{b.push("/repository")};return!e&&(d||c)?d?c?k?(0,aj.jsx)(aw.ClientOnly,{children:(0,aj.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,aj.jsx)(an.Navbar,{}),(0,aj.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,aj.jsxs)(ap.Card,{children:[(0,aj.jsx)(ap.CardHeader,{children:(0,aj.jsx)(ap.CardTitle,{children:"Document Preview Error"})}),(0,aj.jsxs)(ap.CardContent,{children:[(0,aj.jsx)("p",{className:"text-destructive",children:k}),(0,aj.jsxs)(ao.Button,{onClick:A,className:"mt-4",children:[(0,aj.jsx)(au.X,{className:"w-4 h-4 mr-2"}),"Back to Repository"]})]})]})})]})}):i?(0,aj.jsx)(aw.ClientOnly,{children:(0,aj.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,aj.jsx)(an.Navbar,{}),(0,aj.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,aj.jsx)("div",{className:"flex justify-center items-center h-[70vh]",children:(0,aj.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})]})}):g&&m?(0,aj.jsx)(aw.ClientOnly,{children:(0,aj.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,aj.jsx)(an.Navbar,{}),(0,aj.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,aj.jsxs)("div",{className:"bg-muted/20 border-b p-4",children:[(0,aj.jsx)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,aj.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aj.jsx)("h1",{className:"text-xl md:text-2xl font-bold truncate",children:g.title}),(0,aj.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(0,aj.jsxs)("span",{children:["By ",g.uploadedBy]}),(0,aj.jsx)("span",{children:""}),(0,aj.jsx)("span",{children:new Date(g.uploadedAt).toLocaleDateString()}),g.category&&"Uncategorized"!==g.category&&(0,aj.jsxs)(aj.Fragment,{children:[(0,aj.jsx)("span",{children:""}),(0,aj.jsx)("span",{children:g.category})]})]})]})}),(0,aj.jsx)("div",{className:"max-w-7xl mx-auto mt-3 flex flex-wrap gap-2",children:g.tags?.map((a,b)=>(0,aj.jsx)(aq.Badge,{variant:"outline",className:"text-xs",children:a},b))})]}),(0,aj.jsxs)("div",{className:"border-b p-2 flex items-center justify-between",children:[(0,aj.jsxs)("div",{className:"flex items-center gap-2",children:[(0,aj.jsxs)(ao.Button,{variant:"outline",size:"sm",onClick:A,children:[(0,aj.jsx)(au.X,{className:"w-4 h-4 mr-2"}),"Close"]}),o?(0,aj.jsxs)(ao.Button,{variant:"outline",size:"sm",disabled:!0,children:[(0,aj.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}),"Downloading..."]}):(0,aj.jsxs)(ao.Button,{variant:"outline",size:"sm",onClick:z,children:[(0,aj.jsx)(ar.Download,{className:"w-4 h-4 mr-2"}),"Download"]}),q&&(0,aj.jsxs)(ao.Button,{variant:"outline",size:"sm",onClick:()=>b.push(`/qpro/analysis/${q.id}`),children:[(0,aj.jsx)(as.Eye,{className:"w-4 h-4 mr-2"}),"View Analysis"]})]}),(0,aj.jsx)("div",{className:"text-sm text-muted-foreground",children:g.fileName})]}),(()=>{if(!g?.fileUrl&&!m)return(0,aj.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,aj.jsxs)("div",{className:"text-center p-8",children:[(0,aj.jsx)(at.FileText,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,aj.jsx)("p",{className:"text-gray-600",children:"No preview URL available"})]})});let a=w||m||g?.fileUrl;console.log("Rendering preview with URL:",a),console.log("Document fileName:",g?.fileName),console.log("Document fileType:",g?.fileType);let b=g?.fileName?.split(".").pop()?.toLowerCase()||"";if(console.log("File extension:",b),u)return(0,aj.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,aj.jsxs)("div",{className:"text-center p-8",children:[(0,aj.jsx)(av.AlertTriangle,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,aj.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"Preview Error"}),(0,aj.jsx)("p",{className:"text-gray-600 text-sm",children:u}),(0,aj.jsxs)(ao.Button,{onClick:z,variant:"outline",className:"mt-4",children:[(0,aj.jsx)(ar.Download,{className:"w-4 h-4 mr-2"}),"Download File Instead"]})]})});if(["pdf","txt","jpg","jpeg","png","gif"].includes(b))return(0,aj.jsx)("div",{className:"relative w-full bg-white",style:{height:"calc(100vh - 220px)",minHeight:"500px"},children:(0,aj.jsx)("iframe",{src:a,className:"w-full h-full border-0",title:g?.title||"Document Preview",onError:a=>{console.error("Iframe error:",a),v("Unable to load file preview. Please try downloading the file.")}})});let c=[{uri:a,fileName:g?.fileName||g?.title||"document",fileType:g?.fileType}];return(0,aj.jsx)("div",{className:"relative w-full bg-white",style:{height:"calc(100vh - 220px)",minHeight:"500px"},children:(0,aj.jsx)(iO,{documents:c,pluginRenderers:iM,config:{header:{disableHeader:!1,disableFileName:!1,retainURLParams:!1},csvDelimiter:",",pdfZoom:{defaultZoom:1,zoomJump:.2},pdfVerticalScrollByDefault:!0},style:{height:"100%",width:"100%"},theme:{primary:"#2B4385",secondary:"#ffffff",tertiary:"#f3f4f6",textPrimary:"#000000",textSecondary:"#5b5b5b",textTertiary:"#00000099",disableThemeScrollbar:!1}})})})()]})]})}):(0,aj.jsx)(aw.ClientOnly,{children:(0,aj.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,aj.jsx)(an.Navbar,{}),(0,aj.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,aj.jsxs)(ap.Card,{children:[(0,aj.jsx)(ap.CardHeader,{children:(0,aj.jsx)(ap.CardTitle,{children:"Document Not Found"})}),(0,aj.jsxs)(ap.CardContent,{children:[(0,aj.jsx)("p",{className:"text-muted-foreground",children:"The requested document could not be found or is not accessible."}),(0,aj.jsxs)(ao.Button,{onClick:A,className:"mt-4",children:[(0,aj.jsx)(au.X,{className:"w-4 h-4 mr-2"}),"Back to Repository"]})]})]})})]})}):(0,aj.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,aj.jsxs)("div",{className:"text-center",children:[(0,aj.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,aj.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),(0,aj.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading user data..."})]})}):(0,aj.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,aj.jsxs)("div",{className:"text-center",children:[(0,aj.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,aj.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),(0,aj.jsx)("p",{className:"text-lg text-muted-foreground",children:"Redirecting to login..."})]})}):(0,aj.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,aj.jsxs)("div",{className:"text-center",children:[(0,aj.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,aj.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),(0,aj.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading document preview..."})]})})}a.s(["default",()=>iQ],61525)}];

//# sourceMappingURL=_d00d54b3._.js.map