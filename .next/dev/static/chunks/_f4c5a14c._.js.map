{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/dropdown-menu.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,6LAAC,iLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/navbar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport Link from \"next/link\"\r\nimport { usePathname } from \"next/navigation\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\"\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\r\nimport { Menu, X, Search, MessageSquare, BarChart3, LogOut, UserRound, File, ClipboardCheck, Home } from \"lucide-react\"\r\nimport Image from \"next/image\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport function Navbar() {\r\n  const { user, logout, isLoading, isAuthenticated } = useAuth()\r\n  const pathname = usePathname()\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\r\n\r\n  // Don't render if user is not authenticated and not loading (meaning auth check is complete but user is not logged in)\r\n  if (!isAuthenticated && !isLoading) {\r\n    return null;\r\n  }\r\n\r\n  // Show loading state with skeleton if user is authenticated but still loading\r\n  if (isLoading) {\r\n    return (\r\n      <nav className=\"sticky top-0 z-50 bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60 border-b border-primary/20 shadow-sm\">\r\n        <div className=\"flex justify-between items-center h-16 px-4 sm:px-6 lg:px-8\">\r\n          {/* Left Side: Logo and Title (Loading skeleton) */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <Link href=\"/dashboard\" className=\"flex items-center gap-2 group\">\r\n              <div className=\"w-12 h-12 flex items-center justify-center group-hover:scale-105 transition-transform overflow-hidden\">\r\n                <Image\r\n                  src=\"/LSPULogo.png\"\r\n                  alt=\"LSPU Logo\"\r\n                  width={48}\r\n                  height={48}\r\n                  className=\"object-contain\"\r\n                  priority\r\n                />\r\n              </div>\r\n              <div className=\"hidden sm:flex sm:flex-col sm:items-start ml-2\">\r\n                <div className=\"text-xl font-bold bg-linear-to-r from-primary to-blue-700 bg-clip-text text-transparent\">LSPU KMIS</div>\r\n                <div className=\"text-xs text-muted-foreground -mt-1\">Knowledge Management Information System</div>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n \r\n          {/* Center: Navigation Links (Loading skeleton) */}\r\n          <div className=\"hidden md:flex items-center justify-center flex-1\">\r\n            <div className=\"flex items-center gap-1\">\r\n              <div className=\"h-10 w-24 bg-muted rounded animate-pulse mx-1\"></div>\r\n              <div className=\"h-10 w-20 bg-muted rounded animate-pulse mx-1\"></div>\r\n              <div className=\"h-10 w-20 bg-muted rounded animate-pulse mx-1\"></div>\r\n              <div className=\"h-10 w-24 bg-muted rounded animate-pulse mx-1\"></div>\r\n            </div>\r\n          </div>\r\n \r\n          {/* Right Side: User Profile (Loading skeleton) */}\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-8 h-8 rounded-full bg-muted animate-pulse\"></div>\r\n              <div className=\"hidden sm:block h-4 w-16 bg-muted rounded animate-pulse\"></div>\r\n              </div>\r\n            <div className=\"h-10 w-10 bg-muted rounded-full animate-pulse\"></div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n  const navigation = [\r\n    { name: \"Dashboard\", href: \"/dashboard\", icon: Home },\r\n    { name: \"Repository\", href: \"/repository\", icon: File },\r\n    { name: \"Search\", href: \"/search\", icon: Search },\r\n    ...(user?.role === \"ADMIN\" || user?.role === \"FACULTY\"\r\n      ? [\r\n          { name: \"QPRO\", href: \"/qpro\", icon: ClipboardCheck }\r\n        ]\r\n      : []),\r\n  ]\r\n\r\n  const getInitials = (name: string) => {\r\n    const initials = name\r\n      .split(\" \")\r\n      .map((n) => n[0])\r\n      .join(\"\")\r\n      .toUpperCase();\r\n    \r\n    // Avoid returning \"AU\" as initials, return first initial instead\r\n    if (initials === \"AU\") {\r\n      return initials.charAt(0);\r\n    }\r\n    return initials;\r\n  }\r\n\r\n  return (\r\n    <nav className=\"sticky top-0 z-50 bg-white/95 backdrop-blur supports-backdrop-filter:bg-white/60 border-b border-gray-200 shadow-sm\">\r\n      <div className=\"flex justify-between items-center h-16 px-4 sm:px-6 lg:px-8\">\r\n        {/* Left Side: Logo and Title */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Link href=\"/dashboard\" className=\"flex items-center gap-2 group\">\r\n            <div className=\"w-12 h-12 flex items-center justify-center group-hover:scale-105 transition-transform overflow-hidden\">\r\n              <Image\r\n                src=\"/LSPULogo.png\"\r\n                alt=\"LSPU Logo\"\r\n                width={48}\r\n                height={48}\r\n                className=\"object-contain\"\r\n                priority\r\n              />\r\n            </div>\r\n            <div className=\"hidden sm:flex sm:flex-col sm:items-start ml-2\">\r\n              <div className=\"text-xl font-bold\" style={{ color: '#2B4385' }}>LSPU KMIS</div>\r\n              <div className=\"text-xs text-gray-500 -mt-1\">Knowledge Management Information System</div>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Center: Navigation Links */}\r\n        <div className=\"hidden md:flex items-center justify-center flex-1\">\r\n          <div className=\"flex items-center gap-1\">\r\n            {navigation.map((item) => {\r\n              const Icon = item.icon\r\n              const isActive = pathname === item.href\r\n              return (\r\n                <Link key={item.name} href={item.href}>\r\n                  <Button\r\n                    variant={isActive ? \"secondary\" : \"ghost\"}\r\n                    className=\"gap-2\"\r\n                    style={isActive ? { color: '#2B4385', backgroundColor: 'rgba(43, 67, 133, 0.1)' } : {}}\r\n                  >\r\n                    <Icon className=\"w-4 h-4\" />\r\n                    {item.name}\r\n                  </Button>\r\n                </Link>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Side: User Profile */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"ghost\" className=\"gap-2\">\r\n                <Avatar className=\"w-8 h-8\">\r\n                  <AvatarFallback className=\"text-sm flex items-center justify-center\" style={{backgroundColor: 'rgba(43, 67, 133, 0.1)', color: '#2B4385'}}>\r\n                    <UserRound className=\"w-4 h-4\" />\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <span className=\"hidden sm:inline text-sm text-gray-700\">{user?.name}</span>\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n              <DropdownMenuLabel>\r\n                <div className=\"flex flex-col gap-1\">\r\n                  <div className=\"font-medium text-gray-900\">{user?.name}</div>\r\n                  <div className=\"text-xs text-gray-500\">{user?.email}</div>\r\n                  <div className=\"text-xs text-gray-500 capitalize\">Role: {user?.role}</div>\r\n                </div>\r\n              </DropdownMenuLabel>\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem\r\n                onClick={async () => {\r\n                  await logout();\r\n                }}\r\n                className=\"text-red-600\"\r\n              >\r\n                <LogOut className=\"w-4 h-4 mr-2\" />\r\n                Logout\r\n              </DropdownMenuItem>\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className=\"md:hidden\"\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            {mobileMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Mobile Navigation */}\r\n        {mobileMenuOpen && (\r\n          <div className=\"md:hidden py-4 border-t border-gray-200 animate-slide-in px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              {navigation.map((item) => {\r\n                const Icon = item.icon\r\n                const isActive = pathname === item.href\r\n                return (\r\n                  <Link key={item.name} href={item.href} onClick={() => setMobileMenuOpen(false)}>\r\n                    <Button\r\n                      variant={isActive ? \"secondary\" : \"ghost\"}\r\n                      className=\"w-full justify-start gap-2\"\r\n                      style={isActive ? { color: '#2B4385', backgroundColor: 'rgba(43, 67, 133, 0.1)' } : {}}\r\n                    >\r\n                      <Icon className=\"w-4 h-4\" />\r\n                      {item.name}\r\n                    </Button>\r\n                  </Link>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-placeholder:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-[--radix-select-content-available-height] min-w-32 origin-[--radix-select-content-transform-origin] overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:last:[span]:flex *:last:[span]:items-center *:last:[span]:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,8yBACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,8OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,6iBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,yaACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,wNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6LAAC,kLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6LAAC,uLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,wOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,yLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 1432, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport type * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({ className, ...props }: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return <TabsPrimitive.Root data-slot=\"tabs\" className={cn(\"flex flex-col gap-2\", className)} {...props} />\n}\n\nfunction TabsList({ className, ...props }: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({ className, ...props }: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({ className, ...props }: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return <TabsPrimitive.Content data-slot=\"tabs-content\" className={cn(\"flex-1 outline-none\", className)} {...props} />\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAwD;IACpF,qBAAO,6LAAC,2KAAkB;QAAC,aAAU;QAAO,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QAAa,GAAG,KAAK;;;;;;AACxG;KAFS;AAIT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAwD;IACxF,qBACE,6LAAC,2KAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAA2D;IAC9F,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ooBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAA2D;IAC9F,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAe,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QAAa,GAAG,KAAK;;;;;;AACnH;MAFS"}},
    {"offset": {"line": 1510, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 1561, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/data/strategic_plan.json"],"sourcesContent":["{\"strategic_plan_meta\":{\"university\":\"Laguna State Polytechnic University\",\"period\":\"2025-2029\",\"vision\":\"A transformative university for the sustainable development of Laguna, CALABARZON, and ASEAN Region\",\"total_kras\":22},\"kras\":[{\"kra_id\":\"KRA 1\",\"kra_title\":\"Development of New Curricula Incorporating Emerging Technologies\",\"guiding_principle\":\"Excellence and Relevance in Education\",\"initiatives\":[{\"id\":\"KRA1-KPI1\",\"key_performance_indicator\":{\"outputs\":\"enhanced curricula integrated with emerging technologies (e.g., AI, IoT, drone technology, and biotechnology) into the agriculture, fisheries, forestry, engineering, medicine, law, arts, IT and education program)\",\"outcomes\":\"students equipped with cutting-edge skills and knowledge, increasing their employability and ability to contribute to modern agricultural and fisheries practices\"},\"strategies\":[\"conduct a needs assessment to identify gaps in the current curricula and opportunities for incorporating emerging technologies\",\"collaborate with industry experts, tech companies, and research institutions to design relevant course content\",\"pilot new courses and gather feedback from students and faculty to refine content and delivery methods\"],\"programs_activities\":[\"organize workshops with faculty members to assess the current curriculum\",\"initiate partnerships with relevant tech companies and research institutions to identify trends in emerging technologies\",\"form content development teams comprising faculty and industry partners to create course materials integrating emerging technologies\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Curriculum and Instruction Development Unit\",\"Deans\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"Curriculum Updated\"},{\"year\":2026,\"target_value\":\"Curriculum Updated\"},{\"year\":2027,\"target_value\":\"Curriculum Updated\"},{\"year\":2028,\"target_value\":\"Curriculum Updated\"},{\"year\":2029,\"target_value\":\"Curriculum Updated\"}]}},{\"id\":\"KRA1-KPI2\",\"key_performance_indicator\":{\"outputs\":\"training sessions for faculty on the latest technological advancements and their applications in these fields\",\"outcomes\":\"enhanced faculty expertise in emerging technologies, leading to improved teaching quality and program relevance\"},\"strategies\":[\"collaborate with industry experts, tech companies and research institutions to design relevant course content\",\"pilot new courses and gather feedback from students and faculty to refine content and delivery methods\"],\"programs_activities\":[\"organize specialized training workshops on emerging technologies relevant to your curricula.\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"HRMO\",\"Deans\",\"Faculty\",\"Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"count\",\"unit_basis\":\"per program/college\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":1},{\"year\":2028,\"target_value\":1},{\"year\":2029,\"target_value\":1}]}}]},{\"kra_id\":\"KRA 2\",\"kra_title\":\"Market-Driven Program Design and Implementation\",\"guiding_principle\":\"Excellence and Relevance in Education\",\"initiatives\":[{\"id\":\"KRA2-KPI1\",\"key_performance_indicator\":{\"outputs\":\"establishment of advisory boards comprising industry leaders and alumni, and community stakeholders to provide insights and feedback on program development\",\"outcomes\":\"programs that align closely with market demands, ensuring graduates possess the skills and knowledge required by employers\"},\"strategies\":[\"form advisory boards for agriculture, fisheries, and technology programs to facilitate ongoing dialogue with industry stakeholders\"],\"programs_activities\":[\"establish formal partnerships with industry leaders for internship placements\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\",\"Alumni Affairs and Placement Services, Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"Advisory Board Established\"},{\"year\":2026,\"target_value\":\"Advisory Board Established\"},{\"year\":2027,\"target_value\":\"Advisory Board Established\"},{\"year\":2028,\"target_value\":\"Advisory Board Established\"},{\"year\":2029,\"target_value\":\"Advisory Board Established\"}]}},{\"id\":\"KRA2-KPI2\",\"key_performance_indicator\":{\"outputs\":\"regular updates to curricula based on market trends and industry needs assessments\",\"outcomes\":\"increased enrollment and retention rates as programs gain a reputation for relevance and quality\"},\"strategies\":[\"integrate experiential learning opportunities, such as internships and cooperative education, to provide students with real-world experience\",\"regularly review and update program curricula  based on feedback from advisory boards and market research findings\"],\"programs_activities\":[\"establish a framework to regularly assess program outcomes, student employment rates, and industry satisfaction\",\"create a feedback system involving students, alumni, and industry stakeholders\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\",\"Alumni Affairs and Placement Services, Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"Curriculum Review Completed\"},{\"year\":2026,\"target_value\":\"Curriculum Review Completed\"},{\"year\":2027,\"target_value\":\"Curriculum Review Completed\"},{\"year\":2028,\"target_value\":\"Curriculum Review Completed\"},{\"year\":2029,\"target_value\":\"Curriculum Review Completed\"}]}}]},{\"kra_id\":\"KRA 3\",\"kra_title\":\"Quality and Relevance of Instruction\",\"guiding_principle\":\"Excellence and Relevance in Education\",\"initiatives\":[{\"id\":\"KRA3-KPI1\",\"key_performance_indicator\":{\"outputs\":\"above national passing rate for all board programs\",\"outcomes\":\"improved average percentage of passers in the licensure examination above the national passing percentage\"},\"strategies\":[\"establish an institutional in-house review center\",\"strict implementation of admission and retention policies\",\"awarding of incentives and recognition to top successful examinees\"],\"programs_activities\":[\"in-house review programs\",\"incentive grant program\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\",\"Quality Assurance Unit\"],\"targets\":{\"type\":\"text_condition\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"Above National Passing Rate\"},{\"year\":2026,\"target_value\":\"Above National Passing Rate\"},{\"year\":2027,\"target_value\":\"Above National Passing Rate\"},{\"year\":2028,\"target_value\":\"Above National Passing Rate\"},{\"year\":2029,\"target_value\":\"Above National Passing Rate\"}]}},{\"id\":\"KRA3-KPI2\",\"key_performance_indicator\":{\"outputs\":\"percentage of OJT students in related industries/institutions\",\"outcomes\":\"enhanced practical learning of students\"},\"strategies\":[\"promote student welfare through relevant programs and support services\"],\"programs_activities\":[\"host events such as career fairs, industry panels, or networking sessions\",\"regularly assess the effectiveness of OJT programs through feedback from students, industry partners, and academic staff\",\"offer incentives or recognition for industry partners who provide OJT opportunities\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":80},{\"year\":2026,\"target_value\":83},{\"year\":2027,\"target_value\":85},{\"year\":2028,\"target_value\":88},{\"year\":2029,\"target_value\":90}]}},{\"id\":\"KRA3-KPI3\",\"key_performance_indicator\":{\"outputs\":\"100% compliance of Center of Flexible Learning\",\"outcomes\":\"resilience\"},\"strategies\":[\"provide market-driven programs through responsive, relevant, and comprehensive curricula\"],\"programs_activities\":[\"monitoring of the preparation and submission of SLMs\"],\"responsible_offices\":[\"Office of the Vice Presidents\",\"Information Communication and Technology Services\",\"Curriculum Instruction Development\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}},{\"id\":\"KRA3-KPI4\",\"key_performance_indicator\":{\"outputs\":\"number of courses integrated with extension learning technologies\",\"outcomes\":\"extended reach to provide quality service\"},\"strategies\":[\"build partnerships with local organizations, government agencies, and other stakeholders to enhance program reach and impact\",\"leverage the institutions expertise and resources to design and implement programs that address community needs\"],\"programs_activities\":[\"form MOU/MOA with community groups\",\"use faculty and staff expertise in relevant fields to create programs that capitalize on the institutions strengths\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Research, Extension and Innovation\",\"Deans\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":70},{\"year\":2026,\"target_value\":75},{\"year\":2027,\"target_value\":80},{\"year\":2028,\"target_value\":85},{\"year\":2029,\"target_value\":90}]}},{\"id\":\"KRA3-KPI5\",\"key_performance_indicator\":{\"outputs\":\"achieve 75% employment or entrepreneurial engagement rate among graduates 2 years after graduation, including those who start their own business or create employment opportunities (employment, entrepreneurial ventures)\",\"outcomes\":\"develop LSPU graduates who demonstrate high employability rate and are in demand across various sectors, while also functioning as key contributors to societal and economic development\"},\"strategies\":[\"enhance curriculum and program relevance\",\"strengthen career services and job\",\"alumni and employer feedback loop\"],\"programs_activities\":[\"annual graduate employability survey\",\"job fair and career expo\",\"alumni career support network\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Alumni Affairs and Placement Services\",\"Deans\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":73},{\"year\":2026,\"target_value\":73},{\"year\":2027,\"target_value\":74},{\"year\":2028,\"target_value\":74},{\"year\":2029,\"target_value\":75}]}},{\"id\":\"KRA3-KPI6\",\"key_performance_indicator\":{\"outputs\":\"continuous tracer studies that assess graduates' employability, mobility, entrepreneurial activities and international career opportunities\",\"outcomes\":[\" increased understanding of graduate employability and career trajectories leading to data-driven program improvements\",\"alumni engagement strengthened\"]},\"strategies\":[\"regularly conduct of tracer study, with integration of mobility and international opportunities\",\"graduate engagement and follow-up\"],\"programs_activities\":[\"graduate support career services development\",\"development of Alumni Management System\",\"tracer studies and graduate career mobility tracking\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Alumni Affairs and Placement Services\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":1},{\"year\":2028,\"target_value\":1},{\"year\":2029,\"target_value\":1}]}},{\"id\":\"KRA3-KPI7\",\"key_performance_indicator\":{\"outputs\":\"percentage of compliance with IA-based instrument for other campuses\",\"outcomes\":[\"increased compliance rates\",\"standardized processes\"]},\"strategies\":[\"training and awareness\",\"standardization\",\"monitoring and reporting\",\"feedback and improvement\"],\"programs_activities\":[\"compliance workshops\",\"audit simulations\",\"compliance audits\",\"feedback sessions\"],\"responsible_offices\":[\"Office of the Vice Presidents\",\"Quality Assurance Unit\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2028,\"target_value\":\"100% compliance Institutional Accreditation all campus\"}]}},{\"id\":\"KRA3-KPI8\",\"key_performance_indicator\":{\"outputs\":\"percentage of compliance with SUC Level IV based on SUC Levelling  Instrument\",\"outcomes\":[\"increased compliance rates\",\"standardized processes\"]},\"strategies\":[\"training and awareness\",\"standardization\",\"monitoring and reporting\",\"feedback and improvement\"],\"programs_activities\":[\"compliance workshops\",\"audit simulations\",\"compliance audits\",\"feedback sessions\"],\"responsible_offices\":[\"Office of the Vice Presidents\",\"Quality Assurance Unit\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2029,\"target_value\":\"SUC Level IV Compliance\"}]}},{\"id\":\"KRA3-KPI9\",\"key_performance_indicator\":{\"outputs\":\"programs accredited/candidate (Level 1 - 4)\",\"outcomes\":\"enhanced quality of education  and graduates competence\"},\"strategies\":[\"regularly review and update curricula to align with industry standards and technological advancements\",\"implement robust internal and external quality assurance mechanisms\",\"foster a culture of continuous improvement among faculty and staff\"],\"programs_activities\":[\"curriculum enhancement workshops\",\"faculty training and development programs\",\"research and innovation initiatives\",\"industry partnerships and internships\",\"student development programs\",\"community engagement and extension services\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Quality Assurance Unit\",\"Deans\",\"Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100,\"note\":\"accredited programs\"}]}},{\"id\":\"KRA3-KPI10\",\"key_performance_indicator\":{\"outputs\":\"COD/COE program\",\"outcomes\":[\"compliance rates\",\"standardized processes\"]},\"strategies\":[\"training and awareness\",\"standardization\",\"monitoring and reporting\",\"feedback and improvement\",\"benchmark on top universities\"],\"programs_activities\":[\"assess the current state of the program and perform a gap analysis to identify areas that need improvement\",\"revise the curriculum, course content, and program structure\",\"ensure that faculty members meet the required qualifications\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\",\"Quality Assurance Unit\",\"Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2029,\"target_value\":1,\"note\":\"1 new COD/COE\"}]}},{\"id\":\"KRA3-KPI11\",\"key_performance_indicator\":{\"outputs\":\"percentage of developed instructional material (IM) per program\",\"outcomes\":\"increased quantity and quality of IM\"},\"strategies\":[\"professional development: provide ongoing training for teachers on creating high-quality instructional materials\",\"feedback mechanisms: Implement systems for regular feedback on instructional materials from both teachers and students.\"],\"programs_activities\":[\"workshops and training sessions: regular workshops focused on instructional design, use of digital tools, and curriculum alignment\",\"peer review sessions: Scheduled sessions where teachers can review and provide feedback on each others materials.\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"Deans\",\"Quality Assurance Unit\",\"Curriculum and Instruction Development Unit\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":30},{\"year\":2026,\"target_value\":33},{\"year\":2027,\"target_value\":35},{\"year\":2028,\"target_value\":38},{\"year\":2029,\"target_value\":40}]}},{\"id\":\"KRA3-KPI12\",\"key_performance_indicator\":{\"outputs\":\"ISO certification for Management Systems for Educational Organizations (ISO 21001:2018) and Quality Management System (ISO 9001:2015))\",\"outcomes\":[\"increased compliance rates\",\"standardized processes\"]},\"strategies\":[\"training and awareness\",\"standardization\",\"monitoring and reporting\",\"feedback and improvement\"],\"programs_activities\":[\"compliance workshops\",\"audit simulations\",\"compliance audits\",\"feedback sessions\"],\"responsible_offices\":[\"Office of the Vice Presidents\",\"Quality Assurance Unit\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"Recertification\"},{\"year\":2026,\"target_value\":\"Recertification\"},{\"year\":2027,\"target_value\":\"Recertification\"},{\"year\":2028,\"target_value\":\"Recertification\"},{\"year\":2029,\"target_value\":\"Recertification\"}]}},{\"id\":\"KRA3-KPI13\",\"key_performance_indicator\":{\"outputs\":\"number of completed GAD-initiated programs every year\",\"outcomes\":\"4 activities/year\"},\"strategies\":[\"conduct trainings, seminars, fora, focus group discussions\"],\"programs_activities\":[\"trainings\",\"seminars\",\"fora\",\"focus group discussions\"],\"responsible_offices\":[\"Offices of the Vice President\",\"Gender and Development\"],\"targets\":{\"type\":\"count\",\"unit_basis\":\"per year\",\"timeline_data\":[{\"year\":2025,\"target_value\":4},{\"year\":2026,\"target_value\":4},{\"year\":2027,\"target_value\":4},{\"year\":2028,\"target_value\":4},{\"year\":2029,\"target_value\":4}]}},{\"id\":\"KRA3-KPI14\",\"key_performance_indicator\":{\"outputs\":\"percentage of faculty and staff who attended GAD mainstreaming and issue\",\"outcomes\":\"95% faculty and staff attended the GAD mainstreaming and issue\"},\"strategies\":[\"conduct of training/seminar on GAD mainstreaming\"],\"programs_activities\":[\"trainings\",\"seminars\",\"fora\",\"focus group discussions\"],\"responsible_offices\":[\"HRMO\",\"Gender and Development\",\"Offices of the Vice President\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":95},{\"year\":2026,\"target_value\":95},{\"year\":2027,\"target_value\":95},{\"year\":2028,\"target_value\":95},{\"year\":2029,\"target_value\":95}]}},{\"id\":\"KRA3-KPI15\",\"key_performance_indicator\":{\"outputs\":\"number of enrolled foreign students\",\"outcomes\":[\"increased number of foreign students graduates across curriculum and employment after a year or two of graduation\",\"students very satisfactory evaluation\"]},\"strategies\":[\"offering English as a Foreign Language (EFL) as a coursework to foreign students who come for cultural immersion and summer camps, and freshmen who will enroll in any curricular program\",\"offering lower tuition and other related fees\",\"offering or assisting students in finding scholarships\",\"offering ODL\"],\"programs_activities\":[\"enrolment of students\",\"orientation for foreign students\",\"application or renewal of visa and other Bureau of Immigration & DFA documents\",\"development of Instructional materials\",\"educational tours\",\"close monitoring of students performance\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"International/Local Affairs\",\"Deans\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":5,\"note\":\"new students per year\"},{\"year\":2026,\"target_value\":5,\"note\":\"new students per year\"}]}},{\"id\":\"KRA3-KPI16\",\"key_performance_indicator\":{\"outputs\":\"number of Student enrolled in CHED/RDC Priority programs\",\"outcomes\":\"increased the number of student enrolled in CHED/RDC priority programs\"},\"strategies\":[\"enhanced outreach and awareness campaigns\",\"program enhancement and innovation\",\"enhancing student support services\"],\"programs_activities\":[\"conduct of outreach and awareness campaign\",\"regularly update and enhance the curriculum of priority programs\",\"provide strong academic advising services, mentoring, monitoring and counseling\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"International/Local Affairs\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":55},{\"year\":2026,\"target_value\":57},{\"year\":2027,\"target_value\":58},{\"year\":2028,\"target_value\":60},{\"year\":2029,\"target_value\":62}]}}]},{\"kra_id\":\"KRA 4\",\"kra_title\":\"College and Office International Activities and Projects\",\"guiding_principle\":\"Excellence and Relevance in Education\",\"initiatives\":[{\"id\":\"KRA4-KPI1\",\"key_performance_indicator\":{\"outputs\":\"number of MOUs/MOAs per year with top 1000 World Universities\",\"outcomes\":\"increased number of international partners including one (1 per year) polytechnic university in the ASEAN region and/or international university among the top 1000 universities in the world\"},\"strategies\":[\"invite prospective international university\",\"renew old partnerships with performing universities\",\"promote LSPU through social media\",\"international conferences attendees ROI\"],\"programs_activities\":[\"benchmarking\",\"employees participation in international conferences\",\"constant and continued communications with the prospective partner\",\"endorsement to internal and external Offices & BOR\",\"signing\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"International/Local Affairs\",\"Deans/Colleges\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":2},{\"year\":2026,\"target_value\":2},{\"year\":2027,\"target_value\":2},{\"year\":2028,\"target_value\":2},{\"year\":2029,\"target_value\":2}]}},{\"id\":\"KRA4-KPI2\",\"key_performance_indicator\":{\"outputs\":\"internationalization accomplishments (per college/office)\",\"outcomes\":[\"recognition from national and international award-giving organizations\",\"impact on the community\",\"secured position in World University Ranking\"]},\"strategies\":[\"coordinate university-wide international initiatives to ensure integration and coordination across the Universitys international partnerships, collaborations, programs, and services\"],\"programs_activities\":[\"monitoring of international activities project\",\"regular meetings with deans & directors\",\"public promotions of internationalization accomplishments\"],\"responsible_offices\":[\"Office of the Vice President for Academic Affairs\",\"International Local/Affairs\",\"Information Office\",\"Deans\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":2},{\"year\":2027,\"target_value\":3},{\"year\":2028,\"target_value\":4},{\"year\":2029,\"target_value\":5}]}}]},{\"kra_id\":\"KRA 5\",\"kra_title\":\"Research, Extension, and Innovation Productivity\",\"guiding_principle\":\"Advancing Research Excellence and Community Engagement\",\"initiatives\":[{\"id\":\"KRA5-KPI1\",\"key_performance_indicator\":{\"outputs\":\"number of IP (patent, UM, copyrights, etc.) generated\",\"outcomes\":\"IP Protections and IP registrations of the university researches\"},\"strategies\":[\"assessment of researches for IP registration for potential commercialization\"],\"programs_activities\":[\"conduct of IP foundation courses, patent search trainings and patent draft training\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget and Finance\",\"Center of Innovation and Emerging Technologies\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":47},{\"year\":2026,\"target_value\":50},{\"year\":2027,\"target_value\":53},{\"year\":2028,\"target_value\":56},{\"year\":2029,\"target_value\":59}]}},{\"id\":\"KRA5-KPI2\",\"key_performance_indicator\":{\"outputs\":\"number of income-generating research-based products/outputs\",\"outcomes\":\"establish more innovative research (faculty and students) for income generation of the university, continuity of technology commercialization\"},\"strategies\":[\"secure income generating projects to strengthen industry-academic partnerships through collaboration\",\"focus on market-relevant research to identify gaps, trends, and opportunities to addressed through research-based products\",\"enhance technology transfer offices to support researchers in the commercialization process, including patenting, licensing, and marketing\"],\"programs_activities\":[\"technology transfer programs that focused on transferring research innovations, including support for patenting, licensing, and partnership development\",\"incubation and acceleration programs awareness campaign\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget and Finance\",\"Center of Innovation and Emerging Technologies\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":6},{\"year\":2026,\"target_value\":8},{\"year\":2027,\"target_value\":10},{\"year\":2028,\"target_value\":12},{\"year\":2029,\"target_value\":14}]}},{\"id\":\"KRA5-KPI3\",\"key_performance_indicator\":{\"outputs\":\"number of spinoff/start-up companies established for faculty and students\",\"outcomes\":[\"commercialization journey will encourage faculty researchers to enroll in the incubation process\",\"spin-off companies will help the community develop entrepreneurs to improved their livelihood and to improve economic status\"]},\"strategies\":[\"promote a culture of innovation  foster a culture that encourages innovation and risktaking by celebrating successful start-ups and promoting entrepreneurial success stories\",\"craft policy advocacy that supports start-ups and spin-offs, such as tax incentives, research funding, and supportive regulatory frameworks\",\"enhance IP policy manual on incentives/benefits for technology developers/creators\"],\"programs_activities\":[\"value formation through training and development for sustainability of entrepreneurial mindset\",\"offer entrepreneurship courses through seminars and workshop, business development, and commercialization for faculty and students\",\"Commercialization Assistance: Provide resources and support for turning research findings into commercial products\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget Office\",\"Center of Innovation and Emerging Technologies\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":2},{\"year\":2026,\"target_value\":3},{\"year\":2027,\"target_value\":4},{\"year\":2028,\"target_value\":5},{\"year\":2029,\"target_value\":6}]}},{\"id\":\"KRA5-KPI4\",\"key_performance_indicator\":{\"outputs\":\"number of research-based programs/projects delivered for extension to the community\",\"outcomes\":\"enhanced local knowledge and 3-5 year sustainable solutions addressing community needs\"},\"strategies\":[\"conduct in-house review of PPAs\",\"enhance REI funding and support\"],\"programs_activities\":[\"annual REI proposal writeshop\",\"monitoring of on-going PPAs\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Extension and Training Services\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":3},{\"year\":2026,\"target_value\":4},{\"year\":2027,\"target_value\":5},{\"year\":2028,\"target_value\":6},{\"year\":2029,\"target_value\":7}]}},{\"id\":\"KRA5-KPI5\",\"key_performance_indicator\":{\"outputs\":\"number of faculty members with national/international awards and recognition\",\"outcomes\":\"personal and institutional prestige gained and will establish the credibility that are acknowledged by the community\"},\"strategies\":\"support for REI professional development and strengthen collaboration and partnerships with international and national organizations\",\"programs_activities\":\"nominations to REI-related award recognitions\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget Office\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":2},{\"year\":2028,\"target_value\":2},{\"year\":2029,\"target_value\":2}]}},{\"id\":\"KRA5-KPI6\",\"key_performance_indicator\":{\"outputs\":\"number of institutional awards and recognition\",\"outcomes\":\"institutional prestige gained and will help leverage to get more funds through the trust of the funding agencies\"},\"strategies\":\"partnerships with international and national institution and organizations\",\"programs_activities\":[\"continuous effort with IP filling and registration\",\"excellent service of REI unit\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":2},{\"year\":2028,\"target_value\":2},{\"year\":2029,\"target_value\":2}]}},{\"id\":\"KRA5-KPI7\",\"key_performance_indicator\":{\"outputs\":\"number of research based policy recommendations on Fisheries, Agriculture, Academic, Gender & Development, and other emerging disciplines\",\"outcomes\":\"data-driven decisions and policies\"},\"strategies\":\"collaboration with government and industry stakeholders\",\"programs_activities\":\"conduct of trainings for policy making and establishment of a compendium for policy briefs\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":2},{\"year\":2026,\"target_value\":2},{\"year\":2027,\"target_value\":2},{\"year\":2028,\"target_value\":3},{\"year\":2029,\"target_value\":3}]}},{\"id\":\"KRA5-KPI8\",\"key_performance_indicator\":{\"outputs\":\"number of university refereed research journals\",\"outcomes\":\"enhancing the institution's academic reputation and contributing to global knowledge dissemination\"},\"strategies\":[\"promotion of the journal to attract highquality submissions\",\"given incentives to faculty researchers who published, and incentives to faculty serving as evaluators\"],\"programs_activities\":\"establish a peer-review system and support for a dedicated editorial board and review panel\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":1},{\"year\":2028,\"target_value\":1},{\"year\":2029,\"target_value\":1}]}},{\"id\":\"KRA5-KPI9\",\"key_performance_indicator\":{\"outputs\":\"number of faculty research outputs\",\"outcomes\":\"greater contribution to academic advancements and practical solutions for societal challenges\"},\"strategies\":\"deliver quality programs, projects and activities that will lead to extension, commercialization, and policy recommendations\",\"programs_activities\":\"monitoring of internally and externally funded research\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget Office\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":150},{\"year\":2026,\"target_value\":152},{\"year\":2027,\"target_value\":155},{\"year\":2028,\"target_value\":157},{\"year\":2029,\"target_value\":160}]}},{\"id\":\"KRA5-KPI10\",\"key_performance_indicator\":{\"outputs\":\"number of research findings presented in reputable conferences\",\"outcomes\":\"increased visibility and recognition of research, fostering collaborations and advancing knowledge through presentations at reputable conferences\"},\"strategies\":\"provide research presentation grants and target networking opportunities\",\"programs_activities\":[\"endorse faculty researchers to international and national conferences\",\"conduct institutional REI conferences\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":15},{\"year\":2026,\"target_value\":16},{\"year\":2027,\"target_value\":20},{\"year\":2028,\"target_value\":20},{\"year\":2029,\"target_value\":24}]}}]},{\"kra_id\":\"KRA 6\",\"kra_title\":\"Research, Extension, and Innovation Linkages\",\"guiding_principle\":\"Advancing Research Excellence and Community Engagement\",\"initiatives\":[{\"id\":\"KRA6-KPI1\",\"key_performance_indicator\":{\"outputs\":\"number of active partnerships with LGUs, industries, NGOs, NGAs, SMEs and other stakeholders\",\"outcomes\":[\"strong linkages with partner agencies\",\"enhance existing relations with community and partner agencies, locally and internationally\"]},\"strategies\":[\"increase and intensify linkages with partner institutions, community stakeholders and industries, local and international, for REI PPAs\"],\"programs_activities\":[\"conduct of needs assessments with potential partner agencies\",\"conduct of PPAs requested by partner agencies\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"count\",\"unit_basis\":\"total active\",\"timeline_data\":[{\"year\":2025,\"target_value\":120,\"note\":\"10 existing + 20 new\"},{\"year\":2026,\"target_value\":160},{\"year\":2027,\"target_value\":220},{\"year\":2028,\"target_value\":300},{\"year\":2029,\"target_value\":400}]}},{\"id\":\"KRA6-KPI2\",\"key_performance_indicator\":{\"outputs\":\"number of MOA/MOU with established or organized associations\",\"outcomes\":\"shared resources\"},\"strategies\":[\"forge MOA/MOU with all the partner agencies\"],\"programs_activities\":[\"conduct of REI PPAs with partner agencies\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"count\",\"unit_basis\":\"total active\",\"timeline_data\":[{\"year\":2025,\"target_value\":100,\"note\":\"80 existing + 20 new\"},{\"year\":2026,\"target_value\":130},{\"year\":2027,\"target_value\":170},{\"year\":2028,\"target_value\":220},{\"year\":2029,\"target_value\":280}]}}]},{\"kra_id\":\"KRA 7\",\"kra_title\":\"Research, Extension, and Innovation Resources\",\"guiding_principle\":\"Advancing Research Excellence and Community Engagement\",\"initiatives\":[{\"id\":\"KRA7-KPI1\",\"key_performance_indicator\":{\"outputs\":\"technologies/innovations adopted by the intended stakeholders. The adoption by which people become users of a technology or product, that is usable and useful and enable them to become long-term business goals\",\"outcomes\":\"increased number of technology/innovation on adopters\"},\"strategies\":[\"ensure the adoption of the technologies/innovations by the intended stakeholders\"],\"programs_activities\":[\"conduct PPAs that are needed and are beneficial to the targeted stakeholders\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Center of Innovation and Emerging Technologies\",\"Extension and Training Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":6},{\"year\":2026,\"target_value\":8},{\"year\":2027,\"target_value\":10},{\"year\":2028,\"target_value\":12},{\"year\":2029,\"target_value\":14}]}},{\"id\":\"KRA7-KPI2\",\"key_performance_indicator\":{\"outputs\":\"number of generated partnerships from externally-funded research\",\"outcomes\":\"sustainable projects and improved REI facilities\"},\"strategies\":[\"establish partnership with industry players, policy, and innovation centers\"],\"programs_activities\":[\"research grants and projects\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":5},{\"year\":2026,\"target_value\":7},{\"year\":2027,\"target_value\":9},{\"year\":2028,\"target_value\":11},{\"year\":2029,\"target_value\":13}]}},{\"id\":\"KRA7-KPI3\",\"key_performance_indicator\":{\"outputs\":\"established 5 state-of-the-art laboratories on fisheries, agriculture, and otheremerging disciplines\",\"outcomes\":\"more technology innovations\"},\"strategies\":[\"establish partnership with industry players, policy, and innovation center\"],\"programs_activities\":[\"submission of proposal to funding agencies\",\"establishment of REI Centers\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Project Management Office\",\"Extension and Innovation Unit\",\"Planning Office\",\"Budget and Finance Unit\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":1},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":1},{\"year\":2028,\"target_value\":1},{\"year\":2029,\"target_value\":1}]}},{\"id\":\"KRA7-KPI4\",\"key_performance_indicator\":{\"outputs\":\"number of operational/institutionalized research and development centers\",\"outcomes\":\"more technology innovations\"},\"strategies\":\"established partnership with industry players\",\"programs_activities\":[\"submission of proposal to funding agencies\",\"establishment of REI Centers\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research and Development Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":0},{\"year\":2026,\"target_value\":1},{\"year\":2027,\"target_value\":1},{\"year\":2028,\"target_value\":1},{\"year\":2029,\"target_value\":1}]}},{\"id\":\"KRA7-KPI5\",\"key_performance_indicator\":{\"outputs\":\"total income from commercialized technologies (pesos)\",\"outcomes\":[\"subsidized services of the University\",\"encourage faculty researchers to enroll in the incubation process\"]},\"strategies\":[\"market expansion thru segment your market that tailor to technology that meet the specific needs of different market segments\",\"innovations - continually improved researches\"],\"programs_activities\":[\"innovation and commercialization programs thru commercialization grants\",\"technology transfer programs\",\"entrepreneurship workshops\",\"incubation and acceleration programs\",\"entrepreneurship workshops and seminars: conduct training sessions on entrepreneurship, business development, and commercialization strategies tailored for researchers and innovators\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Research, Extension and Innovation Unit\"],\"targets\":{\"type\":\"financial\",\"currency\":\"PHP\",\"timeline_data\":[{\"year\":2025,\"target_value\":375000},{\"year\":2026,\"target_value\":425000},{\"year\":2027,\"target_value\":475000},{\"year\":2028,\"target_value\":525000},{\"year\":2029,\"target_value\":550000}]}}]},{\"kra_id\":\"KRA 8\",\"kra_title\":\"Service to the Community\",\"guiding_principle\":\"Advancing Research Excellence and Community Engagement\",\"initiatives\":[{\"id\":\"KRA8-KPI1\",\"key_performance_indicator\":{\"outputs\":\"extension programs organized and supported, consistent with mandated and priority programs\",\"outcomes\":\"improved quality of life of the target beneficiaries\"},\"strategies\":\"ensure that extension programs/projects to be conducted are in line with the expertise of the faculty, and at the same time supports the mandated and priority programs offered by the University\",\"programs_activities\":[\"conduct of needs assessment among target beneficiaries\",\"conduct of in-house review for proposals\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Extension and Training Services\",\"Budget and Finance Unit\",\"SAO Finance\"],\"targets\":{\"type\":\"count\",\"note\":\"new programs\",\"timeline_data\":[{\"year\":2025,\"target_value\":40},{\"year\":2026,\"target_value\":50},{\"year\":2027,\"target_value\":60},{\"year\":2028,\"target_value\":70},{\"year\":2029,\"target_value\":80}]}},{\"id\":\"KRA8-KPI2\",\"key_performance_indicator\":{\"outputs\":\"number of GAD-related research and extension PPAs\",\"outcomes\":\"improved quality of life of beneficiaries increase in the number of GADrelated research and extension PPAs\"},\"strategies\":\"conduct gender research and extension workshops/write shops\",\"programs_activities\":\"implementation of GAD-related REI programs, projects, and activities\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Gender and Development Office\",\"SAO Finance\",\"Budget and Finance\",\"Research and Development Services\",\"Extension and Training Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":17},{\"year\":2026,\"target_value\":19},{\"year\":2027,\"target_value\":20},{\"year\":2028,\"target_value\":23},{\"year\":2029,\"target_value\":25}]}},{\"id\":\"KRA8-KPI3\",\"key_performance_indicator\":{\"outputs\":\"number of trainees weighted by the length of training\",\"outcomes\":[\"application of skills learned for employment or livelihood\",\"employment or entrepreneurial activities that resulted from training\"]},\"strategies\":\"ensure conduct of PPAs that are beneficial to community\",\"programs_activities\":[\"conduct PPAs that are requested by the partners agencies\",\"conduct of BOR-approved extension programs/projects\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"SAO Finance\",\"Budget and Finance Unit\",\"Extension and Training Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":17630},{\"year\":2026,\"target_value\":18030},{\"year\":2027,\"target_value\":18230},{\"year\":2028,\"target_value\":18430},{\"year\":2029,\"target_value\":18630}]}},{\"id\":\"KRA8-KPI4\",\"key_performance_indicator\":{\"outputs\":\"number of extension information materials (IEC/ICT) produced, disseminated, and utilized\",\"outcomes\":\"increase in the number of extension information materials (IEC/ICT) produced, disseminated, and utilized\"},\"strategies\":\"ensure the production, dissemination, and utilization of IEC/ICT materials\",\"programs_activities\":[\"prepare IEC/ICT materials for each and every PPA\",\"provide IEC/ICT materials on the PPAs conducted\"],\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Extension and Training Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":30},{\"year\":2026,\"target_value\":35},{\"year\":2027,\"target_value\":40},{\"year\":2028,\"target_value\":45},{\"year\":2029,\"target_value\":50}]}},{\"id\":\"KRA8-KPI5\",\"key_performance_indicator\":{\"outputs\":\"100% of beneficiaries rate the training course/s and advisory services as satisfactory or higher in terms of quality and relevance\",\"outcomes\":\"quality and relevant extension PPAs\"},\"strategies\":\"boost the implementation of PPAs and ensure that such PPAs are of high quality and are relevant to the target beneficiaries\",\"programs_activities\":\"conduct of extension PPAs\",\"responsible_offices\":[\"Vice President for Research Development and Extension\",\"Extension and Training Services\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]},{\"kra_id\":\"KRA 9\",\"kra_title\":\"Implementation of Sustainable Governance\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA9-KPI1\",\"key_performance_indicator\":{\"outputs\":\"approved harmonized manuals of operations by 2029\",\"outcomes\":[\"efficient transactions, services, and operations\",\"standard procedure\"]},\"strategies\":[\"monitoring\",\"consultation\",\"crafting/revision of university policies, standards, and guidelines\"],\"programs_activities\":[\"enhance and extended technology infrastructure towards a wireless paperless and efficient computer network\",\"build capacity of staff on operations\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"All offices/units\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2029,\"target_value\":\"Approved Harmonized Manual\"}]}}]},{\"kra_id\":\"KRA 10\",\"kra_title\":\"Transforming into Green University\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA10-KPI1\",\"key_performance_indicator\":{\"outputs\":\"100% facilities compliant with green building code by 2029\",\"outcomes\":\"climate-change conscious environment\"},\"strategies\":[\"assessment and rehabilitation of facilities\",\"adaptation of renewable energy like solar enery (solar panels)\",\"establishment of sustainable waste management system\",\"construction of MRF\"],\"programs_activities\":[\"implementation of LUDIP\",\"implementation of waste management system\"],\"responsible_offices\":[\"Office of the University President\",\"Office of the Vice Presidents\",\"Office of the Campus Director\",\"Project Management Unit\",\"Planning Office\",\"General Services Unit\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]},{\"kra_id\":\"KRA 11\",\"kra_title\":\"Judicious Management of Human Resources\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA11-KPI1\",\"key_performance_indicator\":{\"outputs\":\"aligned and specialized doctorate graduates for faculty and master's degree for non-teaching personnel by 2029\",\"outcomes\":[\"faculty and non-teaching personnel are proficient in their subject and work areas\",\"doctorate/master degree holders/unit-earners\"]},\"strategies\":[\"strengthen intellectual capital\",\"strengthen professional development program\"],\"programs_activities\":[\"scholarship program, both internal and external\"],\"responsible_offices\":[\"Vice President for Administration\",\"HRMO\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":5},{\"year\":2026,\"target_value\":10},{\"year\":2027,\"target_value\":15},{\"year\":2028,\"target_value\":20},{\"year\":2029,\"target_value\":30}]}}]},{\"kra_id\":\"KRA 12\",\"kra_title\":\"Internationalized/Global University Stakeholders\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA12-KPI1\",\"key_performance_indicator\":{\"outputs\":\"10% students, 15% faculty, 5% staff are involved in intercountry mobility across the curriculum\",\"outcomes\":\"increase number of students, staff and faculty involved in intercountry mobility across the curriculum\"},\"strategies\":[\"facilitate the early endorsement of employees travels\",\"offer incentives/recognition to faculty and staff who participate in international programs\",\"scout and identify international conferences held in the Philippines\"],\"programs_activities\":[\"attendance/Participation in international training programs, conferences or symposia\",\"co-organizing local and international training/seminar workshops and conferences.\"],\"responsible_offices\":[\"Office of the Vice Presidents\",\"International Local/Affairs\",\"All colleges and Offices\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":10,\"note\":\"students\"},{\"year\":2029,\"target_value\":15,\"note\":\"faculty\"},{\"year\":2029,\"target_value\":5,\"note\":\"staff\"}]}}]},{\"kra_id\":\"KRA 13\",\"kra_title\":\"Competitive Global Human Resources\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA13-KPI1\",\"key_performance_indicator\":{\"outputs\":\"increase in the percentage of certified faculty, personnel, and trainers (local and international certifications)\",\"outcomes\":\"graduates/professionals aligned or sustainable to the needs of the industry\"},\"strategies\":[\"offer local and international scholarships\",\"faculty and staff development plan\"],\"programs_activities\":[\"submission of application and screening\",\"partnership scholarship with external funding agencies\"],\"responsible_offices\":[\"Vice President for Administration\",\"HRMO\",\"Office of the Campus Directors\",\"International/Local Affairs\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":5},{\"year\":2026,\"target_value\":10},{\"year\":2027,\"target_value\":15},{\"year\":2028,\"target_value\":20},{\"year\":2029,\"target_value\":25}]}},{\"id\":\"KRA13-KPI2\",\"key_performance_indicator\":{\"outputs\":\"95% of positions filled by 2029\",\"outcomes\":\"university is operating at maximum capacity a.) for personnel - efficiency of transactions b.) for faculties - proportion of student to faculty members\"},\"strategies\":[\"revisit compensation packages based on existing laws in industry\"],\"programs_activities\":[\"competency-based recruitment\",\"job satisfaction\"],\"responsible_offices\":[\"Vice President for Administration\",\"HRMO\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":80},{\"year\":2026,\"target_value\":82},{\"year\":2027,\"target_value\":85},{\"year\":2028,\"target_value\":90},{\"year\":2029,\"target_value\":95}]}},{\"id\":\"KRA13-KPI3\",\"key_performance_indicator\":{\"outputs\":\"100% faculty and staff attended health and wellness program twice a week during school days\",\"outcomes\":\"improvements in fitness levels, weight management, disease prevention, and overall vitality\"},\"strategies\":[\"conduct health and wellness program twice a week\",\"survey on the wellness program to be focus on\"],\"programs_activities\":[\"health and wellness program for faculty and staff\"],\"responsible_offices\":[\"Vice President for Administration\",\"HRMO\",\"Office of the Campus Directors\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]},{\"kra_id\":\"KRA 14\",\"kra_title\":\"Improved Satisfaction Rating of the Students, Faculty, and Personnel\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA14-KPI1\",\"key_performance_indicator\":{\"outputs\":\"95% satisfaction rating on all services\",\"outcomes\":\"sustain very satisfactory or higher rating on all services annually\"},\"strategies\":[\"regular monitoring and ensuring that the client completes the CCSS survey form\",\"addressing the negative feedback from the client regarding the service of a unit\"],\"programs_activities\":[\"client satisfaction\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"Management Information System\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":95},{\"year\":2026,\"target_value\":95},{\"year\":2027,\"target_value\":95},{\"year\":2028,\"target_value\":95},{\"year\":2029,\"target_value\":95}]}}]},{\"kra_id\":\"KRA 15\",\"kra_title\":\"Certification and Compliance to Regulatory Requirements\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA15-KPI1\",\"key_performance_indicator\":{\"outputs\":\"100% of security personnel responsible for security equipment obtained the required licenses and certifications, demonstrating full compliance with regulatory requirements\",\"outcomes\":\"highly professional security personnel maintaining peace and order in all campuses\"},\"strategies\":[\"license of security personnel-in-charge to security equipment\"],\"programs_activities\":[\"ensure proper and legal use of security equipment\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"Security Management and Services\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]},{\"kra_id\":\"KRA 16\",\"kra_title\":\"Updating of Learning Materials and Facilities\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA16-KPI1\",\"key_performance_indicator\":{\"outputs\":\"increase in the percentage of subjects have at least 5 updated references, including books, journals, and electronic books available\",\"outcomes\":[\"higher user satisfaction\",\"electronic document downloads frequency\"]},\"strategies\":[\"revisit the Collection Development Plan and revise it for 2025-2029\",\"ensure that the fiduciary library funds only be used for the acquisition of Library Reference Material. Monitor and report\",\"prioritize the subscription to electronic databases with comprehensive subjects relevant to LSPU curricula\"],\"programs_activities\":[\"collection development program\",\"acquisition and linkages\"],\"responsible_offices\":[\"Vice President for Administration\",\"Library\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":70},{\"year\":2026,\"target_value\":75},{\"year\":2027,\"target_value\":80},{\"year\":2028,\"target_value\":85},{\"year\":2029,\"target_value\":90}]}},{\"id\":\"KRA16-KPI2\",\"key_performance_indicator\":{\"outputs\":\"new building for academic space for students\",\"outcomes\":\"go beyond the minimum standard of providing enough reading space to 10% of the student population\"},\"strategies\":[\"coordinate closely with design planning to ensure planned study spaces are up to standards set by AACCUP and CHED\",\"take feedback from students and library users\",\"create welldocumented project proposals with forecasts on student population\",\"begin planning the library system towards establishing various college or separate libraries.\"],\"programs_activities\":[\"library development plan\"],\"responsible_offices\":[\"Office of the University President\",\"Library\",\"Project Management Office\",\"Planning Office\",\"Vice President for Administration\"],\"targets\":{\"type\":\"milestone\",\"timeline_data\":[{\"year\":2025,\"target_value\":\"renovate the library to accommodate 250 students\"},{\"year\":2026,\"target_value\":\"planning and benchmarking for library building standards and organization of college libraries\"},{\"year\":2027,\"target_value\":\"long term planning and design of a system of libraries and academic spaces\"},{\"year\":2028,\"target_value\":\"Phase 1 of implementing immediate plans to increase library space\"},{\"year\":2029,\"target_value\":\"New buildings to accommodate at least 1,200 students\"}]}}]},{\"kra_id\":\"KRA 17\",\"kra_title\":\"Digital Transformation and Smart Campus Enablement\",\"guiding_principle\":\"Shaping a Sustainable Future\",\"initiatives\":[{\"id\":\"KRA17-KPI1\",\"key_performance_indicator\":{\"outputs\":\"100% of offices included in the coverage area of internet\",\"outcomes\":\"improved network speed and reliability\"},\"strategies\":[\"network infrastructure improvement/maintenance\"],\"programs_activities\":[\"connection of offices to the Universitys fiber backbone\",\"investment in high-quality networking devices that can retain the bandwidth and throughput of a gigabit network.\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the CampusDirectors\",\"Information Communication and Technology Services\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}},{\"id\":\"KRA17-KPI2\",\"key_performance_indicator\":{\"outputs\":\"100% of ICT-related projects/requests are procured/implemented\",\"outcomes\":\"enhanced performance and capacity of technology\"},\"strategies\":[\"futures planning\",\"procurement of ICT-related equipment\"],\"programs_activities\":[\"upgrade/maintenance of ICT equipment\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"Information Communication and Technology Services\",\"Procurement Bids and Awards\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":80},{\"year\":2026,\"target_value\":88},{\"year\":2027,\"target_value\":90},{\"year\":2028,\"target_value\":93},{\"year\":2029,\"target_value\":95}]}},{\"id\":\"KRA17-KPI3\",\"key_performance_indicator\":{\"outputs\":\"digitalized processes and systems in operation\",\"outcomes\":\"improved operational efficiency, with a measurable reduction in manual processes\"},\"strategies\":\"digitalization of manual workflows\",\"programs_activities\":[\"development, procurement and/or subscription of Information System modules to help in transformation of the manual processes which also aligns to the universitys ISSP\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"Information Communication and Technology Services\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":6},{\"year\":2026,\"target_value\":6},{\"year\":2027,\"target_value\":6},{\"year\":2028,\"target_value\":6},{\"year\":2029,\"target_value\":6}]}},{\"id\":\"KRA17-KPI4\",\"key_performance_indicator\":{\"outputs\":\"Conduct of orientations/workshops/training sessions for the end-users of digitalized process\",\"outcomes\":\"increased staff competency in using new technologies\"},\"strategies\":[\"develop comprehensive training programs to upskill staff and faculty\"],\"programs_activities\":[\"organize ICT-related workshops and training sessions for staff and faculty\"],\"responsible_offices\":[\"Vice President for Administration\",\"Office of the Campus Directors\",\"HRMO\",\"Information Communication and Technology\"],\"targets\":{\"type\":\"count\",\"timeline_data\":[{\"year\":2025,\"target_value\":2},{\"year\":2026,\"target_value\":2},{\"year\":2027,\"target_value\":2},{\"year\":2028,\"target_value\":2},{\"year\":2029,\"target_value\":2}]}}]},{\"kra_id\":\"KRA 18\",\"kra_title\":\"Risk Management and Compliance\",\"guiding_principle\":\"Resource Optimization and Management\",\"initiatives\":[{\"id\":\"KRA18-KPI1\",\"key_performance_indicator\":{\"outputs\":\"conducted risk assessments with zero incidence of non-compliance on financial issues\",\"outcomes\":\"smooth flow of operations and processes (full compliance)\"},\"strategies\":[\"ensure 0% incidence of non-compliance\",\"conduct regular risk assessments, internal audits, and third-party reviews\",\"Implement automated monitoring tools\",\"Provide ongoing compliance training and clear reporting channels\"],\"programs_activities\":[\"observe the protocol concerning spending and financial reporting\",\"comply with the required documentation, etc. regarding financial matters\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"text_condition\",\"timeline_data\":[{\"year\":2029,\"target_value\":\"Zero incidence of non-compliance\"}]}}]},{\"kra_id\":\"KRA 19\",\"kra_title\":\"Revenue Growth and Operational Efficiency\",\"guiding_principle\":\"Resource Optimization and Management\",\"initiatives\":[{\"id\":\"KRA19-KPI1\",\"key_performance_indicator\":{\"outputs\":\"increase in income generated from approved IGPs\",\"outcomes\":\"increased internal funding for special funds\"},\"strategies\":[\"identify and evaluate new IGP opportunities\",\"formulation of IGP manual and financial management framework\",\"regular monitoring,evaluation and audit\"],\"programs_activities\":[\"procurement planning; implementation\",\"monitoring of planned procurement activities\",\"evaluation\",\"policy and program making for IGP *proposal making/planning for new IGPs\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":5},{\"year\":2026,\"target_value\":5},{\"year\":2027,\"target_value\":7},{\"year\":2028,\"target_value\":9},{\"year\":2029,\"target_value\":11}]}},{\"id\":\"KRA19-KPI2\",\"key_performance_indicator\":{\"outputs\":\"reduction in operational costs\",\"outcomes\":\"funds can be allocated for other important projects\"},\"strategies\":[\"develop resource utilization plans\",\"regular inventory and preventive maintenance\"],\"programs_activities\":[\"procurement planning; implementation\",\"monitoring of planned procurement activities\",\"evaluation\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":2},{\"year\":2026,\"target_value\":4},{\"year\":2027,\"target_value\":6},{\"year\":2028,\"target_value\":8},{\"year\":2029,\"target_value\":10}]}}]},{\"kra_id\":\"KRA 20\",\"kra_title\":\"Related IGP Industry Engagement\",\"guiding_principle\":\"Resource Optimization and Management\",\"initiatives\":[{\"id\":\"KRA20-KPI1\",\"key_performance_indicator\":{\"outputs\":\"total revenue generated from partnerships and collaborations\",\"outcomes\":[\"acquired expertise and investments\",\"quality of partnership agreements\",\"increased in total revenue generated from strategic partnerships and collaborations\"]},\"strategies\":[\"resource and expertise sharing\",\"joint revenue-generating initiatives\",\"strengthen human resources, organizational, and financial capital of the university\",\"strengthen intellectual capital from capital royalties from developed technologies\"],\"programs_activities\":[\"consultancy and training\",\"joint ventures using developed technologies\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\",\"Extension and Training Services\"],\"targets\":{\"type\":\"financial\",\"currency\":\"PHP\",\"timeline_data\":[{\"year\":2025,\"target_value\":0},{\"year\":2026,\"target_value\":0},{\"year\":2027,\"target_value\":300000},{\"year\":2028,\"target_value\":330000},{\"year\":2029,\"target_value\":363000}]}},{\"id\":\"KRA20-KPI2\",\"key_performance_indicator\":{\"outputs\":\"increase in net income from non-traditional sources\",\"outcomes\":\"generate additional income from non-traditional sources\"},\"strategies\":[\"create entrepreneurial ventures\",\"strengthen the existing income-generating projects\"],\"programs_activities\":[\"events place\",\"coffee shops\",\"rental spaces\",\"commercialization of research products and services\",\"printing and binding\",\"gasoline station\",\"clothing shop\",\"grocery-style store\"],\"responsible_offices\":[\"Vice President for Administration\",\"Business Affairs Office\",\"SAO Finance\",\"Budget Office\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2025,\"target_value\":5},{\"year\":2026,\"target_value\":8},{\"year\":2027,\"target_value\":12},{\"year\":2028,\"target_value\":20},{\"year\":2029,\"target_value\":30}]}}]},{\"kra_id\":\"KRA 21\",\"kra_title\":\"Responsive Management of Resources\",\"guiding_principle\":\"Resource Optimization and Management\",\"initiatives\":[{\"id\":\"KRA21-KPI1\",\"key_performance_indicator\":{\"outputs\":\"100% budget utilization rate (disbursement)\",\"outcomes\":\"established functional and operational system for resource generation and management of resources\"},\"strategies\":[\"ensure prudent use of resources\",\"improve spending efficiency, absorptive capacity\"],\"programs_activities\":\"monitoring of the planned procurement activities\",\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}},{\"id\":\"KRA21-KPI2\",\"key_performance_indicator\":{\"outputs\":\"100% budget utilization rate (obligation)\",\"outcomes\":\"established functional and operational system for resource generation and management of resources\"},\"strategies\":[\"ensure prudent use of resources\",\"Improve the spending efficiency; absorptive capacity\"],\"programs_activities\":[\"implementation of the planned programs, projects, and activities (PPAs)\",\"monitoring of planned procurement activities\",\"Conduct a workshop for all the offices involved\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]},{\"kra_id\":\"KRA 22\",\"kra_title\":\"Management of Financial Resources\",\"guiding_principle\":\"Resource Optimization and Management\",\"initiatives\":[{\"id\":\"KRA22-KPI1\",\"key_performance_indicator\":{\"outputs\":\"internally generated income\",\"outcomes\":\"established functional and operational system for resource generation and management of resources\"},\"strategies\":[\"availability of a systematic plan of action to justify every budget proposal\",\"continual improvement process\"],\"programs_activities\":[\"submit justifications to the Department of Budget and Management for the release of the actual billing\",\"training and seminars for the human resources\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"financial\",\"currency\":\"PHP\",\"timeline_data\":[{\"year\":2025,\"target_value\":263426000},{\"year\":2026,\"target_value\":277000000},{\"year\":2027,\"target_value\":291000000},{\"year\":2028,\"target_value\":320000000},{\"year\":2029,\"target_value\":336000000}]}},{\"id\":\"KRA22-KPI2\",\"key_performance_indicator\":{\"outputs\":\"100% fund utilization on infrastructure projects\",\"outcomes\":[\"improved productivity of the human resources\",\"developed facilities, services, and systems\"]},\"strategies\":\"strengthen construction or manufacture capital\",\"programs_activities\":[\"monitoring of the planned programs\",\"conduct of Early Procurement Activities (EPA)\",\"approval of PPMP/APP\",\"BOR approval\"],\"responsible_offices\":[\"Vice President for Administration\",\"Project Management Unit\",\"Planning Unit\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}},{\"id\":\"KRA22-KPI3\",\"key_performance_indicator\":{\"outputs\":\"100% fund utilization on repairs/rehabilitation of buildings, vehicles, drainage and roads, land, material recovery facilities and electrical facilities\",\"outcomes\":[\"less funds for repair and rehabilitation\",\"less disruption to operation\"]},\"strategies\":[\"strengthen construction or manufacture capital\",\"implement regular preventive maintenance\"],\"programs_activities\":[\"conduct of Early Procurement Activities (EPA)\",\"approval of the Head of Agency\",\"approval of PPMP/APP\",\"bidding\",\"contracting by Administration\"],\"responsible_offices\":[\"Vice President for Administration\",\"General Services Office\",\"SAO Finance\",\"Budget Office\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}},{\"id\":\"KRA22-KPI4\",\"key_performance_indicator\":{\"outputs\":\"100% fund utilization in the acquisition of new equipment\",\"outcomes\":[\"responsive to the needs of the end-users\",\"efficiency in the procurement of equipment needed\"]},\"strategies\":[\"assessment of the needs of the end-users\",\"consider the budget and maintenance cost\"],\"programs_activities\":[\"conduct of Early Procurement Activities (EPA)\",\"approval of the Head of Agency\",\"approval of PPMP/APP\",\"bidding\"],\"responsible_offices\":[\"Vice President for Administration\",\"Budget Office\",\"SAO Finance\"],\"targets\":{\"type\":\"percentage\",\"timeline_data\":[{\"year\":2029,\"target_value\":100}]}}]}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 1561, "column": 68348}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1565, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/qpro/target-board-panel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Loader2, Target, CheckCircle2, AlertCircle, Clock } from \"lucide-react\"\r\nimport strategicPlan from \"@/lib/data/strategic_plan.json\"\r\nimport AuthService from \"@/lib/services/auth-service\"\r\n\r\ninterface TargetBoardPanelProps {\r\n  year: number\r\n  quarter: number\r\n  unitId: string\r\n  unitName: string\r\n  refreshTrigger?: number\r\n}\r\n\r\ninterface Initiative {\r\n  id: string\r\n  key_performance_indicator: {\r\n    outputs: string\r\n    outcomes: string\r\n  }\r\n  strategies: string[]\r\n  programs_activities: string[]\r\n  responsible_offices: string[]\r\n  targets: {\r\n    type: string\r\n    timeline_data: Array<{\r\n      year: number\r\n      target_value: string | number\r\n      milestones?: string[]\r\n    }>\r\n  }\r\n}\r\n\r\ninterface KRA {\r\n  kra_id: string\r\n  kra_title: string\r\n  guiding_principle: string\r\n  initiatives: Initiative[]\r\n}\r\n\r\ninterface AnalysisData {\r\n  id: string\r\n  kras: any[]\r\n  achievementScore?: number\r\n}\r\n\r\nconst KRA_COLORS: { [key: string]: string } = {\r\n  \"KRA 1\": \"bg-blue-500\",\r\n  \"KRA 2\": \"bg-green-500\",\r\n  \"KRA 3\": \"bg-purple-500\",\r\n  \"KRA 4\": \"bg-orange-500\",\r\n  \"KRA 5\": \"bg-red-500\",\r\n  \"KRA 6\": \"bg-teal-500\",\r\n  \"KRA 7\": \"bg-indigo-500\",\r\n  \"KRA 8\": \"bg-pink-500\",\r\n  \"KRA 9\": \"bg-cyan-500\",\r\n  \"KRA 10\": \"bg-lime-500\",\r\n  \"KRA 11\": \"bg-amber-500\",\r\n  \"KRA 12\": \"bg-emerald-500\",\r\n  \"KRA 13\": \"bg-violet-500\",\r\n  \"KRA 14\": \"bg-fuchsia-500\",\r\n  \"KRA 15\": \"bg-rose-500\",\r\n  \"KRA 16\": \"bg-sky-500\",\r\n  \"KRA 17\": \"bg-yellow-500\",\r\n  \"KRA 18\": \"bg-blue-600\",\r\n  \"KRA 19\": \"bg-green-600\",\r\n  \"KRA 20\": \"bg-purple-600\",\r\n  \"KRA 21\": \"bg-orange-600\",\r\n  \"KRA 22\": \"bg-red-600\",\r\n}\r\n\r\nexport function TargetBoardPanel({ year, quarter, unitId, unitName, refreshTrigger }: TargetBoardPanelProps) {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(false)\r\n  const [analysisData, setAnalysisData] = useState<AnalysisData | null>(null)\r\n\r\n  useEffect(() => {\r\n    const fetchAnalysis = async () => {\r\n      if (!unitId) return\r\n\r\n      setLoading(true)\r\n      try {\r\n        const token = await AuthService.getAccessToken()\r\n        const response = await fetch(\r\n          `/api/qpro-analyses?unitId=${unitId}&year=${year}&quarter=${quarter}&limit=1`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        )\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          if (data.analyses && data.analyses.length > 0) {\r\n            setAnalysisData(data.analyses[0])\r\n          } else {\r\n            setAnalysisData(null)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching analysis:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchAnalysis()\r\n  }, [unitId, year, quarter, refreshTrigger])\r\n\r\n  const getStatusForKRA = (kraId: string): \"pending\" | \"achieved\" | \"missed\" => {\r\n    if (!analysisData || !analysisData.kras || analysisData.kras.length === 0) {\r\n      return \"pending\"\r\n    }\r\n\r\n    const kraMatch = analysisData.kras.find((k: any) => k.kraId === kraId)\r\n    if (!kraMatch) return \"pending\"\r\n\r\n    // Check achievement based on matched activities\r\n    const achievementRate = kraMatch.achievementRate || 0\r\n    if (achievementRate >= 80) return \"achieved\"\r\n    if (achievementRate > 0) return \"missed\"\r\n    return \"pending\"\r\n  }\r\n\r\n  const getStatusIcon = (status: \"pending\" | \"achieved\" | \"missed\") => {\r\n    switch (status) {\r\n      case \"achieved\":\r\n        return <CheckCircle2 className=\"w-5 h-5 text-green-500\" />\r\n      case \"missed\":\r\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />\r\n      case \"pending\":\r\n      default:\r\n        return <Clock className=\"w-5 h-5 text-gray-400\" />\r\n    }\r\n  }\r\n\r\n  const getStatusBorderColor = (status: \"pending\" | \"achieved\" | \"missed\") => {\r\n    switch (status) {\r\n      case \"achieved\":\r\n        return \"border-green-500\"\r\n      case \"missed\":\r\n        return \"border-red-500\"\r\n      case \"pending\":\r\n      default:\r\n        return \"border-gray-300\"\r\n    }\r\n  }\r\n\r\n  // Filter KRAs relevant to the selected unit\r\n  // Expanded canonical unit name mapping for normalization\r\n  const canonicalUnits: { [key: string]: string } = {\r\n    \"hrmo\": \"human resource management office\",\r\n    \"human resource management office\": \"human resource management office\",\r\n    \"office of the vice president for academic affairs\": \"office of the vice president for academic affairs\",\r\n    \"ovpaa\": \"office of the vice president for academic affairs\",\r\n    \"curriculum and instruction development unit\": \"curriculum and instruction development unit\",\r\n    \"deans\": \"deans\",\r\n    \"faculty\": \"faculty\",\r\n    \"budget office\": \"budget office\",\r\n    \"budget and finance\": \"budget office\",\r\n    \"gender and development office\": \"gender and development\",\r\n    \"gender and development\": \"gender and development\",\r\n    \"research, extension and innovation\": \"research and development services\",\r\n    \"research and development services\": \"research and development services\",\r\n    \"research, extension and innovation unit\": \"research and development services\",\r\n    \"extension and training services\": \"extension and training services\",\r\n    \"extension and innovation unit\": \"extension and training services\",\r\n    \"information communication and technology services\": \"management information systems\",\r\n    \"management information systems\": \"management information systems\",\r\n    \"alumni affairs and placement services\": \"alumni affairs and placement services\",\r\n    \"alumni affairs and placement services, curriculum and instruction development unit\": \"alumni affairs and placement services\",\r\n    \"international/local affairs\": \"international affairs\",\r\n    \"international affairs\": \"international affairs\",\r\n    // Add more mappings as needed\r\n  };\r\n\r\n  function normalizeUnitName(name: string) {\r\n    if (!name) return \"\";\r\n    const key = name.trim().toLowerCase().replace(/\\s+/g, \" \");\r\n    return canonicalUnits[key] || key;\r\n  }\r\n\r\n  const kras = strategicPlan.kras as KRA[];\r\n  const relevantKRAs = kras;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n          <Target className=\"w-6 h-6 text-primary\" />\r\n          Strategic Commitments (Q{quarter} {year})\r\n        </h2>\r\n        {loading && <Loader2 className=\"w-5 h-5 animate-spin text-muted-foreground\" />}\r\n      </div>\r\n\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Key Result Areas aligned with LSPU Strategic Plan 2025-2029\r\n      </p>\r\n\r\n      {/* Objective Cards */}\r\n      <div className=\"space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto pr-2\">\r\n        {relevantKRAs.map((kra, index) => {\r\n          const status = getStatusForKRA(kra.kra_id)\r\n\r\n          return (\r\n            <div key={`${kra.kra_id}-${index}`}>\r\n              <Card\r\n                className={`p-4 border-l-4 ${getStatusBorderColor(status)} hover:shadow-md transition-shadow cursor-pointer`}\r\n                onClick={() => router.push(`/qpro/kra/${kra.kra_id}`)}\r\n              >\r\n                <div className=\"space-y-3\">\r\n                  {/* Header with KRA Badge and Expand Button */}\r\n                  <div className=\"flex items-start justify-between gap-2\">\r\n                    <div className=\"flex items-center gap-2 flex-1\">\r\n                      <Badge className={`${KRA_COLORS[kra.kra_id]} text-white`}>\r\n                        {kra.kra_id}\r\n                      </Badge>\r\n                      <h3 className=\"font-semibold text-sm line-clamp-2\">{kra.kra_title}</h3>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {getStatusIcon(status)}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Guiding Principle */}\r\n                  {kra.guiding_principle && (\r\n                    <div className=\"text-xs text-muted-foreground border-l-2 border-primary pl-3\">\r\n                      <span className=\"font-medium\">Guiding Principle: </span>\r\n                      {kra.guiding_principle}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {relevantKRAs.length === 0 && (\r\n        <div className=\"text-center py-12 text-muted-foreground\">\r\n          <Target className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n          <p>No strategic objectives found for this period.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1927, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2094, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 2138, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/lib/utils/qpro-aggregation.ts"],"sourcesContent":["export type TargetScope = 'INSTITUTIONAL' | 'PER_UNIT';\r\n\r\nexport type TargetType = 'count' | 'percentage' | 'financial' | 'milestone' | 'text_condition' | string;\r\n\r\nexport interface TimelineDatum {\r\n  year: number;\r\n  target_value: string | number;\r\n}\r\n\r\nexport interface InitiativeLike {\r\n  id: string;\r\n  key_performance_indicator?: {\r\n    outputs?: string;\r\n    outcomes?: string | string[];\r\n  };\r\n  targets?: {\r\n    type?: TargetType;\r\n    unit_basis?: string;\r\n    target_scope?: TargetScope;\r\n    timeline_data?: TimelineDatum[];\r\n  };\r\n}\r\n\r\nexport interface StrategicPlanLike {\r\n  kras?: Array<{\r\n    kra_id: string;\r\n    kra_title?: string;\r\n    initiatives?: InitiativeLike[];\r\n  }>;\r\n}\r\n\r\nexport function toNumberOrNull(value: unknown): number | null {\r\n  if (value === null || value === undefined) return null;\r\n  if (typeof value === 'number') return Number.isFinite(value) ? value : null;\r\n  const cleaned = String(value).replace(/,/g, '').trim();\r\n  if (!cleaned) return null;\r\n  const parsed = Number(cleaned);\r\n  return Number.isFinite(parsed) ? parsed : null;\r\n}\r\n\r\nexport function getTargetValueForYear(timeline: any[] | undefined, year: number): number | null {\r\n  if (!Array.isArray(timeline) || timeline.length === 0) return null;\r\n\r\n  const exact = timeline.find((t: any) => Number(t?.year) === year);\r\n  const exactValue = toNumberOrNull(exact?.target_value);\r\n  if (exactValue !== null) return exactValue;\r\n\r\n  const candidates = timeline\r\n    .map((t: any) => ({ year: Number(t?.year), target: toNumberOrNull(t?.target_value) }))\r\n    .filter((t: any) => Number.isFinite(t.year) && t.target !== null) as Array<{ year: number; target: number }>;\r\n\r\n  const pastOrEqual = candidates.filter((t) => t.year <= year).sort((a, b) => b.year - a.year);\r\n  if (pastOrEqual.length > 0) return pastOrEqual[0].target;\r\n\r\n  const future = candidates.sort((a, b) => a.year - b.year);\r\n  return future.length > 0 ? future[0].target : null;\r\n}\r\n\r\nexport function normalizeInitiativeId(id: string): string {\r\n  return String(id || '').replace(/\\s+/g, '');\r\n}\r\n\r\n/**\r\n * Normalize KRA ID by removing extra spaces and ensuring consistent format.\r\n * Handles: \"KRA5\", \"KRA 5\", \"KRA  5\"  \"KRA 5\" (canonical format in strategic_plan.json)\r\n */\r\nexport function normalizeKraId(kraId: string): string {\r\n  const cleaned = String(kraId || '').trim().replace(/\\s+/g, ' ');\r\n  // Match \"KRA\" followed by number(s), normalize to \"KRA {number}\"\r\n  const match = cleaned.match(/^KRA\\s*(\\d+)$/i);\r\n  if (match) {\r\n    return `KRA ${match[1]}`;\r\n  }\r\n  return cleaned;\r\n}\r\n\r\nexport function findInitiative(\r\n  plan: StrategicPlanLike,\r\n  kraId: string,\r\n  initiativeId: string | undefined | null\r\n): InitiativeLike | null {\r\n  if (!kraId || !initiativeId) return null;\r\n  const kras = plan?.kras || [];\r\n  const normalizedKraId = normalizeKraId(kraId);\r\n  const kra = kras.find((k) => normalizeKraId(k.kra_id) === normalizedKraId);\r\n  if (!kra?.initiatives) return null;\r\n\r\n  const normalizedId = normalizeInitiativeId(String(initiativeId));\r\n  let initiative = kra.initiatives.find((i) => normalizeInitiativeId(String(i.id)) === normalizedId);\r\n\r\n  if (!initiative) {\r\n    const kpiMatch = String(initiativeId).match(/KPI(\\d+)/i);\r\n    if (kpiMatch) {\r\n      initiative = kra.initiatives.find((i) => String(i.id).includes(`KPI${kpiMatch[1]}`));\r\n    }\r\n  }\r\n\r\n  return initiative || null;\r\n}\r\n\r\nexport function getInitiativeTargetMeta(\r\n  plan: StrategicPlanLike,\r\n  kraId: string,\r\n  initiativeId: string | undefined | null,\r\n  year: number\r\n): {\r\n  targetType: TargetType | null;\r\n  targetValue: number | null;\r\n  targetScope: TargetScope;\r\n  unitBasis: string | null;\r\n} {\r\n  const initiative = findInitiative(plan, kraId, initiativeId);\r\n  const targetType = initiative?.targets?.type ?? null;\r\n  const unitBasis = typeof initiative?.targets?.unit_basis === 'string' ? initiative.targets.unit_basis : null;\r\n\r\n  // IMPORTANT DEFAULT:\r\n  // If strategic_plan.json doesn't explicitly specify scope, treat targets as INSTITUTIONAL\r\n  // to prevent accidental inflation (e.g., multiplying by activities/programs).\r\n  const targetScope: TargetScope = initiative?.targets?.target_scope === 'PER_UNIT' ? 'PER_UNIT' : 'INSTITUTIONAL';\r\n\r\n  const timeline = (initiative?.targets?.timeline_data || []) as any[];\r\n  const targetValue = getTargetValueForYear(timeline, year);\r\n\r\n  return { targetType, targetValue, targetScope, unitBasis };\r\n}\r\n\r\nexport interface ActivityValueLike {\r\n  reported?: number | string | null;\r\n  target?: number | string | null;\r\n  dataType?: string | null;\r\n  initiativeId?: string | null;\r\n}\r\n\r\nexport function sumNumbers(values: Array<number | null | undefined>): number {\r\n  return values.reduce<number>(\r\n    (acc, v) => acc + (typeof v === 'number' && Number.isFinite(v) ? v : 0),\r\n    0\r\n  );\r\n}\r\n\r\nexport function averageNumbers(values: Array<number | null | undefined>): number {\r\n  const nums = values.filter((v): v is number => typeof v === 'number' && Number.isFinite(v));\r\n  if (nums.length === 0) return 0;\r\n  return nums.reduce<number>((acc, n) => acc + n, 0) / nums.length;\r\n}\r\n\r\nexport function computeAggregatedAchievement(args: {\r\n  targetType: TargetType | null;\r\n  targetValue: number;\r\n  targetScope?: TargetScope;\r\n  unitMultiplier?: number;\r\n  activities: ActivityValueLike[];\r\n}): {\r\n  totalReported: number;\r\n  totalTarget: number;\r\n  achievementPercent: number;\r\n} {\r\n  const {\r\n    targetType,\r\n    targetValue,\r\n    targetScope = 'INSTITUTIONAL',\r\n    unitMultiplier,\r\n    activities,\r\n  } = args;\r\n\r\n  const normalizedType = String(targetType || '').toLowerCase();\r\n\r\n  // IMPORTANT: targets are applied ONCE per KPI by default.\r\n  // If a KPI explicitly declares PER_UNIT scope, callers should pass a true unitMultiplier\r\n  // (e.g., number of programs/units). We intentionally default to 1 (not activities.length)\r\n  // because an activity count is not the same as a unit count.\r\n  const effectiveTarget =\r\n    targetScope === 'PER_UNIT'\r\n      ? targetValue * (typeof unitMultiplier === 'number' && Number.isFinite(unitMultiplier) ? unitMultiplier : 1)\r\n      : targetValue;\r\n\r\n  // Rate metrics: use mean reported against single target\r\n  if (normalizedType === 'percentage') {\r\n    // Percent KPIs need special handling:\r\n    // - If reported is already 0..100, use it.\r\n    // - If reported is a count (e.g., 154 employed) and activity.target is a denominator (e.g., 200 graduates),\r\n    //   convert to percent: (reported/target)*100.\r\n    // - Ignore invalid values we can't normalize (prevents nonsense like 154% being treated as a percent).\r\n    const toNormalizedPercent = (a: ActivityValueLike): number | null => {\r\n      const reported = toNumberOrNull(a.reported);\r\n      if (reported === null) return null;\r\n\r\n      // Already a valid percent\r\n      if (reported >= 0 && reported <= 100) return reported;\r\n\r\n      // Try to normalize count/denominator into a percent\r\n      const denom = toNumberOrNull(a.target);\r\n      if (denom !== null && denom > 0 && reported >= 0) {\r\n        const pct = (reported / denom) * 100;\r\n        if (pct >= 0 && pct <= 100) return pct;\r\n      }\r\n\r\n      return null;\r\n    };\r\n\r\n    const avgReported = averageNumbers(activities.map(toNormalizedPercent));\r\n    const achievementPercent = effectiveTarget > 0 ? (avgReported / effectiveTarget) * 100 : 0;\r\n    return { totalReported: avgReported, totalTarget: effectiveTarget, achievementPercent };\r\n  }\r\n\r\n  // Financial and counts: additive\r\n  if (normalizedType === 'financial' || normalizedType === 'count') {\r\n    // For COUNT types, if reported values are all 0/null/undefined, \r\n    // assume each activity represents 1 item (e.g., 1 research output)\r\n    const reportedValues = activities.map((a) => toNumberOrNull(a.reported));\r\n    let sumReported = sumNumbers(reportedValues);\r\n    \r\n    // If sum is 0 but we have activities, count each activity as 1 item\r\n    // This handles cases where activities don't have explicit reported values\r\n    if (sumReported === 0 && activities.length > 0 && normalizedType === 'count') {\r\n      sumReported = activities.length;\r\n    }\r\n    \r\n    const achievementPercent = effectiveTarget > 0 ? (sumReported / effectiveTarget) * 100 : 0;\r\n    return { totalReported: sumReported, totalTarget: effectiveTarget, achievementPercent };\r\n  }\r\n\r\n  // Milestone / text_condition: interpret as completed if any reported is truthy\r\n  if (normalizedType === 'milestone' || normalizedType === 'text_condition') {\r\n    const anyReported = activities.some((a) => {\r\n      const v = a.reported;\r\n      if (typeof v === 'number') return v > 0;\r\n      if (typeof v === 'string') return v.trim().length > 0;\r\n      return false;\r\n    });\r\n    const achievementPercent = anyReported ? 100 : 0;\r\n    return { totalReported: anyReported ? 1 : 0, totalTarget: 1, achievementPercent };\r\n  }\r\n\r\n  // Default: treat as additive numeric (count-like behavior)\r\n  const reportedValues = activities.map((a) => toNumberOrNull(a.reported));\r\n  let sumReported = sumNumbers(reportedValues);\r\n  \r\n  // If sum is 0 but we have activities, count each activity as 1 item\r\n  if (sumReported === 0 && activities.length > 0) {\r\n    sumReported = activities.length;\r\n  }\r\n  \r\n  const achievementPercent = effectiveTarget > 0 ? (sumReported / effectiveTarget) * 100 : 0;\r\n  return { totalReported: sumReported, totalTarget: effectiveTarget, achievementPercent };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2323, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/qpro/insight-feed.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Progress } from \"@/components/ui/progress\"\r\nimport { Loader2, Lightbulb, TrendingUp, AlertTriangle, CheckCircle2 } from \"lucide-react\"\r\nimport strategicPlan from \"@/lib/data/strategic_plan.json\"\r\nimport AuthService from \"@/lib/services/auth-service\"\r\nimport { computeAggregatedAchievement, getInitiativeTargetMeta } from \"@/lib/utils/qpro-aggregation\"\r\n\r\n// Helper function to safely render fields that may be objects\r\nfunction safeRenderText(value: any): string {\r\n  if (!value) return '';\r\n  if (typeof value === 'string') return value;\r\n  if (typeof value === 'object' && value !== null) {\r\n    if (value.action) {\r\n      return `${value.action}${value.timeline ? ` (${value.timeline})` : ''}`;\r\n    }\r\n    return JSON.stringify(value, null, 2);\r\n  }\r\n  return String(value);\r\n}\r\n\r\n\r\ninterface InsightFeedProps {\r\n  analysisId: string\r\n  year: number\r\n  quarter: number\r\n}\r\n\r\ninterface Activity {\r\n  name: string\r\n  reported: number\r\n  target: number\r\n  kraId: string\r\n  kraTitle?: string\r\n  achievement: number\r\n  authorizedStrategy?: string\r\n  prescriptiveAnalysis?: string\r\n  aiInsight?: string\r\n  status?: string\r\n  strategies?: string[]\r\n  responsibleOffices?: string[]\r\n}\r\n\r\ninterface AnalysisData {\r\n  id: string\r\n  kras: any[]\r\n  activities?: Activity[]\r\n  alignment?: string\r\n  gaps?: string\r\n  recommendations?: string\r\n}\r\n\r\nconst KRA_COLORS: { [key: string]: string } = {\r\n  \"KRA 1\": \"bg-blue-500\",\r\n  \"KRA 2\": \"bg-green-500\",\r\n  \"KRA 3\": \"bg-purple-500\",\r\n  \"KRA 4\": \"bg-orange-500\",\r\n  \"KRA 5\": \"bg-red-500\",\r\n  \"KRA 6\": \"bg-teal-500\",\r\n  \"KRA 7\": \"bg-indigo-500\",\r\n  \"KRA 8\": \"bg-pink-500\",\r\n}\r\n\r\nexport function InsightFeed({ analysisId, year, quarter }: InsightFeedProps) {\r\n  const [loading, setLoading] = useState(true)\r\n  const [analysis, setAnalysis] = useState<AnalysisData | null>(null)\r\n\r\n  useEffect(() => {\r\n    const fetchAnalysis = async () => {\r\n      setLoading(true)\r\n      try {\r\n        const token = await AuthService.getAccessToken()\r\n        const response = await fetch(`/api/qpro-analyses/${analysisId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        })\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          setAnalysis(data.analysis)\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching analysis:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchAnalysis()\r\n  }, [analysisId])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!analysis) {\r\n    return (\r\n      <div className=\"text-center py-8 text-muted-foreground\">\r\n        <p>No analysis data found.</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Extract activities from the analysis\r\n  const activities: Activity[] = analysis.activities || []\r\n\r\n  // If no structured activities, try to parse from kras field\r\n  if (activities.length === 0 && analysis.kras && analysis.kras.length > 0) {\r\n    analysis.kras.forEach((kra: any) => {\r\n      if (kra.activities && Array.isArray(kra.activities)) {\r\n        kra.activities.forEach((act: any) => {\r\n          activities.push({\r\n            name: act.name || \"Unnamed Activity\",\r\n            reported: act.reported || 0,\r\n            target: act.target || 0,\r\n            kraId: kra.kraId || \"Unknown\",\r\n            achievement: act.achievement || 0,\r\n            strategies: kra.strategies,\r\n            responsibleOffices: kra.responsibleOffices,\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // Neutral verdict style: keep cards visually consistent regardless of achievement\r\n  const getVerdictStyle = (_achievement: number) => {\r\n    return {\r\n      border: \"border-gray-300\",\r\n      bg: \"\",\r\n      icon: null,\r\n      text: \"\",\r\n      textColor: \"text-muted-foreground\",\r\n    }\r\n  }\r\n\r\n  // Group activities by KRA or use kras array if available\r\n  const kraGroups = analysis.kras && analysis.kras.length > 0 \r\n    ? analysis.kras \r\n    : [];\r\n\r\n  // If no kras but we have activities, create groups manually\r\n  if (kraGroups.length === 0 && activities.length > 0) {\r\n    const groupedByKra: { [key: string]: any } = {};\r\n    activities.forEach((activity) => {\r\n      const kraId = activity.kraId || \"Unknown\";\r\n      if (!groupedByKra[kraId]) {\r\n        groupedByKra[kraId] = {\r\n          kraId: kraId,\r\n          kraTitle: activity.kraTitle || kraId,\r\n          activities: [],\r\n          achievementRate: 0,\r\n        };\r\n      }\r\n      groupedByKra[kraId].activities.push(activity);\r\n    });\r\n    \r\n    // Achievement is calculated per KRA during render using strategic plan targets.\r\n    \r\n    kraGroups.push(...Object.values(groupedByKra));\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-bold flex items-center gap-2\">\r\n          <TrendingUp className=\"w-5 h-5 text-primary\" />\r\n          AI Insights\r\n        </h3>\r\n        <Badge variant=\"outline\">{kraGroups.length} KRAs Analyzed</Badge>\r\n      </div>\r\n\r\n      {/* KRA-Grouped Insight Cards */}\r\n      <div className=\"space-y-4 max-h-[calc(100vh-400px)] overflow-y-auto pr-2\">\r\n        {kraGroups.map((kra: any, kraIdx: number) => {\r\n          const kraActivities = Array.isArray(kra.activities) ? kra.activities : [];\r\n          const primaryInitiativeId = kraActivities[0]?.initiativeId;\r\n          const meta = getInitiativeTargetMeta(\r\n            strategicPlan as any,\r\n            String(kra.kraId || kra.kra_id || ''),\r\n            primaryInitiativeId,\r\n            year\r\n          );\r\n\r\n          const fallbackTarget = kraActivities.length > 0\r\n            ? (typeof kraActivities[0].target === 'number' ? kraActivities[0].target : Number(kraActivities[0].target || 0))\r\n            : 0;\r\n\r\n          const targetValue = meta.targetValue ?? (Number.isFinite(fallbackTarget) ? fallbackTarget : 0);\r\n\r\n          // Aggregate reported values (SUM for counts/financial, AVG for percentages)\r\n          const aggregated = computeAggregatedAchievement({\r\n            targetType: meta.targetType,\r\n            targetValue: targetValue || 0,\r\n            targetScope: meta.targetScope,\r\n            activities: kraActivities,\r\n          });\r\n\r\n          const totalReported = aggregated.totalReported;\r\n          const totalTarget = aggregated.totalTarget;\r\n          const kraAchievement = aggregated.achievementPercent;\r\n\r\n          const verdict = getVerdictStyle(kraAchievement);\r\n          \r\n          const gap = totalTarget - totalReported;\r\n\r\n          return (\r\n            <Card key={kraIdx} className={`p-4 border-l-4 ${verdict.border}`}>\r\n              <div className=\"space-y-4\">\r\n                {/* KRA Header */}\r\n                <div className=\"flex items-start justify-between gap-2\">\r\n                  <div className=\"flex-1\">\r\n                    <Badge className={`${KRA_COLORS[kra.kraId] || \"bg-gray-500\"} text-white text-xs mb-2`}>\r\n                      {kra.kraId}\r\n                    </Badge>\r\n                    <h4 className=\"font-bold text-base\">{kra.kraTitle || kra.kraId}</h4>\r\n                  </div>\r\n                  {verdict.icon}\r\n                </div>\r\n\r\n                {/* KRA-Level Aggregated Stats */}\r\n                <div className={`p-4 rounded-md ${verdict.bg}`}>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-medium\">\r\n                      Total Reported: <span className=\"text-xl font-bold\">{totalReported}</span>\r\n                    </span>\r\n                    <span className=\"text-sm font-medium\">\r\n                      Total Target: <span className=\"text-xl font-bold\">{totalTarget}</span>\r\n                    </span>\r\n                  </div>\r\n                  <Progress value={Math.min(100, Math.max(0, kraAchievement))} className=\"h-3\" />\r\n                  <div className=\"flex items-center justify-between mt-2\">\r\n                    <p className={`text-sm ${verdict.textColor} font-semibold`}>\r\n                      {kraAchievement.toFixed(1)}% Achievement\r\n                    </p>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {kraActivities.length} {kraActivities.length === 1 ? 'activity' : 'activities'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Overall KRA Verdict */}\r\n                <div className={`flex items-center gap-2 ${verdict.textColor} font-semibold`}>\r\n                  {verdict.icon}\r\n                  <span>{verdict.text}</span>\r\n                </div>\r\n\r\n                {/* Individual Activities Breakdown - Clean list without redundant metrics */}\r\n                {kraActivities.length > 1 && (\r\n                  <div className=\"space-y-2\">\r\n                    <h5 className=\"text-sm font-semibold text-muted-foreground\">Activities Included:</h5>\r\n                    <div className=\"pl-4 space-y-1\">\r\n                      {kraActivities.map((activity: any, actIdx: number) => (\r\n                        <div key={actIdx} className=\"flex items-start gap-2\">\r\n                          <span className=\"text-xs text-muted-foreground mt-0.5\"></span>\r\n                          <p className=\"text-sm text-muted-foreground\">{activity.name}</p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Prescriptive Analysis - Action-oriented recommendations */}\r\n                {gap > 0 && kraActivities.length > 0 && (\r\n                  <div className=\"bg-amber-50 border border-amber-300 rounded-md p-4\">\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <AlertTriangle className=\"w-5 h-5 text-amber-600 mt-0.5 shrink-0\" />\r\n                      <div className=\"flex-1 space-y-2\">\r\n                        <div>\r\n                          <p className=\"text-xs font-semibold text-amber-900 mb-1\">\r\n                            Gap Identified: {gap} unit{gap !== 1 ? 's' : ''} behind target\r\n                          </p>\r\n                          <p className=\"text-xs text-amber-800\">\r\n                            {kraActivities[0].prescriptiveAnalysis || (\r\n                              kraActivities[0].authorizedStrategy ? (\r\n                                <>To close this gap, implement Strategic Plan Strategy: <span className=\"font-semibold\">\"{kraActivities[0].authorizedStrategy}\"</span> immediately in Q{quarter} {year}.</>\r\n                              ) : (\r\n                                <>Review and accelerate implementation of activities under {kra.kraId} to meet the target of {totalTarget}.</>\r\n                              )\r\n                            )}\r\n                          </p>\r\n                        </div>\r\n                        {kraActivities[0].authorizedStrategy && kraActivities[0].prescriptiveAnalysis && (\r\n                          <div className=\"pt-2 border-t border-amber-200\">\r\n                            <p className=\"text-xs font-medium text-amber-900\">Authorized Strategy:</p>\r\n                            <p className=\"text-xs text-amber-700 italic\">\"{kraActivities[0].authorizedStrategy}\"</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Sustainability message for met/exceeded targets */}\r\n                {gap <= 0 && kraActivities.length > 0 && (\r\n                  <div className=\"rounded-md p-4 border border-border/50\">\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <div className=\"flex-1 space-y-2\">\r\n                        <div>\r\n                          <p className=\"text-xs font-semibold text-muted-foreground mb-1\">\r\n                            Target {gap === 0 ? 'Met' : 'Exceeded'}\r\n                          </p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {kraActivities[0].prescriptiveAnalysis || (\r\n                              kraActivities[0].authorizedStrategy ? (\r\n                                <>Sustain this achievement by continuing: <span className=\"font-semibold\">\"{kraActivities[0].authorizedStrategy}\"</span>. Consider expanding scope or increasing targets for next quarter.</>\r\n                              ) : (\r\n                                <>Excellent performance on {kra.kraId}. Maintain current practices and document best practices for replication.</>\r\n                              )\r\n                            )}\r\n                          </p>\r\n                        </div>\r\n                        {kraActivities[0].authorizedStrategy && kraActivities[0].prescriptiveAnalysis && (\r\n                          <div className=\"pt-2 border-t border-border/50\">\r\n                            <p className=\"text-xs font-medium text-muted-foreground\">Authorized Strategy:</p>\r\n                            <p className=\"text-xs text-muted-foreground italic\">\"{kraActivities[0].authorizedStrategy}\"</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {kraGroups.length === 0 && (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          <Lightbulb className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n          <p className=\"text-sm\">No activities extracted from the QPRO report.</p>\r\n          <p className=\"text-xs mt-1\">\r\n            The AI analysis may still be processing or the document format may need adjustment.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Overall Summary - High-level strategic overview only */}\r\n      {(analysis.alignment || analysis.gaps) && (\r\n        <div className=\"pt-6 mt-6 border-t space-y-3\">\r\n          <h3 className=\"text-lg font-bold text-muted-foreground\">Overall Summary</h3>\r\n          \r\n          {analysis.alignment && (\r\n            <Card className=\"p-4 bg-slate-50 border-slate-200\">\r\n              <h4 className=\"font-semibold text-sm text-slate-900 mb-2\"> Strategic Alignment</h4>\r\n              <p className=\"text-xs text-slate-700 whitespace-pre-wrap\">{safeRenderText(analysis.alignment)}</p>\r\n            </Card>\r\n          )}\r\n\r\n          {analysis.gaps && (\r\n            <Card className=\"p-4 bg-orange-50 border-orange-200\">\r\n              <h4 className=\"font-semibold text-sm text-orange-900 mb-2\"> Priority Gaps</h4>\r\n              <p className=\"text-xs text-orange-800 whitespace-pre-wrap\">{safeRenderText(analysis.gaps)}</p>\r\n              <p className=\"text-xs text-orange-600 mt-2 italic\">Note: Specific recommendations for each KRA are provided in the cards above.</p>\r\n            </Card>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAWA,8DAA8D;AAC9D,SAAS,eAAe,KAAU;IAChC,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI,OAAO,UAAU,UAAU,OAAO;IACtC,IAAI,OAAO,UAAU,YAAY,UAAU,MAAM;QAC/C,IAAI,MAAM,MAAM,EAAE;YAChB,OAAO,GAAG,MAAM,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC,EAAE,EAAE,MAAM,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI;QACzE;QACA,OAAO,KAAK,SAAS,CAAC,OAAO,MAAM;IACrC;IACA,OAAO,OAAO;AAChB;AAiCA,MAAM,aAAwC;IAC5C,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;AACX;AAEO,SAAS,YAAY,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAoB;;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAsB;IAE9D,IAAA,0KAAS;iCAAC;YACR,MAAM;uDAAgB;oBACpB,WAAW;oBACX,IAAI;wBACF,MAAM,QAAQ,MAAM,gJAAW,CAAC,cAAc;wBAC9C,MAAM,WAAW,MAAM,MAAM,CAAC,mBAAmB,EAAE,YAAY,EAAE;4BAC/D,SAAS;gCACP,eAAe,CAAC,OAAO,EAAE,OAAO;4BAClC;wBACF;wBACA,IAAI,SAAS,EAAE,EAAE;4BACf,MAAM,OAAO,MAAM,SAAS,IAAI;4BAChC,YAAY,KAAK,QAAQ;wBAC3B;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,4BAA4B;oBAC5C,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;gCAAG;QAAC;KAAW;IAEf,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,uCAAuC;IACvC,MAAM,aAAyB,SAAS,UAAU,IAAI,EAAE;IAExD,4DAA4D;IAC5D,IAAI,WAAW,MAAM,KAAK,KAAK,SAAS,IAAI,IAAI,SAAS,IAAI,CAAC,MAAM,GAAG,GAAG;QACxE,SAAS,IAAI,CAAC,OAAO,CAAC,CAAC;YACrB,IAAI,IAAI,UAAU,IAAI,MAAM,OAAO,CAAC,IAAI,UAAU,GAAG;gBACnD,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC;oBACtB,WAAW,IAAI,CAAC;wBACd,MAAM,IAAI,IAAI,IAAI;wBAClB,UAAU,IAAI,QAAQ,IAAI;wBAC1B,QAAQ,IAAI,MAAM,IAAI;wBACtB,OAAO,IAAI,KAAK,IAAI;wBACpB,aAAa,IAAI,WAAW,IAAI;wBAChC,YAAY,IAAI,UAAU;wBAC1B,oBAAoB,IAAI,kBAAkB;oBAC5C;gBACF;YACF;QACF;IACF;IAEA,kFAAkF;IAClF,MAAM,kBAAkB,CAAC;QACvB,OAAO;YACL,QAAQ;YACR,IAAI;YACJ,MAAM;YACN,MAAM;YACN,WAAW;QACb;IACF;IAEA,yDAAyD;IACzD,MAAM,YAAY,SAAS,IAAI,IAAI,SAAS,IAAI,CAAC,MAAM,GAAG,IACtD,SAAS,IAAI,GACb,EAAE;IAEN,4DAA4D;IAC5D,IAAI,UAAU,MAAM,KAAK,KAAK,WAAW,MAAM,GAAG,GAAG;QACnD,MAAM,eAAuC,CAAC;QAC9C,WAAW,OAAO,CAAC,CAAC;YAClB,MAAM,QAAQ,SAAS,KAAK,IAAI;YAChC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;gBACxB,YAAY,CAAC,MAAM,GAAG;oBACpB,OAAO;oBACP,UAAU,SAAS,QAAQ,IAAI;oBAC/B,YAAY,EAAE;oBACd,iBAAiB;gBACnB;YACF;YACA,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;QACtC;QAEA,gFAAgF;QAEhF,UAAU,IAAI,IAAI,OAAO,MAAM,CAAC;IAClC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,mOAAU;gCAAC,WAAU;;;;;;4BAAyB;;;;;;;kCAGjD,6LAAC,sIAAK;wBAAC,SAAQ;;4BAAW,UAAU,MAAM;4BAAC;;;;;;;;;;;;;0BAI7C,6LAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,KAAU;oBACxB,MAAM,gBAAgB,MAAM,OAAO,CAAC,IAAI,UAAU,IAAI,IAAI,UAAU,GAAG,EAAE;oBACzE,MAAM,sBAAsB,aAAa,CAAC,EAAE,EAAE;oBAC9C,MAAM,OAAO,IAAA,iKAAuB,EAClC,gHAAa,EACb,OAAO,IAAI,KAAK,IAAI,IAAI,MAAM,IAAI,KAClC,qBACA;oBAGF,MAAM,iBAAiB,cAAc,MAAM,GAAG,IACzC,OAAO,aAAa,CAAC,EAAE,CAAC,MAAM,KAAK,WAAW,aAAa,CAAC,EAAE,CAAC,MAAM,GAAG,OAAO,aAAa,CAAC,EAAE,CAAC,MAAM,IAAI,KAC3G;oBAEJ,MAAM,cAAc,KAAK,WAAW,IAAI,CAAC,OAAO,QAAQ,CAAC,kBAAkB,iBAAiB,CAAC;oBAE7F,4EAA4E;oBAC5E,MAAM,aAAa,IAAA,sKAA4B,EAAC;wBAC9C,YAAY,KAAK,UAAU;wBAC3B,aAAa,eAAe;wBAC5B,aAAa,KAAK,WAAW;wBAC7B,YAAY;oBACd;oBAEA,MAAM,gBAAgB,WAAW,aAAa;oBAC9C,MAAM,cAAc,WAAW,WAAW;oBAC1C,MAAM,iBAAiB,WAAW,kBAAkB;oBAEpD,MAAM,UAAU,gBAAgB;oBAEhC,MAAM,MAAM,cAAc;oBAE1B,qBACE,6LAAC,oIAAI;wBAAc,WAAW,CAAC,eAAe,EAAE,QAAQ,MAAM,EAAE;kCAC9D,cAAA,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,WAAW,GAAG,UAAU,CAAC,IAAI,KAAK,CAAC,IAAI,cAAc,wBAAwB,CAAC;8DAClF,IAAI,KAAK;;;;;;8DAEZ,6LAAC;oDAAG,WAAU;8DAAuB,IAAI,QAAQ,IAAI,IAAI,KAAK;;;;;;;;;;;;wCAE/D,QAAQ,IAAI;;;;;;;8CAIf,6LAAC;oCAAI,WAAW,CAAC,eAAe,EAAE,QAAQ,EAAE,EAAE;;sDAC5C,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;wDAAsB;sEACpB,6LAAC;4DAAK,WAAU;sEAAqB;;;;;;;;;;;;8DAEvD,6LAAC;oDAAK,WAAU;;wDAAsB;sEACtB,6LAAC;4DAAK,WAAU;sEAAqB;;;;;;;;;;;;;;;;;;sDAGvD,6LAAC,4IAAQ;4CAAC,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG;4CAAkB,WAAU;;;;;;sDACvE,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAE,WAAW,CAAC,QAAQ,EAAE,QAAQ,SAAS,CAAC,cAAc,CAAC;;wDACvD,eAAe,OAAO,CAAC;wDAAG;;;;;;;8DAE7B,6LAAC;oDAAK,WAAU;;wDACb,cAAc,MAAM;wDAAC;wDAAE,cAAc,MAAM,KAAK,IAAI,aAAa;;;;;;;;;;;;;;;;;;;8CAMxE,6LAAC;oCAAI,WAAW,CAAC,wBAAwB,EAAE,QAAQ,SAAS,CAAC,cAAc,CAAC;;wCACzE,QAAQ,IAAI;sDACb,6LAAC;sDAAM,QAAQ,IAAI;;;;;;;;;;;;gCAIpB,cAAc,MAAM,GAAG,mBACtB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;sDAA8C;;;;;;sDAC5D,6LAAC;4CAAI,WAAU;sDACZ,cAAc,GAAG,CAAC,CAAC,UAAe,uBACjC,6LAAC;oDAAiB,WAAU;;sEAC1B,6LAAC;4DAAK,WAAU;sEAAuC;;;;;;sEACvD,6LAAC;4DAAE,WAAU;sEAAiC,SAAS,IAAI;;;;;;;mDAFnD;;;;;;;;;;;;;;;;gCAUjB,MAAM,KAAK,cAAc,MAAM,GAAG,mBACjC,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,4OAAa;gDAAC,WAAU;;;;;;0DACzB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;;0EACC,6LAAC;gEAAE,WAAU;;oEAA4C;oEACtC;oEAAI;oEAAM,QAAQ,IAAI,MAAM;oEAAG;;;;;;;0EAElD,6LAAC;gEAAE,WAAU;0EACV,aAAa,CAAC,EAAE,CAAC,oBAAoB,IAAI,CACxC,aAAa,CAAC,EAAE,CAAC,kBAAkB,iBACjC;;wEAAE;sFAAsD,6LAAC;4EAAK,WAAU;;gFAAgB;gFAAE,aAAa,CAAC,EAAE,CAAC,kBAAkB;gFAAC;;;;;;;wEAAQ;wEAAkB;wEAAQ;wEAAE;wEAAK;;iGAEvK;;wEAAE;wEAA0D,IAAI,KAAK;wEAAC;wEAAwB;wEAAY;;gFAE9G;;;;;;;;;;;;oDAGH,aAAa,CAAC,EAAE,CAAC,kBAAkB,IAAI,aAAa,CAAC,EAAE,CAAC,oBAAoB,kBAC3E,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAqC;;;;;;0EAClD,6LAAC;gEAAE,WAAU;;oEAAgC;oEAAE,aAAa,CAAC,EAAE,CAAC,kBAAkB;oEAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAS9F,OAAO,KAAK,cAAc,MAAM,GAAG,mBAClC,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;;sEACC,6LAAC;4DAAE,WAAU;;gEAAmD;gEACtD,QAAQ,IAAI,QAAQ;;;;;;;sEAE9B,6LAAC;4DAAE,WAAU;sEACV,aAAa,CAAC,EAAE,CAAC,oBAAoB,IAAI,CACxC,aAAa,CAAC,EAAE,CAAC,kBAAkB,iBACjC;;oEAAE;kFAAwC,6LAAC;wEAAK,WAAU;;4EAAgB;4EAAE,aAAa,CAAC,EAAE,CAAC,kBAAkB;4EAAC;;;;;;;oEAAQ;;6FAExH;;oEAAE;oEAA0B,IAAI,KAAK;oEAAC;;4EAE1C;;;;;;;;;;;;gDAGH,aAAa,CAAC,EAAE,CAAC,kBAAkB,IAAI,aAAa,CAAC,EAAE,CAAC,oBAAoB,kBAC3E,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAE,WAAU;sEAA4C;;;;;;sEACzD,6LAAC;4DAAE,WAAU;;gEAAuC;gEAAE,aAAa,CAAC,EAAE,CAAC,kBAAkB;gEAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBA5G/F;;;;;gBAsHf;;;;;;YAGD,UAAU,MAAM,KAAK,mBACpB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,4NAAS;wBAAC,WAAU;;;;;;kCACrB,6LAAC;wBAAE,WAAU;kCAAU;;;;;;kCACvB,6LAAC;wBAAE,WAAU;kCAAe;;;;;;;;;;;;YAO/B,CAAC,SAAS,SAAS,IAAI,SAAS,IAAI,mBACnC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA0C;;;;;;oBAEvD,SAAS,SAAS,kBACjB,6LAAC,oIAAI;wBAAC,WAAU;;0CACd,6LAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAC1D,6LAAC;gCAAE,WAAU;0CAA8C,eAAe,SAAS,SAAS;;;;;;;;;;;;oBAI/F,SAAS,IAAI,kBACZ,6LAAC,oIAAI;wBAAC,WAAU;;0CACd,6LAAC;gCAAG,WAAU;0CAA6C;;;;;;0CAC3D,6LAAC;gCAAE,WAAU;0CAA+C,eAAe,SAAS,IAAI;;;;;;0CACxF,6LAAC;gCAAE,WAAU;0CAAsC;;;;;;;;;;;;;;;;;;;;;;;;AAOjE;GA9SgB;KAAA"}},
    {"offset": {"line": 3110, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/qpro-results-with-aggregation.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { CheckCircle, AlertCircle, TrendingUp, Clock, Target, AlertTriangle } from 'lucide-react';\r\n\r\n// Helper function to safely render analysis fields\r\n// These fields may contain JSON strings, formatted text, or already-parsed objects/arrays\r\nfunction renderAnalysisField(value: any): React.ReactNode {\r\n  if (!value) return 'No data available';\r\n  \r\n  // Handle arrays directly (already parsed from API response)\r\n  if (Array.isArray(value)) {\r\n    if (value.length === 0) return 'No data available';\r\n    return (\r\n      <ul className=\"space-y-2\">\r\n        {value.map((item: any, idx: number) => (\r\n          <li key={idx} className=\"flex gap-2\">\r\n            <span></span>\r\n            <span>\r\n              {typeof item === 'string' \r\n                ? item \r\n                : item.action \r\n                  ? `${item.action}${item.timeline ? ` (${item.timeline})` : ''}`\r\n                  : JSON.stringify(item)}\r\n            </span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n  \r\n  // Handle objects directly (single recommendation object)\r\n  if (typeof value === 'object' && value !== null) {\r\n    if (value.action) {\r\n      return `${value.action}${value.timeline ? ` (${value.timeline})` : ''}`;\r\n    }\r\n    return JSON.stringify(value, null, 2);\r\n  }\r\n  \r\n  // Handle strings - may be JSON or plain text\r\n  if (typeof value === 'string') {\r\n    // Try to parse as JSON (recommendations might be JSON stringified)\r\n    try {\r\n      const parsed = JSON.parse(value);\r\n      // Recursively call to handle the parsed value\r\n      return renderAnalysisField(parsed);\r\n    } catch {\r\n      // Not JSON, treat as plain text with preserved formatting\r\n    }\r\n    return value;\r\n  }\r\n  \r\n  // Fallback for other types\r\n  return String(value);\r\n}\r\n\r\n// Parse JSON string or array into structured action items\r\nfunction parseRecommendations(value: any): Array<{action: string; timeline?: string; priority?: string}> {\r\n  if (!value) return [];\r\n  \r\n  if (Array.isArray(value)) {\r\n    return value.map((item: any) => {\r\n      if (typeof item === 'string') return { action: item };\r\n      if (typeof item === 'object' && item !== null) {\r\n        return {\r\n          action: item.action || item.recommendation || JSON.stringify(item),\r\n          timeline: item.timeline || item.deadline,\r\n          priority: item.priority\r\n        };\r\n      }\r\n      return { action: String(item) };\r\n    });\r\n  }\r\n  \r\n  if (typeof value === 'string') {\r\n    try {\r\n      const parsed = JSON.parse(value);\r\n      return parseRecommendations(parsed);\r\n    } catch {\r\n      const lines = value.split(/\\n||\\.(?=\\s*[A-Z])/).filter((l: string) => l.trim());\r\n      return lines.map((line: string) => ({ action: line.trim() }));\r\n    }\r\n  }\r\n  \r\n  if (typeof value === 'object' && value !== null) {\r\n    return [{\r\n      action: value.action || value.recommendation || JSON.stringify(value),\r\n      timeline: value.timeline,\r\n      priority: value.priority\r\n    }];\r\n  }\r\n  \r\n  return [{ action: String(value) }];\r\n}\r\n\r\n// Get severity level based on achievement\r\nfunction getSeverityLevel(achievement: number): { \r\n  level: 'critical' | 'warning' | 'success'; \r\n  label: string; \r\n  bgColor: string; \r\n  textColor: string;\r\n  borderColor: string;\r\n} {\r\n  if (achievement < 50) {\r\n    return { level: 'critical', label: 'CRITICAL ALERT', bgColor: 'bg-red-100', textColor: 'text-red-900', borderColor: 'border-red-500' };\r\n  }\r\n  if (achievement < 80) {\r\n    return { level: 'warning', label: 'NEEDS ATTENTION', bgColor: 'bg-amber-100', textColor: 'text-amber-900', borderColor: 'border-amber-500' };\r\n  }\r\n  return { level: 'success', label: 'ON TRACK', bgColor: 'bg-green-100', textColor: 'text-green-900', borderColor: 'border-green-500' };\r\n}\r\n\r\nfunction getPriorityColor(priority?: string): string {\r\n  switch (priority?.toLowerCase()) {\r\n    case 'high': case 'critical': return 'bg-red-500 text-white';\r\n    case 'medium': return 'bg-amber-500 text-white';\r\n    case 'low': return 'bg-blue-500 text-white';\r\n    default: return 'bg-gray-500 text-white';\r\n  }\r\n}\r\n\r\ninterface AggregationMetric {\r\n  kraId: string;\r\n  kraTitle: string;\r\n  reported: number;\r\n  target: number;\r\n  achieved: number;\r\n  achievementPercent: number;\r\n  status: 'MET' | 'MISSED' | 'ON_TRACK';\r\n  message: string;\r\n}\r\n\r\ninterface QPROWithAggregationResults {\r\n  analysis: {\r\n    id: string;\r\n    title: string;\r\n    alignment: string;\r\n    opportunities: string;\r\n    gaps: string;\r\n    recommendations: string;\r\n    achievementScore: number;\r\n    createdAt: string;\r\n  };\r\n  kras: any[];\r\n  aggregation: {\r\n    metrics: {\r\n      totalKRAs: number;\r\n      metKRAs: number;\r\n      missedKRAs: number;\r\n      onTrackKRAs: number;\r\n      overallAchievementPercent: number;\r\n      year: number;\r\n      quarter: number;\r\n    };\r\n    byKra: AggregationMetric[];\r\n    dashboard: {\r\n      totalKRAs: number;\r\n      metKRAs: number;\r\n      missedKRAs: number;\r\n      onTrackKRAs: number;\r\n      overallAchievementPercent: number;\r\n    };\r\n  };\r\n}\r\n\r\nexport function QPROResultsWithAggregation({\r\n  results,\r\n}: {\r\n  results: QPROWithAggregationResults;\r\n}) {\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'MET':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'ON_TRACK':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'MISSED':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'MET':\r\n        return <CheckCircle className=\"w-4 h-4 text-green-600\" />;\r\n      case 'MISSED':\r\n        return <AlertCircle className=\"w-4 h-4 text-red-600\" />;\r\n      case 'ON_TRACK':\r\n        return <TrendingUp className=\"w-4 h-4 text-blue-600\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const achievement = results.aggregation.metrics.overallAchievementPercent;\r\n  const severity = getSeverityLevel(achievement);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* ===== SECTION 1: Header Cards (Retained) ===== */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <Card className={`border-l-4 ${severity.borderColor}`}>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-gray-600\">\r\n              Overall Score\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-4xl font-bold ${severity.textColor}`}>\r\n              {results.aggregation.metrics.overallAchievementPercent.toFixed(1)}%\r\n            </div>\r\n            <Badge className={severity.level === 'critical' ? 'bg-red-600 text-white mt-2' : severity.level === 'warning' ? 'bg-amber-500 text-white mt-2' : 'bg-green-600 text-white mt-2'}>\r\n              {severity.level === 'critical' ? '' : severity.level === 'warning' ? '' : ''} {severity.label}\r\n            </Badge>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-gray-600\">\r\n              Data Completeness\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-4xl font-bold text-slate-900\">\r\n              {results.aggregation.metrics.totalKRAs > 0 \r\n                ? Math.round((results.aggregation.byKra.filter(k => k.reported > 0).length / results.aggregation.metrics.totalKRAs) * 100)\r\n                : 0}%\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 mt-2\">\r\n              {results.aggregation.byKra.filter(k => k.reported > 0).length} of {results.aggregation.metrics.totalKRAs} KRAs have data\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-gray-600\">\r\n              KRAs Covered\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-4xl font-bold text-slate-900\">\r\n              {results.aggregation.metrics.totalKRAs}\r\n            </div>\r\n            <div className=\"flex gap-2 mt-2 text-xs\">\r\n              <span className=\"text-green-600\"> {results.aggregation.metrics.metKRAs} Met</span>\r\n              <span className=\"text-red-600\"> {results.aggregation.metrics.missedKRAs} Missed</span>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* ===== SECTION 2: Prescriptive Analysis (Moved to Top-Center, Below Header) ===== */}\r\n      <Card className=\"overflow-hidden border-2 border-indigo-300 shadow-lg\">\r\n        <div className=\"bg-linear-to-r from-indigo-600 to-purple-600 px-5 py-4\">\r\n          <h3 className=\"font-bold text-xl text-white flex items-center gap-2\">\r\n            <Target className=\"w-6 h-6\" /> AI Strategic Analysis\r\n          </h3>\r\n          <p className=\"text-indigo-100 text-sm mt-1\">\r\n            Mapped to System Strategic Plan  Q{results.aggregation.metrics.quarter} {results.aggregation.metrics.year}\r\n          </p>\r\n        </div>\r\n        \r\n        <CardContent className=\"p-0\">\r\n          {/* Status Alert */}\r\n          <div className={`p-4 border-b ${severity.bgColor}`}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className={`text-lg font-bold ${severity.textColor}`}>\r\n                  {achievement.toFixed(1)}% Overall Achievement\r\n                </p>\r\n                <p className=\"text-sm text-slate-600\">\r\n                  {results.aggregation.metrics.metKRAs} of {results.aggregation.metrics.totalKRAs} Key Result Areas Met\r\n                </p>\r\n              </div>\r\n              {severity.level === 'critical' && (\r\n                <AlertTriangle className=\"w-8 h-8 text-red-500\" />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Gap Identification */}\r\n          {results.analysis.gaps && (\r\n            <div className=\"p-4 border-b bg-red-50\">\r\n              <h4 className=\"font-semibold text-red-900 flex items-center gap-2 mb-2\">\r\n                <AlertCircle className=\"w-4 h-4\" />\r\n                {achievement < 50 ? 'Critical Gaps Identified' : 'Gap Identification'}\r\n              </h4>\r\n              <div className=\"text-sm text-red-800\">\r\n                {renderAnalysisField(results.analysis.gaps)}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Strategic Mapping */}\r\n          {results.analysis.alignment && (\r\n            <div className=\"p-4 border-b bg-blue-50\">\r\n              <h4 className=\"font-semibold text-blue-900 flex items-center gap-2 mb-2\">\r\n                <TrendingUp className=\"w-4 h-4\" />\r\n                Strategic Plan Mapping\r\n              </h4>\r\n              <div className=\"text-sm text-blue-800\">\r\n                {renderAnalysisField(results.analysis.alignment)}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Prescriptive Roadmap */}\r\n          <div className=\"p-4\">\r\n            <h4 className=\"font-semibold text-slate-900 flex items-center gap-2 mb-3\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              Prescriptive Action Items\r\n            </h4>\r\n            <div className=\"space-y-2\">\r\n              {(() => {\r\n                const items = parseRecommendations(results.analysis.recommendations);\r\n                if (items.length === 0) {\r\n                  return <p className=\"text-sm text-slate-500 italic\">No recommendations available</p>;\r\n                }\r\n                return items.map((item, idx) => {\r\n                  let priority = item.priority || 'medium';\r\n                  if (item.timeline?.toLowerCase().includes('immediate') || \r\n                      item.timeline?.toLowerCase().includes('1 month') ||\r\n                      item.timeline?.toLowerCase().includes('3 month')) {\r\n                    priority = 'high';\r\n                  } else if (item.timeline?.toLowerCase().includes('12 month') ||\r\n                             item.timeline?.toLowerCase().includes('year')) {\r\n                    priority = 'low';\r\n                  }\r\n                  return (\r\n                    <div key={idx} className=\"flex items-start gap-3 p-3 bg-white border rounded-lg hover:shadow-sm transition-shadow\">\r\n                      <Badge className={`shrink-0 ${getPriorityColor(priority)}`}>\r\n                        {priority === 'high' ? ' Critical' : priority === 'low' ? ' Low' : ' Medium'}\r\n                      </Badge>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm font-medium text-slate-900\">{item.action}</p>\r\n                        {item.timeline && (\r\n                          <p className=\"text-xs text-slate-500 mt-1 flex items-center gap-1\">\r\n                            <Clock className=\"w-3 h-3\" />\r\n                            {item.timeline}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                });\r\n              })()}\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* ===== SECTION 3: KRA Classification Review (Retained) ===== */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <CheckCircle className=\"w-5 h-5\" />\r\n            KRA Classification Review\r\n          </CardTitle>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Activities mapped to Key Result Areas from the Strategic Plan\r\n          </p>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-3\">\r\n            {results.aggregation.byKra.map((kra) => (\r\n              <div\r\n                key={`${kra.kraId}-${kra.kraTitle}`}\r\n                className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                  kra.status === 'MET' ? 'bg-green-50 border-green-200' :\r\n                  kra.status === 'ON_TRACK' ? 'bg-blue-50 border-blue-200' :\r\n                  'bg-red-50 border-red-200'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  {getStatusIcon(kra.status)}\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-gray-900\">{kra.kraId}</h4>\r\n                    <p className=\"text-xs text-gray-600\">{kra.kraTitle}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-bold text-lg\">{kra.achievementPercent.toFixed(1)}%</p>\r\n                  <Badge className={getStatusColor(kra.status)}>\r\n                    {kra.status}\r\n                  </Badge>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* ===== REMOVED SECTIONS (De-Cluttered) =====\r\n         Target vs Reported by KPI Graph (Bar Chart)\r\n         Status Distribution Graph (Pie Chart)  \r\n         Completion Percentage by KPI Graph (Line Chart)\r\n         Quarter-over-Quarter Comparison (Timeline/Table)\r\n         Tabs Navigation (metrics, details tabs)\r\n      ===== */}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3941, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/components/qpro/action-zone-panel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useCallback } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useDropzone } from \"react-dropzone\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Loader2, Upload, FileText, CheckCircle, Eye } from \"lucide-react\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { InsightFeed } from \"./insight-feed\"\r\nimport { QPROResultsWithAggregation } from \"@/components/qpro-results-with-aggregation\"\r\nimport AuthService from \"@/lib/services/auth-service\"\r\nimport type { QPROWithAggregationResults } from \"@/lib/types\"\r\n\r\ninterface ActionZonePanelProps {\r\n  year: number\r\n  quarter: number\r\n  unitId: string\r\n  unitName: string\r\n  onAnalysisComplete: () => void\r\n}\r\n\r\nexport function ActionZonePanel({ year, quarter, unitId, unitName, onAnalysisComplete }: ActionZonePanelProps) {\r\n  const router = useRouter()\r\n  const [uploading, setUploading] = useState(false)\r\n  const [analyzing, setAnalyzing] = useState(false)\r\n  const [analysisId, setAnalysisId] = useState<string | null>(null)\r\n  const [results, setResults] = useState<QPROWithAggregationResults | null>(null)\r\n  const [useAggregation, setUseAggregation] = useState(true)\r\n  const { toast } = useToast()\r\n\r\n  const onDrop = useCallback(\r\n    async (acceptedFiles: File[]) => {\r\n      console.log('[ACTION ZONE] onDrop called with files:', acceptedFiles.length);\r\n      \r\n      if (acceptedFiles.length === 0) {\r\n        console.log('[ACTION ZONE] No files accepted');\r\n        return\r\n      }\r\n\r\n      const file = acceptedFiles[0]\r\n      console.log('[ACTION ZONE] File selected:', {\r\n        name: file.name,\r\n        type: file.type,\r\n        size: file.size,\r\n        unitId\r\n      });\r\n      \r\n      // Validate file type (DOCX only)\r\n      const allowedTypes = [\r\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n      ]\r\n      \r\n      if (!allowedTypes.includes(file.type)) {\r\n        console.log('[ACTION ZONE] Invalid file type:', file.type);\r\n        toast({\r\n          title: \"Invalid File Type\",\r\n          description: \"Please upload a DOCX file.\",\r\n          variant: \"destructive\",\r\n        })\r\n        return\r\n      }\r\n\r\n      console.log('[ACTION ZONE] Setting uploading to true');\r\n      setUploading(true)\r\n      setAnalyzing(true)\r\n\r\n      try {\r\n        // Get authentication token\r\n        const token = await AuthService.getAccessToken()\r\n        if (!token) {\r\n          throw new Error(\"Authentication required. Please log in again.\")\r\n        }\r\n\r\n        const formData = new FormData()\r\n        formData.append(\"file\", file)\r\n        formData.append(\"unitId\", unitId)\r\n        formData.append(\"year\", year.toString())\r\n        formData.append(\"quarter\", quarter.toString())\r\n        formData.append(\"documentTitle\", file.name)\r\n\r\n        // Use new unified endpoint that includes aggregation\r\n        const endpoint = useAggregation ? \"/api/qpro-with-aggregation\" : \"/api/analyze-qpro\"\r\n        const response = await fetch(endpoint, {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: formData,\r\n        })\r\n\r\n        if (!response.ok) {\r\n          const error = await response.json()\r\n          throw new Error(error.error || \"Upload failed\")\r\n        }\r\n\r\n        const result = await response.json()\r\n        \r\n        console.log('[ACTION ZONE] Upload response:', result);\r\n        console.log('[ACTION ZONE] Analysis ID:', result.analysis?.id);\r\n        \r\n        if (!result.analysis?.id) {\r\n          throw new Error('No analysis ID returned from server');\r\n        }\r\n        \r\n        setAnalysisId(result.analysis.id)\r\n        setUploading(false)\r\n        \r\n        // Navigate to review page for staging workflow\r\n        // Analysis is saved as DRAFT until approved\r\n        toast({\r\n          title: \"Analysis Complete!\",\r\n          description: \"Redirecting to review page...\",\r\n        })\r\n        \r\n        // Navigate to review page instead of showing modal\r\n        router.push(`/qpro/review/${result.analysis.id}`)\r\n      } catch (error: any) {\r\n        console.error(\"Upload error:\", error)\r\n        toast({\r\n          title: \"Upload Failed\",\r\n          description: error.message || \"Failed to upload and analyze the document.\",\r\n          variant: \"destructive\",\r\n        })\r\n        setUploading(false)\r\n        setAnalyzing(false)\r\n      } finally {\r\n        setAnalyzing(false)\r\n      }\r\n    },\r\n    [unitId, year, quarter, toast]\r\n  )\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": [\".docx\"],\r\n    },\r\n    maxFiles: 1,\r\n    disabled: uploading,\r\n  })\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Smart Upload Area */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\r\n          <Upload className=\"w-6 h-6 text-primary\" />\r\n          Upload QPRO Report\r\n        </h2>\r\n\r\n        <div\r\n          {...getRootProps()}\r\n          className={`\r\n            border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all\r\n            ${isDragActive ? \"border-primary bg-primary/5\" : \"border-muted-foreground/25\"}\r\n            ${uploading ? \"opacity-50 cursor-not-allowed\" : \"hover:border-primary hover:bg-muted/50\"}\r\n          `}\r\n        >\r\n          <input {...getInputProps()} />\r\n          \r\n          {uploading ? (\r\n            <div className=\"space-y-3\">\r\n              <Loader2 className=\"w-12 h-12 mx-auto animate-spin text-primary\" />\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {analyzing ? \"Analyzing your QPRO report...\" : \"Uploading...\"}\r\n              </p>\r\n            </div>\r\n          ) : analysisId ? (\r\n            <div className=\"space-y-3\">\r\n              <CheckCircle className=\"w-12 h-12 mx-auto text-green-500\" />\r\n              <p className=\"text-sm font-medium\">Upload Complete!</p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Drop another file to analyze a different report\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              <FileText className=\"w-12 h-12 mx-auto text-muted-foreground\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium mb-1\">\r\n                  {isDragActive ? \"Drop your QPRO report here\" : \"Drop your QPRO Report here\"}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Supports .docx and .pdf files\r\n                </p>\r\n              </div>\r\n              <Button variant=\"outline\" size=\"sm\" type=\"button\">\r\n                Or Click to Browse\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mt-3 text-xs text-muted-foreground\">\r\n          <p>\r\n             Tip: The AI will extract activities from your report and match them against the\r\n            strategic plan targets for Q{quarter} {year}.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Insight Feed or Aggregation Results */}\r\n      {results ? (\r\n        <div className=\"pt-6 border-t\">\r\n          <QPROResultsWithAggregation results={results} />\r\n        </div>\r\n      ) : analysisId && !useAggregation ? (\r\n        <div className=\"pt-6 border-t\">\r\n          <InsightFeed analysisId={analysisId} year={year} quarter={quarter} />\r\n        </div>\r\n      ) : null}\r\n\r\n      {!analysisId && !uploading && (\r\n        <div className=\"pt-6 border-t\">\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            <div className=\"w-16 h-16 mx-auto mb-3 rounded-full bg-muted flex items-center justify-center\">\r\n              <FileText className=\"w-8 h-8\" />\r\n            </div>\r\n            <p className=\"text-sm\">Upload a QPRO report to see AI-powered insights</p>\r\n            <p className=\"text-xs mt-1\">\r\n              Activity matching  Gap analysis  Strategic recommendations\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Quick Review Button for Already Uploaded Draft */}\r\n      {analysisId && (\r\n        <div className=\"pt-4\">\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"w-full\"\r\n            onClick={() => router.push(`/qpro/review/${analysisId}`)}\r\n          >\r\n            <Eye className=\"w-4 h-4 mr-2\" />\r\n            Review & Approve Analysis\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4378, "column": 0}, "map": {"version":3,"sources":["file:///D:/downloads/Downloads%20from%20web/LSPU%20KMIS/app/qpro/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Navbar } from \"@/components/navbar\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Loader2, Building2 } from \"lucide-react\"\r\nimport { TargetBoardPanel } from \"@/components/qpro/target-board-panel\"\r\nimport { ActionZonePanel } from \"@/components/qpro/action-zone-panel\"\r\nimport AuthService from \"@/lib/services/auth-service\"\r\nimport type { Unit } from \"@/lib/api/types\"\r\n\r\nexport default function QPROPage() {\r\n  const { user, isLoading: authLoading, isAuthenticated } = useAuth()\r\n  const router = useRouter()\r\n  \r\n  const [selectedYear, setSelectedYear] = useState(2025)\r\n  const [selectedQuarter, setSelectedQuarter] = useState(1)\r\n  const [analysisRefreshTrigger, setAnalysisRefreshTrigger] = useState(0)\r\n  const [units, setUnits] = useState<Unit[]>([])\r\n  const [selectedUnitId, setSelectedUnitId] = useState<string>(\"\")\r\n  const [selectedUnitName, setSelectedUnitName] = useState<string>(\"\")\r\n  const [unitsLoading, setUnitsLoading] = useState(true)\r\n\r\n  // Fetch units for admin selection\r\n  useEffect(() => {\r\n    const fetchUnits = async () => {\r\n      if (!isAuthenticated || !user) return\r\n      \r\n      try {\r\n        setUnitsLoading(true)\r\n        const token = await AuthService.getAccessToken()\r\n        if (!token) return\r\n        \r\n        const response = await fetch('/api/units', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          }\r\n        })\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          setUnits(data.units || [])\r\n          \r\n          // Set default selected unit\r\n          if (user.role === \"ADMIN\" && data.units?.length > 0) {\r\n            // Admin can select any unit, default to first one if no unitId assigned\r\n            const defaultUnit = user.unitId \r\n              ? data.units.find((u: Unit) => u.id === user.unitId) || data.units[0]\r\n              : data.units[0]\r\n            setSelectedUnitId(defaultUnit.id)\r\n            setSelectedUnitName(defaultUnit.name)\r\n          } else if (user.unitId) {\r\n            // Faculty uses their assigned unit\r\n            const userUnit = data.units.find((u: Unit) => u.id === user.unitId)\r\n            if (userUnit) {\r\n              setSelectedUnitId(userUnit.id)\r\n              setSelectedUnitName(userUnit.name)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching units:', error)\r\n      } finally {\r\n        setUnitsLoading(false)\r\n      }\r\n    }\r\n    \r\n    fetchUnits()\r\n  }, [isAuthenticated, user])\r\n\r\n  // Redirect if not authenticated or not authorized\r\n  useEffect(() => {\r\n    if (!authLoading && !isAuthenticated) {\r\n      router.push(\"/\")\r\n    }\r\n    if (!authLoading && user && user.role !== \"ADMIN\" && user.role !== \"FACULTY\") {\r\n      router.push(\"/dashboard\")\r\n    }\r\n  }, [authLoading, isAuthenticated, user, router])\r\n\r\n  const handleAnalysisComplete = () => {\r\n    // Trigger refresh of target board to update statuses\r\n    setAnalysisRefreshTrigger(prev => prev + 1)\r\n  }\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!user || (user.role !== \"ADMIN\" && user.role !== \"FACULTY\")) {\r\n    return null\r\n  }\r\n\r\n  const years = [2025, 2026, 2027, 2028, 2029]\r\n  const quarters = [1, 2, 3, 4]\r\n  const isAdminUser = user.role === \"ADMIN\"\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"min-h-screen bg-background\">\r\n      {/* Header Section */}\r\n      <div className=\"border-b bg-card\">\r\n        <div className=\"container mx-auto px-4 py-6\">\r\n          <div className=\"flex flex-col gap-4\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold tracking-tight\">Quarterly Physical Report of Operations</h1>\r\n            </div>\r\n\r\n            {/* Filter Bar - \"Context Bar\" */}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-wrap\">\r\n              {/* Unit Selector - Admin can select any unit, Faculty sees their unit */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <Building2 className=\"w-4 h-4 text-muted-foreground\" />\r\n                <label className=\"text-sm font-medium whitespace-nowrap\">Unit:</label>\r\n                {isAdminUser ? (\r\n                  <Select \r\n                    value={selectedUnitId} \r\n                    onValueChange={(val) => {\r\n                      setSelectedUnitId(val)\r\n                      const unit = units.find(u => u.id === val)\r\n                      setSelectedUnitName(unit?.name || \"\")\r\n                    }}\r\n                    disabled={unitsLoading}\r\n                  >\r\n                    <SelectTrigger className=\"w-[200px]\">\r\n                      <SelectValue placeholder={unitsLoading ? \"Loading...\" : \"Select unit\"} />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {units.map((unit) => (\r\n                        <SelectItem key={unit.id} value={unit.id}>\r\n                          {unit.code} - {unit.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                ) : (\r\n                  <span className=\"text-sm text-muted-foreground bg-muted px-3 py-1.5 rounded-md\">\r\n                    {selectedUnitName || user?.unit || \"No unit assigned\"}\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              {/* Year Selector */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"text-sm font-medium whitespace-nowrap\">Year:</label>\r\n                <Select value={selectedYear.toString()} onValueChange={(val) => setSelectedYear(parseInt(val))}>\r\n                  <SelectTrigger className=\"w-[120px]\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {years.map((year) => (\r\n                      <SelectItem key={year} value={year.toString()}>\r\n                        {year}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Quarter Tabs - Pills style */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"text-sm font-medium whitespace-nowrap\">Quarter:</label>\r\n                <Tabs value={selectedQuarter.toString()} onValueChange={(val) => setSelectedQuarter(parseInt(val))}>\r\n                  <TabsList>\r\n                    {quarters.map((q) => (\r\n                      <TabsTrigger key={q} value={q.toString()} className=\"px-4\">\r\n                        Q{q}\r\n                      </TabsTrigger>\r\n                    ))}\r\n                  </TabsList>\r\n                </Tabs>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Dashboard - Target Board & Action Zone */}\r\n      <div className=\"container mx-auto px-4 py-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Target Board */}\r\n          <Card className=\"p-6\">\r\n            <TargetBoardPanel \r\n              year={selectedYear}\r\n              quarter={selectedQuarter}\r\n              unitId={selectedUnitId}\r\n              unitName={selectedUnitName}\r\n              refreshTrigger={analysisRefreshTrigger}\r\n            />\r\n          </Card>\r\n\r\n          {/* Action Zone */}\r\n          <Card className=\"p-6\">\r\n            <ActionZonePanel \r\n              year={selectedYear}\r\n              quarter={selectedQuarter}\r\n              unitId={selectedUnitId}\r\n              unitName={selectedUnitName}\r\n              onAnalysisComplete={handleAnalysisComplete}\r\n            />\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}