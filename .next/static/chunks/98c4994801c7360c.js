(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},86536,87942,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t],87942),e.s(["Eye",()=>t],86536)},70065,e=>{"use strict";var t=e.i(43476),o=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,o.cn)("text-muted-foreground text-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>s,"CardHeader",()=>l,"CardTitle",()=>r])},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},84711,e=>{"use strict";var t=e.i(43476),o=e.i(71645),a=e.i(70065),l=e.i(78583),r=e.i(61911),s=e.i(40160),i=e.i(86536),c=e.i(60865);let n=({stat:e,delay:o})=>{let l=e.icon,r={animationDelay:`${o}s`},s="0"===e.value;return(0,t.jsxs)(a.Card,{className:"animate-fade-in hover:shadow-lg transition-shadow border-0 bg-white h-full",style:r,children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-gray-500 max-w-[70%] truncate",children:e.title}),(0,t.jsx)("div",{className:`p-2 rounded-lg ${e.bgColor}`,children:l?(0,t.jsx)(l,{className:`w-5 h-5 ${e.color}`,"aria-hidden":"true",style:{minWidth:"20px",minHeight:"20px"}}):(0,t.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded-sm flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})})]}),(0,t.jsx)(a.CardContent,{children:s?(0,t.jsx)("div",{className:"text-lg text-gray-400 font-medium",children:"No data yet"}):(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 truncate",children:e.value})})]},e.title)};function d(){let[e,d]=(0,o.useState)([]),[u,g]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{(async()=>{try{let e=await c.default.getAccessToken();if(!e){d([{title:"Total Documents",value:"0",icon:l.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"},{title:"Total Users",value:"0",icon:r.Users,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"},{title:"Total Downloads",value:"0",icon:s.Download,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"},{title:"Total Views",value:"0",icon:i.Eye,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"}]),g(!1);return}let t=await fetch("/api/analytics",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){let e=await t.json(),o=[{title:"Total Documents",value:e.totalDocuments.toLocaleString(),icon:l.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"},{title:"Total Users",value:e.totalUsers.toLocaleString(),icon:r.Users,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"},{title:"Total Downloads",value:e.totalDownloads.toLocaleString(),icon:s.Download,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"},{title:"Total Views",value:e.totalViews.toLocaleString(),icon:i.Eye,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"}];d(o)}else if(401===t.status)console.error("Authentication token expired, logging out user"),await c.default.logout();else if(403===t.status){console.error("User does not have permission to access stats");let e=await c.default.getCurrentUser();d([{title:"Your Documents",value:"0",icon:l.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"},{title:"Your Downloads",value:"0",icon:s.Download,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"},{title:"Your Views",value:"0",icon:i.Eye,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"},{title:"Access Level",value:e?.role||"User",icon:r.Users,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"}])}else console.error("Failed to fetch stats:",t.status),d([{title:"Total Documents",value:"0",icon:l.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"},{title:"Total Users",value:"0",icon:r.Users,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"},{title:"Total Downloads",value:"0",icon:s.Download,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"},{title:"Total Views",value:"0",icon:i.Eye,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"}])}catch(e){console.error("Error fetching stats:",e),d([{title:"Total Documents",value:"0",icon:l.FileText,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"},{title:"Total Users",value:"0",icon:r.Users,color:"#2E8B57",bgColor:"rgba(46, 139, 87, 0.1)"},{title:"Total Downloads",value:"0",icon:s.Download,color:"#C04E3A",bgColor:"rgba(192, 78, 58, 0.1)"},{title:"Total Views",value:"0",icon:i.Eye,color:"#2B4385",bgColor:"rgba(43, 67, 133, 0.1)"}])}finally{g(!1)}})()},[]),u)?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-pulse",children:[void 0,void 0,void 0,void 0].map((e,o)=>(0,t.jsxs)(a.Card,{className:"border-0 bg-white",children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-gray-400",children:"Loading..."}),(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded"})})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold bg-gray-100 rounded w-3/4 h-8"})})]},o))}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 w-full",children:e.map((e,o)=>(0,t.jsx)(n,{stat:e,delay:.1*o},e.title))})}e.s(["default",()=>d])}]);