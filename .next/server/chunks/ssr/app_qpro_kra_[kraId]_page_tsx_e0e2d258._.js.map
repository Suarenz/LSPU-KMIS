{"version":3,"sources":["../../../../node_modules/%40radix-ui/react-checkbox/dist/index.mjs","../../../../components/ui/checkbox.tsx","../../../../components/ui/dynamic-input.tsx","../../../../app/qpro/kra/%5BkraId%5D/page.tsx","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../lib/utils/target-type-utils.ts","../../../../node_modules/lucide-react/src/icons/list-checks.ts","../../../../node_modules/%40radix-ui/react-checkbox/src/Checkbox.tsx","../../../../lib/utils/target-type-detector.ts"],"sourcesContent":["\"use client\";\n\n// packages/react/checkbox/src/Checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProvider, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked = false, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked,\n      onChange: onCheckedChange\n    });\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form2 = button?.form;\n      if (form2) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form2.addEventListener(\"reset\", reset);\n        return () => form2.removeEventListener(\"reset\", reset);\n      }\n    }, [button, setChecked]);\n    return /* @__PURE__ */ jsxs(CheckboxProvider, { scope: __scopeCheckbox, state: checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"checkbox\",\n          \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...checkboxProps,\n          ref: composedRefs,\n          onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n            if (event.key === \"Enter\") event.preventDefault();\n          }),\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        BubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" },\n          defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked\n        }\n      )\n    ] });\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isIndeterminate(context.state) || context.state === true, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.state),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef,\n        style: { pointerEvents: \"none\", ...props.style }\n      }\n    ) });\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BubbleInput = (props) => {\n  const { control, checked, bubbles = true, defaultChecked, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevChecked = usePrevious(checked);\n  const controlSize = useSize(control);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"checked\");\n    const setChecked = descriptor.set;\n    if (prevChecked !== checked && setChecked) {\n      const event = new Event(\"click\", { bubbles });\n      input.indeterminate = isIndeterminate(checked);\n      setChecked.call(input, isIndeterminate(checked) ? false : checked);\n      input.dispatchEvent(event);\n    }\n  }, [prevChecked, checked, bubbles]);\n  const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n  return /* @__PURE__ */ jsx(\n    \"input\",\n    {\n      type: \"checkbox\",\n      \"aria-hidden\": true,\n      defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n      ...inputProps,\n      tabIndex: -1,\n      ref,\n      style: {\n        ...props.style,\n        ...controlSize,\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        opacity: 0,\n        margin: 0\n      }\n    }\n  );\n};\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Checkbox;\nvar Indicator = CheckboxIndicator;\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  Indicator,\n  Root,\n  createCheckboxScope\n};\n//# sourceMappingURL=index.mjs.map\n","'use client'\n\nimport * as React from 'react'\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport { CheckIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        'peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\n\r\nexport type TargetType = 'MILESTONE' | 'COUNT' | 'PERCENTAGE' | 'FINANCIAL' | 'TEXT_CONDITION';\r\n\r\nexport interface DynamicInputProps {\r\n  targetType: TargetType;\r\n  value: string | number;\r\n  onChange: (value: string | number) => void;\r\n  placeholder?: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\n/**\r\n * DynamicInput Component\r\n * \r\n * Renders different input types based on the target_type:\r\n * - MILESTONE: Checkbox (0/1)\r\n * - COUNT: Number input (integers only)\r\n * - PERCENTAGE: Number input with % suffix (0-100)\r\n * - FINANCIAL: Currency input with ₱ prefix and thousand separators\r\n * - TEXT_CONDITION: Dropdown (Met/Not Met/In Progress)\r\n */\r\nexport function DynamicInput({\r\n  targetType,\r\n  value,\r\n  onChange,\r\n  placeholder = '',\r\n  className,\r\n  disabled = false,\r\n}: DynamicInputProps) {\r\n  switch (targetType) {\r\n    case 'MILESTONE':\r\n      return (\r\n        <MilestoneInput\r\n          value={value}\r\n          onChange={onChange}\r\n          className={className}\r\n          disabled={disabled}\r\n        />\r\n      );\r\n\r\n    case 'COUNT':\r\n      return (\r\n        <CountInput\r\n          value={value}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          className={className}\r\n          disabled={disabled}\r\n        />\r\n      );\r\n\r\n    case 'PERCENTAGE':\r\n      return (\r\n        <PercentageInput\r\n          value={value}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          className={className}\r\n          disabled={disabled}\r\n        />\r\n      );\r\n\r\n    case 'FINANCIAL':\r\n      return (\r\n        <FinancialInput\r\n          value={value}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          className={className}\r\n          disabled={disabled}\r\n        />\r\n      );\r\n\r\n    case 'TEXT_CONDITION':\r\n      return (\r\n        <TextConditionInput\r\n          value={value}\r\n          onChange={onChange}\r\n          className={className}\r\n          disabled={disabled}\r\n        />\r\n      );\r\n\r\n    default:\r\n      return (\r\n        <input\r\n          type=\"text\"\r\n          value={value}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          placeholder={placeholder}\r\n          disabled={disabled}\r\n          className={cn(\r\n            'w-full px-3 py-2 text-sm border border-gray-300 rounded-md',\r\n            'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n            disabled && 'bg-gray-100 cursor-not-allowed',\r\n            className\r\n          )}\r\n        />\r\n      );\r\n  }\r\n}\r\n\r\n/**\r\n * Milestone Input - Checkbox for binary completion (0/1)\r\n */\r\nfunction MilestoneInput({\r\n  value,\r\n  onChange,\r\n  className,\r\n  disabled,\r\n}: Omit<DynamicInputProps, 'targetType' | 'placeholder'>) {\r\n  const isChecked = value === 1 || value === '1';\r\n\r\n  return (\r\n    <div className={cn('flex items-center gap-2', className)}>\r\n      <Checkbox\r\n        checked={isChecked}\r\n        onCheckedChange={(checked) => onChange(checked ? 1 : 0)}\r\n        disabled={disabled}\r\n        className=\"h-5 w-5\"\r\n      />\r\n      <span className=\"text-sm text-gray-600\">\r\n        {isChecked ? 'Achieved' : 'Pending'}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Count Input - Integer numbers only\r\n */\r\nfunction CountInput({\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  className,\r\n  disabled,\r\n}: Omit<DynamicInputProps, 'targetType'>) {\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    // Allow empty string or integers only\r\n    if (inputValue === '' || /^\\d+$/.test(inputValue)) {\r\n      onChange(inputValue === '' ? '' : parseInt(inputValue, 10));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type=\"text\"\r\n      inputMode=\"numeric\"\r\n      value={value}\r\n      onChange={handleChange}\r\n      placeholder={placeholder || '0'}\r\n      disabled={disabled}\r\n      className={cn(\r\n        'w-32 px-3 py-2 text-sm text-right border border-gray-300 rounded-md',\r\n        'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n        disabled && 'bg-gray-100 cursor-not-allowed',\r\n        className\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * Percentage Input - Decimals allowed, 0-100 range with % suffix\r\n */\r\nfunction PercentageInput({\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  className,\r\n  disabled,\r\n}: Omit<DynamicInputProps, 'targetType'>) {\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    // Allow empty string, numbers with optional decimal point\r\n    if (inputValue === '' || /^\\d*\\.?\\d*$/.test(inputValue)) {\r\n      const numValue = parseFloat(inputValue);\r\n      // Validate range 0-100\r\n      if (inputValue === '' || (numValue >= 0 && numValue <= 100)) {\r\n        onChange(inputValue);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cn('flex items-center gap-1', className)}>\r\n      <input\r\n        type=\"text\"\r\n        inputMode=\"decimal\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        placeholder={placeholder || '0'}\r\n        disabled={disabled}\r\n        className={cn(\r\n          'w-24 px-3 py-2 text-sm text-right border border-gray-300 rounded-md',\r\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n          disabled && 'bg-gray-100 cursor-not-allowed'\r\n        )}\r\n      />\r\n      <span className=\"text-sm text-gray-500 font-medium\">%</span>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Financial Input - Currency with ₱ prefix and thousand separators\r\n */\r\nfunction FinancialInput({\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  className,\r\n  disabled,\r\n}: Omit<DynamicInputProps, 'targetType'>) {\r\n  // Format number with thousand separators\r\n  const formatCurrency = (num: string | number): string => {\r\n    if (!num && num !== 0) return '';\r\n    const numStr = num.toString().replace(/,/g, '');\r\n    const [intPart, decimalPart] = numStr.split('.');\r\n    const formattedInt = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n    return decimalPart !== undefined ? `${formattedInt}.${decimalPart}` : formattedInt;\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value.replace(/,/g, ''); // Remove existing commas\r\n    // Allow empty string, numbers with optional decimal point (max 2 decimal places)\r\n    if (inputValue === '' || /^\\d*\\.?\\d{0,2}$/.test(inputValue)) {\r\n      onChange(inputValue);\r\n    }\r\n  };\r\n\r\n  const displayValue = formatCurrency(value);\r\n\r\n  return (\r\n    <div className={cn('flex items-center gap-1', className)}>\r\n      <span className=\"text-sm text-gray-500 font-medium\">₱</span>\r\n      <input\r\n        type=\"text\"\r\n        inputMode=\"decimal\"\r\n        value={displayValue}\r\n        onChange={handleChange}\r\n        placeholder={placeholder || '0.00'}\r\n        disabled={disabled}\r\n        className={cn(\r\n          'w-36 px-3 py-2 text-sm text-right border border-gray-300 rounded-md',\r\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n          disabled && 'bg-gray-100 cursor-not-allowed'\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Text Condition Input - Dropdown for qualitative status\r\n */\r\nfunction TextConditionInput({\r\n  value,\r\n  onChange,\r\n  className,\r\n  disabled,\r\n}: Omit<DynamicInputProps, 'targetType' | 'placeholder'>) {\r\n  const options = [\r\n    { value: 'Met', label: 'Met' },\r\n    { value: 'Not Met', label: 'Not Met' },\r\n    { value: 'In Progress', label: 'In Progress' },\r\n  ];\r\n\r\n  return (\r\n    <Select\r\n      value={value.toString()}\r\n      onValueChange={onChange}\r\n      disabled={disabled}\r\n    >\r\n      <SelectTrigger className={cn('w-40', className)}>\r\n        <SelectValue placeholder=\"Select status...\" />\r\n      </SelectTrigger>\r\n      <SelectContent>\r\n        {options.map((option) => (\r\n          <SelectItem key={option.value} value={option.value}>\r\n            {option.label}\r\n          </SelectItem>\r\n        ))}\r\n      </SelectContent>\r\n    </Select>\r\n  );\r\n}\r\n\r\n/**\r\n * Helper function to validate input based on target type\r\n */\r\nexport function validateDynamicInput(\r\n  targetType: TargetType,\r\n  value: string | number\r\n): { isValid: boolean; error?: string } {\r\n  if (!value && value !== 0) {\r\n    return { isValid: false, error: 'Value is required' };\r\n  }\r\n\r\n  switch (targetType) {\r\n    case 'MILESTONE':\r\n      if (value !== 0 && value !== 1 && value !== '0' && value !== '1') {\r\n        return { isValid: false, error: 'Milestone must be 0 or 1' };\r\n      }\r\n      return { isValid: true };\r\n\r\n    case 'COUNT':\r\n      if (!/^\\d+$/.test(value.toString())) {\r\n        return { isValid: false, error: 'Count must be a whole number' };\r\n      }\r\n      return { isValid: true };\r\n\r\n    case 'PERCENTAGE':\r\n      const percentValue = parseFloat(value.toString());\r\n      if (isNaN(percentValue) || percentValue < 0 || percentValue > 100) {\r\n        return { isValid: false, error: 'Percentage must be between 0 and 100' };\r\n      }\r\n      return { isValid: true };\r\n\r\n    case 'FINANCIAL':\r\n      const financialValue = parseFloat(value.toString().replace(/,/g, ''));\r\n      if (isNaN(financialValue) || financialValue < 0) {\r\n        return { isValid: false, error: 'Amount must be a positive number' };\r\n      }\r\n      // Check max 2 decimal places\r\n      if (!/^\\d+(\\.\\d{0,2})?$/.test(value.toString().replace(/,/g, ''))) {\r\n        return { isValid: false, error: 'Amount must have at most 2 decimal places' };\r\n      }\r\n      return { isValid: true };\r\n\r\n    case 'TEXT_CONDITION':\r\n      const validStatuses = ['Met', 'Not Met', 'In Progress'];\r\n      if (!validStatuses.includes(value.toString())) {\r\n        return { isValid: false, error: 'Invalid status' };\r\n      }\r\n      return { isValid: true };\r\n\r\n    default:\r\n      return { isValid: true };\r\n  }\r\n}\r\n\r\n/**\r\n * Helper function to format display value based on target type\r\n */\r\nexport function formatDisplayValue(targetType: TargetType, value: string | number): string {\r\n  if (!value && value !== 0) return '-';\r\n\r\n  switch (targetType) {\r\n    case 'MILESTONE':\r\n      return value === 1 || value === '1' ? 'Achieved' : 'Pending';\r\n\r\n    case 'COUNT':\r\n      return value.toString();\r\n\r\n    case 'PERCENTAGE':\r\n      return `${value}%`;\r\n\r\n    case 'FINANCIAL':\r\n      const numValue = parseFloat(value.toString().replace(/,/g, ''));\r\n      return `₱${numValue.toLocaleString('en-PH', {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      })}`;\r\n\r\n    case 'TEXT_CONDITION':\r\n      return value.toString();\r\n\r\n    default:\r\n      return value.toString();\r\n  }\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState, useMemo, useCallback } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { cn } from '@/lib/utils';\r\nimport { ArrowLeft, AlertCircle, Save, TrendingUp, CheckCircle2, FileText, RefreshCw, ListChecks, Building2 } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport strategicPlan from '@/lib/data/strategic_plan.json';\r\nimport { useAuth } from '@/lib/auth-context';\r\nimport AuthService from '@/lib/services/auth-service';\r\nimport {\r\n  parseNumericValue,\r\n} from '@/lib/utils/target-type-detector';\r\nimport { DynamicInput, type TargetType } from '@/components/ui/dynamic-input';\r\nimport { mapTargetType } from '@/lib/utils/target-type-utils';\r\n\r\n// KPI Progress types\r\ninterface KPIProgressItem {\r\n  initiativeId: string;\r\n  year: number;\r\n  quarter: number;\r\n  targetValue: string | number;\r\n  currentValue: number | string;\r\n  achievementPercent: number;\r\n  status: 'MET' | 'ON_TRACK' | 'MISSED' | 'PENDING';\r\n  submissionCount: number;\r\n  participatingUnits: string[];\r\n  targetType: TargetType;\r\n  // Manual override fields\r\n  manualOverride?: number | string | null;\r\n  manualOverrideReason?: string | null;\r\n  manualOverrideBy?: string | null;\r\n  manualOverrideAt?: string | null;\r\n  valueSource: 'qpro' | 'manual' | 'none';\r\n}\r\n\r\ninterface KPIProgressData {\r\n  kraId: string;\r\n  kraTitle: string;\r\n  initiatives: {\r\n    id: string;\r\n    outputs: string;\r\n    outcomes: string;\r\n    targetType: string;\r\n    progress: KPIProgressItem[];\r\n  }[];\r\n}\r\n\r\ninterface KPIProgressApiResponse {\r\n  success: boolean;\r\n  year: number;\r\n  quarter?: number;\r\n  data: KPIProgressData;\r\n}\r\n\r\ninterface KRA {\r\n  kra_id: string;\r\n  kra_title: string;\r\n  guiding_principle: string;\r\n  initiatives: Initiative[];\r\n}\r\n\r\ninterface TimelineItem {\r\n  year: number;\r\n  target_value: string | number;\r\n  current_value?: string | number;\r\n}\r\n\r\ninterface Initiative {\r\n  id: string;\r\n  key_performance_indicator: {\r\n    outputs: string;\r\n    outcomes: string;\r\n  };\r\n  strategies: string[];\r\n  programs_activities: string[];\r\n  responsible_offices: string[];\r\n  targets: {\r\n    type: string;\r\n    currency?: string;\r\n    unit_basis?: string;\r\n    low_count_threshold?: number;\r\n    timeline_data: TimelineItem[];\r\n  };\r\n}\r\n\r\n// Type for storing current values in state\r\ntype CurrentValuesMap = Record<string, string | number>;\r\n\r\n// Type for pending saves (values being edited but not yet saved to DB)\r\ntype PendingEditsMap = Record<string, { value: string | number; reason?: string }>;\r\n\r\nconst kraColors = [\r\n  'bg-red-100 text-red-800',\r\n  'bg-blue-100 text-blue-800',\r\n  'bg-green-100 text-green-800',\r\n  'bg-yellow-100 text-yellow-800',\r\n  'bg-purple-100 text-purple-800',\r\n  'bg-pink-100 text-pink-800',\r\n  'bg-indigo-100 text-indigo-800',\r\n  'bg-cyan-100 text-cyan-800',\r\n  'bg-orange-100 text-orange-800',\r\n  'bg-teal-100 text-teal-800',\r\n  'bg-lime-100 text-lime-800',\r\n  'bg-rose-100 text-rose-800',\r\n  'bg-sky-100 text-sky-800',\r\n  'bg-violet-100 text-violet-800',\r\n  'bg-amber-100 text-amber-800',\r\n  'bg-emerald-100 text-emerald-800',\r\n  'bg-fuchsia-100 text-fuchsia-800',\r\n  'bg-cyan-100 text-cyan-800',\r\n  'bg-red-200 text-red-900',\r\n  'bg-blue-200 text-blue-900',\r\n  'bg-green-200 text-green-900',\r\n  'bg-purple-200 text-purple-900',\r\n];\r\n\r\n// Helper function to normalize data - convert strings to arrays if needed\r\nconst normalizeToArray = (value: any): string[] => {\r\n  if (!value) return [];\r\n  if (Array.isArray(value)) return value;\r\n  if (typeof value === 'string') return [value];\r\n  return [];\r\n};\r\n\r\nexport default function KRADetailPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const { isAuthenticated, isLoading, user } = useAuth();\r\n  const kraIdRaw = params.kraId as string;\r\n  \r\n  // Decode the URL parameter - useParams returns encoded values\r\n  const kraId = decodeURIComponent(kraIdRaw);\r\n\r\n  const [analysisData, setAnalysisData] = useState<any>(null);\r\n  const [loadingAnalysis, setLoadingAnalysis] = useState(false);\r\n  \r\n  // KPI Progress state (from QPRO uploaded documents)\r\n  const [kpiProgress, setKpiProgress] = useState<KPIProgressData | null>(null);\r\n  const [loadingProgress, setLoadingProgress] = useState(false);\r\n  const [selectedProgressYear, setSelectedProgressYear] = useState<number>(new Date().getFullYear());\r\n  const [refreshTrigger, setRefreshTrigger] = useState<number>(0); // Used to force re-fetch\r\n\r\n  // QPRO-derived current values for the Targets-by-Year table\r\n  const [qproDerivedValues, setQproDerivedValues] = useState<CurrentValuesMap>({});\r\n  \r\n  // Pending edits that haven't been saved to DB yet (keyed by \"{initiativeId}-{year}-{quarter}\")\r\n  const [pendingEdits, setPendingEdits] = useState<PendingEditsMap>({});\r\n  const [savingOverride, setSavingOverride] = useState<string | null>(null); // Track which item is being saved\r\n\r\n  // Phase 3: KPI Target Management State\r\n  const [kpiTargets, setKpiTargets] = useState<Record<string, any>>({});\r\n  const [editingTarget, setEditingTarget] = useState<string | null>(null); // \"{initiativeId}-{year}-{quarter}\"\r\n  const [pendingTargetEdits, setPendingTargetEdits] = useState<Record<string, number>>({});\r\n  const [savingTarget, setSavingTarget] = useState<string | null>(null);\r\n\r\n  // NOTE: We no longer use localStorage for persistence - all saves go to database\r\n  // The old localStorage-based currentValues state is replaced by database-backed values\r\n  \r\n  // Get the effective current value for a specific initiative-year-quarter from API data\r\n  const getCurrentValueFromProgress = useCallback((initiativeId: string, year: number, quarter?: number): number | string => {\r\n    if (!kpiProgress) return 0;\r\n    const initiative = kpiProgress.initiatives?.find(i => i.id === initiativeId);\r\n    if (!initiative) return 0;\r\n    \r\n    if (quarter) {\r\n      // Get specific quarter value\r\n      const progressItem = initiative.progress?.find(p => p.year === year && p.quarter === quarter);\r\n      return progressItem?.currentValue ?? 0;\r\n    } else {\r\n      // Sum all quarters for the year (only for numeric types)\r\n      const yearItems = initiative.progress?.filter(p => p.year === year) || [];\r\n      return yearItems.reduce((sum, item) => {\r\n        const val = typeof item.currentValue === 'number' ? item.currentValue : parseFloat(String(item.currentValue)) || 0;\r\n        return sum + val;\r\n      }, 0);\r\n    }\r\n  }, [kpiProgress]);\r\n\r\n  // Get the value source for a specific initiative-year-quarter from API data\r\n  const getValueSourceFromProgress = useCallback((initiativeId: string, year: number, quarter?: number): 'qpro' | 'manual' | 'none' => {\r\n    if (!kpiProgress) return 'none';\r\n    const initiative = kpiProgress.initiatives?.find(i => i.id === initiativeId);\r\n    if (!initiative) return 'none';\r\n    \r\n    if (quarter) {\r\n      const progressItem = initiative.progress?.find(p => p.year === year && p.quarter === quarter);\r\n      return progressItem?.valueSource || 'none';\r\n    } else {\r\n      // If any quarter has a value, return the highest priority source\r\n      const yearItems = initiative.progress?.filter(p => p.year === year) || [];\r\n      if (yearItems.some(item => item.valueSource === 'manual')) return 'manual';\r\n      if (yearItems.some(item => item.valueSource === 'qpro')) return 'qpro';\r\n      return 'none';\r\n    }\r\n  }, [kpiProgress]);\r\n\r\n  // Save a manual override value to the database\r\n  const saveManualOverride = useCallback(async (\r\n    initiativeId: string,\r\n    year: number,\r\n    quarter: number,\r\n    value: number | string | null,\r\n    reason?: string,\r\n    targetType?: TargetType\r\n  ) => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    setSavingOverride(key);\r\n    \r\n    try {\r\n      const token = await AuthService.getAccessToken();\r\n      const response = await fetch('/api/kpi-progress', {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          kraId: kraId,\r\n          initiativeId,\r\n          year,\r\n          quarter,\r\n          value,\r\n          reason,\r\n          targetType,\r\n        }),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        let error: any = {};\r\n        try {\r\n          error = await response.json();\r\n        } catch {\r\n          // If response body is not JSON, try to get text\r\n          error = { message: `HTTP ${response.status}` };\r\n        }\r\n        console.error('Failed to save override:', error, 'Status:', response.status);\r\n        return false;\r\n      }\r\n      \r\n      // Remove from pending edits on success\r\n      setPendingEdits(prev => {\r\n        const next = { ...prev };\r\n        delete next[key];\r\n        return next;\r\n      });\r\n      \r\n      // Always refresh KPI progress for the whole year (all quarters)\r\n      const params = new URLSearchParams({\r\n        kraId: kraId,\r\n        year: selectedProgressYear.toString(),\r\n        _t: Date.now().toString(), // cache bust\r\n      });\r\n      const refreshResponse = await fetch(`/api/kpi-progress?${params}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n      });\r\n      if (refreshResponse.ok) {\r\n        const api = await refreshResponse.json();\r\n        setKpiProgress(api.data);\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error saving manual override:', error);\r\n      return false;\r\n    } finally {\r\n      setSavingOverride(null);\r\n    }\r\n  }, [kraId, selectedProgressYear]);\r\n\r\n  // Update a pending edit (before saving to DB)\r\n  const updatePendingEdit = useCallback((initiativeId: string, year: number, quarter: number, value: string | number) => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    // Keep as-is (string or number) based on input type\r\n    const finalValue = value === '' ? 0 : value;\r\n    setPendingEdits(prev => ({\r\n      ...prev,\r\n      [key]: { value: finalValue },\r\n    }));\r\n  }, []);\r\n\r\n  // Get current value for display (pending edit → API value → 0)\r\n  const getDisplayValue = useCallback((initiativeId: string, year: number, quarter: number): string | number => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    if (pendingEdits[key] !== undefined) {\r\n      return pendingEdits[key].value;\r\n    }\r\n    return getCurrentValueFromProgress(initiativeId, year, quarter);\r\n  }, [pendingEdits, getCurrentValueFromProgress]);\r\n\r\n  // Check if there's a pending edit for this item\r\n  const hasPendingEdit = useCallback((initiativeId: string, year: number, quarter: number): boolean => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    return pendingEdits[key] !== undefined;\r\n  }, [pendingEdits]);\r\n\r\n  // Clear all pending edits and reset to API values\r\n  const clearPendingEdits = useCallback(() => {\r\n    setPendingEdits({});\r\n  }, []);\r\n\r\n  // Phase 3: KPI Target Management Functions\r\n  \r\n  // Fetch KPI targets from database for this KRA\r\n  const fetchKpiTargets = useCallback(async () => {\r\n    try {\r\n      const token = await AuthService.getAccessToken();\r\n      const params = new URLSearchParams({ kraId });\r\n      const response = await fetch(`/api/kpi-targets?${params}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        // Index targets by key for quick lookup\r\n        const targetsMap: Record<string, any> = {};\r\n        data.targets?.forEach((t: any) => {\r\n          const key = `${t.initiative_id}-${t.year}-${t.quarter || 'annual'}`;\r\n          targetsMap[key] = t;\r\n        });\r\n        setKpiTargets(targetsMap);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching KPI targets:', error);\r\n    }\r\n  }, [kraId]);\r\n\r\n  // Get target value for display (pending edit → DB target → strategic plan)\r\n  const getTargetValue = useCallback((initiativeId: string, year: number, quarter: number, fallbackValue: number | string): number | string => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    \r\n    // 1. Check pending edit\r\n    if (pendingTargetEdits[key] !== undefined) {\r\n      return pendingTargetEdits[key];\r\n    }\r\n    \r\n    // 2. Check database target\r\n    const dbTarget = kpiTargets[key];\r\n    if (dbTarget) {\r\n      return dbTarget.target_value;\r\n    }\r\n    \r\n    // 3. Fallback to strategic plan value\r\n    return fallbackValue;\r\n  }, [pendingTargetEdits, kpiTargets]);\r\n\r\n  // Update pending target edit\r\n  const updateTargetEdit = useCallback((initiativeId: string, year: number, quarter: number, value: number) => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    setPendingTargetEdits(prev => ({\r\n      ...prev,\r\n      [key]: value\r\n    }));\r\n  }, []);\r\n\r\n  // Save target to database\r\n  const saveTarget = useCallback(async (\r\n    initiativeId: string,\r\n    year: number,\r\n    quarter: number,\r\n    targetValue: number,\r\n    targetType: string,\r\n    description?: string\r\n  ) => {\r\n    const key = `${initiativeId}-${year}-${quarter}`;\r\n    setSavingTarget(key);\r\n    \r\n    try {\r\n      const token = await AuthService.getAccessToken();\r\n      const response = await fetch('/api/kpi-targets', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          kra_id: kraId,\r\n          initiative_id: initiativeId,\r\n          year,\r\n          quarter,\r\n          target_value: targetValue,\r\n          target_type: targetType,\r\n          description\r\n        })\r\n      });\r\n      \r\n      if (response.ok) {\r\n        // Clear pending edit\r\n        setPendingTargetEdits(prev => {\r\n          const next = { ...prev };\r\n          delete next[key];\r\n          return next;\r\n        });\r\n        \r\n        // Refresh targets\r\n        await fetchKpiTargets();\r\n        setEditingTarget(null);\r\n        return true;\r\n      } else {\r\n        const error = await response.json();\r\n        console.error('Failed to save target:', error);\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving target:', error);\r\n      return false;\r\n    } finally {\r\n      setSavingTarget(null);\r\n    }\r\n  }, [kraId, fetchKpiTargets]);\r\n\r\n  // Cancel target editing\r\n  const cancelTargetEdit = useCallback(() => {\r\n    setPendingTargetEdits({});\r\n    setEditingTarget(null);\r\n  }, []);\r\n\r\n  // Direct access to KRA - use normalized ID comparison for URL-encoded values\r\n  const allKras = (strategicPlan as any).kras || [];\r\n  // Normalize KRA ID for comparison: handles \"KRA%201\" -> \"KRA 1\", \"KRA1\" -> \"KRA 1\"\r\n  const normalizeKraIdLocal = (id: string): string => {\r\n    const decoded = decodeURIComponent(id);\r\n    const match = decoded.match(/KRA\\s*(\\d+)/i);\r\n    return match ? `KRA ${match[1]}` : decoded;\r\n  };\r\n  const normalizedKraId = normalizeKraIdLocal(kraId as string);\r\n  const kra = allKras.find((k: KRA) => normalizeKraIdLocal(k.kra_id) === normalizedKraId) || null;\r\n\r\n  const kraColorClass = kra \r\n    ? kraColors[(parseInt(kra.kra_id.split(' ')[1]) - 1) % kraColors.length]\r\n    : kraColors[0];\r\n\r\n  // Get all unique years from all initiatives\r\n  const availableYears = useMemo(() => {\r\n    if (!kra) return [new Date().getFullYear()];\r\n    const years = new Set<number>();\r\n    kra.initiatives.forEach((initiative: Initiative) => {\r\n      initiative.targets?.timeline_data?.forEach((t: TimelineItem) => years.add(t.year));\r\n    });\r\n    const sortedYears = Array.from(years).sort();\r\n    return sortedYears.length > 0 ? sortedYears : [new Date().getFullYear()];\r\n  }, [kra]);\r\n\r\n  // Ensure selectedProgressYear is in availableYears\r\n  useEffect(() => {\r\n    if (availableYears.length > 0 && !availableYears.includes(selectedProgressYear)) {\r\n      setSelectedProgressYear(availableYears[0]);\r\n    }\r\n  }, [availableYears, selectedProgressYear]);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated || isLoading) return;\r\n\r\n    const fetchAnalysisData = async () => {\r\n      try {\r\n        setLoadingAnalysis(true);\r\n        const token = await AuthService.getAccessToken();\r\n        const response = await fetch(`/api/qpro-analyses?kraId=${kraId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setAnalysisData(data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching analysis data:', error);\r\n      } finally {\r\n        setLoadingAnalysis(false);\r\n      }\r\n    };\r\n\r\n    fetchAnalysisData();\r\n  }, [kraId, isAuthenticated, isLoading]);\r\n\r\n  // Fetch KPI progress from QPRO documents - fetches all quarters for the year\r\n  useEffect(() => {\r\n    if (!isAuthenticated || isLoading || !kraId) return;\r\n\r\n    const fetchKPIProgress = async () => {\r\n      try {\r\n        setLoadingProgress(true);\r\n        const token = await AuthService.getAccessToken();\r\n        // Fetch without quarter param to get all quarters for the year\r\n        // Add cache-busting param to ensure fresh data\r\n        const params = new URLSearchParams({\r\n          kraId: kraId,\r\n          year: selectedProgressYear.toString(),\r\n          _t: Date.now().toString(), // Cache bust\r\n        });\r\n        \r\n        const response = await fetch(`/api/kpi-progress?${params}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Cache-Control': 'no-cache',\r\n          },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const api = (await response.json()) as KPIProgressApiResponse;\r\n          setKpiProgress(api.data);\r\n          \r\n          // Build QPRO-derived values map for the per-quarter table\r\n          const derived: CurrentValuesMap = {};\r\n          for (const initiative of api.data.initiatives || []) {\r\n            const progressItems = (initiative.progress || []).filter((p) => p.year === selectedProgressYear);\r\n            for (const pItem of progressItems) {\r\n              const key = `${initiative.id}-${pItem.year}-${pItem.quarter}`;\r\n              derived[key] = pItem.currentValue || 0;\r\n            }\r\n          }\r\n          setQproDerivedValues(derived);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching KPI progress:', error);\r\n      } finally {\r\n        setLoadingProgress(false);\r\n      }\r\n    };\r\n\r\n    fetchKPIProgress();\r\n    // Phase 3: Also fetch KPI targets from database\r\n    fetchKpiTargets();\r\n  }, [kraId, isAuthenticated, isLoading, selectedProgressYear, fetchKpiTargets, refreshTrigger]);\r\n\r\n  // Auto-refresh when page becomes visible (user returns from approval)\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'visible' && isAuthenticated && !isLoading) {\r\n        // Trigger a refresh when user returns to this page\r\n        setRefreshTrigger(prev => prev + 1);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n  }, [isAuthenticated, isLoading]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-lg text-gray-600\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-lg text-gray-600\">Please log in to view this page.</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!kra) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 p-8\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => router.back()}\r\n          className=\"mb-4\"\r\n        >\r\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n          Back to Strategic Commitments\r\n        </Button>\r\n        <div className=\"bg-white rounded-lg border border-gray-300 p-8\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <AlertCircle className=\"w-6 h-6 text-red-500\" />\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">KRA Not Found</h2>\r\n              <p className=\"text-gray-600 mt-1\">The requested KRA could not be found.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-8\">\r\n      <Button\r\n        variant=\"outline\"\r\n        onClick={() => router.back()}\r\n        className=\"mb-6\"\r\n      >\r\n        <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n        Back to Strategic Commitments\r\n      </Button>\r\n\r\n      {/* KRA Header */}\r\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6 sm:p-8 mb-8\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-start gap-4\">\r\n          <Badge className={`${kraColorClass} text-lg font-bold w-fit`}>\r\n            {kra.kra_id}\r\n          </Badge>\r\n          <div className=\"flex-1\">\r\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-3\">\r\n              {kra.kra_title}\r\n            </h1>\r\n            <div className=\"bg-gray-100 rounded p-4\">\r\n              <p className=\"text-gray-700 text-sm sm:text-base\">\r\n                <span className=\"font-semibold\">Guiding Principle: </span>\r\n                {kra.guiding_principle}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      {/* Year Tabs */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"flex items-center gap-2 overflow-x-auto pb-2 no-scrollbar\">\r\n          {availableYears.map(year => (\r\n            <button\r\n              key={year}\r\n              onClick={() => setSelectedProgressYear(year)}\r\n              className={cn(\r\n                \"px-6 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap\",\r\n                selectedProgressYear === year\r\n                  ? \"bg-blue-600 text-white shadow-md ring-2 ring-blue-600 ring-offset-2\"\r\n                  : \"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200 hover:border-gray-300\"\r\n              )}\r\n            >\r\n              {year}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPIs Section */}\r\n      <div className=\"space-y-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Key Performance Indicators (KPIs)</h2>\r\n\r\n        {kra.initiatives && kra.initiatives.length > 0 ? (\r\n          <div className=\"grid gap-6\">\r\n            {kra.initiatives.map((initiative: Initiative, index: number) => {\r\n              const initiativeProgress = kpiProgress?.initiatives?.find((i) => i.id === initiative.id);\r\n              \r\n              // Find timeline data for selected year\r\n              const timelineItem = initiative.targets?.timeline_data?.find(t => t.year === selectedProgressYear);\r\n              \r\n              // Calculate annual progress\r\n              const yearItems = initiativeProgress?.progress?.filter(p => p.year === selectedProgressYear) || [];\r\n              const yearTotal = yearItems.reduce((sum, item) => {\r\n                const val = typeof item.currentValue === 'number' ? item.currentValue : parseFloat(String(item.currentValue)) || 0;\r\n                return sum + val;\r\n              }, 0);\r\n              \r\n              const targetNum = timelineItem ? parseNumericValue(timelineItem.target_value) : 0;\r\n              const yearPct = targetNum > 0 ? Math.min(100, Math.round((yearTotal / targetNum) * 100)) : 0;\r\n\r\n              return (\r\n                <div key={index} className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-8\">\r\n                  {/* Header & Metadata */}\r\n                  <div className=\"p-6 border-b border-gray-100\">\r\n                    <div className=\"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6\">\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"text-xl font-bold text-gray-900\">{initiative.id}</h3>\r\n                        <div className=\"mt-3 space-y-2\">\r\n                          <div className=\"bg-blue-50/50 p-3 rounded-md border border-blue-100\">\r\n                            <p className=\"text-sm text-gray-800\">\r\n                              <span className=\"font-bold text-blue-800 uppercase text-xs tracking-wide block mb-1\">Output</span>\r\n                              {initiative.key_performance_indicator?.outputs}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"bg-green-50/50 p-3 rounded-md border border-green-100\">\r\n                            <p className=\"text-sm text-gray-800\">\r\n                              <span className=\"font-bold text-green-800 uppercase text-xs tracking-wide block mb-1\">Outcome</span>\r\n                              {initiative.key_performance_indicator?.outcomes}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 shrink-0\">\r\n                         {/* Refresh Button */}\r\n                         <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => setRefreshTrigger(prev => prev + 1)}\r\n                            disabled={loadingProgress}\r\n                            className=\"flex items-center gap-1 text-blue-600 border-blue-300 hover:bg-blue-50\"\r\n                          >\r\n                            <RefreshCw className={`h-3 w-3 ${loadingProgress ? 'animate-spin' : ''}`} />\r\n                            Refresh\r\n                          </Button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Context Cards */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                      {/* Strategies */}\r\n                      <div className=\"bg-gray-50 rounded-lg p-4 border-l-4 border-purple-500 h-full\">\r\n                        <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n                          <TrendingUp className=\"w-3 h-3\" /> Strategies\r\n                        </h4>\r\n                        <ul className=\"text-sm text-gray-700 space-y-2 pl-1\">\r\n                          {normalizeToArray(initiative.strategies).map((s, i) => (\r\n                            <li key={i} className=\"flex gap-2\">\r\n                              <span className=\"text-purple-400 mt-1\">•</span>\r\n                              <span>{s}</span>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                      \r\n                      {/* Activities */}\r\n                      <div className=\"bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500 h-full\">\r\n                        <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n                          <ListChecks className=\"w-3 h-3\" /> Activities\r\n                        </h4>\r\n                        <ul className=\"text-sm text-gray-700 space-y-2 pl-1\">\r\n                          {normalizeToArray(initiative.programs_activities).map((a, i) => (\r\n                            <li key={i} className=\"flex gap-2\">\r\n                              <span className=\"text-blue-400 mt-1\">•</span>\r\n                              <span>{a}</span>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n\r\n                      {/* Responsible Offices */}\r\n                      <div className=\"bg-gray-50 rounded-lg p-4 border-l-4 border-green-500 h-full\">\r\n                        <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n                          <Building2 className=\"w-3 h-3\" /> Responsible Offices\r\n                        </h4>\r\n                        <ul className=\"text-sm text-gray-700 space-y-2 pl-1\">\r\n                          {normalizeToArray(initiative.responsible_offices).map((o, i) => (\r\n                            <li key={i} className=\"flex gap-2\">\r\n                              <span className=\"text-green-400 mt-1\">•</span>\r\n                              <span>{o}</span>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Hero Summary */}\r\n                  {timelineItem ? (\r\n                    <div className=\"bg-blue-50/50 p-6 border-b border-gray-100\">\r\n                      <div className=\"flex flex-col md:flex-row items-center justify-between gap-8\">\r\n                        <div className=\"flex items-center gap-6\">\r\n                          {/* Progress Circle */}\r\n                          <div className=\"relative w-24 h-24 flex items-center justify-center\">\r\n                            <svg className=\"w-full h-full transform -rotate-90\">\r\n                              <circle\r\n                                cx=\"48\"\r\n                                cy=\"48\"\r\n                                r=\"40\"\r\n                                stroke=\"currentColor\"\r\n                                strokeWidth=\"8\"\r\n                                fill=\"transparent\"\r\n                                className=\"text-gray-200\"\r\n                              />\r\n                              <circle\r\n                                cx=\"48\"\r\n                                cy=\"48\"\r\n                                r=\"40\"\r\n                                stroke=\"currentColor\"\r\n                                strokeWidth=\"8\"\r\n                                fill=\"transparent\"\r\n                                strokeDasharray={251.2}\r\n                                strokeDashoffset={251.2 - (251.2 * yearPct) / 100}\r\n                                className={yearPct >= 100 ? \"text-green-500\" : \"text-blue-500\"}\r\n                              />\r\n                            </svg>\r\n                            <div className=\"absolute inset-0 flex items-center justify-center flex-col\">\r\n                              <span className=\"text-xl font-bold text-gray-900\">{yearPct}%</span>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <div>\r\n                            <h4 className=\"text-lg font-semibold text-gray-900\">{selectedProgressYear} Overview</h4>\r\n                            <div className=\"flex items-baseline gap-2 mt-1\">\r\n                              <span className=\"text-3xl font-bold text-gray-900\">{yearTotal}</span>\r\n                              <span className=\"text-gray-500\">/</span>\r\n                              \r\n                              {/* Editable Target */}\r\n                              {(() => {\r\n                                const quarter = 1; // Use Q1 for annual target editing context\r\n                                const targetKey = `${initiative.id}-${timelineItem.year}-${quarter}`;\r\n                                const isEditingThisTarget = editingTarget === targetKey;\r\n                                const isSavingThisTarget = savingTarget === targetKey;\r\n                                const currentTargetValue = getTargetValue(initiative.id, timelineItem.year, quarter, timelineItem.target_value);\r\n                                const canEditTarget = user && (user.role === 'ADMIN' || user.role === 'FACULTY');\r\n\r\n                                if (isEditingThisTarget) {\r\n                                  return (\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <input\r\n                                        type=\"number\"\r\n                                        className=\"w-24 px-2 py-1 border border-blue-500 rounded text-lg font-bold focus:outline-none\"\r\n                                        value={pendingTargetEdits[targetKey] ?? currentTargetValue}\r\n                                        onChange={(e) => updateTargetEdit(initiative.id, timelineItem.year, quarter, parseFloat(e.target.value) || 0)}\r\n                                        autoFocus\r\n                                      />\r\n                                      <Button size=\"sm\" onClick={() => saveTarget(initiative.id, timelineItem.year, quarter, typeof (pendingTargetEdits[targetKey] ?? currentTargetValue) === 'number' ? (pendingTargetEdits[targetKey] ?? currentTargetValue) : parseFloat(String(pendingTargetEdits[targetKey] ?? currentTargetValue)) || 0, mapTargetType(initiative.targets?.type || 'count'), initiative.key_performance_indicator?.outputs)} disabled={isSavingThisTarget}>Save</Button>\r\n                                      <Button size=\"sm\" variant=\"ghost\" onClick={cancelTargetEdit}>Cancel</Button>\r\n                                    </div>\r\n                                  );\r\n                                }\r\n\r\n                                return (\r\n                                  <div className=\"flex items-center gap-2 group\">\r\n                                    <span className=\"text-xl font-medium text-gray-600\">{typeof currentTargetValue === 'number' ? currentTargetValue.toLocaleString() : currentTargetValue}</span>\r\n                                    {canEditTarget && (\r\n                                      <button \r\n                                        onClick={() => setEditingTarget(targetKey)}\r\n                                        className=\"opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-800 transition-opacity\"\r\n                                      >\r\n                                        <FileText className=\"w-4 h-4\" />\r\n                                      </button>\r\n                                    )}\r\n                                  </div>\r\n                                );\r\n                              })()}\r\n                              \r\n                              <span className=\"text-sm text-gray-500 ml-1\">{initiative.targets.unit_basis}</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"p-6 text-center text-gray-500\">No target data for {selectedProgressYear}</div>\r\n                  )}\r\n\r\n                  {/* Quarter Input Cards */}\r\n                  {timelineItem && (\r\n                    <div className=\"p-6 bg-gray-50\">\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                        {[1, 2, 3, 4].map(quarter => {\r\n                          const quarterItem = yearItems.find(q => q.quarter === quarter);\r\n                          const displayValue = getDisplayValue(initiative.id, timelineItem.year, quarter);\r\n                          const valueSource = quarterItem?.valueSource || getValueSourceFromProgress(initiative.id, timelineItem.year, quarter);\r\n                          const isPending = hasPendingEdit(initiative.id, timelineItem.year, quarter);\r\n                          const cellKey = `${initiative.id}-${timelineItem.year}-${quarter}`;\r\n                          const isSaving = savingOverride === cellKey;\r\n                          \r\n                          const targetConfig = {\r\n                            type: initiative.targets.type,\r\n                            currency: initiative.targets.currency,\r\n                            low_count_threshold: initiative.targets.low_count_threshold,\r\n                          };\r\n                          const dynamicTargetType = mapTargetType(initiative.targets?.type || 'count');\r\n                          \r\n                          // Determine card state\r\n                          const hasValue = displayValue !== 0 && displayValue !== '0' && displayValue !== '';\r\n                          const isCompleted = hasValue && !isPending;\r\n                          const isActive = true; // Logic for active/locked could be added here based on dates\r\n\r\n                          return (\r\n                            <div \r\n                              key={quarter}\r\n                              className={cn(\r\n                                \"bg-white rounded-lg border p-4 transition-all\",\r\n                                isCompleted ? \"border-green-200 shadow-sm\" : \"border-gray-200 shadow-sm\",\r\n                                isActive ? \"hover:border-blue-300 hover:shadow-md\" : \"opacity-75 bg-gray-50\"\r\n                              )}\r\n                            >\r\n                              <div className=\"flex justify-between items-start mb-3\">\r\n                                <span className={cn(\r\n                                  \"text-xs font-bold px-2 py-1 rounded uppercase\",\r\n                                  isCompleted ? \"bg-green-100 text-green-700\" : \"bg-blue-100 text-blue-700\"\r\n                                )}>\r\n                                  Q{quarter}\r\n                                </span>\r\n                                {valueSource === 'qpro' && (\r\n                                  <span className=\"text-xs text-green-600 font-medium flex items-center gap-1\">\r\n                                    <CheckCircle2 className=\"w-3 h-3\" /> QPRO\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                              \r\n                              <div className=\"space-y-3\">\r\n                                <label className=\"text-xs font-medium text-gray-500 uppercase\">Actual Value</label>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <DynamicInput\r\n                                    targetType={dynamicTargetType}\r\n                                    value={displayValue ?? ''}\r\n                                    onChange={(val) => updatePendingEdit(initiative.id, timelineItem.year, quarter, val)}\r\n                                    placeholder=\"0\"\r\n                                    className=\"text-lg font-semibold h-10\"\r\n                                  />\r\n                                </div>\r\n                                \r\n                                {isPending && (\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    className=\"w-full mt-2\"\r\n                                    onClick={() => {\r\n                                       // Save logic (copied from original)\r\n                                       const editValue = pendingEdits[`${initiative.id}-${timelineItem.year}-${quarter}`]?.value;\r\n                                       let valueToSave: number | string | null = null;\r\n                                       if (dynamicTargetType === 'MILESTONE') {\r\n                                         valueToSave = editValue === 1 || editValue === '1' ? 1 : 0;\r\n                                       } else if (dynamicTargetType === 'TEXT_CONDITION') {\r\n                                         valueToSave = editValue ? String(editValue) : null;\r\n                                       } else {\r\n                                         const numValue = typeof editValue === 'string' ? parseFloat(editValue.replace(/,/g, '')) : editValue;\r\n                                         valueToSave = (typeof numValue === 'number' && !Number.isNaN(numValue)) ? numValue : null;\r\n                                       }\r\n                                       const qproVal = getCurrentValueFromProgress(initiative.id, timelineItem.year, quarter);\r\n                                       if (typeof valueToSave === 'number' && valueToSave === 0 && qproVal === 0) {\r\n                                         valueToSave = null;\r\n                                       }\r\n                                       saveManualOverride(initiative.id, timelineItem.year, quarter, valueToSave, undefined, dynamicTargetType);\r\n                                    }}\r\n                                    disabled={isSaving}\r\n                                  >\r\n                                    {isSaving ? 'Saving...' : 'Save Changes'}\r\n                                  </Button>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white rounded-lg border border-gray-300 p-8 text-center\">\r\n            <p className=\"text-gray-600\">No KPIs found for this KRA.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","/**\r\n * Utility functions for handling target types in KPI progress tracking\r\n */\r\n\r\nexport type TargetType = 'MILESTONE' | 'COUNT' | 'PERCENTAGE' | 'FINANCIAL' | 'TEXT_CONDITION';\r\n\r\n/**\r\n * Maps strategic plan target types to the database enum TargetType\r\n */\r\nexport function mapTargetType(planType: string | undefined): TargetType {\r\n  if (!planType) return 'COUNT'; // Default to count\r\n\r\n  const normalized = planType.toLowerCase().trim();\r\n\r\n  // Milestone/binary targets\r\n  if (normalized.includes('milestone') || normalized.includes('binary') || normalized === 'boolean') {\r\n    return 'MILESTONE';\r\n  }\r\n\r\n  // Percentage targets\r\n  if (normalized.includes('percentage') || normalized.includes('percent') || normalized.includes('rate')) {\r\n    return 'PERCENTAGE';\r\n  }\r\n\r\n  // Financial targets\r\n  if (normalized.includes('currency') || normalized.includes('financial') || normalized.includes('budget') || \r\n      normalized.includes('revenue') || normalized.includes('cost')) {\r\n    return 'FINANCIAL';\r\n  }\r\n\r\n  // Text/qualitative conditions\r\n  if (normalized.includes('text') || normalized.includes('condition') || normalized.includes('status') ||\r\n      normalized.includes('qualitative')) {\r\n    return 'TEXT_CONDITION';\r\n  }\r\n\r\n  // Count/numeric (default)\r\n  if (normalized.includes('count') || normalized.includes('numeric') || normalized.includes('number') ||\r\n      normalized.includes('quantity')) {\r\n    return 'COUNT';\r\n  }\r\n\r\n  // Default to count for any unrecognized type\r\n  return 'COUNT';\r\n}\r\n\r\n/**\r\n * Converts current_value string from database to appropriate type for display\r\n */\r\nexport function parseCurrentValue(\r\n  currentValue: string | null | undefined,\r\n  targetType: TargetType\r\n): number | string {\r\n  if (!currentValue && currentValue !== '0') {\r\n    // Return appropriate default based on type\r\n    if (targetType === 'MILESTONE') return 0;\r\n    if (targetType === 'TEXT_CONDITION') return '';\r\n    return 0;\r\n  }\r\n\r\n  switch (targetType) {\r\n    case 'MILESTONE':\r\n      // Parse as 0 or 1\r\n      return parseInt(currentValue) === 1 ? 1 : 0;\r\n\r\n    case 'COUNT':\r\n      // Parse as integer\r\n      return parseInt(currentValue) || 0;\r\n\r\n    case 'PERCENTAGE':\r\n    case 'FINANCIAL':\r\n      // Parse as decimal\r\n      return parseFloat(currentValue) || 0;\r\n\r\n    case 'TEXT_CONDITION':\r\n      // Return as string\r\n      return currentValue;\r\n\r\n    default:\r\n      return parseFloat(currentValue) || 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Formats current_value for storage in database (always stores as string)\r\n */\r\nexport function formatCurrentValueForDB(value: number | string | null | undefined): string | null {\r\n  if (value === null || value === undefined || value === '') return null;\r\n  return String(value);\r\n}\r\n\r\n/**\r\n * Calculates achievement based on target type\r\n */\r\nexport function calculateAchievement(\r\n  currentValue: number | string,\r\n  targetValue: number | string,\r\n  targetType: TargetType\r\n): number {\r\n  switch (targetType) {\r\n    case 'MILESTONE':\r\n      // Binary: 0% or 100%\r\n      return currentValue === 1 || currentValue === '1' ? 100 : 0;\r\n\r\n    case 'TEXT_CONDITION':\r\n      // Qualitative mapping\r\n      if (currentValue === 'Met') return 100;\r\n      if (currentValue === 'In Progress') return 50;\r\n      return 0; // Not Met\r\n\r\n    case 'COUNT':\r\n    case 'PERCENTAGE':\r\n    case 'FINANCIAL':\r\n      // Numeric calculation\r\n      const current = typeof currentValue === 'string' ? parseFloat(currentValue.replace(/,/g, '')) : currentValue;\r\n      const target = typeof targetValue === 'string' ? parseFloat(targetValue.replace(/,/g, '')) : targetValue;\r\n      \r\n      if (!target || target === 0) return 0;\r\n      return (current / target) * 100;\r\n\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Determines status based on achievement percentage and target type\r\n */\r\nexport function determineStatus(\r\n  achievementPercent: number,\r\n  targetType: TargetType,\r\n  currentValue?: number | string\r\n): 'MET' | 'ON_TRACK' | 'MISSED' | 'PENDING' {\r\n  // Special handling for text conditions\r\n  if (targetType === 'TEXT_CONDITION') {\r\n    if (currentValue === 'Met') return 'MET';\r\n    if (currentValue === 'In Progress') return 'ON_TRACK';\r\n    if (currentValue === 'Not Met') return 'MISSED';\r\n    return 'PENDING';\r\n  }\r\n\r\n  // Milestone: only MET or PENDING\r\n  if (targetType === 'MILESTONE') {\r\n    return achievementPercent === 100 ? 'MET' : 'PENDING';\r\n  }\r\n\r\n  // Numeric thresholds\r\n  if (achievementPercent >= 100) return 'MET';\r\n  if (achievementPercent >= 80) return 'ON_TRACK';\r\n  if (achievementPercent > 0) return 'MISSED';\r\n  return 'PENDING';\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ListChecks\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMyAxNyAyIDIgNC00IiAvPgogIDxwYXRoIGQ9Im0zIDcgMiAyIDQtNCIgLz4KICA8cGF0aCBkPSJNMTMgNmg4IiAvPgogIDxwYXRoIGQ9Ik0xMyAxMmg4IiAvPgogIDxwYXRoIGQ9Ik0xMyAxOGg4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/list-checks\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ListChecks = createLucideIcon('ListChecks', [\n  ['path', { d: 'm3 17 2 2 4-4', key: '1jhpwq' }],\n  ['path', { d: 'm3 7 2 2 4-4', key: '1obspn' }],\n  ['path', { d: 'M13 6h8', key: '15sg57' }],\n  ['path', { d: 'M13 12h8', key: 'h98zly' }],\n  ['path', { d: 'M13 18h8', key: 'oe0vm4' }],\n]);\n\nexport default ListChecks;\n","import * as React from 'react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { usePrevious } from '@radix-ui/react-use-previous';\nimport { useSize } from '@radix-ui/react-use-size';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Checkbox\n * -----------------------------------------------------------------------------------------------*/\n\nconst CHECKBOX_NAME = 'Checkbox';\n\ntype ScopedProps<P> = P & { __scopeCheckbox?: Scope };\nconst [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\n\ntype CheckedState = boolean | 'indeterminate';\n\ntype CheckboxContextValue = {\n  state: CheckedState;\n  disabled?: boolean;\n};\n\nconst [CheckboxProvider, useCheckboxContext] =\n  createCheckboxContext<CheckboxContextValue>(CHECKBOX_NAME);\n\ntype CheckboxElement = React.ElementRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface CheckboxProps extends Omit<PrimitiveButtonProps, 'checked' | 'defaultChecked'> {\n  checked?: CheckedState;\n  defaultChecked?: CheckedState;\n  required?: boolean;\n  onCheckedChange?(checked: CheckedState): void;\n}\n\nconst Checkbox = React.forwardRef<CheckboxElement, CheckboxProps>(\n  (props: ScopedProps<CheckboxProps>, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = 'on',\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    const [button, setButton] = React.useState<HTMLButtonElement | null>(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    const isFormControl = button ? form || !!button.closest('form') : true;\n    const [checked = false, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked,\n      onChange: onCheckedChange,\n    });\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = button?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener('reset', reset);\n        return () => form.removeEventListener('reset', reset);\n      }\n    }, [button, setChecked]);\n\n    return (\n      <CheckboxProvider scope={__scopeCheckbox} state={checked} disabled={disabled}>\n        <Primitive.button\n          type=\"button\"\n          role=\"checkbox\"\n          aria-checked={isIndeterminate(checked) ? 'mixed' : checked}\n          aria-required={required}\n          data-state={getState(checked)}\n          data-disabled={disabled ? '' : undefined}\n          disabled={disabled}\n          value={value}\n          {...checkboxProps}\n          ref={composedRefs}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            // According to WAI ARIA, Checkboxes don't activate on enter keypress\n            if (event.key === 'Enter') event.preventDefault();\n          })}\n          onClick={composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => (isIndeterminate(prevChecked) ? true : !prevChecked));\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              // if checkbox is in a form, stop propagation from the button so that we only propagate\n              // one click event (from the input). We propagate changes from an input so that native\n              // form validation works and form events reflect checkbox updates.\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })}\n        />\n        {isFormControl && (\n          <BubbleInput\n            control={button}\n            bubbles={!hasConsumerStoppedPropagationRef.current}\n            name={name}\n            value={value}\n            checked={checked}\n            required={required}\n            disabled={disabled}\n            form={form}\n            // We transform because the input is absolutely positioned but we have\n            // rendered it **after** the button. This pulls it back to sit on top\n            // of the button.\n            style={{ transform: 'translateX(-100%)' }}\n            defaultChecked={isIndeterminate(defaultChecked) ? false : defaultChecked}\n          />\n        )}\n      </CheckboxProvider>\n    );\n  }\n);\n\nCheckbox.displayName = CHECKBOX_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst INDICATOR_NAME = 'CheckboxIndicator';\n\ntype CheckboxIndicatorElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface CheckboxIndicatorProps extends PrimitiveSpanProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst CheckboxIndicator = React.forwardRef<CheckboxIndicatorElement, CheckboxIndicatorProps>(\n  (props: ScopedProps<CheckboxIndicatorProps>, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return (\n      <Presence present={forceMount || isIndeterminate(context.state) || context.state === true}>\n        <Primitive.span\n          data-state={getState(context.state)}\n          data-disabled={context.disabled ? '' : undefined}\n          {...indicatorProps}\n          ref={forwardedRef}\n          style={{ pointerEvents: 'none', ...props.style }}\n        />\n      </Presence>\n    );\n  }\n);\n\nCheckboxIndicator.displayName = INDICATOR_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype InputProps = React.ComponentPropsWithoutRef<'input'>;\ninterface BubbleInputProps extends Omit<InputProps, 'checked'> {\n  checked: CheckedState;\n  control: HTMLElement | null;\n  bubbles: boolean;\n}\n\nconst BubbleInput = (props: BubbleInputProps) => {\n  const { control, checked, bubbles = true, defaultChecked, ...inputProps } = props;\n  const ref = React.useRef<HTMLInputElement>(null);\n  const prevChecked = usePrevious(checked);\n  const controlSize = useSize(control);\n\n  // Bubble checked change to parents (e.g form change event)\n  React.useEffect(() => {\n    const input = ref.current!;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, 'checked') as PropertyDescriptor;\n    const setChecked = descriptor.set;\n\n    if (prevChecked !== checked && setChecked) {\n      const event = new Event('click', { bubbles });\n      input.indeterminate = isIndeterminate(checked);\n      setChecked.call(input, isIndeterminate(checked) ? false : checked);\n      input.dispatchEvent(event);\n    }\n  }, [prevChecked, checked, bubbles]);\n\n  const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n  return (\n    <input\n      type=\"checkbox\"\n      aria-hidden\n      defaultChecked={defaultChecked ?? defaultCheckedRef.current}\n      {...inputProps}\n      tabIndex={-1}\n      ref={ref}\n      style={{\n        ...props.style,\n        ...controlSize,\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n        margin: 0,\n      }}\n    />\n  );\n};\n\nfunction isIndeterminate(checked?: CheckedState): checked is 'indeterminate' {\n  return checked === 'indeterminate';\n}\n\nfunction getState(checked: CheckedState) {\n  return isIndeterminate(checked) ? 'indeterminate' : checked ? 'checked' : 'unchecked';\n}\n\nconst Root = Checkbox;\nconst Indicator = CheckboxIndicator;\n\nexport {\n  createCheckboxScope,\n  //\n  Checkbox,\n  CheckboxIndicator,\n  //\n  Root,\n  Indicator,\n};\nexport type { CheckboxProps, CheckboxIndicatorProps, CheckedState };\n","/**\r\n * Target Type Detection and Formatting Utilities\r\n * \r\n * Detects the display type for Strategic Plan targets based on:\r\n * - Explicit type field from strategic_plan.json\r\n * - Value format analysis (percentage, currency, count)\r\n * - Configurable thresholds for low_count vs high_volume\r\n */\r\n\r\nexport type TargetDisplayType = 'percentage' | 'currency' | 'high_volume' | 'low_count' | 'milestone';\r\n\r\nexport interface TargetConfig {\r\n  type?: string;\r\n  currency?: string;\r\n  low_count_threshold?: number;\r\n  unit_basis?: string;\r\n}\r\n\r\nexport interface DetectionResult {\r\n  displayType: TargetDisplayType;\r\n  formattedTarget: string;\r\n  formattedCurrent: string;\r\n  progressPercent: number;\r\n  isCurrency: boolean;\r\n  currencySymbol: string;\r\n}\r\n\r\n// Default threshold for distinguishing low_count from high_volume\r\nconst DEFAULT_LOW_COUNT_THRESHOLD = 10;\r\n\r\n/**\r\n * Detects the appropriate display type for a target value\r\n */\r\nexport function detectTargetType(\r\n  targetValue: string | number,\r\n  currentValue: string | number | undefined,\r\n  config: TargetConfig = {}\r\n): TargetDisplayType {\r\n  const { type, currency, low_count_threshold = DEFAULT_LOW_COUNT_THRESHOLD } = config;\r\n\r\n  // 1. Explicit percentage type\r\n  if (type === 'percentage') {\r\n    return 'percentage';\r\n  }\r\n\r\n  // 2. Financial/currency type\r\n  if (type === 'financial' || currency) {\r\n    return 'currency';\r\n  }\r\n\r\n  // 3. Milestone/qualitative type (text-based targets)\r\n  if (type === 'milestone' || type === 'text_condition') {\r\n    return 'milestone';\r\n  }\r\n\r\n  // 4. String values that aren't explicitly typed → milestone\r\n  if (typeof targetValue === 'string') {\r\n    // Check if it contains percentage symbol\r\n    if (targetValue.includes('%')) {\r\n      return 'percentage';\r\n    }\r\n    // Check for currency indicators\r\n    if (targetValue.includes('₱') || targetValue.toLowerCase().includes('php')) {\r\n      return 'currency';\r\n    }\r\n    // Check if it's a parseable number\r\n    const parsed = parseFloat(targetValue.replace(/,/g, ''));\r\n    if (isNaN(parsed)) {\r\n      return 'milestone';\r\n    }\r\n    // Use parsed number for threshold check\r\n    return parsed <= low_count_threshold ? 'low_count' : 'high_volume';\r\n  }\r\n\r\n  // 5. Numeric values - check threshold\r\n  if (typeof targetValue === 'number') {\r\n    return targetValue <= low_count_threshold ? 'low_count' : 'high_volume';\r\n  }\r\n\r\n  // Default fallback\r\n  return 'milestone';\r\n}\r\n\r\n/**\r\n * Normalizes currency symbols to ₱ (Philippine Peso sign)\r\n */\r\nexport function normalizeCurrency(value: string): string {\r\n  return value\r\n    .replace(/PHP\\s*/gi, '₱')\r\n    .replace(/Php\\s*/gi, '₱')\r\n    .replace(/php\\s*/gi, '₱');\r\n}\r\n\r\n/**\r\n * Formats a number as Philippine Peso currency\r\n * Uses compact notation for large values (e.g., ₱375k, ₱1.2M)\r\n */\r\nexport function formatCurrency(value: number): string {\r\n  if (value >= 1_000_000) {\r\n    return `₱${(value / 1_000_000).toFixed(1).replace(/\\.0$/, '')}M`;\r\n  }\r\n  if (value >= 1_000) {\r\n    return `₱${(value / 1_000).toFixed(0)}k`;\r\n  }\r\n  return `₱${value.toLocaleString()}`;\r\n}\r\n\r\n/**\r\n * Formats a number with compact notation (no currency)\r\n */\r\nexport function formatCompactNumber(value: number): string {\r\n  if (value >= 1_000_000) {\r\n    return `${(value / 1_000_000).toFixed(1).replace(/\\.0$/, '')}M`;\r\n  }\r\n  if (value >= 10_000) {\r\n    return `${(value / 1_000).toFixed(0)}k`;\r\n  }\r\n  return value.toLocaleString();\r\n}\r\n\r\n/**\r\n * Parses a value to extract numeric content\r\n */\r\nexport function parseNumericValue(value: string | number): number {\r\n  if (typeof value === 'number') {\r\n    return value;\r\n  }\r\n  // Remove currency symbols, commas, and whitespace\r\n  const cleaned = value.replace(/[₱$,\\s]/g, '').replace(/PHP/gi, '').trim();\r\n  const parsed = parseFloat(cleaned);\r\n  return isNaN(parsed) ? 0 : parsed;\r\n}\r\n\r\n/**\r\n * Calculates progress percentage from current and target values\r\n */\r\nexport function calculateProgress(\r\n  currentValue: string | number | undefined,\r\n  targetValue: string | number,\r\n  displayType: TargetDisplayType\r\n): number {\r\n  // Milestones use exact match logic\r\n  if (displayType === 'milestone') {\r\n    if (!currentValue) return 0;\r\n    return String(currentValue).toLowerCase() === String(targetValue).toLowerCase() ? 100 : 50;\r\n  }\r\n\r\n  const current = parseNumericValue(currentValue ?? 0);\r\n  const target = parseNumericValue(targetValue);\r\n\r\n  if (target === 0) return 0;\r\n\r\n  // For percentage type, current value IS the percentage\r\n  if (displayType === 'percentage') {\r\n    return Math.min(100, Math.max(0, current));\r\n  }\r\n\r\n  // For other numeric types, calculate ratio\r\n  const ratio = (current / target) * 100;\r\n  return Math.min(100, Math.max(0, ratio));\r\n}\r\n\r\n/**\r\n * Determines milestone status based on current vs target value\r\n */\r\nexport function getMilestoneStatus(\r\n  currentValue: string | number | undefined,\r\n  targetValue: string | number\r\n): 'completed' | 'in_progress' | 'pending' {\r\n  if (!currentValue || currentValue === '') {\r\n    return 'pending';\r\n  }\r\n  \r\n  const currentStr = String(currentValue).toLowerCase().trim();\r\n  const targetStr = String(targetValue).toLowerCase().trim();\r\n  \r\n  if (currentStr === targetStr) {\r\n    return 'completed';\r\n  }\r\n  \r\n  return 'in_progress';\r\n}\r\n\r\n/**\r\n * Full detection and formatting result\r\n */\r\nexport function getTargetDisplayInfo(\r\n  targetValue: string | number,\r\n  currentValue: string | number | undefined,\r\n  config: TargetConfig = {}\r\n): DetectionResult {\r\n  const displayType = detectTargetType(targetValue, currentValue, config);\r\n  const isCurrency = displayType === 'currency';\r\n  const currencySymbol = isCurrency ? '₱' : '';\r\n\r\n  let formattedTarget: string;\r\n  let formattedCurrent: string;\r\n\r\n  switch (displayType) {\r\n    case 'percentage':\r\n      formattedTarget = `${parseNumericValue(targetValue)}%`;\r\n      formattedCurrent = currentValue !== undefined ? `${parseNumericValue(currentValue)}%` : '0%';\r\n      break;\r\n\r\n    case 'currency':\r\n      formattedTarget = formatCurrency(parseNumericValue(targetValue));\r\n      formattedCurrent = currentValue !== undefined \r\n        ? formatCurrency(parseNumericValue(currentValue)) \r\n        : '₱0';\r\n      break;\r\n\r\n    case 'high_volume':\r\n      formattedTarget = formatCompactNumber(parseNumericValue(targetValue));\r\n      formattedCurrent = currentValue !== undefined \r\n        ? formatCompactNumber(parseNumericValue(currentValue)) \r\n        : '0';\r\n      break;\r\n\r\n    case 'low_count':\r\n      formattedTarget = String(parseNumericValue(targetValue));\r\n      formattedCurrent = currentValue !== undefined \r\n        ? String(parseNumericValue(currentValue)) \r\n        : '0';\r\n      break;\r\n\r\n    case 'milestone':\r\n    default:\r\n      formattedTarget = String(targetValue);\r\n      formattedCurrent = currentValue !== undefined ? String(currentValue) : '';\r\n      break;\r\n  }\r\n\r\n  const progressPercent = calculateProgress(currentValue, targetValue, displayType);\r\n\r\n  return {\r\n    displayType,\r\n    formattedTarget,\r\n    formattedCurrent,\r\n    progressPercent,\r\n    isCurrency,\r\n    currencySymbol,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0,4,6,7]}